(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function Bu(n,t){const e=Object.create(null),s=n.split(",");for(let r=0;r<s.length;r++)e[s[r]]=!0;return t?r=>!!e[r.toLowerCase()]:r=>!!e[r]}const R_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",L_=Bu(R_);function Xf(n){return!!n||n===""}function _o(n){if(Et(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],r=ke(s)?D_(s):_o(s);if(r)for(const a in r)t[a]=r[a]}return t}else{if(ke(n))return n;if(Pe(n))return n}}const k_=/;(?![^(]*\))/g,M_=/:(.+)/;function D_(n){const t={};return n.split(k_).forEach(e=>{if(e){const s=e.split(M_);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function xi(n){let t="";if(ke(n))t=n;else if(Et(n))for(let e=0;e<n.length;e++){const s=xi(n[e]);s&&(t+=s+" ")}else if(Pe(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}function O_(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=cl(n[s],t[s]);return e}function cl(n,t){if(n===t)return!0;let e=ph(n),s=ph(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=Et(n),s=Et(t),e||s)return e&&s?O_(n,t):!1;if(e=Pe(n),s=Pe(t),e||s){if(!e||!s)return!1;const r=Object.keys(n).length,a=Object.keys(t).length;if(r!==a)return!1;for(const c in n){const h=n.hasOwnProperty(c),p=t.hasOwnProperty(c);if(h&&!p||!h&&p||!cl(n[c],t[c]))return!1}}return String(n)===String(t)}function V_(n,t){return n.findIndex(e=>cl(e,t))}const Nt=n=>n==null?"":Et(n)||Pe(n)&&(n.toString===td||!kt(n.toString))?JSON.stringify(n,Yf,2):String(n),Yf=(n,t)=>t&&t.__v_isRef?Yf(n,t.value):Js(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,r])=>(e[`${s} =>`]=r,e),{})}:fl(t)?{[`Set(${t.size})`]:[...t.values()]}:Pe(t)&&!Et(t)&&!ed(t)?String(t):t,se={},Ys=[],zn=()=>{},N_=()=>!1,B_=/^on[^a-z]/,hl=n=>B_.test(n),Fu=n=>n.startsWith("onUpdate:"),ln=Object.assign,Uu=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},F_=Object.prototype.hasOwnProperty,Ht=(n,t)=>F_.call(n,t),Et=Array.isArray,Js=n=>dl(n)==="[object Map]",fl=n=>dl(n)==="[object Set]",ph=n=>n instanceof Date,kt=n=>typeof n=="function",ke=n=>typeof n=="string",zu=n=>typeof n=="symbol",Pe=n=>n!==null&&typeof n=="object",Jf=n=>Pe(n)&&kt(n.then)&&kt(n.catch),td=Object.prototype.toString,dl=n=>td.call(n),U_=n=>dl(n).slice(8,-1),ed=n=>dl(n)==="[object Object]",$u=n=>ke(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Aa=Bu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pl=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},z_=/-(\w)/g,rr=pl(n=>n.replace(z_,(t,e)=>e?e.toUpperCase():"")),$_=/\B([A-Z])/g,mr=pl(n=>n.replace($_,"-$1").toLowerCase()),nd=pl(n=>n.charAt(0).toUpperCase()+n.slice(1)),ql=pl(n=>n?`on${nd(n)}`:""),go=(n,t)=>!Object.is(n,t),Ca=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},Va=(n,t,e)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:e})},Na=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let mh;const j_=()=>mh||(mh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let is;const da=[];class q_{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&is&&(this.parent=is,this.index=(is.scopes||(is.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(da.push(this),is=this)}off(){this.active&&(da.pop(),is=da[da.length-1])}stop(t){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function H_(n,t){t=t||is,t&&t.active&&t.effects.push(n)}const ju=n=>{const t=new Set(n);return t.w=0,t.n=0,t},id=n=>(n.w&Oi)>0,sd=n=>(n.n&Oi)>0,Z_=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=Oi},W_=n=>{const{deps:t}=n;if(t.length){let e=0;for(let s=0;s<t.length;s++){const r=t[s];id(r)&&!sd(r)?r.delete(n):t[e++]=r,r.w&=~Oi,r.n&=~Oi}t.length=e}},eu=new WeakMap;let eo=0,Oi=1;const nu=30,Yr=[];let cs;const hs=Symbol(""),iu=Symbol("");class qu{constructor(t,e=null,s){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],H_(this,s)}run(){if(!this.active)return this.fn();if(!Yr.includes(this))try{return Yr.push(cs=this),K_(),Oi=1<<++eo,eo<=nu?Z_(this):_h(this),this.fn()}finally{eo<=nu&&W_(this),Oi=1<<--eo,_s(),Yr.pop();const t=Yr.length;cs=t>0?Yr[t-1]:void 0}}stop(){this.active&&(_h(this),this.onStop&&this.onStop(),this.active=!1)}}function _h(n){const{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}let or=!0;const Hu=[];function _r(){Hu.push(or),or=!1}function K_(){Hu.push(or),or=!0}function _s(){const n=Hu.pop();or=n===void 0?!0:n}function un(n,t,e){if(!rd())return;let s=eu.get(n);s||eu.set(n,s=new Map);let r=s.get(e);r||s.set(e,r=ju()),od(r)}function rd(){return or&&cs!==void 0}function od(n,t){let e=!1;eo<=nu?sd(n)||(n.n|=Oi,e=!id(n)):e=!n.has(cs),e&&(n.add(cs),cs.deps.push(n))}function ci(n,t,e,s,r,a){const c=eu.get(n);if(!c)return;let h=[];if(t==="clear")h=[...c.values()];else if(e==="length"&&Et(n))c.forEach((p,g)=>{(g==="length"||g>=s)&&h.push(p)});else switch(e!==void 0&&h.push(c.get(e)),t){case"add":Et(n)?$u(e)&&h.push(c.get("length")):(h.push(c.get(hs)),Js(n)&&h.push(c.get(iu)));break;case"delete":Et(n)||(h.push(c.get(hs)),Js(n)&&h.push(c.get(iu)));break;case"set":Js(n)&&h.push(c.get(hs));break}if(h.length===1)h[0]&&su(h[0]);else{const p=[];for(const g of h)g&&p.push(...g);su(ju(p))}}function su(n,t){for(const e of Et(n)?n:[...n])(e!==cs||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const G_=Bu("__proto__,__v_isRef,__isVue"),ad=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(zu)),Q_=Zu(),X_=Zu(!1,!0),Y_=Zu(!0),gh=J_();function J_(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const s=Qt(this);for(let a=0,c=this.length;a<c;a++)un(s,"get",a+"");const r=s[t](...e);return r===-1||r===!1?s[t](...e.map(Qt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){_r();const s=Qt(this)[t].apply(this,e);return _s(),s}}),n}function Zu(n=!1,t=!1){return function(s,r,a){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_raw"&&a===(n?t?mg:fd:t?hd:cd).get(s))return s;const c=Et(s);if(!n&&c&&Ht(gh,r))return Reflect.get(gh,r,a);const h=Reflect.get(s,r,a);return(zu(r)?ad.has(r):G_(r))||(n||un(s,"get",r),t)?h:Ke(h)?!c||!$u(r)?h.value:h:Pe(h)?n?dd(h):_l(h):h}}const tg=ld(),eg=ld(!0);function ld(n=!1){return function(e,s,r,a){let c=e[s];if(!n&&!Qu(r)&&(r=Qt(r),c=Qt(c),!Et(e)&&Ke(c)&&!Ke(r)))return c.value=r,!0;const h=Et(e)&&$u(s)?Number(s)<e.length:Ht(e,s),p=Reflect.set(e,s,r,a);return e===Qt(a)&&(h?go(r,c)&&ci(e,"set",s,r):ci(e,"add",s,r)),p}}function ng(n,t){const e=Ht(n,t);n[t];const s=Reflect.deleteProperty(n,t);return s&&e&&ci(n,"delete",t,void 0),s}function ig(n,t){const e=Reflect.has(n,t);return(!zu(t)||!ad.has(t))&&un(n,"has",t),e}function sg(n){return un(n,"iterate",Et(n)?"length":hs),Reflect.ownKeys(n)}const ud={get:Q_,set:tg,deleteProperty:ng,has:ig,ownKeys:sg},rg={get:Y_,set(n,t){return!0},deleteProperty(n,t){return!0}},og=ln({},ud,{get:X_,set:eg}),Wu=n=>n,ml=n=>Reflect.getPrototypeOf(n);function pa(n,t,e=!1,s=!1){n=n.__v_raw;const r=Qt(n),a=Qt(t);t!==a&&!e&&un(r,"get",t),!e&&un(r,"get",a);const{has:c}=ml(r),h=s?Wu:e?Xu:yo;if(c.call(r,t))return h(n.get(t));if(c.call(r,a))return h(n.get(a));n!==r&&n.get(t)}function ma(n,t=!1){const e=this.__v_raw,s=Qt(e),r=Qt(n);return n!==r&&!t&&un(s,"has",n),!t&&un(s,"has",r),n===r?e.has(n):e.has(n)||e.has(r)}function _a(n,t=!1){return n=n.__v_raw,!t&&un(Qt(n),"iterate",hs),Reflect.get(n,"size",n)}function yh(n){n=Qt(n);const t=Qt(this);return ml(t).has.call(t,n)||(t.add(n),ci(t,"add",n,n)),this}function vh(n,t){t=Qt(t);const e=Qt(this),{has:s,get:r}=ml(e);let a=s.call(e,n);a||(n=Qt(n),a=s.call(e,n));const c=r.call(e,n);return e.set(n,t),a?go(t,c)&&ci(e,"set",n,t):ci(e,"add",n,t),this}function wh(n){const t=Qt(this),{has:e,get:s}=ml(t);let r=e.call(t,n);r||(n=Qt(n),r=e.call(t,n)),s&&s.call(t,n);const a=t.delete(n);return r&&ci(t,"delete",n,void 0),a}function Th(){const n=Qt(this),t=n.size!==0,e=n.clear();return t&&ci(n,"clear",void 0,void 0),e}function ga(n,t){return function(s,r){const a=this,c=a.__v_raw,h=Qt(c),p=t?Wu:n?Xu:yo;return!n&&un(h,"iterate",hs),c.forEach((g,v)=>s.call(r,p(g),p(v),a))}}function ya(n,t,e){return function(...s){const r=this.__v_raw,a=Qt(r),c=Js(a),h=n==="entries"||n===Symbol.iterator&&c,p=n==="keys"&&c,g=r[n](...s),v=e?Wu:t?Xu:yo;return!t&&un(a,"iterate",p?iu:hs),{next(){const{value:T,done:S}=g.next();return S?{value:T,done:S}:{value:h?[v(T[0]),v(T[1])]:v(T),done:S}},[Symbol.iterator](){return this}}}}function Ii(n){return function(...t){return n==="delete"?!1:this}}function ag(){const n={get(a){return pa(this,a)},get size(){return _a(this)},has:ma,add:yh,set:vh,delete:wh,clear:Th,forEach:ga(!1,!1)},t={get(a){return pa(this,a,!1,!0)},get size(){return _a(this)},has:ma,add:yh,set:vh,delete:wh,clear:Th,forEach:ga(!1,!0)},e={get(a){return pa(this,a,!0)},get size(){return _a(this,!0)},has(a){return ma.call(this,a,!0)},add:Ii("add"),set:Ii("set"),delete:Ii("delete"),clear:Ii("clear"),forEach:ga(!0,!1)},s={get(a){return pa(this,a,!0,!0)},get size(){return _a(this,!0)},has(a){return ma.call(this,a,!0)},add:Ii("add"),set:Ii("set"),delete:Ii("delete"),clear:Ii("clear"),forEach:ga(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=ya(a,!1,!1),e[a]=ya(a,!0,!1),t[a]=ya(a,!1,!0),s[a]=ya(a,!0,!0)}),[n,e,t,s]}const[lg,ug,cg,hg]=ag();function Ku(n,t){const e=t?n?hg:cg:n?ug:lg;return(s,r,a)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(Ht(e,r)&&r in s?e:s,r,a)}const fg={get:Ku(!1,!1)},dg={get:Ku(!1,!0)},pg={get:Ku(!0,!1)},cd=new WeakMap,hd=new WeakMap,fd=new WeakMap,mg=new WeakMap;function _g(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gg(n){return n.__v_skip||!Object.isExtensible(n)?0:_g(U_(n))}function _l(n){return n&&n.__v_isReadonly?n:Gu(n,!1,ud,fg,cd)}function yg(n){return Gu(n,!1,og,dg,hd)}function dd(n){return Gu(n,!0,rg,pg,fd)}function Gu(n,t,e,s,r){if(!Pe(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const a=r.get(n);if(a)return a;const c=gg(n);if(c===0)return n;const h=new Proxy(n,c===2?s:e);return r.set(n,h),h}function tr(n){return Qu(n)?tr(n.__v_raw):!!(n&&n.__v_isReactive)}function Qu(n){return!!(n&&n.__v_isReadonly)}function pd(n){return tr(n)||Qu(n)}function Qt(n){const t=n&&n.__v_raw;return t?Qt(t):n}function md(n){return Va(n,"__v_skip",!0),n}const yo=n=>Pe(n)?_l(n):n,Xu=n=>Pe(n)?dd(n):n;function _d(n){rd()&&(n=Qt(n),n.dep||(n.dep=ju()),od(n.dep))}function gd(n,t){n=Qt(n),n.dep&&su(n.dep)}function Ke(n){return!!(n&&n.__v_isRef===!0)}function oe(n){return vg(n,!1)}function vg(n,t){return Ke(n)?n:new wg(n,t)}class wg{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Qt(t),this._value=e?t:yo(t)}get value(){return _d(this),this._value}set value(t){t=this._shallow?t:Qt(t),go(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:yo(t),gd(this))}}function le(n){return Ke(n)?n.value:n}const Tg={get:(n,t,e)=>le(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const r=n[t];return Ke(r)&&!Ke(e)?(r.value=e,!0):Reflect.set(n,t,e,s)}};function yd(n){return tr(n)?n:new Proxy(n,Tg)}class Eg{constructor(t,e,s){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new qu(t,()=>{this._dirty||(this._dirty=!0,gd(this))}),this.__v_isReadonly=s}get value(){const t=Qt(this);return _d(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function vd(n,t){let e,s;const r=kt(n);return r?(e=n,s=zn):(e=n.get,s=n.set),new Eg(e,s,r||!s)}Promise.resolve();function bg(n,t,...e){const s=n.vnode.props||se;let r=e;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const v=`${c==="modelValue"?"model":c}Modifiers`,{number:T,trim:S}=s[v]||se;S?r=e.map(N=>N.trim()):T&&(r=e.map(Na))}let h,p=s[h=ql(t)]||s[h=ql(rr(t))];!p&&a&&(p=s[h=ql(mr(t))]),p&&Rn(p,n,6,r);const g=s[h+"Once"];if(g){if(!n.emitted)n.emitted={};else if(n.emitted[h])return;n.emitted[h]=!0,Rn(g,n,6,r)}}function wd(n,t,e=!1){const s=t.emitsCache,r=s.get(n);if(r!==void 0)return r;const a=n.emits;let c={},h=!1;if(!kt(n)){const p=g=>{const v=wd(g,t,!0);v&&(h=!0,ln(c,v))};!e&&t.mixins.length&&t.mixins.forEach(p),n.extends&&p(n.extends),n.mixins&&n.mixins.forEach(p)}return!a&&!h?(s.set(n,null),null):(Et(a)?a.forEach(p=>c[p]=null):ln(c,a),s.set(n,c),c)}function Yu(n,t){return!n||!hl(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ht(n,t[0].toLowerCase()+t.slice(1))||Ht(n,mr(t))||Ht(n,t))}let xn=null,gl=null;function Ba(n){const t=xn;return xn=n,gl=n&&n.type.__scopeId||null,t}function Td(n){gl=n}function Ed(){gl=null}function Ju(n,t=xn,e){if(!t||n._n)return n;const s=(...r)=>{s._d&&Lh(-1);const a=Ba(t),c=n(...r);return Ba(a),s._d&&Lh(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function Eh(n){const{type:t,vnode:e,proxy:s,withProxy:r,props:a,propsOptions:[c],slots:h,attrs:p,emit:g,render:v,renderCache:T,data:S,setupState:N,ctx:z,inheritAttrs:q}=n;let $,it;const ft=Ba(n);try{if(e.shapeFlag&4){const ht=r||s;$=Un(v.call(ht,ht,T,a,N,S,z)),it=p}else{const ht=t;$=Un(ht.length>1?ht(a,{attrs:p,slots:h,emit:g}):ht(a,null)),it=t.props?p:Ig(p)}}catch(ht){lo.length=0,wl(ht,n,1),$=we(Vi)}let ot=$;if(it&&q!==!1){const ht=Object.keys(it),{shapeFlag:Ct}=ot;ht.length&&Ct&7&&(c&&ht.some(Fu)&&(it=Pg(it,c)),ot=wo(ot,it))}return e.dirs&&(ot.dirs=ot.dirs?ot.dirs.concat(e.dirs):e.dirs),e.transition&&(ot.transition=e.transition),$=ot,Ba(ft),$}const Ig=n=>{let t;for(const e in n)(e==="class"||e==="style"||hl(e))&&((t||(t={}))[e]=n[e]);return t},Pg=(n,t)=>{const e={};for(const s in n)(!Fu(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function Ag(n,t,e){const{props:s,children:r,component:a}=n,{props:c,children:h,patchFlag:p}=t,g=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&p>=0){if(p&1024)return!0;if(p&16)return s?bh(s,c,g):!!c;if(p&8){const v=t.dynamicProps;for(let T=0;T<v.length;T++){const S=v[T];if(c[S]!==s[S]&&!Yu(g,S))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:s===c?!1:s?c?bh(s,c,g):!0:!!c;return!1}function bh(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const a=s[r];if(t[a]!==n[a]&&!Yu(e,a))return!0}return!1}function Cg({vnode:n,parent:t},e){for(;t&&t.subTree===n;)(n=t.vnode).el=e,t=t.parent}const xg=n=>n.__isSuspense;function Sg(n,t){t&&t.pendingBranch?Et(n)?t.effects.push(...n):t.effects.push(n):Ay(n)}function Rg(n,t){if(je){let e=je.provides;const s=je.parent&&je.parent.provides;s===e&&(e=je.provides=Object.create(s)),e[n]=t}}function er(n,t,e=!1){const s=je||xn;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return e&&kt(t)?t.call(s.proxy):t}}const ru=n=>!!n.type.__asyncLoader,bd=n=>n.type.__isKeepAlive;function Lg(n,t){Id(n,"a",t)}function kg(n,t){Id(n,"da",t)}function Id(n,t,e=je){const s=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(yl(t,s,e),e){let r=e.parent;for(;r&&r.parent;)bd(r.parent.vnode)&&Mg(s,t,e,r),r=r.parent}}function Mg(n,t,e,s){const r=yl(t,n,s,!0);Pd(()=>{Uu(s[t],r)},e)}function yl(n,t,e=je,s=!1){if(e){const r=e[n]||(e[n]=[]),a=t.__weh||(t.__weh=(...c)=>{if(e.isUnmounted)return;_r(),ar(e);const h=Rn(t,e,n,c);return ds(),_s(),h});return s?r.unshift(a):r.push(a),a}}const pi=n=>(t,e=je)=>(!$a||n==="sp")&&yl(n,t,e),Dg=pi("bm"),vo=pi("m"),Og=pi("bu"),Vg=pi("u"),Ng=pi("bum"),Pd=pi("um"),Bg=pi("sp"),Fg=pi("rtg"),Ug=pi("rtc");function zg(n,t=je){yl("ec",n,t)}let ou=!0;function $g(n){const t=Cd(n),e=n.proxy,s=n.ctx;ou=!1,t.beforeCreate&&Ih(t.beforeCreate,n,"bc");const{data:r,computed:a,methods:c,watch:h,provide:p,inject:g,created:v,beforeMount:T,mounted:S,beforeUpdate:N,updated:z,activated:q,deactivated:$,beforeDestroy:it,beforeUnmount:ft,destroyed:ot,unmounted:ht,render:Ct,renderTracked:Ft,renderTriggered:R,errorCaptured:E,serverPrefetch:b,expose:x,inheritAttrs:C,components:M,directives:A,filters:_e}=t;if(g&&jg(g,s,null,n.appContext.config.unwrapInjectedRef),c)for(const Ut in c){const nt=c[Ut];kt(nt)&&(s[Ut]=nt.bind(e))}if(r){const Ut=r.call(e,e);Pe(Ut)&&(n.data=_l(Ut))}if(ou=!0,a)for(const Ut in a){const nt=a[Ut],Fe=kt(nt)?nt.bind(e,e):kt(nt.get)?nt.get.bind(e,e):zn,_t=!kt(nt)&&kt(nt.set)?nt.set.bind(e):zn,Wt=vd({get:Fe,set:_t});Object.defineProperty(s,Ut,{enumerable:!0,configurable:!0,get:()=>Wt.value,set:Gt=>Wt.value=Gt})}if(h)for(const Ut in h)Ad(h[Ut],s,e,Ut);if(p){const Ut=kt(p)?p.call(e):p;Reflect.ownKeys(Ut).forEach(nt=>{Rg(nt,Ut[nt])})}v&&Ih(v,n,"c");function Kt(Ut,nt){Et(nt)?nt.forEach(Fe=>Ut(Fe.bind(e))):nt&&Ut(nt.bind(e))}if(Kt(Dg,T),Kt(vo,S),Kt(Og,N),Kt(Vg,z),Kt(Lg,q),Kt(kg,$),Kt(zg,E),Kt(Ug,Ft),Kt(Fg,R),Kt(Ng,ft),Kt(Pd,ht),Kt(Bg,b),Et(x))if(x.length){const Ut=n.exposed||(n.exposed={});x.forEach(nt=>{Object.defineProperty(Ut,nt,{get:()=>e[nt],set:Fe=>e[nt]=Fe})})}else n.exposed||(n.exposed={});Ct&&n.render===zn&&(n.render=Ct),C!=null&&(n.inheritAttrs=C),M&&(n.components=M),A&&(n.directives=A)}function jg(n,t,e=zn,s=!1){Et(n)&&(n=au(n));for(const r in n){const a=n[r];let c;Pe(a)?"default"in a?c=er(a.from||r,a.default,!0):c=er(a.from||r):c=er(a),Ke(c)&&s?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:h=>c.value=h}):t[r]=c}}function Ih(n,t,e){Rn(Et(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function Ad(n,t,e,s){const r=s.includes(".")?Qd(e,s):()=>e[s];if(ke(n)){const a=t[n];kt(a)&&nr(r,a)}else if(kt(n))nr(r,n.bind(e));else if(Pe(n))if(Et(n))n.forEach(a=>Ad(a,t,e,s));else{const a=kt(n.handler)?n.handler.bind(e):t[n.handler];kt(a)&&nr(r,a,n)}}function Cd(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:c}}=n.appContext,h=a.get(t);let p;return h?p=h:!r.length&&!e&&!s?p=t:(p={},r.length&&r.forEach(g=>Fa(p,g,c,!0)),Fa(p,t,c)),a.set(t,p),p}function Fa(n,t,e,s=!1){const{mixins:r,extends:a}=t;a&&Fa(n,a,e,!0),r&&r.forEach(c=>Fa(n,c,e,!0));for(const c in t)if(!(s&&c==="expose")){const h=qg[c]||e&&e[c];n[c]=h?h(n[c],t[c]):t[c]}return n}const qg={data:Ph,props:ss,emits:ss,methods:ss,computed:ss,beforeCreate:We,created:We,beforeMount:We,mounted:We,beforeUpdate:We,updated:We,beforeDestroy:We,beforeUnmount:We,destroyed:We,unmounted:We,activated:We,deactivated:We,errorCaptured:We,serverPrefetch:We,components:ss,directives:ss,watch:Zg,provide:Ph,inject:Hg};function Ph(n,t){return t?n?function(){return ln(kt(n)?n.call(this,this):n,kt(t)?t.call(this,this):t)}:t:n}function Hg(n,t){return ss(au(n),au(t))}function au(n){if(Et(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function We(n,t){return n?[...new Set([].concat(n,t))]:t}function ss(n,t){return n?ln(ln(Object.create(null),n),t):t}function Zg(n,t){if(!n)return t;if(!t)return n;const e=ln(Object.create(null),n);for(const s in t)e[s]=We(n[s],t[s]);return e}function Wg(n,t,e,s=!1){const r={},a={};Va(a,vl,1),n.propsDefaults=Object.create(null),xd(n,t,r,a);for(const c in n.propsOptions[0])c in r||(r[c]=void 0);e?n.props=s?r:yg(r):n.type.props?n.props=r:n.props=a,n.attrs=a}function Kg(n,t,e,s){const{props:r,attrs:a,vnode:{patchFlag:c}}=n,h=Qt(r),[p]=n.propsOptions;let g=!1;if((s||c>0)&&!(c&16)){if(c&8){const v=n.vnode.dynamicProps;for(let T=0;T<v.length;T++){let S=v[T];const N=t[S];if(p)if(Ht(a,S))N!==a[S]&&(a[S]=N,g=!0);else{const z=rr(S);r[z]=lu(p,h,z,N,n,!1)}else N!==a[S]&&(a[S]=N,g=!0)}}}else{xd(n,t,r,a)&&(g=!0);let v;for(const T in h)(!t||!Ht(t,T)&&((v=mr(T))===T||!Ht(t,v)))&&(p?e&&(e[T]!==void 0||e[v]!==void 0)&&(r[T]=lu(p,h,T,void 0,n,!0)):delete r[T]);if(a!==h)for(const T in a)(!t||!Ht(t,T))&&(delete a[T],g=!0)}g&&ci(n,"set","$attrs")}function xd(n,t,e,s){const[r,a]=n.propsOptions;let c=!1,h;if(t)for(let p in t){if(Aa(p))continue;const g=t[p];let v;r&&Ht(r,v=rr(p))?!a||!a.includes(v)?e[v]=g:(h||(h={}))[v]=g:Yu(n.emitsOptions,p)||(!(p in s)||g!==s[p])&&(s[p]=g,c=!0)}if(a){const p=Qt(e),g=h||se;for(let v=0;v<a.length;v++){const T=a[v];e[T]=lu(r,p,T,g[T],n,!Ht(g,T))}}return c}function lu(n,t,e,s,r,a){const c=n[e];if(c!=null){const h=Ht(c,"default");if(h&&s===void 0){const p=c.default;if(c.type!==Function&&kt(p)){const{propsDefaults:g}=r;e in g?s=g[e]:(ar(r),s=g[e]=p.call(null,t),ds())}else s=p}c[0]&&(a&&!h?s=!1:c[1]&&(s===""||s===mr(e))&&(s=!0))}return s}function Sd(n,t,e=!1){const s=t.propsCache,r=s.get(n);if(r)return r;const a=n.props,c={},h=[];let p=!1;if(!kt(n)){const v=T=>{p=!0;const[S,N]=Sd(T,t,!0);ln(c,S),N&&h.push(...N)};!e&&t.mixins.length&&t.mixins.forEach(v),n.extends&&v(n.extends),n.mixins&&n.mixins.forEach(v)}if(!a&&!p)return s.set(n,Ys),Ys;if(Et(a))for(let v=0;v<a.length;v++){const T=rr(a[v]);Ah(T)&&(c[T]=se)}else if(a)for(const v in a){const T=rr(v);if(Ah(T)){const S=a[v],N=c[T]=Et(S)||kt(S)?{type:S}:S;if(N){const z=Sh(Boolean,N.type),q=Sh(String,N.type);N[0]=z>-1,N[1]=q<0||z<q,(z>-1||Ht(N,"default"))&&h.push(T)}}}const g=[c,h];return s.set(n,g),g}function Ah(n){return n[0]!=="$"}function Ch(n){const t=n&&n.toString().match(/^\s*function (\w+)/);return t?t[1]:n===null?"null":""}function xh(n,t){return Ch(n)===Ch(t)}function Sh(n,t){return Et(t)?t.findIndex(e=>xh(e,n)):kt(t)&&xh(t,n)?0:-1}const Rd=n=>n[0]==="_"||n==="$stable",tc=n=>Et(n)?n.map(Un):[Un(n)],Gg=(n,t,e)=>{const s=Ju((...r)=>tc(t(...r)),e);return s._c=!1,s},Ld=(n,t,e)=>{const s=n._ctx;for(const r in n){if(Rd(r))continue;const a=n[r];if(kt(a))t[r]=Gg(r,a,s);else if(a!=null){const c=tc(a);t[r]=()=>c}}},kd=(n,t)=>{const e=tc(t);n.slots.default=()=>e},Qg=(n,t)=>{if(n.vnode.shapeFlag&32){const e=t._;e?(n.slots=Qt(t),Va(t,"_",e)):Ld(t,n.slots={})}else n.slots={},t&&kd(n,t);Va(n.slots,vl,1)},Xg=(n,t,e)=>{const{vnode:s,slots:r}=n;let a=!0,c=se;if(s.shapeFlag&32){const h=t._;h?e&&h===1?a=!1:(ln(r,t),!e&&h===1&&delete r._):(a=!t.$stable,Ld(t,r)),c=t}else t&&(kd(n,t),c={default:1});if(a)for(const h in r)!Rd(h)&&!(h in c)&&delete r[h]};function rs(n,t){const e=xn;if(e===null)return n;const s=e.proxy,r=n.dirs||(n.dirs=[]);for(let a=0;a<t.length;a++){let[c,h,p,g=se]=t[a];kt(c)&&(c={mounted:c,updated:c}),c.deep&&ls(h),r.push({dir:c,instance:s,value:h,oldValue:void 0,arg:p,modifiers:g})}return n}function es(n,t,e,s){const r=n.dirs,a=t&&t.dirs;for(let c=0;c<r.length;c++){const h=r[c];a&&(h.oldValue=a[c].value);let p=h.dir[s];p&&(_r(),Rn(p,e,8,[n.el,h,n,t]),_s())}}function Md(){return{app:null,config:{isNativeTag:N_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yg=0;function Jg(n,t){return function(s,r=null){r!=null&&!Pe(r)&&(r=null);const a=Md(),c=new Set;let h=!1;const p=a.app={_uid:Yg++,_component:s,_props:r,_container:null,_context:a,_instance:null,version:xy,get config(){return a.config},set config(g){},use(g,...v){return c.has(g)||(g&&kt(g.install)?(c.add(g),g.install(p,...v)):kt(g)&&(c.add(g),g(p,...v))),p},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),p},component(g,v){return v?(a.components[g]=v,p):a.components[g]},directive(g,v){return v?(a.directives[g]=v,p):a.directives[g]},mount(g,v,T){if(!h){const S=we(s,r);return S.appContext=a,n(S,g,T),h=!0,p._container=g,g.__vue_app__=p,sc(S.component)||S.component.proxy}},unmount(){h&&(n(null,p._container),delete p._container.__vue_app__)},provide(g,v){return a.provides[g]=v,p}};return p}}function uu(n,t,e,s,r=!1){if(Et(n)){n.forEach((S,N)=>uu(S,t&&(Et(t)?t[N]:t),e,s,r));return}if(ru(s)&&!r)return;const a=s.shapeFlag&4?sc(s.component)||s.component.proxy:s.el,c=r?null:a,{i:h,r:p}=n,g=t&&t.r,v=h.refs===se?h.refs={}:h.refs,T=h.setupState;if(g!=null&&g!==p&&(ke(g)?(v[g]=null,Ht(T,g)&&(T[g]=null)):Ke(g)&&(g.value=null)),kt(p))Si(p,h,12,[c,v]);else{const S=ke(p),N=Ke(p);if(S||N){const z=()=>{if(n.f){const q=S?v[p]:p.value;r?Et(q)&&Uu(q,a):Et(q)?q.includes(a)||q.push(a):S?v[p]=[a]:(p.value=[a],n.k&&(v[n.k]=p.value))}else S?(v[p]=c,Ht(T,p)&&(T[p]=c)):Ke(p)&&(p.value=c,n.k&&(v[n.k]=c))};c?(z.id=-1,tn(z,e)):z()}}}const tn=Sg;function ty(n){return ey(n)}function ey(n,t){const e=j_();e.__VUE__=!0;const{insert:s,remove:r,patchProp:a,createElement:c,createText:h,createComment:p,setText:g,setElementText:v,parentNode:T,nextSibling:S,setScopeId:N=zn,cloneNode:z,insertStaticContent:q}=n,$=(P,k,U,H=null,Z=null,X=null,et=!1,Q=null,Y=!!k.dynamicChildren)=>{if(P===k)return;P&&!Jr(P,k)&&(H=qe(P),xt(P,Z,X,!0),P=null),k.patchFlag===-2&&(Y=!1,k.dynamicChildren=null);const{type:K,ref:ut,shapeFlag:at}=k;switch(K){case nc:it(P,k,U,H);break;case Vi:ft(P,k,U,H);break;case xa:P==null&&ot(k,U,H,et);break;case Ve:A(P,k,U,H,Z,X,et,Q,Y);break;default:at&1?Ft(P,k,U,H,Z,X,et,Q,Y):at&6?_e(P,k,U,H,Z,X,et,Q,Y):(at&64||at&128)&&K.process(P,k,U,H,Z,X,et,Q,Y,Qe)}ut!=null&&Z&&uu(ut,P&&P.ref,X,k||P,!k)},it=(P,k,U,H)=>{if(P==null)s(k.el=h(k.children),U,H);else{const Z=k.el=P.el;k.children!==P.children&&g(Z,k.children)}},ft=(P,k,U,H)=>{P==null?s(k.el=p(k.children||""),U,H):k.el=P.el},ot=(P,k,U,H)=>{[P.el,P.anchor]=q(P.children,k,U,H)},ht=({el:P,anchor:k},U,H)=>{let Z;for(;P&&P!==k;)Z=S(P),s(P,U,H),P=Z;s(k,U,H)},Ct=({el:P,anchor:k})=>{let U;for(;P&&P!==k;)U=S(P),r(P),P=U;r(k)},Ft=(P,k,U,H,Z,X,et,Q,Y)=>{et=et||k.type==="svg",P==null?R(k,U,H,Z,X,et,Q,Y):x(P,k,Z,X,et,Q,Y)},R=(P,k,U,H,Z,X,et,Q)=>{let Y,K;const{type:ut,props:at,shapeFlag:lt,transition:gt,patchFlag:dt,dirs:Pt}=P;if(P.el&&z!==void 0&&dt===-1)Y=P.el=z(P.el);else{if(Y=P.el=c(P.type,X,at&&at.is,at),lt&8?v(Y,P.children):lt&16&&b(P.children,Y,null,H,Z,X&&ut!=="foreignObject",et,Q),Pt&&es(P,null,H,"created"),at){for(const ne in at)ne!=="value"&&!Aa(ne)&&a(Y,ne,null,at[ne],X,P.children,H,Z,ue);"value"in at&&a(Y,"value",null,at.value),(K=at.onVnodeBeforeMount)&&Bn(K,H,P)}E(Y,P,P.scopeId,et,H)}Pt&&es(P,null,H,"beforeMount");const zt=(!Z||Z&&!Z.pendingBranch)&&gt&&!gt.persisted;zt&&gt.beforeEnter(Y),s(Y,k,U),((K=at&&at.onVnodeMounted)||zt||Pt)&&tn(()=>{K&&Bn(K,H,P),zt&&gt.enter(Y),Pt&&es(P,null,H,"mounted")},Z)},E=(P,k,U,H,Z)=>{if(U&&N(P,U),H)for(let X=0;X<H.length;X++)N(P,H[X]);if(Z){let X=Z.subTree;if(k===X){const et=Z.vnode;E(P,et,et.scopeId,et.slotScopeIds,Z.parent)}}},b=(P,k,U,H,Z,X,et,Q,Y=0)=>{for(let K=Y;K<P.length;K++){const ut=P[K]=Q?Ai(P[K]):Un(P[K]);$(null,ut,k,U,H,Z,X,et,Q)}},x=(P,k,U,H,Z,X,et)=>{const Q=k.el=P.el;let{patchFlag:Y,dynamicChildren:K,dirs:ut}=k;Y|=P.patchFlag&16;const at=P.props||se,lt=k.props||se;let gt;U&&ns(U,!1),(gt=lt.onVnodeBeforeUpdate)&&Bn(gt,U,k,P),ut&&es(k,P,U,"beforeUpdate"),U&&ns(U,!0);const dt=Z&&k.type!=="foreignObject";if(K?C(P.dynamicChildren,K,Q,U,H,dt,X):et||Fe(P,k,Q,null,U,H,dt,X,!1),Y>0){if(Y&16)M(Q,k,at,lt,U,H,Z);else if(Y&2&&at.class!==lt.class&&a(Q,"class",null,lt.class,Z),Y&4&&a(Q,"style",at.style,lt.style,Z),Y&8){const Pt=k.dynamicProps;for(let zt=0;zt<Pt.length;zt++){const ne=Pt[zt],Me=at[ne],wn=lt[ne];(wn!==Me||ne==="value")&&a(Q,ne,Me,wn,Z,P.children,U,H,ue)}}Y&1&&P.children!==k.children&&v(Q,k.children)}else!et&&K==null&&M(Q,k,at,lt,U,H,Z);((gt=lt.onVnodeUpdated)||ut)&&tn(()=>{gt&&Bn(gt,U,k,P),ut&&es(k,P,U,"updated")},H)},C=(P,k,U,H,Z,X,et)=>{for(let Q=0;Q<k.length;Q++){const Y=P[Q],K=k[Q],ut=Y.el&&(Y.type===Ve||!Jr(Y,K)||Y.shapeFlag&70)?T(Y.el):U;$(Y,K,ut,null,H,Z,X,et,!0)}},M=(P,k,U,H,Z,X,et)=>{if(U!==H){for(const Q in H){if(Aa(Q))continue;const Y=H[Q],K=U[Q];Y!==K&&Q!=="value"&&a(P,Q,K,Y,et,k.children,Z,X,ue)}if(U!==se)for(const Q in U)!Aa(Q)&&!(Q in H)&&a(P,Q,U[Q],null,et,k.children,Z,X,ue);"value"in H&&a(P,"value",U.value,H.value)}},A=(P,k,U,H,Z,X,et,Q,Y)=>{const K=k.el=P?P.el:h(""),ut=k.anchor=P?P.anchor:h("");let{patchFlag:at,dynamicChildren:lt,slotScopeIds:gt}=k;gt&&(Q=Q?Q.concat(gt):gt),P==null?(s(K,U,H),s(ut,U,H),b(k.children,U,ut,Z,X,et,Q,Y)):at>0&&at&64&&lt&&P.dynamicChildren?(C(P.dynamicChildren,lt,U,Z,X,et,Q),(k.key!=null||Z&&k===Z.subTree)&&ec(P,k,!0)):Fe(P,k,U,ut,Z,X,et,Q,Y)},_e=(P,k,U,H,Z,X,et,Q,Y)=>{k.slotScopeIds=Q,P==null?k.shapeFlag&512?Z.ctx.activate(k,U,H,et,Y):vn(k,U,H,Z,X,et,Y):Kt(P,k,Y)},vn=(P,k,U,H,Z,X,et)=>{const Q=P.component=my(P,H,Z);if(bd(P)&&(Q.ctx.renderer=Qe),_y(Q),Q.asyncDep){if(Z&&Z.registerDep(Q,Ut),!P.el){const Y=Q.subTree=we(Vi);ft(null,Y,k,U)}return}Ut(Q,P,k,U,Z,X,et)},Kt=(P,k,U)=>{const H=k.component=P.component;if(Ag(P,k,U))if(H.asyncDep&&!H.asyncResolved){nt(H,k,U);return}else H.next=k,Iy(H.update),H.update();else k.component=P.component,k.el=P.el,H.vnode=k},Ut=(P,k,U,H,Z,X,et)=>{const Q=()=>{if(P.isMounted){let{next:ut,bu:at,u:lt,parent:gt,vnode:dt}=P,Pt=ut,zt;ns(P,!1),ut?(ut.el=dt.el,nt(P,ut,et)):ut=dt,at&&Ca(at),(zt=ut.props&&ut.props.onVnodeBeforeUpdate)&&Bn(zt,gt,ut,dt),ns(P,!0);const ne=Eh(P),Me=P.subTree;P.subTree=ne,$(Me,ne,T(Me.el),qe(Me),P,Z,X),ut.el=ne.el,Pt===null&&Cg(P,ne.el),lt&&tn(lt,Z),(zt=ut.props&&ut.props.onVnodeUpdated)&&tn(()=>Bn(zt,gt,ut,dt),Z)}else{let ut;const{el:at,props:lt}=k,{bm:gt,m:dt,parent:Pt}=P,zt=ru(k);ns(P,!1),gt&&Ca(gt),!zt&&(ut=lt&&lt.onVnodeBeforeMount)&&Bn(ut,Pt,k),ns(P,!0);{const ne=P.subTree=Eh(P);$(null,ne,U,H,P,Z,X),k.el=ne.el}if(dt&&tn(dt,Z),!zt&&(ut=lt&&lt.onVnodeMounted)){const ne=k;tn(()=>Bn(ut,Pt,ne),Z)}k.shapeFlag&256&&P.a&&tn(P.a,Z),P.isMounted=!0,k=U=H=null}},Y=P.effect=new qu(Q,()=>qd(P.update),P.scope),K=P.update=Y.run.bind(Y);K.id=P.uid,ns(P,!0),K()},nt=(P,k,U)=>{k.component=P;const H=P.vnode.props;P.vnode=k,P.next=null,Kg(P,k.props,H,U),Xg(P,k.children,U),_r(),oc(void 0,P.update),_s()},Fe=(P,k,U,H,Z,X,et,Q,Y=!1)=>{const K=P&&P.children,ut=P?P.shapeFlag:0,at=k.children,{patchFlag:lt,shapeFlag:gt}=k;if(lt>0){if(lt&128){Wt(K,at,U,H,Z,X,et,Q,Y);return}else if(lt&256){_t(K,at,U,H,Z,X,et,Q,Y);return}}gt&8?(ut&16&&ue(K,Z,X),at!==K&&v(U,at)):ut&16?gt&16?Wt(K,at,U,H,Z,X,et,Q,Y):ue(K,Z,X,!0):(ut&8&&v(U,""),gt&16&&b(at,U,H,Z,X,et,Q,Y))},_t=(P,k,U,H,Z,X,et,Q,Y)=>{P=P||Ys,k=k||Ys;const K=P.length,ut=k.length,at=Math.min(K,ut);let lt;for(lt=0;lt<at;lt++){const gt=k[lt]=Y?Ai(k[lt]):Un(k[lt]);$(P[lt],gt,U,null,Z,X,et,Q,Y)}K>ut?ue(P,Z,X,!0,!1,at):b(k,U,H,Z,X,et,Q,Y,at)},Wt=(P,k,U,H,Z,X,et,Q,Y)=>{let K=0;const ut=k.length;let at=P.length-1,lt=ut-1;for(;K<=at&&K<=lt;){const gt=P[K],dt=k[K]=Y?Ai(k[K]):Un(k[K]);if(Jr(gt,dt))$(gt,dt,U,null,Z,X,et,Q,Y);else break;K++}for(;K<=at&&K<=lt;){const gt=P[at],dt=k[lt]=Y?Ai(k[lt]):Un(k[lt]);if(Jr(gt,dt))$(gt,dt,U,null,Z,X,et,Q,Y);else break;at--,lt--}if(K>at){if(K<=lt){const gt=lt+1,dt=gt<ut?k[gt].el:H;for(;K<=lt;)$(null,k[K]=Y?Ai(k[K]):Un(k[K]),U,dt,Z,X,et,Q,Y),K++}}else if(K>lt)for(;K<=at;)xt(P[K],Z,X,!0),K++;else{const gt=K,dt=K,Pt=new Map;for(K=dt;K<=lt;K++){const Te=k[K]=Y?Ai(k[K]):Un(k[K]);Te.key!=null&&Pt.set(Te.key,K)}let zt,ne=0;const Me=lt-dt+1;let wn=!1,kn=0;const Tn=new Array(Me);for(K=0;K<Me;K++)Tn[K]=0;for(K=gt;K<=at;K++){const Te=P[K];if(ne>=Me){xt(Te,Z,X,!0);continue}let Xe;if(Te.key!=null)Xe=Pt.get(Te.key);else for(zt=dt;zt<=lt;zt++)if(Tn[zt-dt]===0&&Jr(Te,k[zt])){Xe=zt;break}Xe===void 0?xt(Te,Z,X,!0):(Tn[Xe-dt]=K+1,Xe>=kn?kn=Xe:wn=!0,$(Te,k[Xe],U,null,Z,X,et,Q,Y),ne++)}const Kn=wn?ny(Tn):Ys;for(zt=Kn.length-1,K=Me-1;K>=0;K--){const Te=dt+K,Xe=k[Te],Mn=Te+1<ut?k[Te+1].el:H;Tn[K]===0?$(null,Xe,U,Mn,Z,X,et,Q,Y):wn&&(zt<0||K!==Kn[zt]?Gt(Xe,U,Mn,2):zt--)}}},Gt=(P,k,U,H,Z=null)=>{const{el:X,type:et,transition:Q,children:Y,shapeFlag:K}=P;if(K&6){Gt(P.component.subTree,k,U,H);return}if(K&128){P.suspense.move(k,U,H);return}if(K&64){et.move(P,k,U,Qe);return}if(et===Ve){s(X,k,U);for(let at=0;at<Y.length;at++)Gt(Y[at],k,U,H);s(P.anchor,k,U);return}if(et===xa){ht(P,k,U);return}if(H!==2&&K&1&&Q)if(H===0)Q.beforeEnter(X),s(X,k,U),tn(()=>Q.enter(X),Z);else{const{leave:at,delayLeave:lt,afterLeave:gt}=Q,dt=()=>s(X,k,U),Pt=()=>{at(X,()=>{dt(),gt&&gt()})};lt?lt(X,dt,Pt):Pt()}else s(X,k,U)},xt=(P,k,U,H=!1,Z=!1)=>{const{type:X,props:et,ref:Q,children:Y,dynamicChildren:K,shapeFlag:ut,patchFlag:at,dirs:lt}=P;if(Q!=null&&uu(Q,null,U,P,!0),ut&256){k.ctx.deactivate(P);return}const gt=ut&1&&lt,dt=!ru(P);let Pt;if(dt&&(Pt=et&&et.onVnodeBeforeUnmount)&&Bn(Pt,k,P),ut&6)Rt(P.component,U,H);else{if(ut&128){P.suspense.unmount(U,H);return}gt&&es(P,null,k,"beforeUnmount"),ut&64?P.type.remove(P,k,U,Z,Qe,H):K&&(X!==Ve||at>0&&at&64)?ue(K,k,U,!1,!0):(X===Ve&&at&384||!Z&&ut&16)&&ue(Y,k,U),H&&ae(P)}(dt&&(Pt=et&&et.onVnodeUnmounted)||gt)&&tn(()=>{Pt&&Bn(Pt,k,P),gt&&es(P,null,k,"unmounted")},U)},ae=P=>{const{type:k,el:U,anchor:H,transition:Z}=P;if(k===Ve){Ot(U,H);return}if(k===xa){Ct(P);return}const X=()=>{r(U),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(P.shapeFlag&1&&Z&&!Z.persisted){const{leave:et,delayLeave:Q}=Z,Y=()=>et(U,X);Q?Q(P.el,X,Y):Y()}else X()},Ot=(P,k)=>{let U;for(;P!==k;)U=S(P),r(P),P=U;r(k)},Rt=(P,k,U)=>{const{bum:H,scope:Z,update:X,subTree:et,um:Q}=P;H&&Ca(H),Z.stop(),X&&(X.active=!1,xt(et,P,k,U)),Q&&tn(Q,k),tn(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},ue=(P,k,U,H=!1,Z=!1,X=0)=>{for(let et=X;et<P.length;et++)xt(P[et],k,U,H,Z)},qe=P=>P.shapeFlag&6?qe(P.component.subTree):P.shapeFlag&128?P.suspense.next():S(P.anchor||P.el),qi=(P,k,U)=>{P==null?k._vnode&&xt(k._vnode,null,null,!0):$(k._vnode||null,P,k,null,null,null,U),Wd(),k._vnode=P},Qe={p:$,um:xt,m:Gt,r:ae,mt:vn,mc:b,pc:Fe,pbc:C,n:qe,o:n};return{render:qi,hydrate:void 0,createApp:Jg(qi)}}function ns({effect:n,update:t},e){n.allowRecurse=t.allowRecurse=e}function ec(n,t,e=!1){const s=n.children,r=t.children;if(Et(s)&&Et(r))for(let a=0;a<s.length;a++){const c=s[a];let h=r[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[a]=Ai(r[a]),h.el=c.el),e||ec(c,h))}}function ny(n){const t=n.slice(),e=[0];let s,r,a,c,h;const p=n.length;for(s=0;s<p;s++){const g=n[s];if(g!==0){if(r=e[e.length-1],n[r]<g){t[s]=r,e.push(s);continue}for(a=0,c=e.length-1;a<c;)h=a+c>>1,n[e[h]]<g?a=h+1:c=h;g<n[e[a]]&&(a>0&&(t[s]=e[a-1]),e[a]=s)}}for(a=e.length,c=e[a-1];a-- >0;)e[a]=c,c=t[c];return e}const iy=n=>n.__isTeleport,ao=n=>n&&(n.disabled||n.disabled===""),Rh=n=>typeof SVGElement<"u"&&n instanceof SVGElement,cu=(n,t)=>{const e=n&&n.to;return ke(e)?t?t(e):null:e},sy={__isTeleport:!0,process(n,t,e,s,r,a,c,h,p,g){const{mc:v,pc:T,pbc:S,o:{insert:N,querySelector:z,createText:q,createComment:$}}=g,it=ao(t.props);let{shapeFlag:ft,children:ot,dynamicChildren:ht}=t;if(n==null){const Ct=t.el=q(""),Ft=t.anchor=q("");N(Ct,e,s),N(Ft,e,s);const R=t.target=cu(t.props,z),E=t.targetAnchor=q("");R&&(N(E,R),c=c||Rh(R));const b=(x,C)=>{ft&16&&v(ot,x,C,r,a,c,h,p)};it?b(e,Ft):R&&b(R,E)}else{t.el=n.el;const Ct=t.anchor=n.anchor,Ft=t.target=n.target,R=t.targetAnchor=n.targetAnchor,E=ao(n.props),b=E?e:Ft,x=E?Ct:R;if(c=c||Rh(Ft),ht?(S(n.dynamicChildren,ht,b,r,a,c,h),ec(n,t,!0)):p||T(n,t,b,x,r,a,c,h,!1),it)E||va(t,e,Ct,g,1);else if((t.props&&t.props.to)!==(n.props&&n.props.to)){const C=t.target=cu(t.props,z);C&&va(t,C,null,g,0)}else E&&va(t,Ft,R,g,1)}},remove(n,t,e,s,{um:r,o:{remove:a}},c){const{shapeFlag:h,children:p,anchor:g,targetAnchor:v,target:T,props:S}=n;if(T&&a(v),(c||!ao(S))&&(a(g),h&16))for(let N=0;N<p.length;N++){const z=p[N];r(z,t,e,!0,!!z.dynamicChildren)}},move:va,hydrate:ry};function va(n,t,e,{o:{insert:s},m:r},a=2){a===0&&s(n.targetAnchor,t,e);const{el:c,anchor:h,shapeFlag:p,children:g,props:v}=n,T=a===2;if(T&&s(c,t,e),(!T||ao(v))&&p&16)for(let S=0;S<g.length;S++)r(g[S],t,e,2);T&&s(h,t,e)}function ry(n,t,e,s,r,a,{o:{nextSibling:c,parentNode:h,querySelector:p}},g){const v=t.target=cu(t.props,p);if(v){const T=v._lpa||v.firstChild;t.shapeFlag&16&&(ao(t.props)?(t.anchor=g(c(n),t,h(n),e,s,r,a),t.targetAnchor=T):(t.anchor=c(n),t.targetAnchor=g(T,t,v,e,s,r,a)),v._lpa=t.targetAnchor&&c(t.targetAnchor))}return t.anchor&&c(t.anchor)}const Dd=sy,oy=Symbol(),Ve=Symbol(void 0),nc=Symbol(void 0),Vi=Symbol(void 0),xa=Symbol(void 0),lo=[];let fs=null;function Dt(n=!1){lo.push(fs=n?null:[])}function ay(){lo.pop(),fs=lo[lo.length-1]||null}let Ua=1;function Lh(n){Ua+=n}function Od(n){return n.dynamicChildren=Ua>0?fs||Ys:null,ay(),Ua>0&&fs&&fs.push(n),n}function Zt(n,t,e,s,r,a){return Od(tt(n,t,e,s,r,a,!0))}function Lo(n,t,e,s,r){return Od(we(n,t,e,s,r,!0))}function Vd(n){return n?n.__v_isVNode===!0:!1}function Jr(n,t){return n.type===t.type&&n.key===t.key}const vl="__vInternal",Nd=({key:n})=>n??null,Sa=({ref:n,ref_key:t,ref_for:e})=>n!=null?ke(n)||Ke(n)||kt(n)?{i:xn,r:n,k:t,f:!!e}:n:null;function tt(n,t=null,e=null,s=0,r=null,a=n===Ve?0:1,c=!1,h=!1){const p={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Nd(t),ref:t&&Sa(t),scopeId:gl,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return h?(ic(p,e),a&128&&n.normalize(p)):e&&(p.shapeFlag|=ke(e)?8:16),Ua>0&&!c&&fs&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&fs.push(p),p}const we=ly;function ly(n,t=null,e=null,s=0,r=null,a=!1){if((!n||n===oy)&&(n=Vi),Vd(n)){const h=wo(n,t,!0);return e&&ic(h,e),h}if(wy(n)&&(n=n.__vccOpts),t){t=uy(t);let{class:h,style:p}=t;h&&!ke(h)&&(t.class=xi(h)),Pe(p)&&(pd(p)&&!Et(p)&&(p=ln({},p)),t.style=_o(p))}const c=ke(n)?1:xg(n)?128:iy(n)?64:Pe(n)?4:kt(n)?2:0;return tt(n,t,e,s,r,c,a,!0)}function uy(n){return n?pd(n)||vl in n?ln({},n):n:null}function wo(n,t,e=!1){const{props:s,ref:r,patchFlag:a,children:c}=n,h=t?hy(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Nd(h),ref:t&&t.ref?e&&r?Et(r)?r.concat(Sa(t)):[r,Sa(t)]:Sa(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Ve?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&wo(n.ssContent),ssFallback:n.ssFallback&&wo(n.ssFallback),el:n.el,anchor:n.anchor}}function oi(n=" ",t=0){return we(nc,null,n,t)}function cy(n,t){const e=we(xa,null,n);return e.staticCount=t,e}function Cn(n="",t=!1){return t?(Dt(),Lo(Vi,null,n)):we(Vi,null,n)}function Un(n){return n==null||typeof n=="boolean"?we(Vi):Et(n)?we(Ve,null,n.slice()):typeof n=="object"?Ai(n):we(nc,null,String(n))}function Ai(n){return n.el===null||n.memo?n:wo(n)}function ic(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(Et(t))e=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),ic(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!(vl in t)?t._ctx=xn:r===3&&xn&&(xn.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else kt(t)?(t={default:t,_ctx:xn},e=32):(t=String(t),s&64?(e=16,t=[oi(t)]):e=8);n.children=t,n.shapeFlag|=e}function hy(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=xi([t.class,s.class]));else if(r==="style")t.style=_o([t.style,s.style]);else if(hl(r)){const a=t[r],c=s[r];a!==c&&!(Et(a)&&a.includes(c))&&(t[r]=a?[].concat(a,c):c)}else r!==""&&(t[r]=s[r])}return t}function Bn(n,t,e,s=null){Rn(n,t,7,[e,s])}function Bd(n,t,e,s){let r;const a=e;if(Et(n)||ke(n)){r=new Array(n.length);for(let c=0,h=n.length;c<h;c++)r[c]=t(n[c],c,void 0,a)}else if(typeof n=="number"){r=new Array(n);for(let c=0;c<n;c++)r[c]=t(c+1,c,void 0,a)}else if(Pe(n))if(n[Symbol.iterator])r=Array.from(n,(c,h)=>t(c,h,void 0,a));else{const c=Object.keys(n);r=new Array(c.length);for(let h=0,p=c.length;h<p;h++){const g=c[h];r[h]=t(n[g],g,h,a)}}else r=[];return r}function Fd(n,t,e={},s,r){if(xn.isCE)return we("slot",null,s);let a=n[t];a&&a._c&&(a._d=!1),Dt();const c=a&&Ud(a(e)),h=Lo(Ve,{key:e.key||`_${t}`},c||[],c&&n._===1?64:-2);return a&&a._c&&(a._d=!0),h}function Ud(n){return n.some(t=>Vd(t)?!(t.type===Vi||t.type===Ve&&!Ud(t.children)):!0)?n:null}const hu=n=>n?zd(n)?sc(n)||n.proxy:hu(n.parent):null,za=ln(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>hu(n.parent),$root:n=>hu(n.root),$emit:n=>n.emit,$options:n=>Cd(n),$forceUpdate:n=>()=>qd(n.update),$nextTick:n=>Ey.bind(n.proxy),$watch:n=>Cy.bind(n)}),fy={get({_:n},t){const{ctx:e,setupState:s,data:r,props:a,accessCache:c,type:h,appContext:p}=n;let g;if(t[0]!=="$"){const N=c[t];if(N!==void 0)switch(N){case 1:return s[t];case 2:return r[t];case 4:return e[t];case 3:return a[t]}else{if(s!==se&&Ht(s,t))return c[t]=1,s[t];if(r!==se&&Ht(r,t))return c[t]=2,r[t];if((g=n.propsOptions[0])&&Ht(g,t))return c[t]=3,a[t];if(e!==se&&Ht(e,t))return c[t]=4,e[t];ou&&(c[t]=0)}}const v=za[t];let T,S;if(v)return t==="$attrs"&&un(n,"get",t),v(n);if((T=h.__cssModules)&&(T=T[t]))return T;if(e!==se&&Ht(e,t))return c[t]=4,e[t];if(S=p.config.globalProperties,Ht(S,t))return S[t]},set({_:n},t,e){const{data:s,setupState:r,ctx:a}=n;if(r!==se&&Ht(r,t))r[t]=e;else if(s!==se&&Ht(s,t))s[t]=e;else if(Ht(n.props,t))return!1;return t[0]==="$"&&t.slice(1)in n?!1:(a[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:r,propsOptions:a}},c){let h;return!!e[c]||n!==se&&Ht(n,c)||t!==se&&Ht(t,c)||(h=a[0])&&Ht(h,c)||Ht(s,c)||Ht(za,c)||Ht(r.config.globalProperties,c)}},dy=Md();let py=0;function my(n,t,e){const s=n.type,r=(t?t.appContext:n.appContext)||dy,a={uid:py++,vnode:n,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new q_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sd(s,r),emitsOptions:wd(s,r),emit:null,emitted:null,propsDefaults:se,inheritAttrs:s.inheritAttrs,ctx:se,data:se,props:se,attrs:se,slots:se,refs:se,setupState:se,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=bg.bind(null,a),n.ce&&n.ce(a),a}let je=null;const ar=n=>{je=n,n.scope.on()},ds=()=>{je&&je.scope.off(),je=null};function zd(n){return n.vnode.shapeFlag&4}let $a=!1;function _y(n,t=!1){$a=t;const{props:e,children:s}=n.vnode,r=zd(n);Wg(n,e,r,t),Qg(n,s);const a=r?gy(n,t):void 0;return $a=!1,a}function gy(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=md(new Proxy(n.ctx,fy));const{setup:s}=e;if(s){const r=n.setupContext=s.length>1?vy(n):null;ar(n),_r();const a=Si(s,n,0,[n.props,r]);if(_s(),ds(),Jf(a)){if(a.then(ds,ds),t)return a.then(c=>{kh(n,c)}).catch(c=>{wl(c,n,0)});n.asyncDep=a}else kh(n,a)}else $d(n)}function kh(n,t,e){kt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Pe(t)&&(n.setupState=yd(t)),$d(n)}function $d(n,t,e){const s=n.type;n.render||(n.render=s.render||zn),ar(n),_r(),$g(n),_s(),ds()}function yy(n){return new Proxy(n.attrs,{get(t,e){return un(n,"get","$attrs"),t[e]}})}function vy(n){const t=s=>{n.exposed=s||{}};let e;return{get attrs(){return e||(e=yy(n))},slots:n.slots,emit:n.emit,expose:t}}function sc(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(yd(md(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in za)return za[e](n)}}))}function wy(n){return kt(n)&&"__vccOpts"in n}function Si(n,t,e,s){let r;try{r=s?n(...s):n()}catch(a){wl(a,t,e)}return r}function Rn(n,t,e,s){if(kt(n)){const a=Si(n,t,e,s);return a&&Jf(a)&&a.catch(c=>{wl(c,t,e)}),a}const r=[];for(let a=0;a<n.length;a++)r.push(Rn(n[a],t,e,s));return r}function wl(n,t,e,s=!0){const r=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,h=e;for(;a;){const g=a.ec;if(g){for(let v=0;v<g.length;v++)if(g[v](n,c,h)===!1)return}a=a.parent}const p=t.appContext.config.errorHandler;if(p){Si(p,null,10,[n,c,h]);return}}Ty(n,e,r,s)}function Ty(n,t,e,s=!0){console.error(n)}let ja=!1,fu=!1;const an=[];let ai=0;const uo=[];let no=null,Zs=0;const co=[];let Pi=null,Ws=0;const jd=Promise.resolve();let rc=null,du=null;function Ey(n){const t=rc||jd;return n?t.then(this?n.bind(this):n):t}function by(n){let t=ai+1,e=an.length;for(;t<e;){const s=t+e>>>1;To(an[s])<n?t=s+1:e=s}return t}function qd(n){(!an.length||!an.includes(n,ja&&n.allowRecurse?ai+1:ai))&&n!==du&&(n.id==null?an.push(n):an.splice(by(n.id),0,n),Hd())}function Hd(){!ja&&!fu&&(fu=!0,rc=jd.then(Kd))}function Iy(n){const t=an.indexOf(n);t>ai&&an.splice(t,1)}function Zd(n,t,e,s){Et(n)?e.push(...n):(!t||!t.includes(n,n.allowRecurse?s+1:s))&&e.push(n),Hd()}function Py(n){Zd(n,no,uo,Zs)}function Ay(n){Zd(n,Pi,co,Ws)}function oc(n,t=null){if(uo.length){for(du=t,no=[...new Set(uo)],uo.length=0,Zs=0;Zs<no.length;Zs++)no[Zs]();no=null,Zs=0,du=null,oc(n,t)}}function Wd(n){if(co.length){const t=[...new Set(co)];if(co.length=0,Pi){Pi.push(...t);return}for(Pi=t,Pi.sort((e,s)=>To(e)-To(s)),Ws=0;Ws<Pi.length;Ws++)Pi[Ws]();Pi=null,Ws=0}}const To=n=>n.id==null?1/0:n.id;function Kd(n){fu=!1,ja=!0,oc(n),an.sort((t,e)=>To(t)-To(e));try{for(ai=0;ai<an.length;ai++){const t=an[ai];t&&t.active!==!1&&Si(t,null,14)}}finally{ai=0,an.length=0,Wd(),ja=!1,rc=null,(an.length||uo.length||co.length)&&Kd(n)}}const Mh={};function nr(n,t,e){return Gd(n,t,e)}function Gd(n,t,{immediate:e,deep:s,flush:r,onTrack:a,onTrigger:c}=se){const h=je;let p,g=!1,v=!1;if(Ke(n)?(p=()=>n.value,g=!!n._shallow):tr(n)?(p=()=>n,s=!0):Et(n)?(v=!0,g=n.some(tr),p=()=>n.map(it=>{if(Ke(it))return it.value;if(tr(it))return ls(it);if(kt(it))return Si(it,h,2)})):kt(n)?t?p=()=>Si(n,h,2):p=()=>{if(!(h&&h.isUnmounted))return T&&T(),Rn(n,h,3,[S])}:p=zn,t&&s){const it=p;p=()=>ls(it())}let T,S=it=>{T=$.onStop=()=>{Si(it,h,4)}};if($a)return S=zn,t?e&&Rn(t,h,3,[p(),v?[]:void 0,S]):p(),zn;let N=v?[]:Mh;const z=()=>{if($.active)if(t){const it=$.run();(s||g||(v?it.some((ft,ot)=>go(ft,N[ot])):go(it,N)))&&(T&&T(),Rn(t,h,3,[it,N===Mh?void 0:N,S]),N=it)}else $.run()};z.allowRecurse=!!t;let q;r==="sync"?q=z:r==="post"?q=()=>tn(z,h&&h.suspense):q=()=>{!h||h.isMounted?Py(z):z()};const $=new qu(p,q);return t?e?z():N=$.run():r==="post"?tn($.run.bind($),h&&h.suspense):$.run(),()=>{$.stop(),h&&h.scope&&Uu(h.scope.effects,$)}}function Cy(n,t,e){const s=this.proxy,r=ke(n)?n.includes(".")?Qd(s,n):()=>s[n]:n.bind(s,s);let a;kt(t)?a=t:(a=t.handler,e=t);const c=je;ar(this);const h=Gd(r,a.bind(s),e);return c?ar(c):ds(),h}function Qd(n,t){const e=t.split(".");return()=>{let s=n;for(let r=0;r<e.length&&s;r++)s=s[e[r]];return s}}function ls(n,t){if(!Pe(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),Ke(n))ls(n.value,t);else if(Et(n))for(let e=0;e<n.length;e++)ls(n[e],t);else if(fl(n)||Js(n))n.forEach(e=>{ls(e,t)});else if(ed(n))for(const e in n)ls(n[e],t);return n}const xy="3.2.26",Sy="http://www.w3.org/2000/svg",Hs=typeof document<"u"?document:null,Dh=new Map,Ry={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const r=t?Hs.createElementNS(Sy,n):Hs.createElement(n,e?{is:e}:void 0);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Hs.createTextNode(n),createComment:n=>Hs.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Hs.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},cloneNode(n){const t=n.cloneNode(!0);return"_value"in n&&(t._value=n._value),t},insertStaticContent(n,t,e,s){const r=e?e.previousSibling:t.lastChild;let a=Dh.get(n);if(!a){const c=Hs.createElement("template");if(c.innerHTML=s?`<svg>${n}</svg>`:n,a=c.content,s){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}Dh.set(n,a)}return t.insertBefore(a.cloneNode(!0),e),[r?r.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function Ly(n,t,e){const s=n._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}function ky(n,t,e){const s=n.style,r=ke(e);if(e&&!r){for(const a in e)pu(s,a,e[a]);if(t&&!ke(t))for(const a in t)e[a]==null&&pu(s,a,"")}else{const a=s.display;r?t!==e&&(s.cssText=e):t&&n.removeAttribute("style"),"_vod"in n&&(s.display=a)}}const Oh=/\s*!important$/;function pu(n,t,e){if(Et(e))e.forEach(s=>pu(n,t,s));else if(t.startsWith("--"))n.setProperty(t,e);else{const s=My(n,t);Oh.test(e)?n.setProperty(mr(s),e.replace(Oh,""),"important"):n[s]=e}}const Vh=["Webkit","Moz","ms"],Hl={};function My(n,t){const e=Hl[t];if(e)return e;let s=rr(t);if(s!=="filter"&&s in n)return Hl[t]=s;s=nd(s);for(let r=0;r<Vh.length;r++){const a=Vh[r]+s;if(a in n)return Hl[t]=a}return t}const Nh="http://www.w3.org/1999/xlink";function Dy(n,t,e,s,r){if(s&&t.startsWith("xlink:"))e==null?n.removeAttributeNS(Nh,t.slice(6,t.length)):n.setAttributeNS(Nh,t,e);else{const a=L_(t);e==null||a&&!Xf(e)?n.removeAttribute(t):n.setAttribute(t,a?"":e)}}function Oy(n,t,e,s,r,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,r,a),n[t]=e??"";return}if(t==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=e;const h=e??"";(n.value!==h||n.tagName==="OPTION")&&(n.value=h),e==null&&n.removeAttribute(t);return}if(e===""||e==null){const h=typeof n[t];if(h==="boolean"){n[t]=Xf(e);return}else if(e==null&&h==="string"){n[t]="",n.removeAttribute(t);return}else if(h==="number"){try{n[t]=0}catch{}n.removeAttribute(t);return}}try{n[t]=e}catch{}}let qa=Date.now,Xd=!1;if(typeof window<"u"){qa()>document.createEvent("Event").timeStamp&&(qa=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);Xd=!!(n&&Number(n[1])<=53)}let mu=0;const Vy=Promise.resolve(),Ny=()=>{mu=0},By=()=>mu||(Vy.then(Ny),mu=qa());function as(n,t,e,s){n.addEventListener(t,e,s)}function Fy(n,t,e,s){n.removeEventListener(t,e,s)}function Uy(n,t,e,s,r=null){const a=n._vei||(n._vei={}),c=a[t];if(s&&c)c.value=s;else{const[h,p]=zy(t);if(s){const g=a[t]=$y(s,r);as(n,h,g,p)}else c&&(Fy(n,h,c,p),a[t]=void 0)}}const Bh=/(?:Once|Passive|Capture)$/;function zy(n){let t;if(Bh.test(n)){t={};let e;for(;e=n.match(Bh);)n=n.slice(0,n.length-e[0].length),t[e[0].toLowerCase()]=!0}return[mr(n.slice(2)),t]}function $y(n,t){const e=s=>{const r=s.timeStamp||qa();(Xd||r>=e.attached-1)&&Rn(jy(s,e.value),t,5,[s])};return e.value=n,e.attached=By(),e}function jy(n,t){if(Et(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>r=>!r._stopped&&s(r))}else return t}const Fh=/^on[a-z]/,qy=(n,t,e,s,r=!1,a,c,h,p)=>{t==="class"?Ly(n,s,r):t==="style"?ky(n,e,s):hl(t)?Fu(t)||Uy(n,t,e,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Hy(n,t,s,r))?Oy(n,t,s,a,c,h,p):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),Dy(n,t,s,r))};function Hy(n,t,e,s){return s?!!(t==="innerHTML"||t==="textContent"||t in n&&Fh.test(t)&&kt(e)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA"||Fh.test(t)&&ke(e)?!1:t in n}const Ha=n=>{const t=n.props["onUpdate:modelValue"];return Et(t)?e=>Ca(t,e):t};function Zy(n){n.target.composing=!0}function Uh(n){const t=n.target;t.composing&&(t.composing=!1,Wy(t,"input"))}function Wy(n,t){const e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),n.dispatchEvent(e)}const to={created(n,{modifiers:{lazy:t,trim:e,number:s}},r){n._assign=Ha(r);const a=s||r.props&&r.props.type==="number";as(n,t?"change":"input",c=>{if(c.target.composing)return;let h=n.value;e?h=h.trim():a&&(h=Na(h)),n._assign(h)}),e&&as(n,"change",()=>{n.value=n.value.trim()}),t||(as(n,"compositionstart",Zy),as(n,"compositionend",Uh),as(n,"change",Uh))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,modifiers:{lazy:e,trim:s,number:r}},a){if(n._assign=Ha(a),n.composing||document.activeElement===n&&(e||s&&n.value.trim()===t||(r||n.type==="number")&&Na(n.value)===t))return;const c=t??"";n.value!==c&&(n.value=c)}},Yd={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const r=fl(t);as(n,"change",()=>{const a=Array.prototype.filter.call(n.options,c=>c.selected).map(c=>e?Na(Za(c)):Za(c));n._assign(n.multiple?r?new Set(a):a:a[0])}),n._assign=Ha(s)},mounted(n,{value:t}){zh(n,t)},beforeUpdate(n,t,e){n._assign=Ha(e)},updated(n,{value:t}){zh(n,t)}};function zh(n,t){const e=n.multiple;if(!(e&&!Et(t)&&!fl(t))){for(let s=0,r=n.options.length;s<r;s++){const a=n.options[s],c=Za(a);if(e)Et(t)?a.selected=V_(t,c)>-1:a.selected=t.has(c);else if(cl(Za(a),t)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Za(n){return"_value"in n?n._value:n.value}const Ky=["ctrl","shift","alt","meta"],Gy={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>Ky.some(e=>n[`${e}Key`]&&!t.includes(e))},ac=(n,t)=>(e,...s)=>{for(let r=0;r<t.length;r++){const a=Gy[t[r]];if(a&&a(e,t))return}return n(e,...s)},Qy=ln({patchProp:qy},Ry);let $h;function Xy(){return $h||($h=ty(Qy))}const Yy=(...n)=>{const t=Xy().createApp(...n),{mount:e}=t;return t.mount=s=>{const r=Jy(s);if(!r)return;const a=t._component;!kt(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const c=e(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),c},t};function Jy(n){return ke(n)?document.querySelector(n):n}const tv=()=>{};var jh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},ev=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const r=n[e++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[e++];t[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[e++],c=n[e++],h=n[e++],p=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const a=n[e++],c=n[e++];t[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return t.join("")},tp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const a=n[r],c=r+1<n.length,h=c?n[r+1]:0,p=r+2<n.length,g=p?n[r+2]:0,v=a>>2,T=(a&3)<<4|h>>4;let S=(h&15)<<2|g>>6,N=g&63;p||(N=64,c||(S=64)),s.push(e[v],e[T],e[S],e[N])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Jd(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):ev(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const a=e[n.charAt(r++)],h=r<n.length?e[n.charAt(r)]:0;++r;const g=r<n.length?e[n.charAt(r)]:64;++r;const T=r<n.length?e[n.charAt(r)]:64;if(++r,a==null||h==null||g==null||T==null)throw new nv;const S=a<<2|h>>4;if(s.push(S),g!==64){const N=h<<4&240|g>>2;if(s.push(N),T!==64){const z=g<<6&192|T;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class nv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iv=function(n){const t=Jd(n);return tp.encodeByteArray(t,!0)},Wa=function(n){return iv(n).replace(/\./g,"")},sv=function(n){try{return tp.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=()=>rv().__FIREBASE_DEFAULTS__,av=()=>{if(typeof process>"u"||typeof jh>"u")return;const n=jh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&sv(n[1]);return t&&JSON.parse(t)},lc=()=>{try{return tv()||ov()||av()||lv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uv=n=>{var t,e;return(e=(t=lc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},cv=n=>{const t=uv(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},ep=()=>{var n;return(n=lc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wa(JSON.stringify(e)),Wa(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pv(){var n;const t=(n=lc())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mv(){return!pv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _v(){try{return typeof indexedDB=="object"}catch{return!1}}function gv(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var a;t(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="FirebaseError";class gr extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=yv,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,np.prototype.create)}}class np{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},r=`${this.service}/${t}`,a=this.errors[t],c=a?vv(a,s):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new gr(r,h,s)}}function vv(n,t){return n.replace(wv,(e,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const wv=/\{\$([^}]+)}/g;function Ka(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const r of e){if(!s.includes(r))return!1;const a=n[r],c=t[r];if(qh(a)&&qh(c)){if(!Ka(a,c))return!1}else if(a!==c)return!1}for(const r of s)if(!e.includes(r))return!1;return!0}function qh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(n){return n&&n._delegate?n._delegate:n}class bo{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new hv;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(bv(t))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(t=os){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=os){return this.instances.has(t)}getOptions(t=os){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(r)}return r}onInit(t,e){var s;const r=this.normalizeInstanceIdentifier(e),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&t(c,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const r of s)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Ev(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=os){return this.component?this.component.multipleInstances?t:os:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ev(n){return n===os?void 0:n}function bv(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Tv(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qt||(qt={}));const Pv={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},Av=qt.INFO,Cv={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},xv=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),r=Cv[t];if(r)console[r](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ip{constructor(t){this.name=t,this._logLevel=Av,this._logHandler=xv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Pv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...t),this._logHandler(this,qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...t),this._logHandler(this,qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...t),this._logHandler(this,qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...t),this._logHandler(this,qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...t),this._logHandler(this,qt.ERROR,...t)}}const Sv=(n,t)=>t.some(e=>n instanceof e);let Hh,Zh;function Rv(){return Hh||(Hh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lv(){return Zh||(Zh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sp=new WeakMap,_u=new WeakMap,rp=new WeakMap,Zl=new WeakMap,uc=new WeakMap;function kv(n){const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{e(Ri(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&sp.set(e,n)}).catch(()=>{}),uc.set(t,n),t}function Mv(n){if(_u.has(n))return;const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{e(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});_u.set(n,t)}let gu={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return _u.get(n);if(t==="objectStoreNames")return n.objectStoreNames||rp.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ri(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Dv(n){gu=n(gu)}function Ov(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(Wl(this),t,...e);return rp.set(s,t.sort?t.sort():[t]),Ri(s)}:Lv().includes(n)?function(...t){return n.apply(Wl(this),t),Ri(sp.get(this))}:function(...t){return Ri(n.apply(Wl(this),t))}}function Vv(n){return typeof n=="function"?Ov(n):(n instanceof IDBTransaction&&Mv(n),Sv(n,Rv())?new Proxy(n,gu):n)}function Ri(n){if(n instanceof IDBRequest)return kv(n);if(Zl.has(n))return Zl.get(n);const t=Vv(n);return t!==n&&(Zl.set(n,t),uc.set(t,n)),t}const Wl=n=>uc.get(n);function Nv(n,t,{blocked:e,upgrade:s,blocking:r,terminated:a}={}){const c=indexedDB.open(n,t),h=Ri(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Ri(c.result),p.oldVersion,p.newVersion,Ri(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),r&&p.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const Bv=["get","getKey","getAll","getAllKeys","count"],Fv=["put","add","delete","clear"],Kl=new Map;function Wh(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Kl.get(t))return Kl.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,r=Fv.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Bv.includes(e)))return;const a=async function(c,...h){const p=this.transaction(c,r?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),r&&p.done]))[0]};return Kl.set(t,a),a}Dv(n=>({...n,get:(t,e,s)=>Wh(t,e)||n.get(t,e,s),has:(t,e)=>!!Wh(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(zv(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function zv(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const yu="@firebase/app",Kh="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new ip("@firebase/app"),$v="@firebase/app-compat",jv="@firebase/analytics-compat",qv="@firebase/analytics",Hv="@firebase/app-check-compat",Zv="@firebase/app-check",Wv="@firebase/auth",Kv="@firebase/auth-compat",Gv="@firebase/database",Qv="@firebase/data-connect",Xv="@firebase/database-compat",Yv="@firebase/functions",Jv="@firebase/functions-compat",tw="@firebase/installations",ew="@firebase/installations-compat",nw="@firebase/messaging",iw="@firebase/messaging-compat",sw="@firebase/performance",rw="@firebase/performance-compat",ow="@firebase/remote-config",aw="@firebase/remote-config-compat",lw="@firebase/storage",uw="@firebase/storage-compat",cw="@firebase/firestore",hw="@firebase/vertexai",fw="@firebase/firestore-compat",dw="firebase",pw="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="[DEFAULT]",mw={[yu]:"fire-core",[$v]:"fire-core-compat",[qv]:"fire-analytics",[jv]:"fire-analytics-compat",[Zv]:"fire-app-check",[Hv]:"fire-app-check-compat",[Wv]:"fire-auth",[Kv]:"fire-auth-compat",[Gv]:"fire-rtdb",[Qv]:"fire-data-connect",[Xv]:"fire-rtdb-compat",[Yv]:"fire-fn",[Jv]:"fire-fn-compat",[tw]:"fire-iid",[ew]:"fire-iid-compat",[nw]:"fire-fcm",[iw]:"fire-fcm-compat",[sw]:"fire-perf",[rw]:"fire-perf-compat",[ow]:"fire-rc",[aw]:"fire-rc-compat",[lw]:"fire-gcs",[uw]:"fire-gcs-compat",[cw]:"fire-fst",[fw]:"fire-fst-compat",[hw]:"fire-vertex","fire-js":"fire-js",[dw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=new Map,_w=new Map,wu=new Map;function Gh(n,t){try{n.container.addComponent(t)}catch(e){hi.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Qa(n){const t=n.name;if(wu.has(t))return hi.debug(`There were multiple attempts to register component ${t}.`),!1;wu.set(t,n);for(const e of Ga.values())Gh(e,n);for(const e of _w.values())Gh(e,n);return!0}function gw(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function yw(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new np("app","Firebase",vw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,e,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new bo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=pw;function op(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:vu,automaticDataCollectionEnabled:!1},t),r=s.name;if(typeof r!="string"||!r)throw Li.create("bad-app-name",{appName:String(r)});if(e||(e=ep()),!e)throw Li.create("no-options");const a=Ga.get(r);if(a){if(Ka(e,a.options)&&Ka(s,a.config))return a;throw Li.create("duplicate-app",{appName:r})}const c=new Iv(r);for(const p of wu.values())c.addComponent(p);const h=new ww(e,s,c);return Ga.set(r,h),h}function Ew(n=vu){const t=Ga.get(n);if(!t&&n===vu&&ep())return op();if(!t)throw Li.create("no-app",{appName:n});return t}function ir(n,t,e){var s;let r=(s=mw[n])!==null&&s!==void 0?s:n;e&&(r+=`-${e}`);const a=r.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${t}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),hi.warn(h.join(" "));return}Qa(new bo(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="firebase-heartbeat-database",Iw=1,Io="firebase-heartbeat-store";let Gl=null;function ap(){return Gl||(Gl=Nv(bw,Iw,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Io)}catch(e){console.warn(e)}}}}).catch(n=>{throw Li.create("idb-open",{originalErrorMessage:n.message})})),Gl}async function Pw(n){try{const e=(await ap()).transaction(Io),s=await e.objectStore(Io).get(lp(n));return await e.done,s}catch(t){if(t instanceof gr)hi.warn(t.message);else{const e=Li.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});hi.warn(e.message)}}}async function Qh(n,t){try{const s=(await ap()).transaction(Io,"readwrite");await s.objectStore(Io).put(t,lp(n)),await s.done}catch(e){if(e instanceof gr)hi.warn(e.message);else{const s=Li.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});hi.warn(s.message)}}}function lp(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=1024,Cw=30;class xw{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Rw(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Xh();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Cw){const c=Lw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){hi.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Xh(),{heartbeatsToSend:s,unsentEntries:r}=Sw(this._heartbeatsCache.heartbeats),a=Wa(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return hi.warn(e),""}}}function Xh(){return new Date().toISOString().substring(0,10)}function Sw(n,t=Aw){const e=[];let s=n.slice();for(const r of n){const a=e.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),Yh(e)>t){a.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Yh(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class Rw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _v()?gv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Pw(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Qh(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Qh(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Yh(n){return Wa(JSON.stringify({version:2,heartbeats:n})).length}function Lw(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){Qa(new bo("platform-logger",t=>new Uv(t),"PRIVATE")),Qa(new bo("heartbeat",t=>new xw(t),"PRIVATE")),ir(yu,Kh,n),ir(yu,Kh,"esm2017"),ir("fire-js","")}kw("");var Mw="firebase",Dw="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(Mw,Dw,"app");var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,up;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,E){function b(){}b.prototype=E.prototype,R.D=E.prototype,R.prototype=new b,R.prototype.constructor=R,R.C=function(x,C,M){for(var A=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)A[_e-2]=arguments[_e];return E.prototype[C].apply(x,A)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,e),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,E,b){b||(b=0);var x=Array(16);if(typeof E=="string")for(var C=0;16>C;++C)x[C]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(C=0;16>C;++C)x[C]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=R.g[0],b=R.g[1],C=R.g[2];var M=R.g[3],A=E+(M^b&(C^M))+x[0]+3614090360&4294967295;E=b+(A<<7&4294967295|A>>>25),A=M+(C^E&(b^C))+x[1]+3905402710&4294967295,M=E+(A<<12&4294967295|A>>>20),A=C+(b^M&(E^b))+x[2]+606105819&4294967295,C=M+(A<<17&4294967295|A>>>15),A=b+(E^C&(M^E))+x[3]+3250441966&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(M^b&(C^M))+x[4]+4118548399&4294967295,E=b+(A<<7&4294967295|A>>>25),A=M+(C^E&(b^C))+x[5]+1200080426&4294967295,M=E+(A<<12&4294967295|A>>>20),A=C+(b^M&(E^b))+x[6]+2821735955&4294967295,C=M+(A<<17&4294967295|A>>>15),A=b+(E^C&(M^E))+x[7]+4249261313&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(M^b&(C^M))+x[8]+1770035416&4294967295,E=b+(A<<7&4294967295|A>>>25),A=M+(C^E&(b^C))+x[9]+2336552879&4294967295,M=E+(A<<12&4294967295|A>>>20),A=C+(b^M&(E^b))+x[10]+4294925233&4294967295,C=M+(A<<17&4294967295|A>>>15),A=b+(E^C&(M^E))+x[11]+2304563134&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(M^b&(C^M))+x[12]+1804603682&4294967295,E=b+(A<<7&4294967295|A>>>25),A=M+(C^E&(b^C))+x[13]+4254626195&4294967295,M=E+(A<<12&4294967295|A>>>20),A=C+(b^M&(E^b))+x[14]+2792965006&4294967295,C=M+(A<<17&4294967295|A>>>15),A=b+(E^C&(M^E))+x[15]+1236535329&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(C^M&(b^C))+x[1]+4129170786&4294967295,E=b+(A<<5&4294967295|A>>>27),A=M+(b^C&(E^b))+x[6]+3225465664&4294967295,M=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(M^E))+x[11]+643717713&4294967295,C=M+(A<<14&4294967295|A>>>18),A=b+(M^E&(C^M))+x[0]+3921069994&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(C^M&(b^C))+x[5]+3593408605&4294967295,E=b+(A<<5&4294967295|A>>>27),A=M+(b^C&(E^b))+x[10]+38016083&4294967295,M=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(M^E))+x[15]+3634488961&4294967295,C=M+(A<<14&4294967295|A>>>18),A=b+(M^E&(C^M))+x[4]+3889429448&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(C^M&(b^C))+x[9]+568446438&4294967295,E=b+(A<<5&4294967295|A>>>27),A=M+(b^C&(E^b))+x[14]+3275163606&4294967295,M=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(M^E))+x[3]+4107603335&4294967295,C=M+(A<<14&4294967295|A>>>18),A=b+(M^E&(C^M))+x[8]+1163531501&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(C^M&(b^C))+x[13]+2850285829&4294967295,E=b+(A<<5&4294967295|A>>>27),A=M+(b^C&(E^b))+x[2]+4243563512&4294967295,M=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(M^E))+x[7]+1735328473&4294967295,C=M+(A<<14&4294967295|A>>>18),A=b+(M^E&(C^M))+x[12]+2368359562&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(b^C^M)+x[5]+4294588738&4294967295,E=b+(A<<4&4294967295|A>>>28),A=M+(E^b^C)+x[8]+2272392833&4294967295,M=E+(A<<11&4294967295|A>>>21),A=C+(M^E^b)+x[11]+1839030562&4294967295,C=M+(A<<16&4294967295|A>>>16),A=b+(C^M^E)+x[14]+4259657740&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(b^C^M)+x[1]+2763975236&4294967295,E=b+(A<<4&4294967295|A>>>28),A=M+(E^b^C)+x[4]+1272893353&4294967295,M=E+(A<<11&4294967295|A>>>21),A=C+(M^E^b)+x[7]+4139469664&4294967295,C=M+(A<<16&4294967295|A>>>16),A=b+(C^M^E)+x[10]+3200236656&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(b^C^M)+x[13]+681279174&4294967295,E=b+(A<<4&4294967295|A>>>28),A=M+(E^b^C)+x[0]+3936430074&4294967295,M=E+(A<<11&4294967295|A>>>21),A=C+(M^E^b)+x[3]+3572445317&4294967295,C=M+(A<<16&4294967295|A>>>16),A=b+(C^M^E)+x[6]+76029189&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(b^C^M)+x[9]+3654602809&4294967295,E=b+(A<<4&4294967295|A>>>28),A=M+(E^b^C)+x[12]+3873151461&4294967295,M=E+(A<<11&4294967295|A>>>21),A=C+(M^E^b)+x[15]+530742520&4294967295,C=M+(A<<16&4294967295|A>>>16),A=b+(C^M^E)+x[2]+3299628645&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(C^(b|~M))+x[0]+4096336452&4294967295,E=b+(A<<6&4294967295|A>>>26),A=M+(b^(E|~C))+x[7]+1126891415&4294967295,M=E+(A<<10&4294967295|A>>>22),A=C+(E^(M|~b))+x[14]+2878612391&4294967295,C=M+(A<<15&4294967295|A>>>17),A=b+(M^(C|~E))+x[5]+4237533241&4294967295,b=C+(A<<21&4294967295|A>>>11),A=E+(C^(b|~M))+x[12]+1700485571&4294967295,E=b+(A<<6&4294967295|A>>>26),A=M+(b^(E|~C))+x[3]+2399980690&4294967295,M=E+(A<<10&4294967295|A>>>22),A=C+(E^(M|~b))+x[10]+4293915773&4294967295,C=M+(A<<15&4294967295|A>>>17),A=b+(M^(C|~E))+x[1]+2240044497&4294967295,b=C+(A<<21&4294967295|A>>>11),A=E+(C^(b|~M))+x[8]+1873313359&4294967295,E=b+(A<<6&4294967295|A>>>26),A=M+(b^(E|~C))+x[15]+4264355552&4294967295,M=E+(A<<10&4294967295|A>>>22),A=C+(E^(M|~b))+x[6]+2734768916&4294967295,C=M+(A<<15&4294967295|A>>>17),A=b+(M^(C|~E))+x[13]+1309151649&4294967295,b=C+(A<<21&4294967295|A>>>11),A=E+(C^(b|~M))+x[4]+4149444226&4294967295,E=b+(A<<6&4294967295|A>>>26),A=M+(b^(E|~C))+x[11]+3174756917&4294967295,M=E+(A<<10&4294967295|A>>>22),A=C+(E^(M|~b))+x[2]+718787259&4294967295,C=M+(A<<15&4294967295|A>>>17),A=b+(M^(C|~E))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+M&4294967295}s.prototype.u=function(R,E){E===void 0&&(E=R.length);for(var b=E-this.blockSize,x=this.B,C=this.h,M=0;M<E;){if(C==0)for(;M<=b;)r(this,R,M),M+=this.blockSize;if(typeof R=="string"){for(;M<E;)if(x[C++]=R.charCodeAt(M++),C==this.blockSize){r(this,x),C=0;break}}else for(;M<E;)if(x[C++]=R[M++],C==this.blockSize){r(this,x),C=0;break}}this.h=C,this.o+=E},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;var b=8*this.o;for(E=R.length-8;E<R.length;++E)R[E]=b&255,b/=256;for(this.u(R),R=Array(16),E=b=0;4>E;++E)for(var x=0;32>x;x+=8)R[b++]=this.g[E]>>>x&255;return R};function a(R,E){var b=h;return Object.prototype.hasOwnProperty.call(b,R)?b[R]:b[R]=E(R)}function c(R,E){this.h=E;for(var b=[],x=!0,C=R.length-1;0<=C;C--){var M=R[C]|0;x&&M==E||(b[C]=M,x=!1)}this.g=b}var h={};function p(R){return-128<=R&&128>R?a(R,function(E){return new c([E|0],0>E?-1:0)}):new c([R|0],0>R?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return $(g(-R));for(var E=[],b=1,x=0;R>=b;x++)E[x]=R/b|0,b*=4294967296;return new c(E,0)}function v(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return $(v(R.substring(1),E));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(E,8)),x=T,C=0;C<R.length;C+=8){var M=Math.min(8,R.length-C),A=parseInt(R.substring(C,C+M),E);8>M?(M=g(Math.pow(E,M)),x=x.j(M).add(g(A))):(x=x.j(b),x=x.add(g(A)))}return x}var T=p(0),S=p(1),N=p(16777216);n=c.prototype,n.m=function(){if(q(this))return-$(this).m();for(var R=0,E=1,b=0;b<this.g.length;b++){var x=this.i(b);R+=(0<=x?x:4294967296+x)*E,E*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(z(this))return"0";if(q(this))return"-"+$(this).toString(R);for(var E=g(Math.pow(R,6)),b=this,x="";;){var C=ht(b,E).g;b=it(b,C.j(E));var M=((0<b.g.length?b.g[0]:b.h)>>>0).toString(R);if(b=C,z(b))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function z(R){if(R.h!=0)return!1;for(var E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function q(R){return R.h==-1}n.l=function(R){return R=it(this,R),q(R)?-1:z(R)?0:1};function $(R){for(var E=R.g.length,b=[],x=0;x<E;x++)b[x]=~R.g[x];return new c(b,~R.h).add(S)}n.abs=function(){return q(this)?$(this):this},n.add=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],x=0,C=0;C<=E;C++){var M=x+(this.i(C)&65535)+(R.i(C)&65535),A=(M>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);x=A>>>16,M&=65535,A&=65535,b[C]=A<<16|M}return new c(b,b[b.length-1]&-2147483648?-1:0)};function it(R,E){return R.add($(E))}n.j=function(R){if(z(this)||z(R))return T;if(q(this))return q(R)?$(this).j($(R)):$($(this).j(R));if(q(R))return $(this.j($(R)));if(0>this.l(N)&&0>R.l(N))return g(this.m()*R.m());for(var E=this.g.length+R.g.length,b=[],x=0;x<2*E;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<R.g.length;C++){var M=this.i(x)>>>16,A=this.i(x)&65535,_e=R.i(C)>>>16,vn=R.i(C)&65535;b[2*x+2*C]+=A*vn,ft(b,2*x+2*C),b[2*x+2*C+1]+=M*vn,ft(b,2*x+2*C+1),b[2*x+2*C+1]+=A*_e,ft(b,2*x+2*C+1),b[2*x+2*C+2]+=M*_e,ft(b,2*x+2*C+2)}for(x=0;x<E;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=E;x<2*E;x++)b[x]=0;return new c(b,0)};function ft(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function ot(R,E){this.g=R,this.h=E}function ht(R,E){if(z(E))throw Error("division by zero");if(z(R))return new ot(T,T);if(q(R))return E=ht($(R),E),new ot($(E.g),$(E.h));if(q(E))return E=ht(R,$(E)),new ot($(E.g),E.h);if(30<R.g.length){if(q(R)||q(E))throw Error("slowDivide_ only works with positive integers.");for(var b=S,x=E;0>=x.l(R);)b=Ct(b),x=Ct(x);var C=Ft(b,1),M=Ft(x,1);for(x=Ft(x,2),b=Ft(b,2);!z(x);){var A=M.add(x);0>=A.l(R)&&(C=C.add(b),M=A),x=Ft(x,1),b=Ft(b,1)}return E=it(R,C.j(E)),new ot(C,E)}for(C=T;0<=R.l(E);){for(b=Math.max(1,Math.floor(R.m()/E.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=g(b),A=M.j(E);q(A)||0<A.l(R);)b-=x,M=g(b),A=M.j(E);z(M)&&(M=S),C=C.add(M),R=it(R,A)}return new ot(C,R)}n.A=function(R){return ht(this,R).h},n.and=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],x=0;x<E;x++)b[x]=this.i(x)&R.i(x);return new c(b,this.h&R.h)},n.or=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],x=0;x<E;x++)b[x]=this.i(x)|R.i(x);return new c(b,this.h|R.h)},n.xor=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],x=0;x<E;x++)b[x]=this.i(x)^R.i(x);return new c(b,this.h^R.h)};function Ct(R){for(var E=R.g.length+1,b=[],x=0;x<E;x++)b[x]=R.i(x)<<1|R.i(x-1)>>>31;return new c(b,R.h)}function Ft(R,E){var b=E>>5;E%=32;for(var x=R.g.length-b,C=[],M=0;M<x;M++)C[M]=0<E?R.i(M+b)>>>E|R.i(M+b+1)<<32-E:R.i(M+b);return new c(C,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,up=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,ki=c}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});var wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cp,io,hp,Ra,Tu,fp,dp,pp;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,_){return l==Array.prototype||l==Object.prototype||(l[d]=_.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof wa=="object"&&wa];for(var d=0;d<l.length;++d){var _=l[d];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=e(this);function r(l,d){if(d)t:{var _=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var D=l[w];if(!(D in _))break t;_=_[D]}l=l[l.length-1],w=_[l],d=d(w),d!=w&&d!=null&&t(_,l,{configurable:!0,writable:!0,value:d})}}function a(l,d){l instanceof String&&(l+="");var _=0,w=!1,D={next:function(){if(!w&&_<l.length){var F=_++;return{value:d(F,l[F]),done:!1}}return w=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(l){return l||function(){return a(this,function(d,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function g(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function v(l,d,_){return l.call.apply(l.bind,arguments)}function T(l,d,_){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,w),l.apply(d,D)}}return function(){return l.apply(d,arguments)}}function S(l,d,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,S.apply(null,arguments)}function N(l,d){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function z(l,d){function _(){}_.prototype=d.prototype,l.aa=d.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(w,D,F){for(var J=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)J[Yt-2]=arguments[Yt];return d.prototype[D].apply(w,J)}}function q(l){const d=l.length;if(0<d){const _=Array(d);for(let w=0;w<d;w++)_[w]=l[w];return _}return[]}function $(l,d){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const D=l.length||0,F=w.length||0;l.length=D+F;for(let J=0;J<F;J++)l[D+J]=w[J]}else l.push(w)}}class it{constructor(d,_){this.i=d,this.j=_,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ft(l){return/^[\s\xa0]*$/.test(l)}function ot(){var l=h.navigator;return l&&(l=l.userAgent)?l:""}function ht(l){return ht[" "](l),l}ht[" "]=function(){};var Ct=ot().indexOf("Gecko")!=-1&&!(ot().toLowerCase().indexOf("webkit")!=-1&&ot().indexOf("Edge")==-1)&&!(ot().indexOf("Trident")!=-1||ot().indexOf("MSIE")!=-1)&&ot().indexOf("Edge")==-1;function Ft(l,d,_){for(const w in l)d.call(_,l[w],w,l)}function R(l,d){for(const _ in l)d.call(void 0,l[_],_,l)}function E(l){const d={};for(const _ in l)d[_]=l[_];return d}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,d){let _,w;for(let D=1;D<arguments.length;D++){w=arguments[D];for(_ in w)l[_]=w[_];for(let F=0;F<b.length;F++)_=b[F],Object.prototype.hasOwnProperty.call(w,_)&&(l[_]=w[_])}}function C(l){var d=1;l=l.split(":");const _=[];for(;0<d&&l.length;)_.push(l.shift()),d--;return l.length&&_.push(l.join(":")),_}function M(l){h.setTimeout(()=>{throw l},0)}function A(){var l=Fe;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class _e{constructor(){this.h=this.g=null}add(d,_){const w=vn.get();w.set(d,_),this.h?this.h.next=w:this.g=w,this.h=w}}var vn=new it(()=>new Kt,l=>l.reset());class Kt{constructor(){this.next=this.g=this.h=null}set(d,_){this.h=d,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ut,nt=!1,Fe=new _e,_t=()=>{const l=h.Promise.resolve(void 0);Ut=()=>{l.then(Wt)}};var Wt=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(_){M(_)}var d=vn;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}nt=!1};function Gt(){this.s=this.s,this.C=this.C}Gt.prototype.s=!1,Gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};h.addEventListener("test",_,d),h.removeEventListener("test",_,d)}catch{}return l}();function Ot(l,d){if(xt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Ct){t:{try{ht(d.nodeName);var D=!0;break t}catch{}D=!1}D||(d=null)}}else _=="mouseover"?d=l.fromElement:_=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Rt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ot.aa.h.call(this)}}z(Ot,xt);var Rt={2:"touch",3:"pen",4:"mouse"};Ot.prototype.h=function(){Ot.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),qe=0;function qi(l,d,_,w,D){this.listener=l,this.proxy=null,this.src=d,this.type=_,this.capture=!!w,this.ha=D,this.key=++qe,this.da=this.fa=!1}function Qe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Wn(l){this.src=l,this.g={},this.h=0}Wn.prototype.add=function(l,d,_,w,D){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var J=k(l,d,w,D);return-1<J?(d=l[J],_||(d.fa=!1)):(d=new qi(d,this.src,F,!!w,D),d.fa=_,l.push(d)),d};function P(l,d){var _=d.type;if(_ in l.g){var w=l.g[_],D=Array.prototype.indexOf.call(w,d,void 0),F;(F=0<=D)&&Array.prototype.splice.call(w,D,1),F&&(Qe(d),l.g[_].length==0&&(delete l.g[_],l.h--))}}function k(l,d,_,w){for(var D=0;D<l.length;++D){var F=l[D];if(!F.da&&F.listener==d&&F.capture==!!_&&F.ha==w)return D}return-1}var U="closure_lm_"+(1e6*Math.random()|0),H={};function Z(l,d,_,w,D){if(Array.isArray(d)){for(var F=0;F<d.length;F++)Z(l,d[F],_,w,D);return null}return _=gt(_),l&&l[ue]?l.K(d,_,g(w)?!!w.capture:!1,D):X(l,d,_,!1,w,D)}function X(l,d,_,w,D,F){if(!d)throw Error("Invalid event type");var J=g(D)?!!D.capture:!!D,Yt=at(l);if(Yt||(l[U]=Yt=new Wn(l)),_=Yt.add(d,_,w,J,F),_.proxy)return _;if(w=et(),_.proxy=w,w.src=l,w.listener=_,l.addEventListener)ae||(D=J),D===void 0&&(D=!1),l.addEventListener(d.toString(),w,D);else if(l.attachEvent)l.attachEvent(K(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function et(){function l(_){return d.call(l.src,l.listener,_)}const d=ut;return l}function Q(l,d,_,w,D){if(Array.isArray(d))for(var F=0;F<d.length;F++)Q(l,d[F],_,w,D);else w=g(w)?!!w.capture:!!w,_=gt(_),l&&l[ue]?(l=l.i,d=String(d).toString(),d in l.g&&(F=l.g[d],_=k(F,_,w,D),-1<_&&(Qe(F[_]),Array.prototype.splice.call(F,_,1),F.length==0&&(delete l.g[d],l.h--)))):l&&(l=at(l))&&(d=l.g[d.toString()],l=-1,d&&(l=k(d,_,w,D)),(_=-1<l?d[l]:null)&&Y(_))}function Y(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[ue])P(d.i,l);else{var _=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(_,w,l.capture):d.detachEvent?d.detachEvent(K(_),w):d.addListener&&d.removeListener&&d.removeListener(w),(_=at(d))?(P(_,l),_.h==0&&(_.src=null,d[U]=null)):Qe(l)}}}function K(l){return l in H?H[l]:H[l]="on"+l}function ut(l,d){if(l.da)l=!0;else{d=new Ot(d,this);var _=l.listener,w=l.ha||l.src;l.fa&&Y(l),l=_.call(w,d)}return l}function at(l){return l=l[U],l instanceof Wn?l:null}var lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(l){return typeof l=="function"?l:(l[lt]||(l[lt]=function(d){return l.handleEvent(d)}),l[lt])}function dt(){Gt.call(this),this.i=new Wn(this),this.M=this,this.F=null}z(dt,Gt),dt.prototype[ue]=!0,dt.prototype.removeEventListener=function(l,d,_,w){Q(this,l,d,_,w)};function Pt(l,d){var _,w=l.F;if(w)for(_=[];w;w=w.F)_.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new xt(d,l);else if(d instanceof xt)d.target=d.target||l;else{var D=d;d=new xt(w,l),x(d,D)}if(D=!0,_)for(var F=_.length-1;0<=F;F--){var J=d.g=_[F];D=zt(J,w,!0,d)&&D}if(J=d.g=l,D=zt(J,w,!0,d)&&D,D=zt(J,w,!1,d)&&D,_)for(F=0;F<_.length;F++)J=d.g=_[F],D=zt(J,w,!1,d)&&D}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var _=l.g[d],w=0;w<_.length;w++)Qe(_[w]);delete l.g[d],l.h--}}this.F=null},dt.prototype.K=function(l,d,_,w){return this.i.add(String(l),d,!1,_,w)},dt.prototype.L=function(l,d,_,w){return this.i.add(String(l),d,!0,_,w)};function zt(l,d,_,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,F=0;F<d.length;++F){var J=d[F];if(J&&!J.da&&J.capture==_){var Yt=J.listener,Ee=J.ha||J.src;J.fa&&P(l.i,J),D=Yt.call(Ee,w)!==!1&&D}}return D&&!w.defaultPrevented}function ne(l,d,_){if(typeof l=="function")_&&(l=S(l,_));else if(l&&typeof l.handleEvent=="function")l=S(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:h.setTimeout(l,d||0)}function Me(l){l.g=ne(()=>{l.g=null,l.i&&(l.i=!1,Me(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class wn extends Gt{constructor(d,_){super(),this.m=d,this.l=_,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(l){Gt.call(this),this.h=l,this.g={}}z(kn,Gt);var Tn=[];function Kn(l){Ft(l.g,function(d,_){this.g.hasOwnProperty(_)&&Y(d)},l),l.g={}}kn.prototype.N=function(){kn.aa.N.call(this),Kn(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Te=h.JSON.stringify,Xe=h.JSON.parse,Mn=class{stringify(l){return h.JSON.stringify(l,void 0)}parse(l){return h.JSON.parse(l,void 0)}};function Er(){}Er.prototype.h=null;function No(l){return l.h||(l.h=l.i())}function br(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ts(){xt.call(this,"d")}z(Ts,xt);function Ir(){xt.call(this,"c")}z(Ir,xt);var Gn={},Bo=null;function Es(){return Bo=Bo||new dt}Gn.La="serverreachability";function Fo(l){xt.call(this,Gn.La,l)}z(Fo,xt);function Hi(l){const d=Es();Pt(d,new Fo(d))}Gn.STAT_EVENT="statevent";function bs(l,d){xt.call(this,Gn.STAT_EVENT,l),this.stat=d}z(bs,xt);function De(l){const d=Es();Pt(d,new bs(d,l))}Gn.Ma="timingevent";function Uo(l,d){xt.call(this,Gn.Ma,l),this.size=d}z(Uo,xt);function Zi(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){l()},d)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function cn(l,d,_,w,D,F){l.info(function(){if(l.g)if(F)for(var J="",Yt=F.split("&"),Ee=0;Ee<Yt.length;Ee++){var $t=Yt[Ee].split("=");if(1<$t.length){var ee=$t[0];$t=$t[1];var pe=ee.split("_");J=2<=pe.length&&pe[1]=="type"?J+(ee+"="+$t+"&"):J+(ee+"=redacted&")}}else J=null;else J=F;return"XMLHTTP REQ ("+w+") [attempt "+D+"]: "+d+`
`+_+`
`+J})}function ct(l,d,_,w,D,F,J){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+D+"]: "+d+`
`+_+`
`+F+" "+J})}function Qn(l,d,_,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+$o(l,_)+(w?" "+w:"")})}function zo(l,d){l.info(function(){return"TIMEOUT: "+d})}Wi.prototype.info=function(){};function $o(l,d){if(!l.g)return d;if(!d)return null;try{var _=JSON.parse(d);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var w=_[l];if(!(2>w.length)){var D=w[1];if(Array.isArray(D)&&!(1>D.length)){var F=D[0];if(F!="noop"&&F!="stop"&&F!="close")for(var J=1;J<D.length;J++)D[J]=""}}}}return Te(_)}catch{return d}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Is={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ps;function En(){}z(En,Er),En.prototype.g=function(){return new XMLHttpRequest},En.prototype.i=function(){return{}},Ps=new En;function bn(l,d,_,w){this.j=l,this.i=d,this.l=_,this.R=w||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jo}function jo(){this.i=null,this.g="",this.h=!1}var qo={},Pr={};function Ar(l,d,_){l.L=1,l.v=fn(ge(d)),l.m=_,l.P=!0,Cr(l,null)}function Cr(l,d){l.F=Date.now(),Cs(l),l.A=ge(l.v);var _=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Wo(_.i,"t",w),l.C=0,_=l.j.J,l.h=new jo,l.g=ta(l.j,_?d:null,!l.m),0<l.O&&(l.M=new wn(S(l.Y,l,l.g),l.O)),d=l.U,_=l.g,w=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(Tn[0]=D.toString()),D=Tn);for(var F=0;F<D.length;F++){var J=Z(_,D[F],w||d.handleEvent,!1,d.h||d);if(!J)break;d.g[J.key]=J}d=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Hi(),cn(l.i,l.u,l.A,l.l,l.R,l.m)}bn.prototype.ca=function(l){l=l.target;const d=this.M;d&&He(l)==3?d.j():this.Y(l)},bn.prototype.Y=function(l){try{if(l==this.g)t:{const pe=He(this.g);var d=this.g.Ba();const Ei=this.g.Z();if(!(3>pe)&&(pe!=3||this.g&&(this.h.h||this.g.oa()||jr(this.g)))){this.J||pe!=4||d==7||(d==8||0>=Ei?Hi(3):Hi(2)),xr(this);var _=this.g.Z();this.X=_;e:if(Ho(this)){var w=jr(this.g);l="";var D=w.length,F=He(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),Gi(this);var J="";break e}this.h.i=new h.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(F&&d==D-1)});w.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,ct(this.i,this.u,this.A,this.l,this.R,pe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Yt,Ee=this.g;if((Yt=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ft(Yt)){var $t=Yt;break e}}$t=null}if(_=$t)Qn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,_);else{this.o=!1,this.s=3,De(12),Xn(this),Gi(this);break t}}if(this.P){_=!0;let ye;for(;!this.J&&this.C<J.length;)if(ye=As(this,J),ye==Pr){pe==4&&(this.s=4,De(14),_=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(ye==qo){this.s=4,De(15),Qn(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else Qn(this.i,this.l,ye,null),Qi(this,ye);if(Ho(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||J.length!=0||this.h.h||(this.s=1,De(16),_=!1),this.o=this.o&&_,!_)Qn(this.i,this.l,J,"[Invalid Chunked Response]"),Xn(this),Gi(this);else if(0<J.length&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.ba&&!ee.M&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Vs(ee),ee.M=!0,De(11))}}else Qn(this.i,this.l,J,null),Qi(this,J);pe==4&&Xn(this),this.o&&!this.J&&(pe==4?Hr(this.j,this):(this.o=!1,Cs(this)))}else Nl(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),Xn(this),Gi(this)}}}catch{}finally{}};function Ho(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function As(l,d){var _=l.C,w=d.indexOf(`
`,_);return w==-1?Pr:(_=Number(d.substring(_,w)),isNaN(_)?qo:(w+=1,w+_>d.length?Pr:(d=d.slice(w,w+_),l.C=w+_,d)))}bn.prototype.cancel=function(){this.J=!0,Xn(this)};function Cs(l){l.S=Date.now()+l.I,Zo(l,l.I)}function Zo(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Zi(S(l.ba,l),d)}function xr(l){l.B&&(h.clearTimeout(l.B),l.B=null)}bn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(zo(this.i,this.A),this.L!=2&&(Hi(),De(17)),Xn(this),this.s=2,Gi(this)):Zo(this,this.S-l)};function Gi(l){l.j.G==0||l.J||Hr(l.j,l)}function Xn(l){xr(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Kn(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Qi(l,d){try{var _=l.j;if(_.G!=0&&(_.g==l||Vt(_.h,l))){if(!l.K&&Vt(_.h,l)&&_.G==3){try{var w=_.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var D=w;if(D[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)Bs(_),Ds(_);else break t;Os(_),De(18)}}else _.za=D[1],0<_.za-_.T&&37500>D[2]&&_.F&&_.v==0&&!_.C&&(_.C=Zi(S(_.Za,_),6e3));if(1>=_i(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ni(_,11)}else if((l.K||_.g==l)&&Bs(_),!ft(d))for(D=_.Da.g.parse(d),d=0;d<D.length;d++){let $t=D[d];if(_.T=$t[0],$t=$t[1],_.G==2)if($t[0]=="c"){_.K=$t[1],_.ia=$t[2];const ee=$t[3];ee!=null&&(_.la=ee,_.j.info("VER="+_.la));const pe=$t[4];pe!=null&&(_.Aa=pe,_.j.info("SVER="+_.Aa));const Ei=$t[5];Ei!=null&&typeof Ei=="number"&&0<Ei&&(w=1.5*Ei,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const ye=l.g;if(ye){const Us=ye.g?ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Us){var F=w.h;F.g||Us.indexOf("spdy")==-1&&Us.indexOf("quic")==-1&&Us.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ie(F,F.h),F.h=null))}if(w.D){const Vn=ye.g?ye.g.getResponseHeader("X-HTTP-Session-Id"):null;Vn&&(w.ya=Vn,Tt(w.I,w.D,Vn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var J=l;if(w.qa=Fs(w,w.J?w.ia:null,w.W),J.K){Yi(w.h,J);var Yt=J,Ee=w.L;Ee&&(Yt.I=Ee),Yt.B&&(xr(Yt),Cs(Yt)),w.g=J}else An(w);0<_.i.length&&Ti(_)}else $t[0]!="stop"&&$t[0]!="close"||ni(_,7);else _.G==3&&($t[0]=="stop"||$t[0]=="close"?$t[0]=="stop"?ni(_,7):Ms(_):$t[0]!="noop"&&_.l&&_.l.ta($t),_.v=0)}}Hi(4)}catch{}}var Xi=class{constructor(l,d){this.g=l,this.map=d}};function Sr(l){this.l=l||10,h.PerformanceNavigationTiming?(l=h.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rr(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _i(l){return l.h?1:l.g?l.g.size:0}function Vt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ie(l,d){l.g?l.g.add(d):l.h=d}function Yi(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Sr.prototype.cancel=function(){if(this.i=Yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Yn(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const _ of l.g.values())d=d.concat(_.D);return d}return q(l.i)}function gi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(p(l)){for(var d=[],_=l.length,w=0;w<_;w++)d.push(l[w]);return d}d=[],_=0;for(w in l)d[_++]=l[w];return d}function Lr(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(p(l)||typeof l=="string"){var d=[];l=l.length;for(var _=0;_<l;_++)d.push(_);return d}d=[],_=0;for(const w in l)d[_++]=w;return d}}}function At(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(p(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var _=Lr(l),w=gi(l),D=w.length,F=0;F<D;F++)d.call(void 0,w[F],_&&_[F],l)}var ce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kr(l,d){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var w=l[_].indexOf("="),D=null;if(0<=w){var F=l[_].substring(0,w);D=l[_].substring(w+1)}else F=l[_];d(F,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function hn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof hn){this.h=l.h,xs(this,l.j),this.o=l.o,this.g=l.g,Jn(this,l.s),this.l=l.l;var d=l.i,_=new ti;_.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),Dn(this,_),this.m=l.m}else l&&(d=String(l).match(ce))?(this.h=!1,xs(this,d[1]||"",!0),this.o=In(d[2]||""),this.g=In(d[3]||"",!0),Jn(this,d[4]),this.l=In(d[5]||"",!0),Dn(this,d[6]||"",!0),this.m=In(d[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}hn.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Pn(d,yi,!0),":");var _=this.g;return(_||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Pn(d,yi,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Pn(_,_.charAt(0)=="/"?Or:Dr,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Pn(_,Vr)),l.join("")};function ge(l){return new hn(l)}function xs(l,d,_){l.j=_?In(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Jn(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Dn(l,d,_){d instanceof ti?(l.i=d,dn(l.i,l.h)):(_||(d=Pn(d,Ss)),l.i=new ti(d,l.h))}function Tt(l,d,_){l.i.set(d,_)}function fn(l){return Tt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function In(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Pn(l,d,_){return typeof l=="string"?(l=encodeURI(l).replace(d,Mr),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Mr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var yi=/[#\/\?@]/g,Dr=/[#\?:]/g,Or=/[#\?]/g,Ss=/[#\?@]/g,Vr=/#/g;function ti(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function sn(l){l.g||(l.g=new Map,l.h=0,l.i&&kr(l.i,function(d,_){l.add(decodeURIComponent(d.replace(/\+/g," ")),_)}))}n=ti.prototype,n.add=function(l,d){sn(this),this.i=null,l=yt(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(d),this.h+=1,this};function Nr(l,d){sn(l),d=yt(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Rs(l,d){return sn(l),d=yt(l,d),l.g.has(d)}n.forEach=function(l,d){sn(this),this.g.forEach(function(_,w){_.forEach(function(D){l.call(d,D,w,this)},this)},this)},n.na=function(){sn(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),_=[];for(let w=0;w<d.length;w++){const D=l[w];for(let F=0;F<D.length;F++)_.push(d[w])}return _},n.V=function(l){sn(this);let d=[];if(typeof l=="string")Rs(this,l)&&(d=d.concat(this.g.get(yt(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)d=d.concat(l[_])}return d},n.set=function(l,d){return sn(this),this.i=null,l=yt(this,l),Rs(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},n.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Wo(l,d,_){Nr(l,d),0<_.length&&(l.i=null,l.g.set(yt(l,d),q(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var _=0;_<d.length;_++){var w=d[_];const F=encodeURIComponent(String(w)),J=this.V(w);for(w=0;w<J.length;w++){var D=F;J[w]!==""&&(D+="="+encodeURIComponent(String(J[w]))),l.push(D)}}return this.i=l.join("&")};function yt(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function dn(l,d){d&&!l.j&&(sn(l),l.i=null,l.g.forEach(function(_,w){var D=w.toLowerCase();w!=D&&(Nr(this,w),Wo(this,D,_))},l)),l.j=d}function te(l,d){const _=new Wi;if(h.Image){const w=new Image;w.onload=N(pn,_,"TestLoadImage: loaded",!0,d,w),w.onerror=N(pn,_,"TestLoadImage: error",!1,d,w),w.onabort=N(pn,_,"TestLoadImage: abort",!1,d,w),w.ontimeout=N(pn,_,"TestLoadImage: timeout",!1,d,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function Ko(l,d){const _=new Wi,w=new AbortController,D=setTimeout(()=>{w.abort(),pn(_,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(F=>{clearTimeout(D),F.ok?pn(_,"TestPingServer: ok",!0,d):pn(_,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),pn(_,"TestPingServer: error",!1,d)})}function pn(l,d,_,w,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),w(_)}catch{}}function Br(){this.g=new Mn}function Fr(l,d,_){const w=_||"";try{At(l,function(D,F){let J=D;g(D)&&(J=Te(D)),d.push(w+F+"="+encodeURIComponent(J))})}catch(D){throw d.push(w+"type="+encodeURIComponent("_badmap")),D}}function mn(l){this.l=l.Ub||null,this.j=l.eb||!1}z(mn,Er),mn.prototype.g=function(){return new vi(this.l,this.j)},mn.prototype.i=function(l){return function(){return l}}({});function vi(l,d){dt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(vi,dt),n=vi.prototype,n.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,rn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||h).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,de(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wi(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function wi(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?de(this):rn(this),this.readyState==3&&wi(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,de(this))},n.Qa=function(l){this.g&&(this.response=l,de(this))},n.ga=function(){this.g&&de(this)};function de(l){l.readyState=4,l.l=null,l.j=null,l.v=null,rn(l)}n.setRequestHeader=function(l,d){this.u.append(l,d)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var _=d.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=d.next();return l.join(`\r
`)};function rn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ur(l){let d="";return Ft(l,function(_,w){d+=w,d+=":",d+=_,d+=`\r
`}),d}function Ls(l,d,_){t:{for(w in _){var w=!1;break t}w=!0}w||(_=Ur(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):Tt(l,d,_))}function he(l){dt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(he,dt);var Go=/^https?$/i,zr=["POST","PUT"];n=he.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,d,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ps.g(),this.v=this.o?No(this.o):No(Ps),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(F){Qo(this,F);return}if(l=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var D in w)_.set(D,w[D]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())_.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),D=h.FormData&&l instanceof h.FormData,!(0<=Array.prototype.indexOf.call(zr,d,void 0))||w||D||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,J]of _)this.g.setRequestHeader(F,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ye(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Qo(this,F)}};function Qo(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,$r(l),ks(l)}function $r(l){l.A||(l.A=!0,Pt(l,"complete"),Pt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Pt(this,"complete"),Pt(this,"abort"),ks(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),he.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Mt(this):this.bb())},n.bb=function(){Mt(this)};function Mt(l){if(l.h&&typeof c<"u"&&(!l.v[1]||He(l)!=4||l.Z()!=2)){if(l.u&&He(l)==4)ne(l.Ea,0,l);else if(Pt(l,"readystatechange"),He(l)==4){l.h=!1;try{const J=l.Z();t:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break t;default:d=!1}var _;if(!(_=d)){var w;if(w=J===0){var D=String(l.D).match(ce)[1]||null;!D&&h.self&&h.self.location&&(D=h.self.location.protocol.slice(0,-1)),w=!Go.test(D?D.toLowerCase():"")}_=w}if(_)Pt(l,"complete"),Pt(l,"success");else{l.m=6;try{var F=2<He(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",$r(l)}}finally{ks(l)}}}}function ks(l,d){if(l.g){Ye(l);const _=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||Pt(l,"ready");try{_.onreadystatechange=w}catch{}}}function Ye(l){l.I&&(h.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function He(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<He(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Xe(d)}};function jr(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Nl(l){const d={};l=(l.g&&2<=He(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(ft(l[w]))continue;var _=C(l[w]);const D=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=d[D]||[];d[D]=F,F.push(_)}R(d,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(l,d,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||d}function Xo(l){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,l),this.cb=ei("retryDelaySeedMs",1e4,l),this.Wa=ei("forwardChannelMaxRetries",2,l),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Sr(l&&l.concurrentRequestLimit),this.Da=new Br,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xo.prototype,n.la=8,n.G=1,n.connect=function(l,d,_,w){De(0),this.W=l,this.H=d||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Fs(this,null,this.W),Ti(this)};function Ms(l){if(Yo(l),l.G==3){var d=l.U++,_=ge(l.I);if(Tt(_,"SID",l.K),Tt(_,"RID",d),Tt(_,"TYPE","terminate"),Ji(l,_),d=new bn(l,l.j,d),d.L=2,d.v=fn(ge(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(d.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=d.v,_=!0),_||(d.g=ta(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Cs(d)}Jo(l)}function Ds(l){l.g&&(Vs(l),l.g.cancel(),l.g=null)}function Yo(l){Ds(l),l.u&&(h.clearTimeout(l.u),l.u=null),Bs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&h.clearTimeout(l.s),l.s=null)}function Ti(l){if(!Rr(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ut||_t(),nt||(Ut(),nt=!0),Fe.add(d,l),l.B=0}}function Bl(l,d){return _i(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Zi(S(l.Ga,l,d),Zr(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new bn(this,this.j,l);let F=this.o;if(this.S&&(F?(F=E(F),x(F,this.S)):F=this.S),this.m!==null||this.O||(D.H=F,F=null),this.P)t:{for(var d=0,_=0;_<this.i.length;_++){e:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=_;break t}if(d===4096||_===this.i.length-1){d=_+1;break t}}d=1e3}else d=1e3;d=qr(this,D,d),_=ge(this.I),Tt(_,"RID",l),Tt(_,"CVER",22),this.D&&Tt(_,"X-HTTP-Session-Id",this.D),Ji(this,_),F&&(this.O?d="headers="+encodeURIComponent(String(Ur(F)))+"&"+d:this.m&&Ls(_,this.m,F)),ie(this.h,D),this.Ua&&Tt(_,"TYPE","init"),this.P?(Tt(_,"$req",d),Tt(_,"SID","null"),D.T=!0,Ar(D,_,null)):Ar(D,_,d),this.G=2}}else this.G==3&&(l?on(this,l):this.i.length==0||Rr(this.h)||on(this))};function on(l,d){var _;d?_=d.l:_=l.U++;const w=ge(l.I);Tt(w,"SID",l.K),Tt(w,"RID",_),Tt(w,"AID",l.T),Ji(l,w),l.m&&l.o&&Ls(w,l.m,l.o),_=new bn(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),d&&(l.i=d.D.concat(l.i)),d=qr(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ie(l.h,_),Ar(_,w,d)}function Ji(l,d){l.H&&Ft(l.H,function(_,w){Tt(d,w,_)}),l.l&&At({},function(_,w){Tt(d,w,_)})}function qr(l,d,_){_=Math.min(l.i.length,_);var w=l.l?S(l.l.Na,l.l,l):null;t:{var D=l.i;let F=-1;for(;;){const J=["count="+_];F==-1?0<_?(F=D[0].g,J.push("ofs="+F)):F=0:J.push("ofs="+F);let Yt=!0;for(let Ee=0;Ee<_;Ee++){let $t=D[Ee].g;const ee=D[Ee].map;if($t-=F,0>$t)F=Math.max(0,D[Ee].g-100),Yt=!1;else try{Fr(ee,J,"req"+$t+"_")}catch{w&&w(ee)}}if(Yt){w=J.join("&");break t}}}return l=l.i.splice(0,_),d.D=l,w}function An(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ut||_t(),nt||(Ut(),nt=!0),Fe.add(d,l),l.v=0}}function Os(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Zi(S(l.Fa,l),Zr(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Ns(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Zi(S(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Ds(this),Ns(this))};function Vs(l){l.A!=null&&(h.clearTimeout(l.A),l.A=null)}function Ns(l){l.g=new bn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=ge(l.qa);Tt(d,"RID","rpc"),Tt(d,"SID",l.K),Tt(d,"AID",l.T),Tt(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Tt(d,"TO",l.ja),Tt(d,"TYPE","xmlhttp"),Ji(l,d),l.m&&l.o&&Ls(d,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=fn(ge(d)),_.m=null,_.P=!0,Cr(_,l)}n.Za=function(){this.C!=null&&(this.C=null,Ds(this),Os(this),De(19))};function Bs(l){l.C!=null&&(h.clearTimeout(l.C),l.C=null)}function Hr(l,d){var _=null;if(l.g==d){Bs(l),Vs(l),l.g=null;var w=2}else if(Vt(l.h,d))_=d.D,Yi(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){_=d.m?d.m.length:0,d=Date.now()-d.F;var D=l.B;w=Es(),Pt(w,new Uo(w,_)),Ti(l)}else An(l);else if(D=d.s,D==3||D==0&&0<d.X||!(w==1&&Bl(l,d)||w==2&&Os(l)))switch(_&&0<_.length&&(d=l.h,d.i=d.i.concat(_)),D){case 1:ni(l,5);break;case 4:ni(l,10);break;case 3:ni(l,6);break;default:ni(l,2)}}}function Zr(l,d){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*d}function ni(l,d){if(l.j.info("Error code "+d),d==2){var _=S(l.fb,l),w=l.Xa;const D=!w;w=new hn(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||xs(w,"https"),fn(w),D?te(w.toString(),_):Ko(w.toString(),_)}else De(2);l.G=0,l.l&&l.l.sa(d),Jo(l),Yo(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Jo(l){if(l.G=0,l.ka=[],l.l){const d=Yn(l.h);(d.length!=0||l.i.length!=0)&&($(l.ka,d),$(l.ka,l.i),l.h.i.length=0,q(l.i),l.i.length=0),l.l.ra()}}function Fs(l,d,_){var w=_ instanceof hn?ge(_):new hn(_);if(w.g!="")d&&(w.g=d+"."+w.g),Jn(w,w.s);else{var D=h.location;w=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var F=new hn(null);w&&xs(F,w),d&&(F.g=d),D&&Jn(F,D),_&&(F.l=_),w=F}return _=l.D,d=l.ya,_&&d&&Tt(w,_,d),Tt(w,"VER",l.la),Ji(l,w),w}function ta(l,d,_){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new he(new mn({eb:_})):new he(l.pa),d.Ha(l.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wr(){}n=Wr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ts(){}ts.prototype.g=function(l,d){return new Se(l,d)};function Se(l,d){dt.call(this),this.g=new Xo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ft(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ft(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new _n(this)}z(Se,dt),Se.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Se.prototype.close=function(){Ms(this.g)},Se.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=Te(l),l=_);d.i.push(new Xi(d.Ya++,l)),d.G==3&&Ti(d)},Se.prototype.N=function(){this.g.l=null,delete this.j,Ms(this.g),delete this.g,Se.aa.N.call(this)};function On(l){Ts.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){t:{for(const _ in d){l=_;break t}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}z(On,Ts);function ea(){Ir.call(this),this.status=1}z(ea,Ir);function _n(l){this.g=l}z(_n,Wr),_n.prototype.ua=function(){Pt(this.g,"a")},_n.prototype.ta=function(l){Pt(this.g,new On(l))},_n.prototype.sa=function(l){Pt(this.g,new ea)},_n.prototype.ra=function(){Pt(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,Se.prototype.send=Se.prototype.o,Se.prototype.open=Se.prototype.m,Se.prototype.close=Se.prototype.close,pp=function(){return new ts},dp=function(){return Es()},fp=Gn,Tu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,Ra=Ki,Is.COMPLETE="complete",hp=Is,br.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",dt.prototype.listen=dt.prototype.K,io=br,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,cp=he}).apply(typeof wa<"u"?wa:typeof self<"u"?self:typeof window<"u"?window:{});const tf="@firebase/firestore",ef="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yr="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new ip("@firebase/firestore");function Ks(){return ps.logLevel}function rt(n,...t){if(ps.logLevel<=qt.DEBUG){const e=t.map(cc);ps.debug(`Firestore (${yr}): ${n}`,...e)}}function fi(n,...t){if(ps.logLevel<=qt.ERROR){const e=t.map(cc);ps.error(`Firestore (${yr}): ${n}`,...e)}}function lr(n,...t){if(ps.logLevel<=qt.WARN){const e=t.map(cc);ps.warn(`Firestore (${yr}): ${n}`,...e)}}function cc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n="Unexpected state"){const t=`FIRESTORE (${yr}) INTERNAL ASSERTION FAILED: `+n;throw fi(t),new Error(t)}function Xt(n,t){n||wt()}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends gr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ow{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ze.UNAUTHENTICATED))}shutdown(){}}class Vw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Nw{constructor(t){this.t=t,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Xt(this.o===void 0);let s=this.i;const r=p=>this.i!==s?(s=this.i,e(p)):Promise.resolve();let a=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Mi,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const p=a;t.enqueueRetryable(async()=>{await p.promise,await r(this.currentUser)})},h=p=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mi)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(s=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xt(typeof s.accessToken=="string"),new mp(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Xt(t===null||typeof t=="string"),new ze(t)}}class Bw{constructor(t,e,s){this.l=t,this.h=e,this.P=s,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Fw{constructor(t,e,s){this.l=t,this.h=e,this.P=s}getToken(){return Promise.resolve(new Bw(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nf{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uw{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,yw(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){Xt(this.o===void 0);const s=a=>{a.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>s(a))};const r=a=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new nf(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Xt(typeof e.token=="string"),this.R=e.token,new nf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=zw(40);for(let a=0;a<r.length;++a)s.length<20&&r[a]<e&&(s+=t.charAt(r[a]%62))}return s}}function St(n,t){return n<t?-1:n>t?1:0}function Eu(n,t){let e=0;for(;e<n.length&&e<t.length;){const s=n.codePointAt(e),r=t.codePointAt(e);if(s!==r){if(s<128&&r<128)return St(s,r);{const a=_p(),c=$w(a.encode(sf(n,e)),a.encode(sf(t,e)));return c!==0?c:St(s,r)}}e+=s>65535?2:1}return St(n.length,t.length)}function sf(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function $w(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return St(n[e],t[e]);return St(n.length,t.length)}function ur(n,t,e){return n.length===t.length&&n.every((s,r)=>e(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=-62135596800,of=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(t){return Ce.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*of);return new Ce(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new pt(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new pt(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<rf)throw new pt(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/of}_compareTo(t){return this.seconds===t.seconds?St(this.nanoseconds,t.nanoseconds):St(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-rf;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new Ce(0,0))}static max(){return new bt(new Ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="__name__";class Fn{constructor(t,e,s){e===void 0?e=0:e>t.length&&wt(),s===void 0?s=t.length-e:s>t.length-e&&wt(),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Fn.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Fn?t.forEach(s=>{e.push(s)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let r=0;r<s;r++){const a=Fn.compareSegments(t.get(r),e.get(r));if(a!==0)return a}return St(t.length,e.length)}static compareSegments(t,e){const s=Fn.isNumericId(t),r=Fn.isNumericId(e);return s&&!r?-1:!s&&r?1:s&&r?Fn.extractNumericId(t).compare(Fn.extractNumericId(e)):Eu(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ki.fromString(t.substring(4,t.length-2))}}class fe extends Fn{construct(t,e,s){return new fe(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new pt(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(r=>r.length>0))}return new fe(e)}static emptyPath(){return new fe([])}}const jw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ne extends Fn{construct(t,e,s){return new Ne(t,e,s)}static isValidIdentifier(t){return jw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ne.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===af}static keyField(){return new Ne([af])}static fromServerFormat(t){const e=[];let s="",r=0;const a=()=>{if(s.length===0)throw new pt(G.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new pt(G.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pt(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(s+=h,r++):(a(),r++)}if(a(),c)throw new pt(G.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ne(e)}static emptyPath(){return new Ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(fe.fromString(t))}static fromName(t){return new mt(fe.fromString(t).popFirst(5))}static empty(){return new mt(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return fe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new fe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=-1;function qw(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=bt.fromTimestamp(s===1e9?new Ce(e+1,0):new Ce(e,s));return new Ni(r,mt.empty(),t)}function Hw(n){return new Ni(n.readTime,n.key,Po)}class Ni{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new Ni(bt.min(),mt.empty(),Po)}static max(){return new Ni(bt.max(),mt.empty(),Po)}}function Zw(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=mt.comparator(n.documentKey,t.documentKey),e!==0?e:St(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vr(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==Ww)throw n;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new j((s,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(s,r)},this.catchCallback=a=>{this.wrapFailure(e,a).next(s,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof j?e:j.resolve(e)}catch(e){return j.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):j.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):j.reject(e)}static resolve(t){return new j((e,s)=>{e(t)})}static reject(t){return new j((e,s)=>{s(t)})}static waitFor(t){return new j((e,s)=>{let r=0,a=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&e()},p=>s(p))}),c=!0,a===r&&e()})}static or(t){let e=j.resolve(!1);for(const s of t)e=e.next(r=>r?j.resolve(r):s());return e}static forEach(t,e){const s=[];return t.forEach((r,a)=>{s.push(e.call(this,r,a))}),this.waitFor(s)}static mapArray(t,e){return new j((s,r)=>{const a=t.length,c=new Array(a);let h=0;for(let p=0;p<a;p++){const g=p;e(t[g]).next(v=>{c[g]=v,++h,h===a&&s(c)},v=>r(v))}})}static doWhile(t,e){return new j((s,r)=>{const a=()=>{t()===!0?e().next(()=>{a()},r):s()};a()})}}function Gw(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function wr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.oe(s),this._e=s=>e.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Tl.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=-1;function El(n){return n==null}function Xa(n){return n===0&&1/n==-1/0}function Qw(n){return typeof n=="number"&&Number.isInteger(n)&&!Xa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="";function Xw(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=lf(t)),t=Yw(n.get(e),t);return lf(t)}function Yw(n,t){let e=t;const s=n.length;for(let r=0;r<s;r++){const a=n.charAt(r);switch(a){case"\0":e+="";break;case yp:e+="";break;default:e+=a}}return e}function lf(n){return n+yp+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function gs(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function vp(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,e){this.comparator=t,this.root=e||Oe.EMPTY}insert(t,e){return new me(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Oe.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Oe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return e+s.left.size;r<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,s)=>(t(e,s),!1))}toString(){const t=[];return this.inorderTraversal((e,s)=>(t.push(`${e}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ta(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ta(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ta(this.root,t,this.comparator,!0)}}class Ta{constructor(t,e,s,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?s(t.key,e):1,e&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Oe{constructor(t,e,s,r,a){this.key=t,this.value=e,this.color=s??Oe.RED,this.left=r??Oe.EMPTY,this.right=a??Oe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,r,a){return new Oe(t??this.key,e??this.value,s??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let r=this;const a=s(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,e,s),null):a===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Oe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Oe.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Oe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Oe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const t=this.left.check();if(t!==this.right.check())throw wt();return t+(this.isRed()?0:1)}}Oe.EMPTY=null,Oe.RED=!0,Oe.BLACK=!1;Oe.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(t,e,s,r,a){return this}insert(t,e,s){return new Oe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,s)=>(t(e),!1))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new cf(this.data.getIterator())}getIteratorFrom(t){return new cf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(s=>{e=e.add(s)}),e}isEqual(t){if(!(t instanceof xe)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=s.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new xe(this.comparator);return e.data=t,e}}class cf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.fields=t,t.sort(Ne.comparator)}static empty(){return new Sn([])}unionWith(t){let e=new xe(Ne.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new Sn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ur(this.fields,t.fields,(e,s)=>e.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new wp("Invalid base64 string: "+a):a}}(t);return new Be(e)}static fromUint8Array(t){const e=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(t);return new Be(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return St(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const Jw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(n){if(Xt(!!n),typeof n=="string"){let t=0;const e=Jw.exec(n);if(Xt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fi(n){return typeof n=="string"?Be.fromBase64String(n):Be.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="server_timestamp",Ep="__type__",bp="__previous_value__",Ip="__local_write_time__";function fc(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ep])===null||e===void 0?void 0:e.stringValue)===Tp}function bl(n){const t=n.mapValue.fields[bp];return fc(t)?bl(t):t}function Ao(n){const t=Bi(n.mapValue.fields[Ip].timestampValue);return new Ce(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(t,e,s,r,a,c,h,p,g){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g}}const Ya="(default)";class Co{constructor(t,e){this.projectId=t,this.database=e||Ya}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===Ya}isEqual(t){return t instanceof Co&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="__type__",eT="__max__",Ea={mapValue:{}},Ap="__vector__",Ja="value";function Ui(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fc(n)?4:iT(n)?9007199254740991:nT(n)?10:11:wt()}function qn(n,t){if(n===t)return!0;const e=Ui(n);if(e!==Ui(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ao(n).isEqual(Ao(t));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Bi(r.timestampValue),h=Bi(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,a){return Fi(r.bytesValue).isEqual(Fi(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,a){return ve(r.geoPointValue.latitude)===ve(a.geoPointValue.latitude)&&ve(r.geoPointValue.longitude)===ve(a.geoPointValue.longitude)}(n,t);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ve(r.integerValue)===ve(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=ve(r.doubleValue),h=ve(a.doubleValue);return c===h?Xa(c)===Xa(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return ur(n.arrayValue.values||[],t.arrayValue.values||[],qn);case 10:case 11:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(uf(c)!==uf(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!qn(c[p],h[p])))return!1;return!0}(n,t);default:return wt()}}function xo(n,t){return(n.values||[]).find(e=>qn(e,t))!==void 0}function cr(n,t){if(n===t)return 0;const e=Ui(n),s=Ui(t);if(e!==s)return St(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,t.booleanValue);case 2:return function(a,c){const h=ve(a.integerValue||a.doubleValue),p=ve(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,t);case 3:return hf(n.timestampValue,t.timestampValue);case 4:return hf(Ao(n),Ao(t));case 5:return Eu(n.stringValue,t.stringValue);case 6:return function(a,c){const h=Fi(a),p=Fi(c);return h.compareTo(p)}(n.bytesValue,t.bytesValue);case 7:return function(a,c){const h=a.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const v=St(h[g],p[g]);if(v!==0)return v}return St(h.length,p.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,c){const h=St(ve(a.latitude),ve(c.latitude));return h!==0?h:St(ve(a.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return ff(n.arrayValue,t.arrayValue);case 10:return function(a,c){var h,p,g,v;const T=a.fields||{},S=c.fields||{},N=(h=T[Ja])===null||h===void 0?void 0:h.arrayValue,z=(p=S[Ja])===null||p===void 0?void 0:p.arrayValue,q=St(((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0,((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0);return q!==0?q:ff(N,z)}(n.mapValue,t.mapValue);case 11:return function(a,c){if(a===Ea.mapValue&&c===Ea.mapValue)return 0;if(a===Ea.mapValue)return 1;if(c===Ea.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=Eu(p[T],v[T]);if(S!==0)return S;const N=cr(h[p[T]],g[v[T]]);if(N!==0)return N}return St(p.length,v.length)}(n.mapValue,t.mapValue);default:throw wt()}}function hf(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return St(n,t);const e=Bi(n),s=Bi(t),r=St(e.seconds,s.seconds);return r!==0?r:St(e.nanos,s.nanos)}function ff(n,t){const e=n.values||[],s=t.values||[];for(let r=0;r<e.length&&r<s.length;++r){const a=cr(e[r],s[r]);if(a)return a}return St(e.length,s.length)}function hr(n){return bu(n)}function bu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const s=Bi(e);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Fi(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return mt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let s="[",r=!0;for(const a of e.values||[])r?r=!1:s+=",",s+=bu(a);return s+"]"}(n.arrayValue):"mapValue"in n?function(e){const s=Object.keys(e.fields||{}).sort();let r="{",a=!0;for(const c of s)a?a=!1:r+=",",r+=`${c}:${bu(e.fields[c])}`;return r+"}"}(n.mapValue):wt()}function La(n){switch(Ui(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bl(n);return t?16+La(t):16;case 5:return 2*n.stringValue.length;case 6:return Fi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,a)=>r+La(a),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return gs(s.fields,(a,c)=>{r+=a.length+La(c)}),r}(n.mapValue);default:throw wt()}}function Iu(n){return!!n&&"integerValue"in n}function dc(n){return!!n&&"arrayValue"in n}function df(n){return!!n&&"nullValue"in n}function pf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ka(n){return!!n&&"mapValue"in n}function nT(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Pp])===null||e===void 0?void 0:e.stringValue)===Ap}function ho(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return gs(n.mapValue.fields,(e,s)=>t.mapValue.fields[e]=ho(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ho(n.arrayValue.values[e]);return t}return Object.assign({},n)}function iT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.value=t}static empty(){return new yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!ka(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ho(e)}setAll(t){let e=Ne.emptyPath(),s={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,s,r),s={},r=[],e=h.popLast()}c?s[h.lastSegment()]=ho(c):r.push(h.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,s,r)}delete(t){const e=this.field(t.popLast());ka(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=e.mapValue.fields[t.get(s)];ka(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,s){gs(e,(r,a)=>t[r]=a);for(const r of s)delete t[r]}clone(){return new yn(ho(this.value))}}function Cp(n){const t=[];return gs(n.fields,(e,s)=>{const r=new Ne([e]);if(ka(s)){const a=Cp(s.mapValue).fields;if(a.length===0)t.push(r);else for(const c of a)t.push(r.child(c))}else t.push(r)}),new Sn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,e,s,r,a,c,h){this.key=t,this.documentType=e,this.version=s,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(t){return new $e(t,0,bt.min(),bt.min(),bt.min(),yn.empty(),0)}static newFoundDocument(t,e,s,r){return new $e(t,1,e,bt.min(),s,r,0)}static newNoDocument(t,e){return new $e(t,2,e,bt.min(),bt.min(),yn.empty(),0)}static newUnknownDocument(t,e){return new $e(t,3,e,bt.min(),bt.min(),yn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t,e){this.position=t,this.inclusive=e}}function mf(n,t,e){let s=0;for(let r=0;r<n.position.length;r++){const a=t[r],c=n.position[r];if(a.field.isKeyField()?s=mt.comparator(mt.fromName(c.referenceValue),e.key):s=cr(c,e.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function _f(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!qn(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,e="asc"){this.field=t,this.dir=e}}function sT(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{}class Ae extends xp{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new oT(t,e,s):e==="array-contains"?new uT(t,s):e==="in"?new cT(t,s):e==="not-in"?new hT(t,s):e==="array-contains-any"?new fT(t,s):new Ae(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new aT(t,s):new lT(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(cr(e,this.value)):e!==null&&Ui(this.value)===Ui(e)&&this.matchesComparison(cr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends xp{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new Hn(t,e)}matches(t){return Sp(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Sp(n){return n.op==="and"}function Rp(n){return rT(n)&&Sp(n)}function rT(n){for(const t of n.filters)if(t instanceof Hn)return!1;return!0}function Pu(n){if(n instanceof Ae)return n.field.canonicalString()+n.op.toString()+hr(n.value);if(Rp(n))return n.filters.map(t=>Pu(t)).join(",");{const t=n.filters.map(e=>Pu(e)).join(",");return`${n.op}(${t})`}}function Lp(n,t){return n instanceof Ae?function(s,r){return r instanceof Ae&&s.op===r.op&&s.field.isEqual(r.field)&&qn(s.value,r.value)}(n,t):n instanceof Hn?function(s,r){return r instanceof Hn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((a,c,h)=>a&&Lp(c,r.filters[h]),!0):!1}(n,t):void wt()}function kp(n){return n instanceof Ae?function(e){return`${e.field.canonicalString()} ${e.op} ${hr(e.value)}`}(n):n instanceof Hn?function(e){return e.op.toString()+" {"+e.getFilters().map(kp).join(" ,")+"}"}(n):"Filter"}class oT extends Ae{constructor(t,e,s){super(t,e,s),this.key=mt.fromName(s.referenceValue)}matches(t){const e=mt.comparator(t.key,this.key);return this.matchesComparison(e)}}class aT extends Ae{constructor(t,e){super(t,"in",e),this.keys=Mp("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class lT extends Ae{constructor(t,e){super(t,"not-in",e),this.keys=Mp("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Mp(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(s=>mt.fromName(s.referenceValue))}class uT extends Ae{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return dc(e)&&xo(e.arrayValue,this.value)}}class cT extends Ae{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&xo(this.value.arrayValue,e)}}class hT extends Ae{constructor(t,e){super(t,"not-in",e)}matches(t){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!xo(this.value.arrayValue,e)}}class fT extends Ae{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!dc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(s=>xo(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,e=null,s=[],r=[],a=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.le=null}}function gf(n,t=null,e=[],s=[],r=null,a=null,c=null){return new dT(n,t,e,s,r,a,c)}function pc(n){const t=It(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(s=>Pu(s)).join(","),e+="|ob:",e+=t.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),El(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(s=>hr(s)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(s=>hr(s)).join(",")),t.le=e}return t.le}function mc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!sT(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Lp(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!_f(n.startAt,t.startAt)&&_f(n.endAt,t.endAt)}function Au(n){return mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,e=null,s=[],r=[],a=null,c="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function pT(n,t,e,s,r,a,c,h){return new Il(n,t,e,s,r,a,c,h)}function Dp(n){return new Il(n)}function yf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mT(n){return n.collectionGroup!==null}function fo(n){const t=It(n);if(t.he===null){t.he=[];const e=new Set;for(const a of t.explicitOrderBy)t.he.push(a),e.add(a.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new xe(Ne.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.he.push(new el(a,s))}),e.has(Ne.keyField().canonicalString())||t.he.push(new el(Ne.keyField(),s))}return t.he}function $n(n){const t=It(n);return t.Pe||(t.Pe=_T(t,fo(n))),t.Pe}function _T(n,t){if(n.limitType==="F")return gf(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new el(r.field,a)});const e=n.endAt?new tl(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new tl(n.startAt.position,n.startAt.inclusive):null;return gf(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function Cu(n,t,e){return new Il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Pl(n,t){return mc($n(n),$n(t))&&n.limitType===t.limitType}function Op(n){return`${pc($n(n))}|lt:${n.limitType}`}function Gs(n){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(r=>kp(r)).join(", ")}]`),El(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>hr(r)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>hr(r)).join(",")),`Target(${s})`}($n(n))}; limitType=${n.limitType})`}function Al(n,t){return t.isFoundDocument()&&function(s,r){const a=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):mt.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(n,t)&&function(s,r){for(const a of fo(s))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(n,t)&&function(s,r){for(const a of s.filters)if(!a.matches(r))return!1;return!0}(n,t)&&function(s,r){return!(s.startAt&&!function(c,h,p){const g=mf(c,h,p);return c.inclusive?g<=0:g<0}(s.startAt,fo(s),r)||s.endAt&&!function(c,h,p){const g=mf(c,h,p);return c.inclusive?g>=0:g>0}(s.endAt,fo(s),r))}(n,t)}function gT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vp(n){return(t,e)=>{let s=!1;for(const r of fo(n)){const a=yT(r,t,e);if(a!==0)return a;s=s||r.field.isKeyField()}return 0}}function yT(n,t,e){const s=n.field.isKeyField()?mt.comparator(t.key,e.key):function(a,c,h){const p=c.data.field(a),g=h.data.field(a);return p!==null&&g!==null?cr(p,g):wt()}(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[r,a]of s)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[e]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){gs(this.inner,(e,s)=>{for(const[r,a]of s)t(r,a)})}isEmpty(){return vp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=new me(mt.comparator);function di(){return vT}const Np=new me(mt.comparator);function so(...n){let t=Np;for(const e of n)t=t.insert(e.key,e);return t}function Bp(n){let t=Np;return n.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function us(){return po()}function Fp(){return po()}function po(){return new ys(n=>n.toString(),(n,t)=>n.isEqual(t))}const wT=new me(mt.comparator),TT=new xe(mt.comparator);function Bt(...n){let t=TT;for(const e of n)t=t.add(e);return t}const ET=new xe(St);function bT(){return ET}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xa(t)?"-0":t}}function Up(n){return{integerValue:""+n}}function IT(n,t){return Qw(t)?Up(t):_c(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this._=void 0}}function PT(n,t,e){return n instanceof nl?function(r,a){const c={fields:{[Ep]:{stringValue:Tp},[Ip]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&fc(a)&&(a=bl(a)),a&&(c.fields[bp]=a),{mapValue:c}}(e,t):n instanceof So?$p(n,t):n instanceof Ro?jp(n,t):function(r,a){const c=zp(r,a),h=vf(c)+vf(r.Ie);return Iu(c)&&Iu(r.Ie)?Up(h):_c(r.serializer,h)}(n,t)}function AT(n,t,e){return n instanceof So?$p(n,t):n instanceof Ro?jp(n,t):e}function zp(n,t){return n instanceof il?function(s){return Iu(s)||function(a){return!!a&&"doubleValue"in a}(s)}(t)?t:{integerValue:0}:null}class nl extends Cl{}class So extends Cl{constructor(t){super(),this.elements=t}}function $p(n,t){const e=qp(t);for(const s of n.elements)e.some(r=>qn(r,s))||e.push(s);return{arrayValue:{values:e}}}class Ro extends Cl{constructor(t){super(),this.elements=t}}function jp(n,t){let e=qp(t);for(const s of n.elements)e=e.filter(r=>!qn(r,s));return{arrayValue:{values:e}}}class il extends Cl{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function vf(n){return ve(n.integerValue||n.doubleValue)}function qp(n){return dc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function CT(n,t){return n.field.isEqual(t.field)&&function(s,r){return s instanceof So&&r instanceof So||s instanceof Ro&&r instanceof Ro?ur(s.elements,r.elements,qn):s instanceof il&&r instanceof il?qn(s.Ie,r.Ie):s instanceof nl&&r instanceof nl}(n.transform,t.transform)}class xT{constructor(t,e){this.version=t,this.transformResults=e}}class ui{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ui}static exists(t){return new ui(void 0,t)}static updateTime(t){return new ui(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ma(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class xl{}function Hp(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Wp(n.key,ui.none()):new ko(n.key,n.data,ui.none());{const e=n.data,s=yn.empty();let r=new xe(Ne.comparator);for(let a of t.fields)if(!r.has(a)){let c=e.field(a);c===null&&a.length>1&&(a=a.popLast(),c=e.field(a)),c===null?s.delete(a):s.set(a,c),r=r.add(a)}return new vs(n.key,s,new Sn(r.toArray()),ui.none())}}function ST(n,t,e){n instanceof ko?function(r,a,c){const h=r.value.clone(),p=Tf(r.fieldTransforms,a,c.transformResults);h.setAll(p),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof vs?function(r,a,c){if(!Ma(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=Tf(r.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(Zp(r)),p.setAll(h),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,t,e):function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function mo(n,t,e,s){return n instanceof ko?function(a,c,h,p){if(!Ma(a.precondition,c))return h;const g=a.value.clone(),v=Ef(a.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,t,e,s):n instanceof vs?function(a,c,h,p){if(!Ma(a.precondition,c))return h;const g=Ef(a.fieldTransforms,p,c),v=c.data;return v.setAll(Zp(a)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(n,t,e,s):function(a,c,h){return Ma(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function RT(n,t){let e=null;for(const s of n.fieldTransforms){const r=t.data.field(s.field),a=zp(s.transform,r||null);a!=null&&(e===null&&(e=yn.empty()),e.set(s.field,a))}return e||null}function wf(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ur(s,r,(a,c)=>CT(a,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class ko extends xl{constructor(t,e,s,r=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class vs extends xl{constructor(t,e,s,r,a=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Zp(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}}),t}function Tf(n,t,e){const s=new Map;Xt(n.length===e.length);for(let r=0;r<e.length;r++){const a=n[r],c=a.transform,h=t.data.field(a.field);s.set(a.field,AT(c,h,e[r]))}return s}function Ef(n,t,e){const s=new Map;for(const r of n){const a=r.transform,c=e.data.field(r.field);s.set(r.field,PT(a,c,t))}return s}class Wp extends xl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends xl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t,e,s,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&ST(a,t,s[r])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=mo(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=mo(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=Fp();return this.mutations.forEach(r=>{const a=t.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=e.has(r.key)?null:h;const p=Hp(c,h);p!==null&&s.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(bt.min())}),s}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Bt())}isEqual(t){return this.batchId===t.batchId&&ur(this.mutations,t.mutations,(e,s)=>wf(e,s))&&ur(this.baseMutations,t.baseMutations,(e,s)=>wf(e,s))}}class gc{constructor(t,e,s,r){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=r}static from(t,e,s){Xt(t.mutations.length===s.length);let r=function(){return wT}();const a=t.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,s[c].version);return new gc(t,e,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,jt;function OT(n){switch(n){case G.OK:return wt();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return wt()}}function Kp(n){if(n===void 0)return fi("GRPC error has no .code"),G.UNKNOWN;switch(n){case Ie.OK:return G.OK;case Ie.CANCELLED:return G.CANCELLED;case Ie.UNKNOWN:return G.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return G.INTERNAL;case Ie.UNAVAILABLE:return G.UNAVAILABLE;case Ie.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Ie.NOT_FOUND:return G.NOT_FOUND;case Ie.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Ie.ABORTED:return G.ABORTED;case Ie.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Ie.DATA_LOSS:return G.DATA_LOSS;default:return wt()}}(jt=Ie||(Ie={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new ki([4294967295,4294967295],0);function bf(n){const t=_p().encode(n),e=new up;return e.update(t),new Uint8Array(e.digest())}function If(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ki([e,s],0),new ki([r,a],0)]}class yc{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new ro(`Invalid padding: ${e}`);if(s<0)throw new ro(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new ro(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=ki.fromNumber(this.Ee)}Ae(t,e,s){let r=t.add(e.multiply(ki.fromNumber(s)));return r.compare(VT)===1&&(r=new ki([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=bf(t),[s,r]=If(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(s,r,a);if(!this.Re(c))return!1}return!0}static create(t,e,s){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),c=new yc(a,r,e);return s.forEach(h=>c.insert(h)),c}insert(t){if(this.Ee===0)return;const e=bf(t),[s,r]=If(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(s,r,a);this.Ve(c)}}Ve(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,e,s,r,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const r=new Map;return r.set(t,Mo.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new Sl(bt.min(),r,new me(St),di(),Bt())}}class Mo{constructor(t,e,s,r,a){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new Mo(s,e,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(t,e,s,r){this.me=t,this.removedTargetIds=e,this.key=s,this.fe=r}}class Gp{constructor(t,e){this.targetId=t,this.ge=e}}class Qp{constructor(t,e,s=Be.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=r}}class Pf{constructor(){this.pe=0,this.ye=Af(),this.we=Be.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Bt(),e=Bt(),s=Bt();return this.ye.forEach((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:s=s.add(r);break;default:wt()}}),new Mo(this.we,this.Se,t,e,s)}Me(){this.be=!1,this.ye=Af()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Xt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class NT{constructor(t){this.ke=t,this.qe=new Map,this.Qe=di(),this.$e=ba(),this.Ue=ba(),this.Ke=new me(St)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const s=this.He(e);switch(t.state){case 0:this.Je(e)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(e);break;case 3:this.Je(e)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),s.Ce(t.resumeToken));break;default:wt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((s,r)=>{this.Je(r)&&e(r)})}Ze(t){const e=t.targetId,s=t.ge.count,r=this.Xe(e);if(r){const a=r.target;if(Au(a))if(s===0){const c=new mt(a.path);this.ze(e,c,$e.newNoDocument(c,bt.min()))}else Xt(s===1);else{const c=this.et(e);if(c!==s){const h=this.tt(t),p=h?this.nt(h,t,c):1;if(p!==0){this.Ye(e);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,g)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:a=0}=e;let c,h;try{c=Fi(s).toUint8Array()}catch(p){if(p instanceof wp)return lr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new yc(c,r,a)}catch(p){return lr(p instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(t,e,s){return e.ge.count===s-this.st(t,e.targetId)?0:2}st(t,e){const s=this.ke.getRemoteKeysForTarget(e);let r=0;return s.forEach(a=>{const c=this.ke.it(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.ze(e,a,null),r++)}),r}ot(t){const e=new Map;this.qe.forEach((a,c)=>{const h=this.Xe(c);if(h){if(a.current&&Au(h.target)){const p=new mt(h.target.path);this._t(p).has(c)||this.ut(c,p)||this.ze(c,p,$e.newNoDocument(p,t))}a.ve&&(e.set(c,a.Fe()),a.Me())}});let s=Bt();this.Ue.forEach((a,c)=>{let h=!0;c.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(s=s.add(a))}),this.Qe.forEach((a,c)=>c.setReadTime(t));const r=new Sl(t,e,this.Ke,this.Qe,s);return this.Qe=di(),this.$e=ba(),this.Ue=ba(),this.Ke=new me(St),r}Ge(t,e){if(!this.Je(t))return;const s=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,s),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,s){if(!this.Je(t))return;const r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),s&&(this.Qe=this.Qe.insert(e,s))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Pf,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new xe(St),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new xe(St),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||rt("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Pf),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function ba(){return new me(mt.comparator)}function Af(){return new me(mt.comparator)}const BT={asc:"ASCENDING",desc:"DESCENDING"},FT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UT={and:"AND",or:"OR"};class zT{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function xu(n,t){return n.useProto3Json||El(t)?t:{value:t}}function sl(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xp(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function $T(n,t){return sl(n,t.toTimestamp())}function jn(n){return Xt(!!n),bt.fromTimestamp(function(e){const s=Bi(e);return new Ce(s.seconds,s.nanos)}(n))}function vc(n,t){return Su(n,t).canonicalString()}function Su(n,t){const e=function(r){return new fe(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Yp(n){const t=fe.fromString(n);return Xt(im(t)),t}function Ru(n,t){return vc(n.databaseId,t.path)}function Ql(n,t){const e=Yp(t);if(e.get(1)!==n.databaseId.projectId)throw new pt(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new pt(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new mt(tm(e))}function Jp(n,t){return vc(n.databaseId,t)}function jT(n){const t=Yp(n);return t.length===4?fe.emptyPath():tm(t)}function Lu(n){return new fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tm(n){return Xt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Cf(n,t,e){return{name:Ru(n,t),fields:e.value.mapValue.fields}}function qT(n,t){let e;if("targetChange"in t){t.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:wt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(Xt(v===void 0||typeof v=="string"),Be.fromBase64String(v||"")):(Xt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Be.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(g){const v=g.code===void 0?G.UNKNOWN:Kp(g.code);return new pt(v,g.message||"")}(c);e=new Qp(s,r,a,h||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ql(n,s.document.name),a=jn(s.document.updateTime),c=s.document.createTime?jn(s.document.createTime):bt.min(),h=new yn({mapValue:{fields:s.document.fields}}),p=$e.newFoundDocument(r,a,c,h),g=s.targetIds||[],v=s.removedTargetIds||[];e=new Da(g,v,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Ql(n,s.document),a=s.readTime?jn(s.readTime):bt.min(),c=$e.newNoDocument(r,a),h=s.removedTargetIds||[];e=new Da([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Ql(n,s.document),a=s.removedTargetIds||[];e=new Da([],a,r,null)}else{if(!("filter"in t))return wt();{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:a}=s,c=new DT(r,a),h=s.targetId;e=new Gp(h,c)}}return e}function HT(n,t){let e;if(t instanceof ko)e={update:Cf(n,t.key,t.value)};else if(t instanceof Wp)e={delete:Ru(n,t.key)};else if(t instanceof vs)e={update:Cf(n,t.key,t.data),updateMask:tE(t.fieldMask)};else{if(!(t instanceof LT))return wt();e={verify:Ru(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(s=>function(a,c){const h=c.transform;if(h instanceof nl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof So)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ro)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof il)return{fieldPath:c.field.canonicalString(),increment:h.Ie};throw wt()}(0,s))),t.precondition.isNone||(e.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:$T(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:wt()}(n,t.precondition)),e}function ZT(n,t){return n&&n.length>0?(Xt(t!==void 0),n.map(e=>function(r,a){let c=r.updateTime?jn(r.updateTime):jn(a);return c.isEqual(bt.min())&&(c=jn(a)),new xT(c,r.transformResults||[])}(e,t))):[]}function WT(n,t){return{documents:[Jp(n,t.path)]}}function KT(n,t){const e={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=Jp(n,r);const a=function(g){if(g.length!==0)return nm(Hn.create(g,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const c=function(g){if(g.length!==0)return g.map(v=>function(S){return{field:Qs(S.field),direction:XT(S.dir)}}(v))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=xu(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{ht:e,parent:r}}function GT(n){let t=jT(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let r=null;if(s>0){Xt(s===1);const v=e.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let a=[];e.where&&(a=function(T){const S=em(T);return S instanceof Hn&&Rp(S)?S.getFilters():[S]}(e.where));let c=[];e.orderBy&&(c=function(T){return T.map(S=>function(z){return new el(Xs(z.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(S))}(e.orderBy));let h=null;e.limit&&(h=function(T){let S;return S=typeof T=="object"?T.value:T,El(S)?null:S}(e.limit));let p=null;e.startAt&&(p=function(T){const S=!!T.before,N=T.values||[];return new tl(N,S)}(e.startAt));let g=null;return e.endAt&&(g=function(T){const S=!T.before,N=T.values||[];return new tl(N,S)}(e.endAt)),pT(t,r,c,a,h,"F",p,g)}function QT(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function em(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=Xs(e.unaryFilter.field);return Ae.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Xs(e.unaryFilter.field);return Ae.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Xs(e.unaryFilter.field);return Ae.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Xs(e.unaryFilter.field);return Ae.create(c,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(n):n.fieldFilter!==void 0?function(e){return Ae.create(Xs(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Hn.create(e.compositeFilter.filters.map(s=>em(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return wt()}}(e.compositeFilter.op))}(n):wt()}function XT(n){return BT[n]}function YT(n){return FT[n]}function JT(n){return UT[n]}function Qs(n){return{fieldPath:n.canonicalString()}}function Xs(n){return Ne.fromServerFormat(n.fieldPath)}function nm(n){return n instanceof Ae?function(e){if(e.op==="=="){if(pf(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NAN"}};if(df(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(pf(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NOT_NAN"}};if(df(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(e.field),op:YT(e.op),value:e.value}}}(n):n instanceof Hn?function(e){const s=e.getFilters().map(r=>nm(r));return s.length===1?s[0]:{compositeFilter:{op:JT(e.op),filters:s}}}(n):wt()}function tE(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function im(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,e,s,r,a=bt.min(),c=bt.min(),h=Be.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(t){return new Ci(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t){this.Tt=t}}function nE(n){const t=GT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cu(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.Tn=new sE}addToCollectionParentIndex(t,e){return this.Tn.add(e),j.resolve()}getCollectionParents(t,e){return j.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return j.resolve()}deleteFieldIndex(t,e){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,e){return j.resolve()}getDocumentsMatchingTarget(t,e){return j.resolve(null)}getIndexType(t,e){return j.resolve(0)}getFieldIndexes(t,e){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,e){return j.resolve(Ni.min())}getMinOffsetFromCollectionGroup(t,e){return j.resolve(Ni.min())}updateCollectionGroup(t,e,s){return j.resolve()}updateIndexEntries(t,e){return j.resolve()}}class sE{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e]||new xe(fe.comparator),a=!r.has(s);return this.index[e]=r.add(s),a}has(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e];return r&&r.has(s)}getEntries(t){return(this.index[t]||new xe(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sm=41943040;class en{static withCacheSize(t){return new en(t,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(sm,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new fr(0)}static Kn(){return new fr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="LruGarbageCollector",rE=1048576;function Rf([n,t],[e,s]){const r=St(n,e);return r===0?St(t,s):r}class oE{constructor(t){this.Hn=t,this.buffer=new xe(Rf),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();Rf(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class aE{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){rt(Sf,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){wr(e)?rt(Sf,"Ignoring IndexedDB error during garbage collection: ",e):await vr(e)}await this.er(3e5)})}}class lE{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(s=>Math.floor(e/100*s))}nthSequenceNumber(t,e){if(e===0)return j.resolve(Tl.ae);const s=new oE(e);return this.tr.forEachTarget(t,r=>s.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>s.Zn(r))).next(()=>s.maxValue)}removeTargets(t,e,s){return this.tr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(xf)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xf):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let s,r,a,c,h,p,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(t,r))).next(T=>(s=T,h=Date.now(),this.removeTargets(t,s,e))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(T=>(g=Date.now(),Ks()<=qt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T})))}}function uE(n,t){return new lE(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.changes=new ys(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,$e.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?j.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,e,s,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(s!==null&&mo(s.mutation,r,Sn.empty(),Ce.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.getLocalViewOfDocuments(t,s,Bt()).next(()=>s))}getLocalViewOfDocuments(t,e,s=Bt()){const r=us();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,s).next(a=>{let c=so();return a.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const s=us();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,Bt()))}populateOverlays(t,e,s){const r=[];return s.forEach(a=>{e.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(t,r).next(a=>{a.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,s,r){let a=di();const c=po(),h=function(){return po()}();return e.forEach((p,g)=>{const v=s.get(g.key);r.has(g.key)&&(v===void 0||v.mutation instanceof vs)?a=a.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),mo(v.mutation,g,v.mutation.getFieldMask(),Ce.now())):c.set(g.key,Sn.empty())}),this.recalculateAndSaveOverlays(t,a).next(p=>(p.forEach((g,v)=>c.set(g,v)),e.forEach((g,v)=>{var T;return h.set(g,new hE(v,(T=c.get(g))!==null&&T!==void 0?T:null))}),h))}recalculateAndSaveOverlays(t,e){const s=po();let r=new me((c,h)=>c-h),a=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(p=>{const g=e.get(p);if(g===null)return;let v=s.get(p)||Sn.empty();v=h.applyToLocalView(g,v),s.set(p,v);const T=(r.get(h.batchId)||Bt()).add(p);r=r.insert(h.batchId,T)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,v=p.value,T=Fp();v.forEach(S=>{if(!a.has(S)){const N=Hp(e.get(S),s.get(S));N!==null&&T.set(S,N),a=a.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,T))}return j.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,e,s,r){return function(c){return mt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):mT(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,r):this.getDocumentsMatchingCollectionQuery(t,e,s,r)}getNextDocuments(t,e,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,r).next(a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,r-a.size):j.resolve(us());let h=Po,p=a;return c.next(g=>j.forEach(g,(v,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),a.get(v)?j.resolve():this.remoteDocumentCache.getEntry(t,v).next(S=>{p=p.insert(v,S)}))).next(()=>this.populateOverlays(t,g,a)).next(()=>this.computeViews(t,p,g,Bt())).next(v=>({batchId:h,changes:Bp(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new mt(e)).next(s=>{let r=so();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,s,r){const a=e.collectionGroup;let c=so();return this.indexManager.getCollectionParents(t,a).next(h=>j.forEach(h,p=>{const g=function(T,S){return new Il(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,p.child(a));return this.getDocumentsMatchingCollectionQuery(t,g,s,r).next(v=>{v.forEach((T,S)=>{c=c.insert(T,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,s,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,a,r))).next(c=>{a.forEach((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,$e.newInvalidDocument(v)))});let h=so();return c.forEach((p,g)=>{const v=a.get(p);v!==void 0&&mo(v.mutation,g,Sn.empty(),Ce.now()),Al(e,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return j.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:jn(r.createTime)}}(e)),j.resolve()}getNamedQuery(t,e){return j.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:nE(r.bundledQuery),readTime:jn(r.readTime)}}(e)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.overlays=new me(mt.comparator),this.Rr=new Map}getOverlay(t,e){return j.resolve(this.overlays.get(e))}getOverlays(t,e){const s=us();return j.forEach(e,r=>this.getOverlay(t,r).next(a=>{a!==null&&s.set(r,a)})).next(()=>s)}saveOverlays(t,e,s){return s.forEach((r,a)=>{this.Et(t,e,a)}),j.resolve()}removeOverlaysForBatchId(t,e,s){const r=this.Rr.get(s);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(s)),j.resolve()}getOverlaysForCollection(t,e,s){const r=us(),a=e.length+1,c=new mt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>s&&r.set(p.getKey(),p)}return j.resolve(r)}getOverlaysForCollectionGroup(t,e,s,r){let a=new me((g,v)=>g-v);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>s){let v=a.get(g.largestBatchId);v===null&&(v=us(),a=a.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=us(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,v)=>h.set(g,v)),!(h.size()>=r)););return j.resolve(h)}Et(t,e,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.Rr.get(r.largestBatchId).delete(s.key);this.Rr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new MT(e,s));let a=this.Rr.get(e);a===void 0&&(a=Bt(),this.Rr.set(e,a)),this.Rr.set(e,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.Vr=new xe(Le.mr),this.gr=new xe(Le.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const s=new Le(t,e);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,e){t.forEach(s=>this.addReference(s,e))}removeReference(t,e){this.wr(new Le(t,e))}Sr(t,e){t.forEach(s=>this.removeReference(s,e))}br(t){const e=new mt(new fe([])),s=new Le(e,t),r=new Le(e,t+1),a=[];return this.gr.forEachInRange([s,r],c=>{this.wr(c),a.push(c.key)}),a}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new mt(new fe([])),s=new Le(e,t),r=new Le(e,t+1);let a=Bt();return this.gr.forEachInRange([s,r],c=>{a=a.add(c.key)}),a}containsKey(t){const e=new Le(t,0),s=this.Vr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class Le{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return mt.comparator(t.key,e.key)||St(t.Cr,e.Cr)}static pr(t,e){return St(t.Cr,e.Cr)||mt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new xe(Le.mr)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,r){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new kT(a,e,s,r);this.mutationQueue.push(c);for(const h of r)this.Mr=this.Mr.add(new Le(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return j.resolve(c)}lookupMutationBatch(t,e){return j.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,r=this.Nr(s),a=r<0?0:r;return j.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?hc:this.Fr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new Le(e,0),r=new Le(e,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([s,r],c=>{const h=this.Or(c.Cr);a.push(h)}),j.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new xe(St);return e.forEach(r=>{const a=new Le(r,0),c=new Le(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,c],h=>{s=s.add(h.Cr)})}),j.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,r=s.length+1;let a=s;mt.isDocumentKey(a)||(a=a.child(""));const c=new Le(new mt(a),0);let h=new xe(St);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===r&&(h=h.add(p.Cr)),!0)},c),j.resolve(this.Br(h))}Br(t){const e=[];return t.forEach(s=>{const r=this.Or(s);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Xt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return j.forEach(e.mutations,r=>{const a=new Le(r.key,e.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,e){const s=new Le(e,0),r=this.Mr.firstAfterOrEqual(s);return j.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(t){this.kr=t,this.docs=function(){return new me(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,r=this.docs.get(s),a=r?r.size:0,c=this.kr(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return j.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(e))}getEntries(t,e){let s=di();return e.forEach(r=>{const a=this.docs.get(r);s=s.insert(r,a?a.document.mutableCopy():$e.newInvalidDocument(r))}),j.resolve(s)}getDocumentsMatchingQuery(t,e,s,r){let a=di();const c=e.path,h=new mt(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Zw(Hw(v),s)<=0||(r.has(v.key)||Al(e,v))&&(a=a.insert(v.key,v.mutableCopy()))}return j.resolve(a)}getAllFromCollectionGroup(t,e,s,r){wt()}qr(t,e){return j.forEach(this.docs,s=>e(s))}newChangeBuffer(t){return new yE(this)}getSize(t){return j.resolve(this.size)}}class yE extends cE{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(s)}),j.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t){this.persistence=t,this.Qr=new ys(e=>pc(e),mc),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new wc,this.targetCount=0,this.Kr=fr.Un()}forEachTarget(t,e){return this.Qr.forEach((s,r)=>e(r)),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.$r&&(this.$r=e),j.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new fr(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,j.resolve()}updateTargetData(t,e){return this.zn(e),j.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,e,s){let r=0;const a=[];return this.Qr.forEach((c,h)=>{h.sequenceNumber<=e&&s.get(h.targetId)===null&&(this.Qr.delete(c),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),j.waitFor(a).next(()=>r)}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,e){const s=this.Qr.get(e)||null;return j.resolve(s)}addMatchingKeys(t,e,s){return this.Ur.yr(e,s),j.resolve()}removeMatchingKeys(t,e,s){this.Ur.Sr(e,s);const r=this.persistence.referenceDelegate,a=[];return r&&e.forEach(c=>{a.push(r.markPotentiallyOrphaned(t,c))}),j.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),j.resolve()}getMatchingKeysForTargetId(t,e){const s=this.Ur.vr(e);return j.resolve(s)}containsKey(t,e){return j.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new Tl(0),this.zr=!1,this.zr=!0,this.jr=new mE,this.referenceDelegate=t(this),this.Hr=new vE(this),this.indexManager=new iE,this.remoteDocumentCache=function(r){return new gE(r)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new eE(e),this.Yr=new dE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new pE,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.Wr[t.toKey()];return s||(s=new _E(e,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,s){rt("MemoryPersistence","Starting transaction:",t);const r=new wE(this.Gr.next());return this.referenceDelegate.Zr(),s(r).next(a=>this.referenceDelegate.Xr(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}ei(t,e){return j.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,e)))}}class wE extends Kw{constructor(t){super(),this.currentSequenceNumber=t}}class Tc{constructor(t){this.persistence=t,this.ti=new wc,this.ni=null}static ri(t){return new Tc(t)}get ii(){if(this.ni)return this.ni;throw wt()}addReference(t,e,s){return this.ti.addReference(s,e),this.ii.delete(s.toString()),j.resolve()}removeReference(t,e,s){return this.ti.removeReference(s,e),this.ii.add(s.toString()),j.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),j.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(r=>this.ii.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(a=>this.ii.add(a.toString()))}).next(()=>s.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ii,s=>{const r=mt.fromPath(s);return this.si(t,r).next(a=>{a||e.removeEntry(r,bt.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(s=>{s?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return j.or([()=>j.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class rl{constructor(t,e){this.persistence=t,this.oi=new ys(s=>Xw(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=uE(this,e)}static ri(t,e){return new rl(t,e)}Zr(){}Xr(t){return j.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>e.next(r=>s+r))}sr(t){let e=0;return this.rr(t,s=>{e++}).next(()=>e)}rr(t,e){return j.forEach(this.oi,(s,r)=>this.ar(t,s,r).next(a=>a?j.resolve():e(r)))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.qr(t,c=>this.ar(t,c,e).next(h=>{h||(s++,a.removeEntry(c,bt.min()))})).next(()=>a.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),j.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),j.resolve()}removeReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),j.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=La(t.data.value)),e}ar(t,e,s){return j.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.oi.get(e);return j.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,e,s,r){this.targetId=t,this.fromCache=e,this.Hi=s,this.Ji=r}static Yi(t,e){let s=Bt(),r=Bt();for(const a of e.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Ec(t,e.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return mv()?8:Gw(dv())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,s,r){const a={result:null};return this.rs(t,e).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ss(t,e,r,s).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new TE;return this._s(t,e,c).next(h=>{if(a.result=h,this.Xi)return this.us(t,e,c,h.size)})}).next(()=>a.result)}us(t,e,s,r){return s.documentReadCount<this.es?(Ks()<=qt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Gs(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),j.resolve()):(Ks()<=qt.DEBUG&&rt("QueryEngine","Query:",Gs(e),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ts*r?(Ks()<=qt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Gs(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$n(e))):j.resolve())}rs(t,e){if(yf(e))return j.resolve(null);let s=$n(e);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Cu(e,null,"F"),s=$n(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next(a=>{const c=Bt(...a);return this.ns.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,s).next(p=>{const g=this.cs(e,h);return this.ls(e,g,c,p.readTime)?this.rs(t,Cu(e,null,"F")):this.hs(t,g,e,p)}))})))}ss(t,e,s,r){return yf(e)||r.isEqual(bt.min())?j.resolve(null):this.ns.getDocuments(t,s).next(a=>{const c=this.cs(e,a);return this.ls(e,c,s,r)?j.resolve(null):(Ks()<=qt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gs(e)),this.hs(t,c,e,qw(r,Po)).next(h=>h))})}cs(t,e){let s=new xe(Vp(t));return e.forEach((r,a)=>{Al(t,a)&&(s=s.add(a))}),s}ls(t,e,s,r){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}_s(t,e,s){return Ks()<=qt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Gs(e)),this.ns.getDocumentsMatchingQuery(t,e,Ni.min(),s)}hs(t,e,s,r){return this.ns.getDocumentsMatchingQuery(t,s,r).next(a=>(e.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="LocalStore",bE=3e8;class IE{constructor(t,e,s,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new me(St),this.Is=new ys(a=>pc(a),mc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new fE(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function PE(n,t,e,s){return new IE(n,t,e,s)}async function om(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",s=>{let r;return e.mutationQueue.getAllMutationBatches(s).next(a=>(r=a,e.As(t),e.mutationQueue.getAllMutationBatches(s))).next(a=>{const c=[],h=[];let p=Bt();for(const g of r){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of a){h.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return e.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:c,addedBatchIds:h}))})})}function AE(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),a=e.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,g,v){const T=g.batch,S=T.keys();let N=j.resolve();return S.forEach(z=>{N=N.next(()=>v.getEntry(p,z)).next(q=>{const $=g.docVersions.get(z);Xt($!==null),q.version.compareTo($)<0&&(T.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),v.addEntry(q)))})}),N.next(()=>h.mutationQueue.removeMutationBatch(p,T))}(e,s,t,a).next(()=>a.apply(s)).next(()=>e.mutationQueue.performConsistencyCheck(s)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(h){let p=Bt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(t))).next(()=>e.localDocuments.getDocuments(s,r))})}function am(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function CE(n,t){const e=It(n),s=t.snapshotVersion;let r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;const h=[];t.targetChanges.forEach((v,T)=>{const S=r.get(T);if(!S)return;h.push(e.Hr.removeMatchingKeys(a,v.removedDocuments,T).next(()=>e.Hr.addMatchingKeys(a,v.addedDocuments,T)));let N=S.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(T)!==null?N=N.withResumeToken(Be.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,s)),r=r.insert(T,N),function(q,$,it){return q.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=bE?!0:it.addedDocuments.size+it.modifiedDocuments.size+it.removedDocuments.size>0}(S,N,v)&&h.push(e.Hr.updateTargetData(a,N))});let p=di(),g=Bt();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(xE(a,c,t.documentUpdates).next(v=>{p=v.Vs,g=v.fs})),!s.isEqual(bt.min())){const v=e.Hr.getLastRemoteSnapshotVersion(a).next(T=>e.Hr.setTargetsMetadata(a,a.currentSequenceNumber,s));h.push(v)}return j.waitFor(h).next(()=>c.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,p,g)).next(()=>p)}).then(a=>(e.Ts=r,a))}function xE(n,t,e){let s=Bt(),r=Bt();return e.forEach(a=>s=s.add(a)),t.getEntries(n,s).next(a=>{let c=di();return e.forEach((h,p)=>{const g=a.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(bt.min())?(t.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),c=c.insert(h,p)):rt(bc,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{Vs:c,fs:r}})}function SE(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=hc),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function RE(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return e.Hr.getTargetData(s,t).next(a=>a?(r=a,j.resolve(r)):e.Hr.allocateTargetId(s).next(c=>(r=new Ci(t,c,"TargetPurposeListen",s.currentSequenceNumber),e.Hr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=e.Ts.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(s.targetId,s),e.Is.set(t,s.targetId)),s})}async function ku(n,t,e){const s=It(n),r=s.Ts.get(t),a=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",a,c=>s.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!wr(c))throw c;rt(bc,`Failed to update sequence numbers for target ${t}: ${c}`)}s.Ts=s.Ts.remove(t),s.Is.delete(r.target)}function Lf(n,t,e){const s=It(n);let r=bt.min(),a=Bt();return s.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,v){const T=It(p),S=T.Is.get(v);return S!==void 0?j.resolve(T.Ts.get(S)):T.Hr.getTargetData(g,v)}(s,c,$n(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{a=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(c,t,e?r:bt.min(),e?a:Bt())).next(h=>(LE(s,gT(t),h),{documents:h,gs:a})))}function LE(n,t,e){let s=n.Es.get(t)||bt.min();e.forEach((r,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),n.Es.set(t,s)}class kf{constructor(){this.activeTargetIds=bT()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kE{constructor(){this.ho=new kf,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,s){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new kf,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="ConnectivityMonitor";class Df{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){rt(Mf,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){rt(Mf,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia=null;function Mu(){return Ia===null?Ia=function(){return 268435456+Math.round(2147483648*Math.random())}():Ia++,"0x"+Ia.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="RestConnection",DE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OE{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${s}/databases/${r}`,this.wo=this.databaseId.database===Ya?`project_id=${s}`:`project_id=${s}&database_id=${r}`}So(t,e,s,r,a){const c=Mu(),h=this.bo(t,e.toUriEncodedString());rt(Xl,`Sending RPC '${t}' ${c}:`,h,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,r,a),this.vo(t,h,p,s).then(g=>(rt(Xl,`Received RPC '${t}' ${c}: `,g),g),g=>{throw lr(Xl,`RPC '${t}' ${c} failed with error: `,g,"url: ",h,"request:",s),g})}Co(t,e,s,r,a,c){return this.So(t,e,s,r,a)}Do(t,e,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,a)=>t[a]=r),s&&s.headers.forEach((r,a)=>t[a]=r)}bo(t,e){const s=DE[t];return`${this.po}/v1/${e}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue="WebChannelConnection";class NE extends OE{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,s,r){const a=Mu();return new Promise((c,h)=>{const p=new cp;p.setWithCredentials(!0),p.listenOnce(hp.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ra.NO_ERROR:const v=p.getResponseJson();rt(Ue,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(v)),c(v);break;case Ra.TIMEOUT:rt(Ue,`RPC '${t}' ${a} timed out`),h(new pt(G.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:const T=p.getStatus();if(rt(Ue,`RPC '${t}' ${a} failed with status:`,T,"response text:",p.getResponseText()),T>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S==null?void 0:S.error;if(N&&N.status&&N.message){const z=function($){const it=$.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(it)>=0?it:G.UNKNOWN}(N.status);h(new pt(z,N.message))}else h(new pt(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new pt(G.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{rt(Ue,`RPC '${t}' ${a} completed.`)}});const g=JSON.stringify(r);rt(Ue,`RPC '${t}' ${a} sending request:`,r),p.send(e,"POST",g,s,15)})}Wo(t,e,s){const r=Mu(),a=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=pp(),h=dp(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,e,s),p.encodeInitMessageHeaders=!0;const v=a.join("");rt(Ue,`Creating RPC '${t}' stream ${r}: ${v}`,p);const T=c.createWebChannel(v,p);let S=!1,N=!1;const z=new VE({Fo:$=>{N?rt(Ue,`Not sending because RPC '${t}' stream ${r} is closed:`,$):(S||(rt(Ue,`Opening RPC '${t}' stream ${r} transport.`),T.open(),S=!0),rt(Ue,`RPC '${t}' stream ${r} sending:`,$),T.send($))},Mo:()=>T.close()}),q=($,it,ft)=>{$.listen(it,ot=>{try{ft(ot)}catch(ht){setTimeout(()=>{throw ht},0)}})};return q(T,io.EventType.OPEN,()=>{N||(rt(Ue,`RPC '${t}' stream ${r} transport opened.`),z.Qo())}),q(T,io.EventType.CLOSE,()=>{N||(N=!0,rt(Ue,`RPC '${t}' stream ${r} transport closed`),z.Uo())}),q(T,io.EventType.ERROR,$=>{N||(N=!0,lr(Ue,`RPC '${t}' stream ${r} transport errored:`,$),z.Uo(new pt(G.UNAVAILABLE,"The operation could not be completed")))}),q(T,io.EventType.MESSAGE,$=>{var it;if(!N){const ft=$.data[0];Xt(!!ft);const ot=ft,ht=(ot==null?void 0:ot.error)||((it=ot[0])===null||it===void 0?void 0:it.error);if(ht){rt(Ue,`RPC '${t}' stream ${r} received error:`,ht);const Ct=ht.status;let Ft=function(b){const x=Ie[b];if(x!==void 0)return Kp(x)}(Ct),R=ht.message;Ft===void 0&&(Ft=G.INTERNAL,R="Unknown error status: "+Ct+" with message "+ht.message),N=!0,z.Uo(new pt(Ft,R)),T.close()}else rt(Ue,`RPC '${t}' stream ${r} received:`,ft),z.Ko(ft)}}),q(h,fp.STAT_EVENT,$=>{$.stat===Tu.PROXY?rt(Ue,`RPC '${t}' stream ${r} detected buffering proxy`):$.stat===Tu.NOPROXY&&rt(Ue,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{z.$o()},0),z}}function Yl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(n){return new zT(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(t,e,s=1e3,r=1.5,a=6e4){this.Ti=t,this.timerId=e,this.Go=s,this.zo=r,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-s);r>0&&rt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="PersistentStream";class um{constructor(t,e,s,r,a,c,h,p){this.Ti=t,this.n_=s,this.r_=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new lm(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===G.RESOURCE_EXHAUSTED?(fi(e.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.i_===e&&this.V_(s,r)},s=>{t(()=>{const r=new pt(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(r)})})}V_(t,e){const s=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{s(()=>this.m_(r))}),this.stream.onMessage(r=>{s(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return rt(Of,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(rt(Of,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BE extends um{constructor(t,e,s,r,a,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,r,c),this.serializer=a}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=qT(this.serializer,t),s=function(a){if(!("targetChange"in a))return bt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?bt.min():c.readTime?jn(c.readTime):bt.min()}(t);return this.listener.p_(e,s)}y_(t){const e={};e.database=Lu(this.serializer),e.addTarget=function(a,c){let h;const p=c.target;if(h=Au(p)?{documents:WT(a,p)}:{query:KT(a,p).ht},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=Xp(a,c.resumeToken);const g=xu(a,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(bt.min())>0){h.readTime=sl(a,c.snapshotVersion.toTimestamp());const g=xu(a,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,t);const s=QT(this.serializer,t);s&&(e.labels=s),this.I_(e)}w_(t){const e={};e.database=Lu(this.serializer),e.removeTarget=t,this.I_(e)}}class FE extends um{constructor(t,e,s,r,a,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,r,c),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return Xt(!!t.streamToken),this.lastStreamToken=t.streamToken,Xt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Xt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=ZT(t.writeResults,t.commitTime),s=jn(t.commitTime);return this.listener.v_(s,e)}C_(){const t={};t.database=Lu(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(s=>HT(this.serializer,s))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{}class zE extends UE{constructor(t,e,s,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new pt(G.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.So(t,Su(e,s),r,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pt(G.UNKNOWN,a.toString())})}Co(t,e,s,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Co(t,Su(e,s),r,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pt(G.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class $E{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fi(e),this.N_=!1):rt("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="RemoteStore";class jE{constructor(t,e,s,r,a){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(c=>{s.enqueueAndForget(async()=>{ws(this)&&(rt(ms,"Restarting streams for network reachability change."),await async function(p){const g=It(p);g.W_.add(4),await Do(g),g.j_.set("Unknown"),g.W_.delete(4),await Ll(g)}(this))})}),this.j_=new $E(s,r)}}async function Ll(n){if(ws(n))for(const t of n.G_)await t(!0)}async function Do(n){for(const t of n.G_)await t(!1)}function cm(n,t){const e=It(n);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),Cc(e)?Ac(e):Tr(e).c_()&&Pc(e,t))}function Ic(n,t){const e=It(n),s=Tr(e);e.K_.delete(t),s.c_()&&hm(e,t),e.K_.size===0&&(s.c_()?s.P_():ws(e)&&e.j_.set("Unknown"))}function Pc(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Tr(n).y_(t)}function hm(n,t){n.H_.Ne(t),Tr(n).w_(t)}function Ac(n){n.H_=new NT({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.K_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),Tr(n).start(),n.j_.B_()}function Cc(n){return ws(n)&&!Tr(n).u_()&&n.K_.size>0}function ws(n){return It(n).W_.size===0}function fm(n){n.H_=void 0}async function qE(n){n.j_.set("Online")}async function HE(n){n.K_.forEach((t,e)=>{Pc(n,t)})}async function ZE(n,t){fm(n),Cc(n)?(n.j_.q_(t),Ac(n)):n.j_.set("Unknown")}async function WE(n,t,e){if(n.j_.set("Online"),t instanceof Qp&&t.state===2&&t.cause)try{await async function(r,a){const c=a.cause;for(const h of a.targetIds)r.K_.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.K_.delete(h),r.H_.removeTarget(h))}(n,t)}catch(s){rt(ms,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await ol(n,s)}else if(t instanceof Da?n.H_.We(t):t instanceof Gp?n.H_.Ze(t):n.H_.je(t),!e.isEqual(bt.min()))try{const s=await am(n.localStore);e.compareTo(s)>=0&&await function(a,c){const h=a.H_.ot(c);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.K_.get(g);v&&a.K_.set(g,v.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,g)=>{const v=a.K_.get(p);if(!v)return;a.K_.set(p,v.withResumeToken(Be.EMPTY_BYTE_STRING,v.snapshotVersion)),hm(a,p);const T=new Ci(v.target,p,g,v.sequenceNumber);Pc(a,T)}),a.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(s){rt(ms,"Failed to raise snapshot:",s),await ol(n,s)}}async function ol(n,t,e){if(!wr(t))throw t;n.W_.add(1),await Do(n),n.j_.set("Offline"),e||(e=()=>am(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{rt(ms,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await Ll(n)})}function dm(n,t){return t().catch(e=>ol(n,e,t))}async function kl(n){const t=It(n),e=zi(t);let s=t.U_.length>0?t.U_[t.U_.length-1].batchId:hc;for(;KE(t);)try{const r=await SE(t.localStore,s);if(r===null){t.U_.length===0&&e.P_();break}s=r.batchId,GE(t,r)}catch(r){await ol(t,r)}pm(t)&&mm(t)}function KE(n){return ws(n)&&n.U_.length<10}function GE(n,t){n.U_.push(t);const e=zi(n);e.c_()&&e.S_&&e.b_(t.mutations)}function pm(n){return ws(n)&&!zi(n).u_()&&n.U_.length>0}function mm(n){zi(n).start()}async function QE(n){zi(n).C_()}async function XE(n){const t=zi(n);for(const e of n.U_)t.b_(e.mutations)}async function YE(n,t,e){const s=n.U_.shift(),r=gc.from(s,t,e);await dm(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await kl(n)}async function JE(n,t){t&&zi(n).S_&&await async function(s,r){if(function(c){return OT(c)&&c!==G.ABORTED}(r.code)){const a=s.U_.shift();zi(s).h_(),await dm(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,r)),await kl(s)}}(n,t),pm(n)&&mm(n)}async function Vf(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),rt(ms,"RemoteStore received new credentials");const s=ws(e);e.W_.add(3),await Do(e),s&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Ll(e)}async function t0(n,t){const e=It(n);t?(e.W_.delete(2),await Ll(e)):t||(e.W_.add(2),await Do(e),e.j_.set("Unknown"))}function Tr(n){return n.J_||(n.J_=function(e,s,r){const a=It(e);return a.M_(),new BE(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{xo:qE.bind(null,n),No:HE.bind(null,n),Lo:ZE.bind(null,n),p_:WE.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),Cc(n)?Ac(n):n.j_.set("Unknown")):(await n.J_.stop(),fm(n))})),n.J_}function zi(n){return n.Y_||(n.Y_=function(e,s,r){const a=It(e);return a.M_(),new FE(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:QE.bind(null,n),Lo:JE.bind(null,n),D_:XE.bind(null,n),v_:YE.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await kl(n)):(await n.Y_.stop(),n.U_.length>0&&(rt(ms,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,e,s,r,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=r,this.removalCallback=a,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,r,a){const c=Date.now()+s,h=new xc(t,e,c,r,a);return h.start(s),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(G.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sc(n,t){if(fi("AsyncQueue",`${t}: ${n}`),wr(n))return new pt(G.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{static emptySet(t){return new sr(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||mt.comparator(e.key,s.key):(e,s)=>mt.comparator(e.key,s.key),this.keyedMap=so(),this.sortedSet=new me(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,s)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof sr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=s.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new sr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this.Z_=new me(mt.comparator)}track(t){const e=t.doc.key,s=this.Z_.get(e);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(e):t.type===1&&s.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):wt():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,s)=>{t.push(s)}),t}}class dr{constructor(t,e,s,r,a,c,h,p,g){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,e,s,r,a){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new dr(t,e,sr.emptySet(e),c,s,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Pl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==s[r].type||!e[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class n0{constructor(){this.queries=Bf(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,s){const r=It(e),a=r.queries;r.queries=Bf(),a.forEach((c,h)=>{for(const p of h.ta)p.onError(s)})})(this,new pt(G.ABORTED,"Firestore shutting down"))}}function Bf(){return new ys(n=>Op(n),Pl)}async function i0(n,t){const e=It(n);let s=3;const r=t.query;let a=e.queries.get(r);a?!a.na()&&t.ra()&&(s=2):(a=new e0,s=t.ra()?0:1);try{switch(s){case 0:a.ea=await e.onListen(r,!0);break;case 1:a.ea=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const h=Sc(c,`Initialization of query '${Gs(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,a),a.ta.push(t),t.sa(e.onlineState),a.ea&&t.oa(a.ea)&&Rc(e)}async function s0(n,t){const e=It(n),s=t.query;let r=3;const a=e.queries.get(s);if(a){const c=a.ta.indexOf(t);c>=0&&(a.ta.splice(c,1),a.ta.length===0?r=t.ra()?0:1:!a.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function r0(n,t){const e=It(n);let s=!1;for(const r of t){const a=r.query,c=e.queries.get(a);if(c){for(const h of c.ta)h.oa(r)&&(s=!0);c.ea=r}}s&&Rc(e)}function o0(n,t,e){const s=It(n),r=s.queries.get(t);if(r)for(const a of r.ta)a.onError(e);s.queries.delete(t)}function Rc(n){n.ia.forEach(t=>{t.next()})}var Du,Ff;(Ff=Du||(Du={}))._a="default",Ff.Cache="cache";class a0{constructor(t,e,s){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new dr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const s=e!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=dr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Du.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t){this.key=t}}class gm{constructor(t){this.key=t}}class l0{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Bt(),this.mutatedKeys=Bt(),this.ya=Vp(t),this.wa=new sr(this.ya)}get Sa(){return this.fa}ba(t,e){const s=e?e.Da:new Nf,r=e?e.wa:this.wa;let a=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const p=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((v,T)=>{const S=r.get(v),N=Al(this.query,T)?T:null,z=!!S&&this.mutatedKeys.has(S.key),q=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let $=!1;S&&N?S.data.isEqual(N.data)?z!==q&&(s.track({type:3,doc:N}),$=!0):this.va(S,N)||(s.track({type:2,doc:N}),$=!0,(p&&this.ya(N,p)>0||g&&this.ya(N,g)<0)&&(h=!0)):!S&&N?(s.track({type:0,doc:N}),$=!0):S&&!N&&(s.track({type:1,doc:S}),$=!0,(p||g)&&(h=!0)),$&&(N?(c=c.add(N),a=q?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),s.track({type:1,doc:v})}return{wa:c,Da:s,ls:h,mutatedKeys:a}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,r){const a=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const c=t.Da.X_();c.sort((v,T)=>function(N,z){const q=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return q(N)-q(z)}(v.type,T.type)||this.ya(v.doc,T.doc)),this.Ca(s),r=r!=null&&r;const h=e&&!r?this.Fa():[],p=this.pa.size===0&&this.current&&!r?1:0,g=p!==this.ga;return this.ga=p,c.length!==0||g?{snapshot:new dr(this.query,t.wa,a,c,t.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Nf,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Bt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const e=[];return t.forEach(s=>{this.pa.has(s)||e.push(new gm(s))}),this.pa.forEach(s=>{t.has(s)||e.push(new _m(s))}),e}Oa(t){this.fa=t.gs,this.pa=Bt();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return dr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Lc="SyncEngine";class u0{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class c0{constructor(t){this.key=t,this.Ba=!1}}class h0{constructor(t,e,s,r,a,c){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new ys(h=>Op(h),Pl),this.qa=new Map,this.Qa=new Set,this.$a=new me(mt.comparator),this.Ua=new Map,this.Ka=new wc,this.Wa={},this.Ga=new Map,this.za=fr.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function f0(n,t,e=!0){const s=bm(n);let r;const a=s.ka.get(t);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Na()):r=await ym(s,t,e,!0),r}async function d0(n,t){const e=bm(n);await ym(e,t,!0,!1)}async function ym(n,t,e,s){const r=await RE(n.localStore,$n(t)),a=r.targetId,c=n.sharedClientState.addLocalQueryTarget(a,e);let h;return s&&(h=await p0(n,t,a,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&cm(n.remoteStore,r),h}async function p0(n,t,e,s,r){n.Ha=(T,S,N)=>async function(q,$,it,ft){let ot=$.view.ba(it);ot.ls&&(ot=await Lf(q.localStore,$.query,!1).then(({documents:R})=>$.view.ba(R,ot)));const ht=ft&&ft.targetChanges.get($.targetId),Ct=ft&&ft.targetMismatches.get($.targetId)!=null,Ft=$.view.applyChanges(ot,q.isPrimaryClient,ht,Ct);return zf(q,$.targetId,Ft.Ma),Ft.snapshot}(n,T,S,N);const a=await Lf(n.localStore,t,!0),c=new l0(t,a.gs),h=c.ba(a.documents),p=Mo.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",r),g=c.applyChanges(h,n.isPrimaryClient,p);zf(n,e,g.Ma);const v=new u0(t,e,c);return n.ka.set(t,v),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),g.snapshot}async function m0(n,t,e){const s=It(n),r=s.ka.get(t),a=s.qa.get(r.targetId);if(a.length>1)return s.qa.set(r.targetId,a.filter(c=>!Pl(c,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await ku(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),e&&Ic(s.remoteStore,r.targetId),Ou(s,r.targetId)}).catch(vr)):(Ou(s,r.targetId),await ku(s.localStore,r.targetId,!0))}async function _0(n,t){const e=It(n),s=e.ka.get(t),r=e.qa.get(s.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),Ic(e.remoteStore,s.targetId))}async function g0(n,t,e){const s=I0(n);try{const r=await function(c,h){const p=It(c),g=Ce.now(),v=h.reduce((N,z)=>N.add(z.key),Bt());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let z=di(),q=Bt();return p.ds.getEntries(N,v).next($=>{z=$,z.forEach((it,ft)=>{ft.isValidDocument()||(q=q.add(it))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,z)).next($=>{T=$;const it=[];for(const ft of h){const ot=RT(ft,T.get(ft.key).overlayedDocument);ot!=null&&it.push(new vs(ft.key,ot,Cp(ot.value.mapValue),ui.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,it,h)}).next($=>{S=$;const it=$.applyToLocalDocumentSet(T,q);return p.documentOverlayCache.saveOverlays(N,$.batchId,it)})}).then(()=>({batchId:S.batchId,changes:Bp(T)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(c,h,p){let g=c.Wa[c.currentUser.toKey()];g||(g=new me(St)),g=g.insert(h,p),c.Wa[c.currentUser.toKey()]=g}(s,r.batchId,e),await Oo(s,r.changes),await kl(s.remoteStore)}catch(r){const a=Sc(r,"Failed to persist write");e.reject(a)}}async function vm(n,t){const e=It(n);try{const s=await CE(e.localStore,t);t.targetChanges.forEach((r,a)=>{const c=e.Ua.get(a);c&&(Xt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Ba=!0:r.modifiedDocuments.size>0?Xt(c.Ba):r.removedDocuments.size>0&&(Xt(c.Ba),c.Ba=!1))}),await Oo(e,s,t)}catch(s){await vr(s)}}function Uf(n,t,e){const s=It(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const r=[];s.ka.forEach((a,c)=>{const h=c.view.sa(t);h.snapshot&&r.push(h.snapshot)}),function(c,h){const p=It(c);p.onlineState=h;let g=!1;p.queries.forEach((v,T)=>{for(const S of T.ta)S.sa(h)&&(g=!0)}),g&&Rc(p)}(s.eventManager,t),r.length&&s.La.p_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function y0(n,t,e){const s=It(n);s.sharedClientState.updateQueryState(t,"rejected",e);const r=s.Ua.get(t),a=r&&r.key;if(a){let c=new me(mt.comparator);c=c.insert(a,$e.newNoDocument(a,bt.min()));const h=Bt().add(a),p=new Sl(bt.min(),new Map,new me(St),c,h);await vm(s,p),s.$a=s.$a.remove(a),s.Ua.delete(t),kc(s)}else await ku(s.localStore,t,!1).then(()=>Ou(s,t,e)).catch(vr)}async function v0(n,t){const e=It(n),s=t.batch.batchId;try{const r=await AE(e.localStore,t);Tm(e,s,null),wm(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await Oo(e,r)}catch(r){await vr(r)}}async function w0(n,t,e){const s=It(n);try{const r=await function(c,h){const p=It(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return p.mutationQueue.lookupMutationBatch(g,h).next(T=>(Xt(T!==null),v=T.keys(),p.mutationQueue.removeMutationBatch(g,T))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>p.localDocuments.getDocuments(g,v))})}(s.localStore,t);Tm(s,t,e),wm(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await Oo(s,r)}catch(r){await vr(r)}}function wm(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function Tm(n,t,e){const s=It(n);let r=s.Wa[s.currentUser.toKey()];if(r){const a=r.get(t);a&&(e?a.reject(e):a.resolve(),r=r.remove(t)),s.Wa[s.currentUser.toKey()]=r}}function Ou(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.qa.get(t))n.ka.delete(s),e&&n.La.Ja(s,e);n.qa.delete(t),n.isPrimaryClient&&n.Ka.br(t).forEach(s=>{n.Ka.containsKey(s)||Em(n,s)})}function Em(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(Ic(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ua.delete(e),kc(n))}function zf(n,t,e){for(const s of e)s instanceof _m?(n.Ka.addReference(s.key,t),T0(n,s)):s instanceof gm?(rt(Lc,"Document no longer in limbo: "+s.key),n.Ka.removeReference(s.key,t),n.Ka.containsKey(s.key)||Em(n,s.key)):wt()}function T0(n,t){const e=t.key,s=e.path.canonicalString();n.$a.get(e)||n.Qa.has(s)||(rt(Lc,"New document in limbo: "+e),n.Qa.add(s),kc(n))}function kc(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new mt(fe.fromString(t)),s=n.za.next();n.Ua.set(s,new c0(e)),n.$a=n.$a.insert(e,s),cm(n.remoteStore,new Ci($n(Dp(e.path)),s,"TargetPurposeLimboResolution",Tl.ae))}}async function Oo(n,t,e){const s=It(n),r=[],a=[],c=[];s.ka.isEmpty()||(s.ka.forEach((h,p)=>{c.push(s.Ha(p,t,e).then(g=>{var v;if((g||e)&&s.isPrimaryClient){const T=g?!g.fromCache:(v=e==null?void 0:e.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){r.push(g);const T=Ec.Yi(p.targetId,g);a.push(T)}}))}),await Promise.all(c),s.La.p_(r),await async function(p,g){const v=It(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>j.forEach(g,S=>j.forEach(S.Hi,N=>v.persistence.referenceDelegate.addReference(T,S.targetId,N)).next(()=>j.forEach(S.Ji,N=>v.persistence.referenceDelegate.removeReference(T,S.targetId,N)))))}catch(T){if(!wr(T))throw T;rt(bc,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const N=v.Ts.get(S),z=N.snapshotVersion,q=N.withLastLimboFreeSnapshotVersion(z);v.Ts=v.Ts.insert(S,q)}}}(s.localStore,a))}async function E0(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){rt(Lc,"User change. New user:",t.toKey());const s=await om(e.localStore,t);e.currentUser=t,function(a,c){a.Ga.forEach(h=>{h.forEach(p=>{p.reject(new pt(G.CANCELLED,c))})}),a.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Oo(e,s.Rs)}}function b0(n,t){const e=It(n),s=e.Ua.get(t);if(s&&s.Ba)return Bt().add(s.key);{let r=Bt();const a=e.qa.get(t);if(!a)return r;for(const c of a){const h=e.ka.get(c);r=r.unionWith(h.view.Sa)}return r}}function bm(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=vm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=b0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=y0.bind(null,t),t.La.p_=r0.bind(null,t.eventManager),t.La.Ja=o0.bind(null,t.eventManager),t}function I0(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=v0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=w0.bind(null,t),t}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Rl(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return PE(this.persistence,new EE,t.initialUser,this.serializer)}Xa(t){return new rm(Tc.ri,this.serializer)}Za(t){return new kE}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class P0 extends al{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){Xt(this.persistence.referenceDelegate instanceof rl);const s=this.persistence.referenceDelegate.garbageCollector;return new aE(s,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new rm(s=>rl.ri(s,e),this.serializer)}}class Vu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Uf(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=E0.bind(null,this.syncEngine),await t0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new n0}()}createDatastore(t){const e=Rl(t.databaseInfo.databaseId),s=function(a){return new NE(a)}(t.databaseInfo);return function(a,c,h,p){return new zE(a,c,h,p)}(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return function(s,r,a,c,h){return new jE(s,r,a,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>Uf(this.syncEngine,e,0),function(){return Df.D()?new Df:new ME}())}createSyncEngine(t,e){return function(r,a,c,h,p,g,v){const T=new h0(r,a,c,h,p,g);return v&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const a=It(r);rt(ms,"RemoteStore shutting down."),a.W_.add(5),await Do(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Vu.provider={build:()=>new Vu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):fi("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="FirestoreClient";class C0{constructor(t,e,s,r,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=r,this.user=ze.UNAUTHENTICATED,this.clientId=gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async c=>{rt($i,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(rt($i,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=Sc(e,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Jl(n,t){n.asyncQueue.verifyOperationInProgress(),rt($i,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await om(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function $f(n,t){n.asyncQueue.verifyOperationInProgress();const e=await x0(n);rt($i,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(s=>Vf(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>Vf(t.remoteStore,r)),n._onlineComponents=t}async function x0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){rt($i,"Using user provided OfflineComponentProvider");try{await Jl(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;lr("Error using user provided cache. Falling back to memory cache: "+e),await Jl(n,new al)}}else rt($i,"Using default OfflineComponentProvider"),await Jl(n,new P0(void 0));return n._offlineComponents}async function Im(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(rt($i,"Using user provided OnlineComponentProvider"),await $f(n,n._uninitializedComponentsProvider._online)):(rt($i,"Using default OnlineComponentProvider"),await $f(n,new Vu))),n._onlineComponents}function S0(n){return Im(n).then(t=>t.syncEngine)}async function R0(n){const t=await Im(n),e=t.eventManager;return e.onListen=f0.bind(null,t.syncEngine),e.onUnlisten=m0.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=d0.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=_0.bind(null,t.syncEngine),e}function L0(n,t,e={}){const s=new Mi;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,h,p,g){const v=new A0({next:S=>{v.su(),c.enqueueAndForget(()=>s0(a,T)),S.fromCache&&p.source==="server"?g.reject(new pt(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new a0(h,v,{includeMetadataChanges:!0,Ta:!0});return i0(a,T)}(await R0(n),n.asyncQueue,t,e,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n,t,e){if(!e)throw new pt(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function k0(n,t,e,s){if(t===!0&&s===!0)throw new pt(G.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function qf(n){if(!mt.isDocumentKey(n))throw new pt(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Hf(n){if(mt.isDocumentKey(n))throw new pt(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Mc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":wt()}function ll(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new pt(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Mc(n);throw new pt(G.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="firestore.googleapis.com",Zf=!0;class Wf{constructor(t){var e,s;if(t.host===void 0){if(t.ssl!==void 0)throw new pt(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cm,this.ssl=Zf}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Zf;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=sm;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<rE)throw new pt(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}k0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pm((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new pt(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new pt(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new pt(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ml{constructor(t,e,s,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pt(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wf(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Ow;switch(s.type){case"firstParty":return new Fw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pt(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=jf.get(e);s&&(rt("ComponentProvider","Removing Datastore"),jf.delete(e),s.terminate())}(this),Promise.resolve()}}function M0(n,t,e,s={}){var r;const a=(n=ll(n,Ml))._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),h=`${t}:${e}`;a.host!==Cm&&a.host!==h&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},a),{host:h,ssl:!1,emulatorOptions:s});if(!Ka(p,c)&&(n._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=ze.MOCK_USER;else{g=fv(s.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new pt(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ze(T)}n._authCredentials=new Vw(new mp(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Dl(this.firestore,t,this._query)}}class Ln{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ln(this.firestore,t,this._key)}}class Di extends Dl{constructor(t,e,s){super(t,e,Dp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ln(this.firestore,null,new mt(t))}withConverter(t){return new Di(this.firestore,t,this._path)}}function Dc(n,t,...e){if(n=Eo(n),Am("collection","path",t),n instanceof Ml){const s=fe.fromString(t,...e);return Hf(s),new Di(n,null,s)}{if(!(n instanceof Ln||n instanceof Di))throw new pt(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(fe.fromString(t,...e));return Hf(s),new Di(n.firestore,null,s)}}function D0(n,t,...e){if(n=Eo(n),arguments.length===1&&(t=gp.newId()),Am("doc","path",t),n instanceof Ml){const s=fe.fromString(t,...e);return qf(s),new Ln(n,null,new mt(s))}{if(!(n instanceof Ln||n instanceof Di))throw new pt(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(fe.fromString(t,...e));return qf(s),new Ln(n.firestore,n instanceof Di?n.converter:null,new mt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="AsyncQueue";class Gf{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new lm(this,"async_queue_retry"),this.Su=()=>{const s=Yl();s&&rt(Kf,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=t;const e=Yl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Yl();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Mi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!wr(t))throw t;rt(Kf,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const r=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(s);throw fi("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.pu=!1,s))));return this.bu=e,e}enqueueAfterDelay(t,e,s){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const r=xc.createAndSchedule(this,t,e,s,a=>this.Fu(a));return this.fu.push(r),r}Du(){this.gu&&wt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,s)=>e.targetTimeMs-s.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class Oc extends Ml{constructor(t,e,s,r){super(t,e,s,r),this.type="firestore",this._queue=new Gf,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Gf(t),this._firestoreClient=void 0,await t}}}function O0(n,t){const e=typeof n=="object"?n:Ew(),s=typeof n=="string"?n:Ya,r=gw(e,"firestore").getImmediate({identifier:s});if(!r._initialized){const a=cv("firestore");a&&M0(r,...a)}return r}function xm(n){if(n._terminated)throw new pt(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||V0(n),n._firestoreClient}function V0(n){var t,e,s;const r=n._freezeSettings(),a=function(h,p,g,v){return new tT(h,p,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Pm(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new C0(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new pr(Be.fromBase64String(t))}catch(e){throw new pt(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new pr(Be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new pt(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ne(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new pt(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new pt(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return St(this._lat,t._lat)||St(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==r[a])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=/^__.*__$/;class B0{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new vs(t,this.data,this.fieldMask,e,this.fieldTransforms):new ko(t,this.data,e,this.fieldTransforms)}}function Rm(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class Fc{constructor(t,e,s,r,a,c){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=r,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Fc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.$u(t),r}Uu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.Bu(),r}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return ul(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(Rm(this.Lu)&&N0.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class F0{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Rl(t)}ju(t,e,s,r=!1){return new Fc({Lu:t,methodName:e,zu:s,path:Ne.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U0(n){const t=n._freezeSettings(),e=Rl(n._databaseId);return new F0(n._databaseId,!!t.ignoreUndefinedProperties,e)}function z0(n,t,e,s,r,a={}){const c=n.ju(a.merge||a.mergeFields?2:0,t,e,r);Dm("Data must be an object, but it was:",c,s);const h=km(s,c);let p,g;if(a.merge)p=new Sn(c.fieldMask),g=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=$0(t,T,e);if(!c.contains(S))throw new pt(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);q0(v,S)||v.push(S)}p=new Sn(v),g=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,g=c.fieldTransforms;return new B0(new yn(h),p,g)}function Lm(n,t){if(Mm(n=Eo(n)))return Dm("Unsupported field value:",t,n),km(n,t);if(n instanceof Sm)return function(s,r){if(!Rm(r.Lu))throw r.Wu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,r){const a=[];let c=0;for(const h of s){let p=Lm(h,r.Ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,t)}return function(s,r){if((s=Eo(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IT(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Ce.fromDate(s);return{timestampValue:sl(r.serializer,a)}}if(s instanceof Ce){const a=new Ce(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:sl(r.serializer,a)}}if(s instanceof Nc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof pr)return{bytesValue:Xp(r.serializer,s._byteString)};if(s instanceof Ln){const a=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(a))throw r.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:vc(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Bc)return function(c,h){return{mapValue:{fields:{[Pp]:{stringValue:Ap},[Ja]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Wu("VectorValues must only contain numeric values.");return _c(h.serializer,g)})}}}}}}(s,r);throw r.Wu(`Unsupported field value: ${Mc(s)}`)}(n,t)}function km(n,t){const e={};return vp(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gs(n,(s,r)=>{const a=Lm(r,t.qu(s));a!=null&&(e[s]=a)}),{mapValue:{fields:e}}}function Mm(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ce||n instanceof Nc||n instanceof pr||n instanceof Ln||n instanceof Sm||n instanceof Bc)}function Dm(n,t,e){if(!Mm(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const s=Mc(e);throw s==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+s)}}function $0(n,t,e){if((t=Eo(t))instanceof Vc)return t._internalPath;if(typeof t=="string")return Om(n,t);throw ul("Field path arguments must be of type string or ",n,!1,void 0,e)}const j0=new RegExp("[~\\*/\\[\\]]");function Om(n,t,e){if(t.search(j0)>=0)throw ul(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Vc(...t.split("."))._internalPath}catch{throw ul(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ul(n,t,e,s,r){const a=s&&!s.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${s}`),c&&(p+=` in document ${r}`),p+=")"),new pt(G.INVALID_ARGUMENT,h+n+p)}function q0(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,e,s,r,a){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Nm("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class H0 extends Vm{data(){return super.data()}}function Nm(n,t){return typeof t=="string"?Om(n,t):t instanceof Vc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pt(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class W0{convertValue(t,e="none"){switch(Ui(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Fi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw wt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return gs(t,(r,a)=>{s[r]=this.convertValue(a,e)}),s}convertVectorValue(t){var e,s,r;const a=(r=(s=(e=t.fields)===null||e===void 0?void 0:e[Ja].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(c=>ve(c.doubleValue));return new Bc(a)}convertGeoPoint(t){return new Nc(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(s=>this.convertValue(s,e))}convertServerTimestamp(t,e){switch(e){case"previous":const s=bl(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(Ao(t));default:return null}}convertTimestamp(t){const e=Bi(t);return new Ce(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=fe.fromString(t);Xt(im(s));const r=new Co(s.get(1),s.get(3)),a=new mt(s.popFirst(5));return r.isEqual(e)||fi(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(n,t,e){let s;return s=n?n.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class G0 extends Vm{constructor(t,e,s,r,a,c){super(t,e,s,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Nm("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}}class Oa extends G0{data(t={}){return super.data(t)}}class Q0{constructor(t,e,s,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Pa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(s=>{t.call(e,new Oa(this._firestore,this._userDataWriter,s.key,s,new Pa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new pt(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const p=new Oa(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Pa(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const p=new Oa(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Pa(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:X0(h.type),doc:p,oldIndex:g,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function X0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}class Y0 extends W0{constructor(t){super(),this.firestore=t}convertBytes(t){return new pr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ln(this.firestore,null,e)}}function Bm(n){n=ll(n,Dl);const t=ll(n.firestore,Oc),e=xm(t),s=new Y0(t);return Z0(n._query),L0(e,n._query).then(r=>new Q0(t,s,n,r))}function J0(n,t){const e=ll(n.firestore,Oc),s=D0(n),r=K0(n.converter,t);return tb(e,[z0(U0(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,ui.exists(!1))]).then(()=>s)}function tb(n,t){return function(s,r){const a=new Mi;return s.asyncQueue.enqueueAndForget(async()=>g0(await S0(s),r,a)),a.promise}(xm(n),t)}(function(t,e=!0){(function(r){yr=r})(Tw),Qa(new bo("firestore",(s,{instanceIdentifier:r,options:a})=>{const c=s.getProvider("app").getImmediate(),h=new Oc(new Nw(s.getProvider("auth-internal")),new Uw(c,s.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pt(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(g.options.projectId,v)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),ir(tf,ef,t),ir(tf,ef,"esm2017")})();const eb={apiKey:void 0,authDomain:"find-my-company-30652.firebaseapp.com",projectId:"find-my-company-30652",storageBucket:"find-my-company-30652.firebasestorage.app",messagingSenderId:"563118719650",appId:"1:563118719650:web:ebaaf3d949d66323168dfb",measurementId:"G-LYWPQXCMYB"},nb=op(eb),Uc=O0(nb),Zn=(n,t)=>{const e=n.__vccOpts||n;for(const[s,r]of t)e[s]=r;return e},ib={class:"modal-content"},sb={props:{isOpen:Boolean},emits:["close"],setup(n,{emit:t}){return(e,s)=>(Dt(),Lo(Dd,{to:"body"},[n.isOpen?(Dt(),Zt("div",{key:0,class:"modal-overlay",onClick:s[1]||(s[1]=ac(r=>t("close"),["self"]))},[tt("div",ib,[tt("button",{class:"modal-close",onClick:s[0]||(s[0]=r=>t("close"))},"×"),Fd(e.$slots,"default",{},void 0)])])):Cn("",!0)]))}},rb=Zn(sb,[["__scopeId","data-v-e7136a1e"]]);function ob(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var oo={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ab=oo.exports,Qf;function lb(){return Qf||(Qf=1,function(n,t){(function(e,s){s(t)})(ab,function(e){var s="1.9.4";function r(i){var o,u,f,m;for(u=1,f=arguments.length;u<f;u++){m=arguments[u];for(o in m)i[o]=m[o]}return i}var a=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function c(i,o){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var f=u.call(arguments,2);return function(){return i.apply(o,f.length?f.concat(u.call(arguments)):arguments)}}var h=0;function p(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function g(i,o,u){var f,m,y,I;return I=function(){f=!1,m&&(y.apply(u,m),m=!1)},y=function(){f?m=arguments:(i.apply(u,arguments),setTimeout(I,o),f=!0)},y}function v(i,o,u){var f=o[1],m=o[0],y=f-m;return i===f&&u?i:((i-m)%y+y)%y+m}function T(){return!1}function S(i,o){if(o===!1)return i;var u=Math.pow(10,o===void 0?6:o);return Math.round(i*u)/u}function N(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function z(i){return N(i).split(/\s+/)}function q(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var u in o)i.options[u]=o[u];return i.options}function $(i,o,u){var f=[];for(var m in i)f.push(encodeURIComponent(u?m.toUpperCase():m)+"="+encodeURIComponent(i[m]));return(!o||o.indexOf("?")===-1?"?":"&")+f.join("&")}var it=/\{ *([\w_ -]+) *\}/g;function ft(i,o){return i.replace(it,function(u,f){var m=o[f];if(m===void 0)throw new Error("No value provided for variable "+u);return typeof m=="function"&&(m=m(o)),m})}var ot=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ht(i,o){for(var u=0;u<i.length;u++)if(i[u]===o)return u;return-1}var Ct="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ft(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var R=0;function E(i){var o=+new Date,u=Math.max(0,16-(o-R));return R=o+u,window.setTimeout(i,u)}var b=window.requestAnimationFrame||Ft("RequestAnimationFrame")||E,x=window.cancelAnimationFrame||Ft("CancelAnimationFrame")||Ft("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function C(i,o,u){if(u&&b===E)i.call(o);else return b.call(window,c(i,o))}function M(i){i&&x.call(window,i)}var A={__proto__:null,extend:r,create:a,bind:c,get lastId(){return h},stamp:p,throttle:g,wrapNum:v,falseFn:T,formatNum:S,trim:N,splitWords:z,setOptions:q,getParamString:$,template:ft,isArray:ot,indexOf:ht,emptyImageUrl:Ct,requestFn:b,cancelFn:x,requestAnimFrame:C,cancelAnimFrame:M};function _e(){}_e.extend=function(i){var o=function(){q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,f=a(u);f.constructor=o,o.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return i.statics&&r(o,i.statics),i.includes&&(vn(i.includes),r.apply(null,[f].concat(i.includes))),r(f,i),delete f.statics,delete f.includes,f.options&&(f.options=u.options?a(u.options):{},r(f.options,i.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,I=f._initHooks.length;y<I;y++)f._initHooks[y].call(this)}},o},_e.include=function(i){var o=this.prototype.options;return r(this.prototype,i),i.options&&(this.prototype.options=o,this.mergeOptions(i.options)),this},_e.mergeOptions=function(i){return r(this.prototype.options,i),this},_e.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function vn(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=ot(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Kt={on:function(i,o,u){if(typeof i=="object")for(var f in i)this._on(f,i[f],o);else{i=z(i);for(var m=0,y=i.length;m<y;m++)this._on(i[m],o,u)}return this},off:function(i,o,u){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var f in i)this._off(f,i[f],o);else{i=z(i);for(var m=arguments.length===1,y=0,I=i.length;y<I;y++)m?this._off(i[y]):this._off(i[y],o,u)}return this},_on:function(i,o,u,f){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(i,o,u)===!1){u===this&&(u=void 0);var m={fn:o,ctx:u};f&&(m.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(m)}},_off:function(i,o,u){var f,m,y;if(this._events&&(f=this._events[i],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,y=f.length;m<y;m++)f[m].fn=T;delete this._events[i];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var I=this._listens(i,o,u);if(I!==!1){var O=f[I];this._firingCount&&(O.fn=T,this._events[i]=f=f.slice()),f.splice(I,1)}}},fire:function(i,o,u){if(!this.listens(i,u))return this;var f=r({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[i];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,I=m.length;y<I;y++){var O=m[y],B=O.fn;O.once&&this.off(i,B,O.ctx),B.call(O.ctx||this,f)}this._firingCount--}}return u&&this._propagateEvent(f),this},listens:function(i,o,u,f){typeof i!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(f=!!o,m=void 0,u=void 0);var y=this._events&&this._events[i];if(y&&y.length&&this._listens(i,m,u)!==!1)return!0;if(f){for(var I in this._eventParents)if(this._eventParents[I].listens(i,o,u,f))return!0}return!1},_listens:function(i,o,u){if(!this._events)return!1;var f=this._events[i]||[];if(!o)return!!f.length;u===this&&(u=void 0);for(var m=0,y=f.length;m<y;m++)if(f[m].fn===o&&f[m].ctx===u)return m;return!1},once:function(i,o,u){if(typeof i=="object")for(var f in i)this._on(f,i[f],o,!0);else{i=z(i);for(var m=0,y=i.length;m<y;m++)this._on(i[m],o,u,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[p(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[p(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,r({layer:i.target,propagatedFrom:i.target},i),!0)}};Kt.addEventListener=Kt.on,Kt.removeEventListener=Kt.clearAllEventListeners=Kt.off,Kt.addOneTimeEventListener=Kt.once,Kt.fireEvent=Kt.fire,Kt.hasEventListeners=Kt.listens;var Ut=_e.extend(Kt);function nt(i,o,u){this.x=u?Math.round(i):i,this.y=u?Math.round(o):o}var Fe=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};nt.prototype={clone:function(){return new nt(this.x,this.y)},add:function(i){return this.clone()._add(_t(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(_t(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new nt(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new nt(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fe(this.x),this.y=Fe(this.y),this},distanceTo:function(i){i=_t(i);var o=i.x-this.x,u=i.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(i){return i=_t(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=_t(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function _t(i,o,u){return i instanceof nt?i:ot(i)?new nt(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new nt(i.x,i.y):new nt(i,o,u)}function Wt(i,o){if(i)for(var u=o?[i,o]:i,f=0,m=u.length;f<m;f++)this.extend(u[f])}Wt.prototype={extend:function(i){var o,u;if(!i)return this;if(i instanceof nt||typeof i[0]=="number"||"x"in i)o=u=_t(i);else if(i=Gt(i),o=i.min,u=i.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(i){return _t((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return _t(this.min.x,this.max.y)},getTopRight:function(){return _t(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,u;return typeof i[0]=="number"||i instanceof nt?i=_t(i):i=Gt(i),i instanceof Wt?(o=i.min,u=i.max):o=u=i,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=Gt(i);var o=this.min,u=this.max,f=i.min,m=i.max,y=m.x>=o.x&&f.x<=u.x,I=m.y>=o.y&&f.y<=u.y;return y&&I},overlaps:function(i){i=Gt(i);var o=this.min,u=this.max,f=i.min,m=i.max,y=m.x>o.x&&f.x<u.x,I=m.y>o.y&&f.y<u.y;return y&&I},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var o=this.min,u=this.max,f=Math.abs(o.x-u.x)*i,m=Math.abs(o.y-u.y)*i;return Gt(_t(o.x-f,o.y-m),_t(u.x+f,u.y+m))},equals:function(i){return i?(i=Gt(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Gt(i,o){return!i||i instanceof Wt?i:new Wt(i,o)}function xt(i,o){if(i)for(var u=o?[i,o]:i,f=0,m=u.length;f<m;f++)this.extend(u[f])}xt.prototype={extend:function(i){var o=this._southWest,u=this._northEast,f,m;if(i instanceof Ot)f=i,m=i;else if(i instanceof xt){if(f=i._southWest,m=i._northEast,!f||!m)return this}else return i?this.extend(Rt(i)||ae(i)):this;return!o&&!u?(this._southWest=new Ot(f.lat,f.lng),this._northEast=new Ot(m.lat,m.lng)):(o.lat=Math.min(f.lat,o.lat),o.lng=Math.min(f.lng,o.lng),u.lat=Math.max(m.lat,u.lat),u.lng=Math.max(m.lng,u.lng)),this},pad:function(i){var o=this._southWest,u=this._northEast,f=Math.abs(o.lat-u.lat)*i,m=Math.abs(o.lng-u.lng)*i;return new xt(new Ot(o.lat-f,o.lng-m),new Ot(u.lat+f,u.lng+m))},getCenter:function(){return new Ot((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ot(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ot(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Ot||"lat"in i?i=Rt(i):i=ae(i);var o=this._southWest,u=this._northEast,f,m;return i instanceof xt?(f=i.getSouthWest(),m=i.getNorthEast()):f=m=i,f.lat>=o.lat&&m.lat<=u.lat&&f.lng>=o.lng&&m.lng<=u.lng},intersects:function(i){i=ae(i);var o=this._southWest,u=this._northEast,f=i.getSouthWest(),m=i.getNorthEast(),y=m.lat>=o.lat&&f.lat<=u.lat,I=m.lng>=o.lng&&f.lng<=u.lng;return y&&I},overlaps:function(i){i=ae(i);var o=this._southWest,u=this._northEast,f=i.getSouthWest(),m=i.getNorthEast(),y=m.lat>o.lat&&f.lat<u.lat,I=m.lng>o.lng&&f.lng<u.lng;return y&&I},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=ae(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ae(i,o){return i instanceof xt?i:new xt(i,o)}function Ot(i,o,u){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,u!==void 0&&(this.alt=+u)}Ot.prototype={equals:function(i,o){if(!i)return!1;i=Rt(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+S(this.lat,i)+", "+S(this.lng,i)+")"},distanceTo:function(i){return qe.distance(this,Rt(i))},wrap:function(){return qe.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,u=o/Math.cos(Math.PI/180*this.lat);return ae([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new Ot(this.lat,this.lng,this.alt)}};function Rt(i,o,u){return i instanceof Ot?i:ot(i)&&typeof i[0]!="object"?i.length===3?new Ot(i[0],i[1],i[2]):i.length===2?new Ot(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Ot(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new Ot(i,o,u)}var ue={latLngToPoint:function(i,o){var u=this.projection.project(i),f=this.scale(o);return this.transformation._transform(u,f)},pointToLatLng:function(i,o){var u=this.scale(o),f=this.transformation.untransform(i,u);return this.projection.unproject(f)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(i),f=this.transformation.transform(o.min,u),m=this.transformation.transform(o.max,u);return new Wt(f,m)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?v(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?v(i.lat,this.wrapLat,!0):i.lat,f=i.alt;return new Ot(u,o,f)},wrapLatLngBounds:function(i){var o=i.getCenter(),u=this.wrapLatLng(o),f=o.lat-u.lat,m=o.lng-u.lng;if(f===0&&m===0)return i;var y=i.getSouthWest(),I=i.getNorthEast(),O=new Ot(y.lat-f,y.lng-m),B=new Ot(I.lat-f,I.lng-m);return new xt(O,B)}},qe=r({},ue,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var u=Math.PI/180,f=i.lat*u,m=o.lat*u,y=Math.sin((o.lat-i.lat)*u/2),I=Math.sin((o.lng-i.lng)*u/2),O=y*y+Math.cos(f)*Math.cos(m)*I*I,B=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*B}}),qi=6378137,Qe={R:qi,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,u=this.MAX_LATITUDE,f=Math.max(Math.min(u,i.lat),-u),m=Math.sin(f*o);return new nt(this.R*i.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(i){var o=180/Math.PI;return new Ot((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=qi*Math.PI;return new Wt([-i,-i],[i,i])}()};function Wn(i,o,u,f){if(ot(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=u,this._d=f}Wn.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new nt((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function P(i,o,u,f){return new Wn(i,o,u,f)}var k=r({},qe,{code:"EPSG:3857",projection:Qe,transformation:function(){var i=.5/(Math.PI*Qe.R);return P(i,.5,-i,.5)}()}),U=r({},k,{code:"EPSG:900913"});function H(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Z(i,o){var u="",f,m,y,I,O,B;for(f=0,y=i.length;f<y;f++){for(O=i[f],m=0,I=O.length;m<I;m++)B=O[m],u+=(m?"L":"M")+B.x+" "+B.y;u+=o?ct.svg?"z":"x":""}return u||"M0 0"}var X=document.documentElement.style,et="ActiveXObject"in window,Q=et&&!document.addEventListener,Y="msLaunchUri"in navigator&&!("documentMode"in document),K=cn("webkit"),ut=cn("android"),at=cn("android 2")||cn("android 3"),lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),gt=ut&&cn("Google")&&lt<537&&!("AudioNode"in window),dt=!!window.opera,Pt=!Y&&cn("chrome"),zt=cn("gecko")&&!K&&!dt&&!et,ne=!Pt&&cn("safari"),Me=cn("phantom"),wn="OTransition"in X,kn=navigator.platform.indexOf("Win")===0,Tn=et&&"transition"in X,Kn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!at,Te="MozPerspective"in X,Xe=!window.L_DISABLE_3D&&(Tn||Kn||Te)&&!wn&&!Me,Mn=typeof orientation<"u"||cn("mobile"),Er=Mn&&K,No=Mn&&Kn,br=!window.PointerEvent&&window.MSPointerEvent,mi=!!(window.PointerEvent||br),Ts="ontouchstart"in window||!!window.TouchEvent,Ir=!window.L_NO_TOUCH&&(Ts||mi),Gn=Mn&&dt,Bo=Mn&&zt,Es=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fo=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",T,o),window.removeEventListener("testPassiveEventSupport",T,o)}catch{}return i}(),Hi=function(){return!!document.createElement("canvas").getContext}(),bs=!!(document.createElementNS&&H("svg").createSVGRect),De=!!bs&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Uo=!bs&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Zi=navigator.platform.indexOf("Mac")===0,Wi=navigator.platform.indexOf("Linux")===0;function cn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ct={ie:et,ielt9:Q,edge:Y,webkit:K,android:ut,android23:at,androidStock:gt,opera:dt,chrome:Pt,gecko:zt,safari:ne,phantom:Me,opera12:wn,win:kn,ie3d:Tn,webkit3d:Kn,gecko3d:Te,any3d:Xe,mobile:Mn,mobileWebkit:Er,mobileWebkit3d:No,msPointer:br,pointer:mi,touch:Ir,touchNative:Ts,mobileOpera:Gn,mobileGecko:Bo,retina:Es,passiveEvents:Fo,canvas:Hi,svg:bs,vml:Uo,inlineSvg:De,mac:Zi,linux:Wi},Qn=ct.msPointer?"MSPointerDown":"pointerdown",zo=ct.msPointer?"MSPointerMove":"pointermove",$o=ct.msPointer?"MSPointerUp":"pointerup",Ki=ct.msPointer?"MSPointerCancel":"pointercancel",Is={touchstart:Qn,touchmove:zo,touchend:$o,touchcancel:Ki},Ps={touchstart:Cs,touchmove:As,touchend:As,touchcancel:As},En={},bn=!1;function jo(i,o,u){return o==="touchstart"&&Ho(),Ps[o]?(u=Ps[o].bind(this,u),i.addEventListener(Is[o],u,!1),u):(console.warn("wrong event specified:",o),T)}function qo(i,o,u){if(!Is[o]){console.warn("wrong event specified:",o);return}i.removeEventListener(Is[o],u,!1)}function Pr(i){En[i.pointerId]=i}function Ar(i){En[i.pointerId]&&(En[i.pointerId]=i)}function Cr(i){delete En[i.pointerId]}function Ho(){bn||(document.addEventListener(Qn,Pr,!0),document.addEventListener(zo,Ar,!0),document.addEventListener($o,Cr,!0),document.addEventListener(Ki,Cr,!0),bn=!0)}function As(i,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in En)o.touches.push(En[u]);o.changedTouches=[o],i(o)}}function Cs(i,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&de(o),As(i,o)}function Zo(i){var o={},u,f;for(f in i)u=i[f],o[f]=u&&u.bind?u.bind(i):u;return i=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var xr=200;function Gi(i,o){i.addEventListener("dblclick",o);var u=0,f;function m(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var I=Ur(y);if(!(I.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!I.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var O=Date.now();O-u<=xr?(f++,f===2&&o(Zo(y))):f=1,u=O}}}return i.addEventListener("click",m),{dblclick:o,simDblclick:m}}function Xn(i,o){i.removeEventListener("dblclick",o.dblclick),i.removeEventListener("click",o.simDblclick)}var Qi=Jn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xi=Jn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Sr=Xi==="webkitTransition"||Xi==="OTransition"?Xi+"End":"transitionend";function Rr(i){return typeof i=="string"?document.getElementById(i):i}function _i(i,o){var u=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(i,null);u=f?f[o]:null}return u==="auto"?null:u}function Vt(i,o,u){var f=document.createElement(i);return f.className=o||"",u&&u.appendChild(f),f}function ie(i){var o=i.parentNode;o&&o.removeChild(i)}function Yi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Yn(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function gi(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function Lr(i,o){if(i.classList!==void 0)return i.classList.contains(o);var u=hn(i);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function At(i,o){if(i.classList!==void 0)for(var u=z(o),f=0,m=u.length;f<m;f++)i.classList.add(u[f]);else if(!Lr(i,o)){var y=hn(i);kr(i,(y?y+" ":"")+o)}}function ce(i,o){i.classList!==void 0?i.classList.remove(o):kr(i,N((" "+hn(i)+" ").replace(" "+o+" "," ")))}function kr(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function hn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function ge(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&xs(i,o)}function xs(i,o){var u=!1,f="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(f)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):i.style.filter+=" progid:"+f+"(opacity="+o+")"}function Jn(i){for(var o=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in o)return i[u];return!1}function Dn(i,o,u){var f=o||new nt(0,0);i.style[Qi]=(ct.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(u?" scale("+u+")":"")}function Tt(i,o){i._leaflet_pos=o,ct.any3d?Dn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function fn(i){return i._leaflet_pos||new nt(0,0)}var In,Pn,Mr;if("onselectstart"in document)In=function(){yt(window,"selectstart",de)},Pn=function(){te(window,"selectstart",de)};else{var yi=Jn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);In=function(){if(yi){var i=document.documentElement.style;Mr=i[yi],i[yi]="none"}},Pn=function(){yi&&(document.documentElement.style[yi]=Mr,Mr=void 0)}}function Dr(){yt(window,"dragstart",de)}function Or(){te(window,"dragstart",de)}var Ss,Vr;function ti(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(sn(),Ss=i,Vr=i.style.outlineStyle,i.style.outlineStyle="none",yt(window,"keydown",sn))}function sn(){Ss&&(Ss.style.outlineStyle=Vr,Ss=void 0,Vr=void 0,te(window,"keydown",sn))}function Nr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Rs(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var Wo={__proto__:null,TRANSFORM:Qi,TRANSITION:Xi,TRANSITION_END:Sr,get:Rr,getStyle:_i,create:Vt,remove:ie,empty:Yi,toFront:Yn,toBack:gi,hasClass:Lr,addClass:At,removeClass:ce,setClass:kr,getClass:hn,setOpacity:ge,testProp:Jn,setTransform:Dn,setPosition:Tt,getPosition:fn,get disableTextSelection(){return In},get enableTextSelection(){return Pn},disableImageDrag:Dr,enableImageDrag:Or,preventOutline:ti,restoreOutline:sn,getSizedParentNode:Nr,getScale:Rs};function yt(i,o,u,f){if(o&&typeof o=="object")for(var m in o)Br(i,m,o[m],u);else{o=z(o);for(var y=0,I=o.length;y<I;y++)Br(i,o[y],u,f)}return this}var dn="_leaflet_events";function te(i,o,u,f){if(arguments.length===1)Ko(i),delete i[dn];else if(o&&typeof o=="object")for(var m in o)Fr(i,m,o[m],u);else if(o=z(o),arguments.length===2)Ko(i,function(O){return ht(o,O)!==-1});else for(var y=0,I=o.length;y<I;y++)Fr(i,o[y],u,f);return this}function Ko(i,o){for(var u in i[dn]){var f=u.split(/\d/)[0];(!o||o(f))&&Fr(i,f,null,null,u)}}var pn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Br(i,o,u,f){var m=o+p(u)+(f?"_"+p(f):"");if(i[dn]&&i[dn][m])return this;var y=function(O){return u.call(f||i,O||window.event)},I=y;!ct.touchNative&&ct.pointer&&o.indexOf("touch")===0?y=jo(i,o,y):ct.touch&&o==="dblclick"?y=Gi(i,y):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(pn[o]||o,y,ct.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(O){O=O||window.event,zr(i,O)&&I(O)},i.addEventListener(pn[o],y,!1)):i.addEventListener(o,I,!1):i.attachEvent("on"+o,y),i[dn]=i[dn]||{},i[dn][m]=y}function Fr(i,o,u,f,m){m=m||o+p(u)+(f?"_"+p(f):"");var y=i[dn]&&i[dn][m];if(!y)return this;!ct.touchNative&&ct.pointer&&o.indexOf("touch")===0?qo(i,o,y):ct.touch&&o==="dblclick"?Xn(i,y):"removeEventListener"in i?i.removeEventListener(pn[o]||o,y,!1):i.detachEvent("on"+o,y),i[dn][m]=null}function mn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function vi(i){return Br(i,"wheel",mn),this}function wi(i){return yt(i,"mousedown touchstart dblclick contextmenu",mn),i._leaflet_disable_click=!0,this}function de(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function rn(i){return de(i),mn(i),this}function Ur(i){if(i.composedPath)return i.composedPath();for(var o=[],u=i.target;u;)o.push(u),u=u.parentNode;return o}function Ls(i,o){if(!o)return new nt(i.clientX,i.clientY);var u=Rs(o),f=u.boundingClientRect;return new nt((i.clientX-f.left)/u.x-o.clientLeft,(i.clientY-f.top)/u.y-o.clientTop)}var he=ct.linux&&ct.chrome?window.devicePixelRatio:ct.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Go(i){return ct.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/he:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function zr(i,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var Qo={__proto__:null,on:yt,off:te,stopPropagation:mn,disableScrollPropagation:vi,disableClickPropagation:wi,preventDefault:de,stop:rn,getPropagationPath:Ur,getMousePosition:Ls,getWheelDelta:Go,isExternalTarget:zr,addListener:yt,removeListener:te},$r=Ut.extend({run:function(i,o,u,f){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=fn(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var u=this._startPos.add(this._offset.multiplyBy(i));o&&u._round(),Tt(this._el,u),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Mt=Ut.extend({options:{crs:k,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=q(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Rt(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xi&&ct.any3d&&!ct.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),yt(this._proxy,Sr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(Rt(i),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var f=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,u.zoom):this._tryAnimatedPan(i,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,u){var f=this.getZoomScale(o),m=this.getSize().divideBy(2),y=i instanceof nt?i:this.latLngToContainerPoint(i),I=y.subtract(m).multiplyBy(1-1/f),O=this.containerPointToLatLng(m.add(I));return this.setView(O,o,{zoom:u})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():ae(i);var u=_t(o.paddingTopLeft||o.padding||[0,0]),f=_t(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(i,!1,u.add(f));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:i.getCenter(),zoom:m};var y=f.subtract(u).divideBy(2),I=this.project(i.getSouthWest(),m),O=this.project(i.getNorthEast(),m),B=this.unproject(I.add(O).divideBy(2).add(y),m);return{center:B,zoom:m}},fitBounds:function(i,o){if(i=ae(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=_t(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $r,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){At(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,u){if(u=u||{},u.animate===!1||!ct.any3d)return this.setView(i,o,u);this._stop();var f=this.project(this.getCenter()),m=this.project(i),y=this.getSize(),I=this._zoom;i=Rt(i),o=o===void 0?I:o;var O=Math.max(y.x,y.y),B=O*this.getZoomScale(I,o),W=m.distanceTo(f)||1,st=1.42,vt=st*st;function Lt(be){var fa=be?-1:1,A_=be?B:O,C_=B*B-O*O+fa*vt*vt*W*W,x_=2*A_*vt*W,jl=C_/x_,dh=Math.sqrt(jl*jl+1)-jl,S_=dh<1e-9?-18:Math.log(dh);return S_}function Ze(be){return(Math.exp(be)-Math.exp(-be))/2}function Re(be){return(Math.exp(be)+Math.exp(-be))/2}function gn(be){return Ze(be)/Re(be)}var Je=Lt(0);function qs(be){return O*(Re(Je)/Re(Je+st*be))}function E_(be){return O*(Re(Je)*gn(Je+st*be)-Ze(Je))/vt}function b_(be){return 1-Math.pow(1-be,1.5)}var I_=Date.now(),hh=(Lt(1)-Je)/st,P_=u.duration?1e3*u.duration:1e3*hh*.8;function fh(){var be=(Date.now()-I_)/P_,fa=b_(be)*hh;be<=1?(this._flyToFrame=C(fh,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(E_(fa)/W)),I),this.getScaleZoom(O/qs(fa),I),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),fh.call(this),this},flyToBounds:function(i,o){var u=this._getBoundsCenterZoom(i,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(i){return i=ae(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var u=this.getCenter(),f=this._limitCenter(u,this._zoom,ae(i));return u.equals(f)||this.panTo(f,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var u=_t(o.paddingTopLeft||o.padding||[0,0]),f=_t(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(i),I=this.getPixelBounds(),O=Gt([I.min.add(u),I.max.subtract(f)]),B=O.getSize();if(!O.contains(y)){this._enforcingBounds=!0;var W=y.subtract(O.getCenter()),st=O.extend(y).getSize().subtract(B);m.x+=W.x<0?-st.x:st.x,m.y+=W.y<0?-st.y:st.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=r({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),f=o.divideBy(2).round(),m=u.divideBy(2).round(),y=f.subtract(m);return!y.x&&!y.y?this:(i.animate&&i.pan?this.panBy(y):(i.pan&&this._rawPanBy(y),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=r({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,i):navigator.geolocation.getCurrentPosition(o,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var o=i.code,u=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var o=i.coords.latitude,u=i.coords.longitude,f=new Ot(o,u),m=f.toBounds(i.coords.accuracy*2),y=this._locateOptions;if(y.setView){var I=this.getBoundsZoom(m);this.setView(f,y.maxZoom?Math.min(I,y.maxZoom):I)}var O={latlng:f,bounds:m,timestamp:i.timestamp};for(var B in i.coords)typeof i.coords[B]=="number"&&(O[B]=i.coords[B]);this.fire("locationfound",O)}},addHandler:function(i,o){if(!o)return this;var u=this[i]=new o(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ie(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),f=Vt("div",u,o||this._mapPane);return i&&(this._panes[i]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new xt(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,u){i=ae(i),u=_t(u||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),I=i.getNorthWest(),O=i.getSouthEast(),B=this.getSize().subtract(u),W=Gt(this.project(O,f),this.project(I,f)).getSize(),st=ct.any3d?this.options.zoomSnap:1,vt=B.x/W.x,Lt=B.y/W.y,Ze=o?Math.max(vt,Lt):Math.min(vt,Lt);return f=this.getScaleZoom(Ze,f),st&&(f=Math.round(f/(st/100))*(st/100),f=o?Math.ceil(f/st)*st:Math.floor(f/st)*st),Math.max(m,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new nt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var u=this._getTopLeftPoint(i,o);return new Wt(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(i)/u.scale(o)},getScaleZoom:function(i,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var f=u.zoom(i*u.scale(o));return isNaN(f)?1/0:f},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Rt(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(_t(i),o)},layerPointToLatLng:function(i){var o=_t(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(Rt(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Rt(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ae(i))},distance:function(i,o){return this.options.crs.distance(Rt(i),Rt(o))},containerPointToLayerPoint:function(i){return _t(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return _t(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint(_t(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Rt(i)))},mouseEventToContainerPoint:function(i){return Ls(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=Rr(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");yt(o,"scroll",this._onScroll,this),this._containerId=p(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ct.any3d,At(i,"leaflet-container"+(ct.touch?" leaflet-touch":"")+(ct.retina?" leaflet-retina":"")+(ct.ielt9?" leaflet-oldie":"")+(ct.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=_i(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tt(this._mapPane,new nt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(At(i.markerPane,"leaflet-zoom-hide"),At(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o,u){Tt(this._mapPane,new nt(0,0));var f=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,u)._move(i,o)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,u,f){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),f?u&&u.pinch&&this.fire("zoom",u):((m||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Tt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[p(this._container)]=this;var o=i?te:yt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ct.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var u=[],f,m=o==="mouseout"||o==="mouseover",y=i.target||i.srcElement,I=!1;y;){if(f=this._targets[p(y)],f&&(o==="click"||o==="preclick")&&this._draggableMoved(f)){I=!0;break}if(f&&f.listens(o,!0)&&(m&&!zr(y,i)||(u.push(f),m))||y===this._container)break;y=y.parentNode}return!u.length&&!I&&!m&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var o=i.target||i.srcElement;if(!(!this._loaded||o._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(o))){var u=i.type;u==="mousedown"&&ti(o),this._fireDOMEvent(i,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,u){if(i.type==="click"){var f=r({},i);f.type="preclick",this._fireDOMEvent(f,f.type,u)}var m=this._findEventTargets(i,o);if(u){for(var y=[],I=0;I<u.length;I++)u[I].listens(o,!0)&&y.push(u[I]);m=y.concat(m)}if(m.length){o==="contextmenu"&&de(i);var O=m[0],B={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var W=O.getLatLng&&(!O._radius||O._radius<=10);B.containerPoint=W?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(i),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=W?O.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(I=0;I<m.length;I++)if(m[I].fire(o,B,!0),B.originalEvent._stopped||m[I].options.bubblingMouseEvents===!1&&ht(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return fn(this._mapPane)||new nt(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var u=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var u=this.getSize()._divideBy(2);return this.project(i,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,u){var f=this._getNewPixelOrigin(u,o);return this.project(i,o)._subtract(f)},_latLngBoundsToNewLayerBounds:function(i,o,u){var f=this._getNewPixelOrigin(u,o);return Gt([this.project(i.getSouthWest(),o)._subtract(f),this.project(i.getNorthWest(),o)._subtract(f),this.project(i.getSouthEast(),o)._subtract(f),this.project(i.getNorthEast(),o)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,u){if(!u)return i;var f=this.project(i,o),m=this.getSize().divideBy(2),y=new Wt(f.subtract(m),f.add(m)),I=this._getBoundsOffset(y,u,o);return Math.abs(I.x)<=1&&Math.abs(I.y)<=1?i:this.unproject(f.add(I),o)},_limitOffset:function(i,o){if(!o)return i;var u=this.getPixelBounds(),f=new Wt(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(f,o))},_getBoundsOffset:function(i,o,u){var f=Gt(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),m=f.min.subtract(i.min),y=f.max.subtract(i.max),I=this._rebound(m.x,-y.x),O=this._rebound(m.y,-y.y);return new nt(I,O)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),u=this.getMaxZoom(),f=ct.any3d?this.options.zoomSnap:1;return f&&(i=Math.round(i/f)*f),Math.max(o,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var u=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var i=this._proxy=Vt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var u=Qi,f=this._proxy.style[u];Dn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),f===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();Dn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(o),m=this._getCenterOffset(i)._divideBy(1-1/f);return u.animate!==!0&&!this.getSize().contains(m)?!1:(C(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,u,f){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,At(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ks(i,o){return new Mt(i,o)}var Ye=_e.extend({options:{position:"topright"},initialize:function(i){q(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),u=this.getPosition(),f=i._controlCorners[u];return At(o,"leaflet-control"),u.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),He=function(i){return new Ye(i)};Mt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",u=this._controlContainer=Vt("div",o+"control-container",this._container);function f(m,y){var I=o+m+" "+o+y;i[m+y]=Vt("div",I,u)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ie(this._controlCorners[i]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jr=Ye.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,u,f){return u<f?-1:f<u?1:0}},initialize:function(i,o,u){q(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in i)this._addLayer(i[f],f);for(f in o)this._addLayer(o[f],f,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ye.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(p(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){At(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(At(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=Vt("div",i),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),wi(o),vi(o);var f=this._section=Vt("section",i+"-list");u&&(this._map.on("click",this.collapse,this),yt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Vt("a",i+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),yt(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){de(y),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Vt("div",i+"-base",f),this._separator=Vt("div",i+"-separator",f),this._overlaysList=Vt("div",i+"-overlays",f),o.appendChild(f)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&p(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yi(this._baseLayersList),Yi(this._overlaysList),this._layerControlInputs=[];var i,o,u,f,m=0;for(u=0;u<this._layers.length;u++)f=this._layers[u],this._addItem(f),o=o||f.overlay,i=i||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(i=i&&m>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(p(i.target)),u=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(i,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=u,f.firstChild},_addItem:function(i){var o=document.createElement("label"),u=this._map.hasLayer(i.layer),f;i.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=u):f=this._createRadioElement("leaflet-base-layers_"+p(this),u),this._layerControlInputs.push(f),f.layerId=p(i.layer),yt(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+i.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(f),y.appendChild(m);var I=i.overlay?this._overlaysList:this._baseLayersList;return I.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,o,u,f=[],m=[];this._handlingClick=!0;for(var y=i.length-1;y>=0;y--)o=i[y],u=this._getLayer(o.layerId).layer,o.checked?f.push(u):o.checked||m.push(u);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,u,f=this._map.getZoom(),m=i.length-1;m>=0;m--)o=i[m],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&f<u.options.minZoom||u.options.maxZoom!==void 0&&f>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,yt(i,"click",de),this.expand();var o=this;setTimeout(function(){te(i,"click",de),o._preventClick=!1})}}),Nl=function(i,o,u){return new jr(i,o,u)},ei=Ye.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",u=Vt("div",o+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,u,f,m){var y=Vt("a",u,f);return y.innerHTML=i,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),wi(y),yt(y,"click",rn),yt(y,"click",m,this),yt(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";ce(this._zoomInButton,o),ce(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(At(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(At(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mt.mergeOptions({zoomControl:!0}),Mt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ei,this.addControl(this.zoomControl))});var Xo=function(i){return new ei(i)},Ms=Ye.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",u=Vt("div",o),f=this.options;return this._addScales(f,o+"-line",u),i.on(f.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,u){i.metric&&(this._mScale=Vt("div",o,u)),i.imperial&&(this._iScale=Vt("div",o,u))},_update:function(){var i=this._map,o=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/i)},_updateImperial:function(i){var o=i*3.2808399,u,f,m;o>5280?(u=o/5280,f=this._getRoundNum(u),this._updateScale(this._iScale,f+" mi",f/u)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(i,o,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),u=i/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),Ds=function(i){return new Ms(i)},Yo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ti=Ye.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ct.inlineSvg?Yo+" ":"")+"Leaflet</a>"},initialize:function(i){q(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Vt("div","leaflet-control-attribution"),wi(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Mt.mergeOptions({attributionControl:!0}),Mt.addInitHook(function(){this.options.attributionControl&&new Ti().addTo(this)});var Bl=function(i){return new Ti(i)};Ye.Layers=jr,Ye.Zoom=ei,Ye.Scale=Ms,Ye.Attribution=Ti,He.layers=Nl,He.zoom=Xo,He.scale=Ds,He.attribution=Bl;var on=_e.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});on.addTo=function(i,o){return i.addHandler(o,this),this};var Ji={Events:Kt},qr=ct.touch?"touchstart mousedown":"mousedown",An=Ut.extend({options:{clickTolerance:3},initialize:function(i,o,u,f){q(this,f),this._element=i,this._dragStartTarget=o||i,this._preventOutline=u},enable:function(){this._enabled||(yt(this._dragStartTarget,qr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(An._dragging===this&&this.finishDrag(!0),te(this._dragStartTarget,qr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Lr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){An._dragging===this&&this.finishDrag();return}if(!(An._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(An._dragging=this,this._preventOutline&&ti(this._element),Dr(),In(),!this._moving)){this.fire("down");var o=i.touches?i.touches[0]:i,u=Nr(this._element);this._startPoint=new nt(o.clientX,o.clientY),this._startPos=fn(this._element),this._parentScale=Rs(u);var f=i.type==="mousedown";yt(document,f?"mousemove":"touchmove",this._onMove,this),yt(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,u=new nt(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,de(i),this._moved||(this.fire("dragstart"),this._moved=!0,At(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),At(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Tt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ce(document.body,"leaflet-dragging"),this._lastTarget&&(ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),te(document,"mousemove touchmove",this._onMove,this),te(document,"mouseup touchend touchcancel",this._onUp,this),Or(),Pn();var o=this._moved&&this._moving;this._moving=!1,An._dragging=!1,o&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Os(i,o,u){var f,m=[1,4,2,8],y,I,O,B,W,st,vt,Lt;for(y=0,st=i.length;y<st;y++)i[y]._code=On(i[y],o);for(O=0;O<4;O++){for(vt=m[O],f=[],y=0,st=i.length,I=st-1;y<st;I=y++)B=i[y],W=i[I],B._code&vt?W._code&vt||(Lt=Se(W,B,vt,o,u),Lt._code=On(Lt,o),f.push(Lt)):(W._code&vt&&(Lt=Se(W,B,vt,o,u),Lt._code=On(Lt,o),f.push(Lt)),f.push(B));i=f}return i}function Vs(i,o){var u,f,m,y,I,O,B,W,st;if(!i||i.length===0)throw new Error("latlngs not passed");l(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var vt=Rt([0,0]),Lt=ae(i),Ze=Lt.getNorthWest().distanceTo(Lt.getSouthWest())*Lt.getNorthEast().distanceTo(Lt.getNorthWest());Ze<1700&&(vt=Ns(i));var Re=i.length,gn=[];for(u=0;u<Re;u++){var Je=Rt(i[u]);gn.push(o.project(Rt([Je.lat-vt.lat,Je.lng-vt.lng])))}for(O=B=W=0,u=0,f=Re-1;u<Re;f=u++)m=gn[u],y=gn[f],I=m.y*y.x-y.y*m.x,B+=(m.x+y.x)*I,W+=(m.y+y.y)*I,O+=I*3;O===0?st=gn[0]:st=[B/O,W/O];var qs=o.unproject(_t(st));return Rt([qs.lat+vt.lat,qs.lng+vt.lng])}function Ns(i){for(var o=0,u=0,f=0,m=0;m<i.length;m++){var y=Rt(i[m]);o+=y.lat,u+=y.lng,f++}return Rt([o/f,u/f])}var Bs={__proto__:null,clipPolygon:Os,polygonCenter:Vs,centroid:Ns};function Hr(i,o){if(!o||!i.length)return i.slice();var u=o*o;return i=ta(i,u),i=Jo(i,u),i}function Zr(i,o,u){return Math.sqrt(_n(i,o,u,!0))}function ni(i,o,u){return _n(i,o,u)}function Jo(i,o){var u=i.length,f=typeof Uint8Array<"u"?Uint8Array:Array,m=new f(u);m[0]=m[u-1]=1,Fs(i,m,o,0,u-1);var y,I=[];for(y=0;y<u;y++)m[y]&&I.push(i[y]);return I}function Fs(i,o,u,f,m){var y=0,I,O,B;for(O=f+1;O<=m-1;O++)B=_n(i[O],i[f],i[m],!0),B>y&&(I=O,y=B);y>u&&(o[I]=1,Fs(i,o,u,f,I),Fs(i,o,u,I,m))}function ta(i,o){for(var u=[i[0]],f=1,m=0,y=i.length;f<y;f++)ea(i[f],i[m])>o&&(u.push(i[f]),m=f);return m<y-1&&u.push(i[y-1]),u}var Wr;function ts(i,o,u,f,m){var y=f?Wr:On(i,u),I=On(o,u),O,B,W;for(Wr=I;;){if(!(y|I))return[i,o];if(y&I)return!1;O=y||I,B=Se(i,o,O,u,m),W=On(B,u),O===y?(i=B,y=W):(o=B,I=W)}}function Se(i,o,u,f,m){var y=o.x-i.x,I=o.y-i.y,O=f.min,B=f.max,W,st;return u&8?(W=i.x+y*(B.y-i.y)/I,st=B.y):u&4?(W=i.x+y*(O.y-i.y)/I,st=O.y):u&2?(W=B.x,st=i.y+I*(B.x-i.x)/y):u&1&&(W=O.x,st=i.y+I*(O.x-i.x)/y),new nt(W,st,m)}function On(i,o){var u=0;return i.x<o.min.x?u|=1:i.x>o.max.x&&(u|=2),i.y<o.min.y?u|=4:i.y>o.max.y&&(u|=8),u}function ea(i,o){var u=o.x-i.x,f=o.y-i.y;return u*u+f*f}function _n(i,o,u,f){var m=o.x,y=o.y,I=u.x-m,O=u.y-y,B=I*I+O*O,W;return B>0&&(W=((i.x-m)*I+(i.y-y)*O)/B,W>1?(m=u.x,y=u.y):W>0&&(m+=I*W,y+=O*W)),I=i.x-m,O=i.y-y,f?I*I+O*O:new nt(m,y)}function l(i){return!ot(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function d(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),l(i)}function _(i,o){var u,f,m,y,I,O,B,W;if(!i||i.length===0)throw new Error("latlngs not passed");l(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var st=Rt([0,0]),vt=ae(i),Lt=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Lt<1700&&(st=Ns(i));var Ze=i.length,Re=[];for(u=0;u<Ze;u++){var gn=Rt(i[u]);Re.push(o.project(Rt([gn.lat-st.lat,gn.lng-st.lng])))}for(u=0,f=0;u<Ze-1;u++)f+=Re[u].distanceTo(Re[u+1])/2;if(f===0)W=Re[0];else for(u=0,y=0;u<Ze-1;u++)if(I=Re[u],O=Re[u+1],m=I.distanceTo(O),y+=m,y>f){B=(y-f)/m,W=[O.x-B*(O.x-I.x),O.y-B*(O.y-I.y)];break}var Je=o.unproject(_t(W));return Rt([Je.lat+st.lat,Je.lng+st.lng])}var w={__proto__:null,simplify:Hr,pointToSegmentDistance:Zr,closestPointOnSegment:ni,clipSegment:ts,_getEdgeIntersection:Se,_getBitCode:On,_sqClosestPointOnSegment:_n,isFlat:l,_flat:d,polylineCenter:_},D={project:function(i){return new nt(i.lng,i.lat)},unproject:function(i){return new Ot(i.y,i.x)},bounds:new Wt([-180,-90],[180,90])},F={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Wt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,u=this.R,f=i.lat*o,m=this.R_MINOR/u,y=Math.sqrt(1-m*m),I=y*Math.sin(f),O=Math.tan(Math.PI/4-f/2)/Math.pow((1-I)/(1+I),y/2);return f=-u*Math.log(Math.max(O,1e-10)),new nt(i.lng*o*u,f)},unproject:function(i){for(var o=180/Math.PI,u=this.R,f=this.R_MINOR/u,m=Math.sqrt(1-f*f),y=Math.exp(-i.y/u),I=Math.PI/2-2*Math.atan(y),O=0,B=.1,W;O<15&&Math.abs(B)>1e-7;O++)W=m*Math.sin(I),W=Math.pow((1-W)/(1+W),m/2),B=Math.PI/2-2*Math.atan(y*W)-I,I+=B;return new Ot(I*o,i.x*o/u)}},J={__proto__:null,LonLat:D,Mercator:F,SphericalMercator:Qe},Yt=r({},qe,{code:"EPSG:3395",projection:F,transformation:function(){var i=.5/(Math.PI*F.R);return P(i,.5,-i,.5)}()}),Ee=r({},qe,{code:"EPSG:4326",projection:D,transformation:P(1/180,1,-1/180,.5)}),$t=r({},ue,{projection:D,transformation:P(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var u=o.lng-i.lng,f=o.lat-i.lat;return Math.sqrt(u*u+f*f)},infinite:!0});ue.Earth=qe,ue.EPSG3395=Yt,ue.EPSG3857=k,ue.EPSG900913=U,ue.EPSG4326=Ee,ue.Simple=$t;var ee=Ut.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[p(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[p(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Mt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=p(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=p(i);return this._layers[o]?(this._loaded&&i.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return p(i)in this._layers},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},_addLayers:function(i){i=i?ot(i)?i:[i]:[];for(var o=0,u=i.length;o<u;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[p(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=p(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,u=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;i=m.minZoom===void 0?i:Math.min(i,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pe=ee.extend({initialize:function(i,o){q(this,o),this._layers={};var u,f;if(i)for(u=0,f=i.length;u<f;u++)this.addLayer(i[u])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),u,f;for(u in this._layers)f=this._layers[u],f[i]&&f[i].apply(f,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return p(i)}}),Ei=function(i,o){return new pe(i,o)},ye=pe.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),pe.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),pe.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new xt;for(var o in this._layers){var u=this._layers[o];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),Us=function(i,o){return new ye(i,o)},Vn=_e.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){q(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(f,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(i,o){var u=this.options,f=u[o+"Size"];typeof f=="number"&&(f=[f,f]);var m=_t(f),y=_t(o==="shadow"&&u.shadowAnchor||u.iconAnchor||m&&m.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(u.className||""),y&&(i.style.marginLeft=-y.x+"px",i.style.marginTop=-y.y+"px"),m&&(i.style.width=m.x+"px",i.style.height=m.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return ct.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function i_(i){return new Vn(i)}var Kr=Vn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Kr.imagePath!="string"&&(Kr.imagePath=this._detectIconPath()),(this.options.imagePath||Kr.imagePath)+Vn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var o=function(u,f,m){var y=f.exec(u);return y&&y[m]};return i=o(i,/^url\((['"])?(.+)\1\)$/,2),i&&o(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Vt("div","leaflet-default-icon-path",document.body),o=_i(i,"background-image")||_i(i,"backgroundImage");if(document.body.removeChild(i),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Zc=on.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new An(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),At(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,u=o._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=fn(o._icon),I=u.getPixelBounds(),O=u.getPixelOrigin(),B=Gt(I.min._subtract(O).add(m),I.max._subtract(O).subtract(m));if(!B.contains(y)){var W=_t((Math.max(B.max.x,y.x)-B.max.x)/(I.max.x-B.max.x)-(Math.min(B.min.x,y.x)-B.min.x)/(I.min.x-B.min.x),(Math.max(B.max.y,y.y)-B.max.y)/(I.max.y-B.max.y)-(Math.min(B.min.y,y.y)-B.min.y)/(I.min.y-B.min.y)).multiplyBy(f);u.panBy(W,{animate:!1}),this._draggable._newPos._add(W),this._draggable._startPos._add(W),Tt(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=C(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,u=o._shadow,f=fn(o._icon),m=o._map.layerPointToLatLng(f);u&&Tt(u,f),o._latlng=m,i.latlng=m,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),na=ee.extend({options:{icon:new Kr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){q(this,o),this._latlng=Rt(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=Rt(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),f=!1;u!==this._icon&&(this._icon&&this._removeIcon(),f=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),At(u,o),i.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yt(u,"focus",this._panOnFocus,this);var m=i.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(At(m,o),m.alt=""),this._shadow=m,i.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&te(this._icon,"focus",this._panOnFocus,this),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Tt(this._icon,i),this._shadow&&Tt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(At(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zc)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zc(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&ge(this._icon,i),this._shadow&&ge(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var o=this.options.icon.options,u=o.iconSize?_t(o.iconSize):_t(0,0),f=o.iconAnchor?_t(o.iconAnchor):_t(0,0);i.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:u.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function s_(i,o){return new na(i,o)}var bi=ee.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return q(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ia=bi.extend({options:{fill:!0,radius:10},initialize:function(i,o){q(this,o),this._latlng=Rt(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=Rt(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return bi.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,u=this._clickTolerance(),f=[i+u,o+u];this._pxBounds=new Wt(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function r_(i,o){return new ia(i,o)}var Fl=ia.extend({initialize:function(i,o,u){if(typeof o=="number"&&(o=r({},u,{radius:o})),q(this,o),this._latlng=Rt(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new xt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:bi.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,u=this._map,f=u.options.crs;if(f.distance===qe.distance){var m=Math.PI/180,y=this._mRadius/qe.R/m,I=u.project([o+y,i]),O=u.project([o-y,i]),B=I.add(O).divideBy(2),W=u.unproject(B).lat,st=Math.acos((Math.cos(y*m)-Math.sin(o*m)*Math.sin(W*m))/(Math.cos(o*m)*Math.cos(W*m)))/m;(isNaN(st)||st===0)&&(st=y/Math.cos(Math.PI/180*o)),this._point=B.subtract(u.getPixelOrigin()),this._radius=isNaN(st)?0:B.x-u.project([W,i-st]).x,this._radiusY=B.y-I.y}else{var vt=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(vt).x}this._updateBounds()}});function o_(i,o,u){return new Fl(i,o,u)}var ii=bi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){q(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,u=null,f=_n,m,y,I=0,O=this._parts.length;I<O;I++)for(var B=this._parts[I],W=1,st=B.length;W<st;W++){m=B[W-1],y=B[W];var vt=f(i,m,y,!0);vt<o&&(o=vt,u=f(i,m,y))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=Rt(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new xt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return l(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],u=l(i),f=0,m=i.length;f<m;f++)u?(o[f]=Rt(i[f]),this._bounds.extend(o[f])):o[f]=this._convertLatLngs(i[f]);return o},_project:function(){var i=new Wt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new nt(i,i);this._rawPxBounds&&(this._pxBounds=new Wt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(i,o,u){var f=i[0]instanceof Ot,m=i.length,y,I;if(f){for(I=[],y=0;y<m;y++)I[y]=this._map.latLngToLayerPoint(i[y]),u.extend(I[y]);o.push(I)}else for(y=0;y<m;y++)this._projectLatlngs(i[y],o,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,f,m,y,I,O,B;for(u=0,m=0,y=this._rings.length;u<y;u++)for(B=this._rings[u],f=0,I=B.length;f<I-1;f++)O=ts(B[f],B[f+1],i,f,!0),O&&(o[m]=o[m]||[],o[m].push(O[0]),(O[1]!==B[f+1]||f===I-2)&&(o[m].push(O[1]),m++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,u=0,f=i.length;u<f;u++)i[u]=Hr(i[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var u,f,m,y,I,O,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,y=this._parts.length;u<y;u++)for(O=this._parts[u],f=0,I=O.length,m=I-1;f<I;m=f++)if(!(!o&&f===0)&&Zr(i,O[m],O[f])<=B)return!0;return!1}});function a_(i,o){return new ii(i,o)}ii._flat=d;var zs=ii.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var o=ii.prototype._convertLatLngs.call(this,i),u=o.length;return u>=2&&o[0]instanceof Ot&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(i){ii.prototype._setLatLngs.call(this,i),l(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return l(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,u=new nt(o,o);if(i=new Wt(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,y;f<m;f++)y=Os(this._rings[f],i,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,u,f,m,y,I,O,B,W;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(y=0,B=this._parts.length;y<B;y++)for(u=this._parts[y],I=0,W=u.length,O=W-1;I<W;O=I++)f=u[I],m=u[O],f.y>i.y!=m.y>i.y&&i.x<(m.x-f.x)*(i.y-f.y)/(m.y-f.y)+f.x&&(o=!o);return o||ii.prototype._containsPoint.call(this,i,!0)}});function l_(i,o){return new zs(i,o)}var si=ye.extend({initialize:function(i,o){q(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=ot(i)?i:i.features,u,f,m;if(o){for(u=0,f=o.length;u<f;u++)m=o[u],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(i))return this;var I=sa(i,y);return I?(I.feature=aa(i),I.defaultOptions=I.options,this.resetStyle(I),y.onEachFeature&&y.onEachFeature(i,I),this.addLayer(I)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=r({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function sa(i,o){var u=i.type==="Feature"?i.geometry:i,f=u?u.coordinates:null,m=[],y=o&&o.pointToLayer,I=o&&o.coordsToLatLng||Ul,O,B,W,st;if(!f&&!u)return null;switch(u.type){case"Point":return O=I(f),Wc(y,i,O,o);case"MultiPoint":for(W=0,st=f.length;W<st;W++)O=I(f[W]),m.push(Wc(y,i,O,o));return new ye(m);case"LineString":case"MultiLineString":return B=ra(f,u.type==="LineString"?0:1,I),new ii(B,o);case"Polygon":case"MultiPolygon":return B=ra(f,u.type==="Polygon"?1:2,I),new zs(B,o);case"GeometryCollection":for(W=0,st=u.geometries.length;W<st;W++){var vt=sa({geometry:u.geometries[W],type:"Feature",properties:i.properties},o);vt&&m.push(vt)}return new ye(m);case"FeatureCollection":for(W=0,st=u.features.length;W<st;W++){var Lt=sa(u.features[W],o);Lt&&m.push(Lt)}return new ye(m);default:throw new Error("Invalid GeoJSON object.")}}function Wc(i,o,u,f){return i?i(o,u):new na(u,f&&f.markersInheritOptions&&f)}function Ul(i){return new Ot(i[1],i[0],i[2])}function ra(i,o,u){for(var f=[],m=0,y=i.length,I;m<y;m++)I=o?ra(i[m],o-1,u):(u||Ul)(i[m]),f.push(I);return f}function zl(i,o){return i=Rt(i),i.alt!==void 0?[S(i.lng,o),S(i.lat,o),S(i.alt,o)]:[S(i.lng,o),S(i.lat,o)]}function oa(i,o,u,f){for(var m=[],y=0,I=i.length;y<I;y++)m.push(o?oa(i[y],l(i[y])?0:o-1,u,f):zl(i[y],f));return!o&&u&&m.length>0&&m.push(m[0].slice()),m}function $s(i,o){return i.feature?r({},i.feature,{geometry:o}):aa(o)}function aa(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var $l={toGeoJSON:function(i){return $s(this,{type:"Point",coordinates:zl(this.getLatLng(),i)})}};na.include($l),Fl.include($l),ia.include($l),ii.include({toGeoJSON:function(i){var o=!l(this._latlngs),u=oa(this._latlngs,o?1:0,!1,i);return $s(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),zs.include({toGeoJSON:function(i){var o=!l(this._latlngs),u=o&&!l(this._latlngs[0]),f=oa(this._latlngs,u?2:o?1:0,!0,i);return o||(f=[f]),$s(this,{type:(u?"Multi":"")+"Polygon",coordinates:f})}}),pe.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(i).geometry.coordinates)}),$s(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var u=o==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(i);if(u)f.push(y.geometry);else{var I=aa(y);I.type==="FeatureCollection"?f.push.apply(f,I.features):f.push(I)}}}),u?$s(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Kc(i,o){return new si(i,o)}var u_=Kc,la=ee.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,u){this._url=i,this._bounds=ae(o),q(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(At(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Yn(this._image),this},bringToBack:function(){return this._map&&gi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ae(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:Vt("img");if(At(o,"leaflet-image-layer"),this._zoomAnimated&&At(o,"leaflet-zoom-animated"),this.options.className&&At(o,this.options.className),o.onselectstart=T,o.onmousemove=T,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Dn(this._image,u,o)},_reset:function(){var i=this._image,o=new Wt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();Tt(i,o.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),c_=function(i,o,u){return new la(i,o,u)},Gc=la.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:Vt("video");if(At(o,"leaflet-image-layer"),this._zoomAnimated&&At(o,"leaflet-zoom-animated"),this.options.className&&At(o,this.options.className),o.onselectstart=T,o.onmousemove=T,o.onloadeddata=c(this.fire,this,"load"),i){for(var u=o.getElementsByTagName("source"),f=[],m=0;m<u.length;m++)f.push(u[m].src);this._url=u.length>0?f:[o.src];return}ot(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var I=Vt("source");I.src=this._url[y],o.appendChild(I)}}});function h_(i,o,u){return new Gc(i,o,u)}var Qc=la.extend({_initImage:function(){var i=this._image=this._url;At(i,"leaflet-image-layer"),this._zoomAnimated&&At(i,"leaflet-zoom-animated"),this.options.className&&At(i,this.options.className),i.onselectstart=T,i.onmousemove=T}});function f_(i,o,u){return new Qc(i,o,u)}var Nn=ee.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,o){i&&(i instanceof Ot||ot(i))?(this._latlng=Rt(i),q(this,o)):(q(this,i),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&ge(this._container,1),this.bringToFront(),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(c(ie,void 0,this._container),200)):ie(this._container),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Rt(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yn(this._container),this},bringToBack:function(){return this._map&&gi(this._container),this},_prepareOpen:function(i){var o=this._source;if(!o._map)return!1;if(o instanceof ye){o=null;var u=this._source._layers;for(var f in u)if(u[f]._map){o=u[f];break}if(!o)return!1;this._source=o}if(!i)if(o.getCenter)i=o.getCenter();else if(o.getLatLng)i=o.getLatLng();else if(o.getBounds)i=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=_t(this.options.offset),u=this._getAnchor();this._zoomAnimated?Tt(this._container,i.add(u)):o=o.add(i).add(u);var f=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Mt.include({_initOverlay:function(i,o,u,f){var m=o;return m instanceof i||(m=new i(f).setContent(o)),u&&m.setLatLng(u),m}}),ee.include({_initOverlay:function(i,o,u,f){var m=u;return m instanceof i?(q(m,f),m._source=this):(m=o&&!f?o:new i(f,this),m.setContent(u)),m}});var ua=Nn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Nn.prototype.openOn.call(this,i)},onAdd:function(i){Nn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bi||this._source.on("preclick",mn))},onRemove:function(i){Nn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bi||this._source.off("preclick",mn))},getEvents:function(){var i=Nn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",o=this._container=Vt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Vt("div",i+"-content-wrapper",o);if(this._contentNode=Vt("div",i+"-content",u),wi(o),vi(this._contentNode),yt(o,"contextmenu",mn),this._tipContainer=Vt("div",i+"-tip-container",o),this._tip=Vt("div",i+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Vt("a",i+"-close-button",o);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',yt(f,"click",function(m){de(m),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var f=i.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&f>m?(o.height=m+"px",At(i,y)):ce(i,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();Tt(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,o=parseInt(_i(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,f=this._containerWidth,m=new nt(this._containerLeft,-u-this._containerBottom);m._add(fn(this._container));var y=i.layerPointToContainerPoint(m),I=_t(this.options.autoPanPadding),O=_t(this.options.autoPanPaddingTopLeft||I),B=_t(this.options.autoPanPaddingBottomRight||I),W=i.getSize(),st=0,vt=0;y.x+f+B.x>W.x&&(st=y.x+f-W.x+B.x),y.x-st-O.x<0&&(st=y.x-O.x),y.y+u+B.y>W.y&&(vt=y.y+u-W.y+B.y),y.y-vt-O.y<0&&(vt=y.y-O.y),(st||vt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([st,vt]))}},_getAnchor:function(){return _t(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),d_=function(i,o){return new ua(i,o)};Mt.mergeOptions({closePopupOnClick:!0}),Mt.include({openPopup:function(i,o,u){return this._initOverlay(ua,i,o,u).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),ee.include({bindPopup:function(i,o){return this._popup=this._initOverlay(ua,this._popup,i,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ye||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){rn(i);var o=i.layer||i.target;if(this._popup._source===o&&!(o instanceof bi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=o,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ca=Nn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Nn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Nn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Nn.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Vt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,u,f=this._map,m=this._container,y=f.latLngToContainerPoint(f.getCenter()),I=f.layerPointToContainerPoint(i),O=this.options.direction,B=m.offsetWidth,W=m.offsetHeight,st=_t(this.options.offset),vt=this._getAnchor();O==="top"?(o=B/2,u=W):O==="bottom"?(o=B/2,u=0):O==="center"?(o=B/2,u=W/2):O==="right"?(o=0,u=W/2):O==="left"?(o=B,u=W/2):I.x<y.x?(O="right",o=0,u=W/2):(O="left",o=B+(st.x+vt.x)*2,u=W/2),i=i.subtract(_t(o,u,!0)).add(st).add(vt),ce(m,"leaflet-tooltip-right"),ce(m,"leaflet-tooltip-left"),ce(m,"leaflet-tooltip-top"),ce(m,"leaflet-tooltip-bottom"),At(m,"leaflet-tooltip-"+O),Tt(m,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&ge(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return _t(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),p_=function(i,o){return new ca(i,o)};Mt.include({openTooltip:function(i,o,u){return this._initOverlay(ca,i,o,u).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),ee.include({bindTooltip:function(i,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ca,this._tooltip,i,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ye||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&(yt(o,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),yt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var o=i.latlng,u,f;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),f=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(o)}});var Xc=Vn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Yi(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var f=_t(u.bgPos);o.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function m_(i){return new Xc(i)}Vn.Default=Kr;var Gr=ee.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ct.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){q(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ie(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof nt?i:new nt(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,u=-i(-1/0,1/0),f=0,m=o.length,y;f<m;f++)y=o[f].style.zIndex,o[f]!==this._container&&y&&(u=i(u,+y));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ct.ielt9){ge(this._container,this.options.opacity);var i=+new Date,o=!1,u=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var y=Math.min(1,(i-m.loaded)/200);ge(m.el,y),y<1?o=!0:(m.active?u=!0:this._onOpaqueTile(m),m.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(M(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=Vt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=o-Math.abs(i-u),this._onUpdateLevel(u)):(ie(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var f=this._levels[i],m=this._map;return f||(f=this._levels[i]={},f.el=Vt("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=o,f.origin=m.project(m.unproject(m.getPixelOrigin()),i).round(),f.zoom=i,this._setZoomTransform(f,m.getCenter(),m.getZoom()),T(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var i,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var f=o.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ie(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,u,f){var m=Math.floor(i/2),y=Math.floor(o/2),I=u-1,O=new nt(+m,+y);O.z=+I;var B=this._tileCoordsToKey(O),W=this._tiles[B];return W&&W.active?(W.retain=!0,!0):(W&&W.loaded&&(W.retain=!0),I>f?this._retainParent(m,y,I,f):!1)},_retainChildren:function(i,o,u,f){for(var m=2*i;m<2*i+2;m++)for(var y=2*o;y<2*o+2;y++){var I=new nt(m,y);I.z=u+1;var O=this._tileCoordsToKey(I),B=this._tiles[O];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);u+1<f&&this._retainChildren(m,y,u+1,f)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,u,f){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,o)},_setZoomTransform:function(i,o,u){var f=this._map.getZoomScale(u,i.zoom),m=i.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(o,u)).round();ct.any3d?Dn(i.el,m,f):Tt(i.el,m)},_resetGrid:function(){var i=this._map,o=i.options.crs,u=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],f).x/u.x),Math.ceil(i.project([0,o.wrapLng[1]],f).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],f).y/u.x),Math.ceil(i.project([o.wrapLat[1],0],f).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),f=o.getZoomScale(u,this._tileZoom),m=o.project(i,this._tileZoom).floor(),y=o.getSize().divideBy(f*2);return new Wt(m.subtract(y),m.add(y))},_update:function(i){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(i),m=this._pxBoundsToTileRange(f),y=m.getCenter(),I=[],O=this.options.keepBuffer,B=new Wt(m.getBottomLeft().subtract([O,-O]),m.getTopRight().add([O,-O]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var W in this._tiles){var st=this._tiles[W].coords;(st.z!==this._tileZoom||!B.contains(new nt(st.x,st.y)))&&(this._tiles[W].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var vt=m.min.y;vt<=m.max.y;vt++)for(var Lt=m.min.x;Lt<=m.max.x;Lt++){var Ze=new nt(Lt,vt);if(Ze.z=this._tileZoom,!!this._isValidTile(Ze)){var Re=this._tiles[this._tileCoordsToKey(Ze)];Re?Re.current=!0:I.push(Ze)}}if(I.sort(function(Je,qs){return Je.distanceTo(y)-qs.distanceTo(y)}),I.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gn=document.createDocumentFragment();for(Lt=0;Lt<I.length;Lt++)this._addTile(I[Lt],gn);this._level.el.appendChild(gn)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!o.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(i);return ae(this.options.bounds).overlaps(f)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,u=this.getTileSize(),f=i.scaleBy(u),m=f.add(u),y=o.unproject(f,i.z),I=o.unproject(m,i.z);return[y,I]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),u=new xt(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),u=new nt(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(i){var o=this._tiles[i];o&&(ie(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){At(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=T,i.onmousemove=T,ct.ielt9&&this.options.opacity<1&&ge(i,this.options.opacity)},_addTile:function(i,o){var u=this._getTilePos(i),f=this._tileCoordsToKey(i),m=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(m),this.createTile.length<2&&C(c(this._tileReady,this,i,null,m)),Tt(m,u),this._tiles[f]={el:m,coords:i,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:i})},_tileReady:function(i,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:i});var f=this._tileCoordsToKey(i);u=this._tiles[f],u&&(u.loaded=+new Date,this._map._fadeAnimated?(ge(u.el,0),M(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(At(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ct.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new nt(this._wrapX?v(i.x,this._wrapX):i.x,this._wrapY?v(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new Wt(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function __(i){return new Gr(i)}var js=Gr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,o){this._url=i,o=q(this,o),o.detectRetina&&ct.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var u=document.createElement("img");return yt(u,"load",c(this._tileOnLoad,this,o,u)),yt(u,"error",c(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(i),u},getTileUrl:function(i){var o={r:ct.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=u),o["-y"]=u}return ft(this._url,r(o,this.options))},_tileOnLoad:function(i,o){ct.ielt9?setTimeout(c(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,u){var f=this.options.errorTileUrl;f&&o.getAttribute("src")!==f&&(o.src=f),i(u,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,f=this.options.zoomOffset;return u&&(i=o-i),i+f},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=T,o.onerror=T,!o.complete)){o.src=Ct;var u=this._tiles[i].coords;ie(o),delete this._tiles[i],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(i){var o=this._tiles[i];if(o)return o.el.setAttribute("src",Ct),Gr.prototype._removeTile.call(this,i)},_tileReady:function(i,o,u){if(!(!this._map||u&&u.getAttribute("src")===Ct))return Gr.prototype._tileReady.call(this,i,o,u)}});function Yc(i,o){return new js(i,o)}var Jc=js.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var u=r({},this.defaultWmsParams);for(var f in o)f in this.options||(u[f]=o[f]);o=q(this,o);var m=o.detectRetina&&ct.retina?2:1,y=this.getTileSize();u.width=y.x*m,u.height=y.y*m,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,js.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),u=this._crs,f=Gt(u.project(o[0]),u.project(o[1])),m=f.min,y=f.max,I=(this._wmsVersion>=1.3&&this._crs===Ee?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),O=js.prototype.getTileUrl.call(this,i);return O+$(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(i,o){return r(this.wmsParams,i),o||this.redraw(),this}});function g_(i,o){return new Jc(i,o)}js.WMS=Jc,Yc.wms=g_;var ri=ee.extend({options:{padding:.1},initialize:function(i){q(this,i),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),At(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var u=this._map.getZoomScale(o,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),y=f.multiplyBy(-u).add(m).subtract(this._map._getNewPixelOrigin(i,o));ct.any3d?Dn(this._container,y,u):Tt(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new Wt(u,u.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),th=ri.extend({options:{tolerance:0},getEvents:function(){var i=ri.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");yt(i,"mousemove",this._onMouseMove,this),yt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),yt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,ie(this._container),te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var i=this._bounds,o=this._container,u=i.getSize(),f=ct.retina?2:1;Tt(o,i.min),o.width=f*u.x,o.height=f*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",ct.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[p(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,u=o.next,f=o.prev;u?u.prev=f:this._drawLast=f,f?f.next=u:this._drawFirst=u,delete i._order,delete this._layers[p(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),u=[],f,m;for(m=0;m<o.length;m++){if(f=Number(o[m]),isNaN(f))return;u.push(f)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Wt,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)i=f.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(this._drawing){var u,f,m,y,I=i._parts,O=I.length,B=this._ctx;if(O){for(B.beginPath(),u=0;u<O;u++){for(f=0,m=I[u].length;f<m;f++)y=I[u][f],B[f?"lineTo":"moveTo"](y.x,y.y);o&&B.closePath()}this._fillStroke(B,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,u=this._ctx,f=Math.max(Math.round(i._radius),1),m=(Math.max(Math.round(i._radiusY),1)||f)/f;m!==1&&(u.save(),u.scale(1,m)),u.beginPath(),u.arc(o.x,o.y/m,f,0,Math.PI*2,!1),m!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,o){var u=o.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),u,f,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(f=u);this._fireEvent(f?[f]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(ce(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var u,f,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(f=u);f!==this._hoveredLayer&&(this._handleMouseOut(i),f&&(At(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,u){this._map._fireDOMEvent(o,u||o.type,i)},_bringToFront:function(i){var o=i._order;if(o){var u=o.next,f=o.prev;if(u)u.prev=f;else return;f?f.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(o){var u=o.next,f=o.prev;if(f)f.next=u;else return;u?u.prev=f:f&&(this._drawLast=f),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function eh(i){return ct.canvas?new th(i):null}var Qr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),y_={_initContainer:function(){this._container=Vt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ri.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=Qr("shape");At(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=Qr("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;ie(o),i.removeInteractiveTarget(o),delete this._layers[p(i)]},_updateStyle:function(i){var o=i._stroke,u=i._fill,f=i.options,m=i._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(o||(o=i._stroke=Qr("stroke")),m.appendChild(o),o.weight=f.weight+"px",o.color=f.color,o.opacity=f.opacity,f.dashArray?o.dashStyle=ot(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=f.lineCap.replace("butt","flat"),o.joinstyle=f.lineJoin):o&&(m.removeChild(o),i._stroke=null),f.fill?(u||(u=i._fill=Qr("fill")),m.appendChild(u),u.color=f.fillColor||f.color,u.opacity=f.fillOpacity):u&&(m.removeChild(u),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),u=Math.round(i._radius),f=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+f+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){Yn(i._container)},_bringToBack:function(i){gi(i._container)}},ha=ct.vml?Qr:H,Xr=ri.extend({_initContainer:function(){this._container=ha("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ha("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var i=this._bounds,o=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),Tt(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=ha("path");i.options.className&&At(o,i.options.className),i.options.interactive&&At(o,"leaflet-interactive"),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ie(i._path),i.removeInteractiveTarget(i._path),delete this._layers[p(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,u=i.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,Z(i._parts,o))},_updateCircle:function(i){var o=i._point,u=Math.max(Math.round(i._radius),1),f=Math.max(Math.round(i._radiusY),1)||u,m="a"+u+","+f+" 0 1,0 ",y=i._empty()?"M0 0":"M"+(o.x-u)+","+o.y+m+u*2+",0 "+m+-u*2+",0 ";this._setPath(i,y)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){Yn(i._path)},_bringToBack:function(i){gi(i._path)}});ct.vml&&Xr.include(y_);function nh(i){return ct.svg||ct.vml?new Xr(i):null}Mt.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&eh(i)||nh(i)}});var ih=zs.extend({initialize:function(i,o){zs.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ae(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function v_(i,o){return new ih(i,o)}Xr.create=ha,Xr.pointsToPath=Z,si.geometryToLayer=sa,si.coordsToLatLng=Ul,si.coordsToLatLngs=ra,si.latLngToCoords=zl,si.latLngsToCoords=oa,si.getFeature=$s,si.asFeature=aa,Mt.mergeOptions({boxZoom:!0});var sh=on.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){yt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),In(),Dr(),this._startPoint=this._map.mouseEventToContainerPoint(i),yt(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Vt("div","leaflet-zoom-box",this._container),At(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new Wt(this._point,this._startPoint),u=o.getSize();Tt(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ie(this._box),ce(this._container,"leaflet-crosshair")),Pn(),Or(),te(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new xt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mt.addInitHook("addHandler","boxZoom",sh),Mt.mergeOptions({doubleClickZoom:!0});var rh=on.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,u=o.getZoom(),f=o.options.zoomDelta,m=i.originalEvent.shiftKey?u-f:u+f;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(i.containerPoint,m)}});Mt.addInitHook("addHandler","doubleClickZoom",rh),Mt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var oh=on.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new An(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}At(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ce(this._map._container,"leaflet-grab"),ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ae(this._map.options.maxBounds);this._offsetLimit=Gt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),u=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-o+u)%i+o-u,y=(f+o+u)%i-o-u,I=Math.abs(m+u)<Math.abs(y+u)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(i){var o=this._map,u=o.options,f=!u.inertia||i.noInertia||this._times.length<2;if(o.fire("dragend",i),f)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,I=u.easeLinearity,O=m.multiplyBy(I/y),B=O.distanceTo([0,0]),W=Math.min(u.inertiaMaxSpeed,B),st=O.multiplyBy(W/B),vt=W/(u.inertiaDeceleration*I),Lt=st.multiplyBy(-vt/2).round();!Lt.x&&!Lt.y?o.fire("moveend"):(Lt=o._limitOffset(Lt,o.options.maxBounds),C(function(){o.panBy(Lt,{duration:vt,easeLinearity:I,noMoveStart:!0,animate:!0})}))}}});Mt.addInitHook("addHandler","dragging",oh),Mt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ah=on.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),yt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,u=i.scrollTop||o.scrollTop,f=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(f,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},u=this.keyCodes,f,m;for(f=0,m=u.left.length;f<m;f++)o[u.left[f]]=[-1*i,0];for(f=0,m=u.right.length;f<m;f++)o[u.right[f]]=[i,0];for(f=0,m=u.down.length;f<m;f++)o[u.down[f]]=[0,i];for(f=0,m=u.up.length;f<m;f++)o[u.up[f]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},u=this.keyCodes,f,m;for(f=0,m=u.zoomIn.length;f<m;f++)o[u.zoomIn[f]]=i;for(f=0,m=u.zoomOut.length;f<m;f++)o[u.zoomOut[f]]=-i},_addHooks:function(){yt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,u=this._map,f;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(f=this._panKeys[o],i.shiftKey&&(f=_t(f).multiplyBy(3)),u.options.maxBounds&&(f=u._limitOffset(_t(f),u.options.maxBounds)),u.options.worldCopyJump){var m=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(f)));u.panTo(m)}else u.panBy(f)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;rn(i)}}});Mt.addInitHook("addHandler","keyboard",ah),Mt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var lh=on.extend({addHooks:function(){yt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){te(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=Go(i),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var f=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),f),rn(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=u?Math.ceil(m/u)*u:m,I=i._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,I&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+I):i.setZoomAround(this._lastMousePos,o+I))}});Mt.addInitHook("addHandler","scrollWheelZoom",lh);var w_=600;Mt.mergeOptions({tapHold:ct.touchNative&&ct.safari&&ct.mobile,tapTolerance:15});var uh=on.extend({addHooks:function(){yt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var o=i.touches[0];this._startPos=this._newPos=new nt(o.clientX,o.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(yt(document,"touchend",de),yt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),w_),yt(document,"touchend touchcancel contextmenu",this._cancel,this),yt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){te(document,"touchend",de),te(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),te(document,"touchend touchcancel contextmenu",this._cancel,this),te(document,"touchmove",this._onMove,this)},_onMove:function(i){var o=i.touches[0];this._newPos=new nt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,o){var u=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});Mt.addInitHook("addHandler","tapHold",uh),Mt.mergeOptions({touchZoom:ct.touch,bounceAtZoomLimits:!0});var ch=on.extend({addHooks:function(){At(this._map._container,"leaflet-touch-zoom"),yt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(i.touches[0]),f=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(f)._divideBy(2))),this._startDist=u.distanceTo(f),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),yt(document,"touchmove",this._onTouchMove,this),yt(document,"touchend touchcancel",this._onTouchEnd,this),de(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(i.touches[0]),f=o.mouseEventToContainerPoint(i.touches[1]),m=u.distanceTo(f)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=u._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var I=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(I,this,!0),de(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),te(document,"touchmove",this._onTouchMove,this),te(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mt.addInitHook("addHandler","touchZoom",ch),Mt.BoxZoom=sh,Mt.DoubleClickZoom=rh,Mt.Drag=oh,Mt.Keyboard=ah,Mt.ScrollWheelZoom=lh,Mt.TapHold=uh,Mt.TouchZoom=ch,e.Bounds=Wt,e.Browser=ct,e.CRS=ue,e.Canvas=th,e.Circle=Fl,e.CircleMarker=ia,e.Class=_e,e.Control=Ye,e.DivIcon=Xc,e.DivOverlay=Nn,e.DomEvent=Qo,e.DomUtil=Wo,e.Draggable=An,e.Evented=Ut,e.FeatureGroup=ye,e.GeoJSON=si,e.GridLayer=Gr,e.Handler=on,e.Icon=Vn,e.ImageOverlay=la,e.LatLng=Ot,e.LatLngBounds=xt,e.Layer=ee,e.LayerGroup=pe,e.LineUtil=w,e.Map=Mt,e.Marker=na,e.Mixin=Ji,e.Path=bi,e.Point=nt,e.PolyUtil=Bs,e.Polygon=zs,e.Polyline=ii,e.Popup=ua,e.PosAnimation=$r,e.Projection=J,e.Rectangle=ih,e.Renderer=ri,e.SVG=Xr,e.SVGOverlay=Qc,e.TileLayer=js,e.Tooltip=ca,e.Transformation=Wn,e.Util=A,e.VideoOverlay=Gc,e.bind=c,e.bounds=Gt,e.canvas=eh,e.circle=o_,e.circleMarker=r_,e.control=He,e.divIcon=m_,e.extend=r,e.featureGroup=Us,e.geoJSON=Kc,e.geoJson=u_,e.gridLayer=__,e.icon=i_,e.imageOverlay=c_,e.latLng=Rt,e.latLngBounds=ae,e.layerGroup=Ei,e.map=ks,e.marker=s_,e.point=_t,e.polygon=l_,e.polyline=a_,e.popup=d_,e.rectangle=v_,e.setOptions=q,e.stamp=p,e.svg=nh,e.svgOverlay=f_,e.tileLayer=Yc,e.tooltip=p_,e.transformation=P,e.version=s,e.videoOverlay=h_;var T_=window.L;e.noConflict=function(){return window.L=T_,this},window.L=e})}(oo,oo.exports)),oo.exports}var V=lb();const li=ob(V);var ub=Object.defineProperty,cb=(n,t,e)=>t in n?ub(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Jt=(n,t,e)=>cb(n,typeof t!="symbol"?t+"":t,e);function Ge(n,t){return V.Util.extend(t,n.geocodingQueryParams)}function nn(n,t){return V.Util.extend(t,n.reverseQueryParams)}const hb=/[&<>"'`]/g,fb=/[&<>"'`]/,db={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function pb(n){return db[n]}function mb(n){return n==null?"":n?(n=""+n,fb.test(n)?n.replace(hb,pb):n):n+""}function re(n,t){const e={Accept:"application/json"},s=new URL(n);return Object.entries(t).forEach(([r,a])=>{(Array.isArray(a)?a:[a]).forEach(c=>{s.searchParams.append(r,c)})}),fetch(s.toString(),{headers:e}).then(r=>r.json())}function _b(n,t){return n.replace(/\{ *([\w_]+) *\}/g,(e,s)=>{let r=t[s];return r===void 0?r="":typeof r=="function"&&(r=r(t)),mb(r)})}let Fm=class{constructor(t){Jt(this,"options",{serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""}),V.Util.setOptions(this,t)}async geocode(t){const e=Ge(this.options,{token:this.options.apiKey,SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"}),s=await re(this.options.serviceUrl+"/findAddressCandidates",e),r=[];if(s.candidates&&s.candidates.length)for(let a=0;a<=s.candidates.length-1;a++){const c=s.candidates[a],h=V.latLng(c.location.y,c.location.x),p=V.latLngBounds(V.latLng(c.extent.ymax,c.extent.xmax),V.latLng(c.extent.ymin,c.extent.xmin));r[a]={name:c.address,bbox:p,center:h}}return r}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{location:t.lng+","+t.lat,distance:100,f:"json"}),r=await re(this.options.serviceUrl+"/reverseGeocode",s),a=[];if(r&&!r.error){const c=V.latLng(r.location.y,r.location.x),h=V.latLngBounds(c,c);a.push({name:r.address.Match_addr,center:c,bbox:h})}return a}};function gb(n){return new Fm(n)}class Um{constructor(t){Jt(this,"options",{serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ge(this.options,{query:t,key:this.options.apiKey}),s=await re(this.options.serviceUrl,e),r=[];if(s.resourceSets.length>0)for(let a=s.resourceSets[0].resources.length-1;a>=0;a--){const c=s.resourceSets[0].resources[a],h=c.bbox;r[a]={name:c.name,bbox:V.latLngBounds([h[0],h[1]],[h[2],h[3]]),center:V.latLng(c.point.coordinates)}}return r}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey}),r=await re(this.options.serviceUrl+t.lat+","+t.lng,s),a=[];for(let c=r.resourceSets[0].resources.length-1;c>=0;c--){const h=r.resourceSets[0].resources[c],p=h.bbox;a[c]={name:h.name,bbox:V.latLngBounds([p[0],p[1]],[p[2],p[3]]),center:V.latLng(h.point.coordinates)}}return a}}function yb(n){return new Um(n)}class zm{constructor(t){if(Jt(this,"options",{apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"}),V.Util.setOptions(this,t),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}async geocode(t){const e={"api-version":"1.0",query:t,"subscription-key":this.options.apiKey},s=this.options.serviceUrl+"/address/json",r=await re(s,e),a=[];if(r.results&&r.results.length>0)for(const c of r.results)a.push({name:c.address.freeformAddress,bbox:V.latLngBounds([c.viewport.topLeftPoint.lat,c.viewport.topLeftPoint.lon],[c.viewport.btmRightPoint.lat,c.viewport.btmRightPoint.lon]),center:V.latLng(c.position.lat,c.position.lon)});return a}async reverse(t,e){const s={"api-version":"1.0",query:t.lat+","+t.lng,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+"/address/reverse/json",a=await re(r,s),c=[];if(a.addresses&&a.addresses.length>0)for(const h of a.addresses)c.push({name:h.address.freeformAddress,bbox:V.latLngBounds([h.viewport.topLeftPoint.lat,h.viewport.topLeftPoint.lon],[h.viewport.btmRightPoint.lat,h.viewport.btmRightPoint.lon]),center:V.latLng(t.lat,t.lng)});return c}}function vb(n){return new zm(n)}class $m{constructor(t){Jt(this,"options",{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ge(this.options,{key:this.options.apiKey,address:t}),s=await re(this.options.serviceUrl,e),r=[];if(s.results&&s.results.length)for(let a=0;a<=s.results.length-1;a++){const c=s.results[a],h=V.latLng(c.geometry.location),p=V.latLngBounds(V.latLng(c.geometry.viewport.northeast),V.latLng(c.geometry.viewport.southwest));r[a]={name:c.formatted_address,bbox:p,center:h,properties:c.address_components}}return r}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey,latlng:t.lat+","+t.lng}),r=await re(this.options.serviceUrl,s),a=[];if(r.results&&r.results.length)for(let c=0;c<=r.results.length-1;c++){const h=r.results[c],p=V.latLng(h.geometry.location),g=V.latLngBounds(V.latLng(h.geometry.viewport.northeast),V.latLng(h.geometry.viewport.southwest));a[c]={name:h.formatted_address,bbox:g,center:p,properties:h.address_components}}return a}}function wb(n){return new $m(n)}class jm{constructor(t){if(Jt(this,"options",{serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5}),V.Util.setOptions(this,t),t!=null&&t.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(t){const e=Ge(this.options,{searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",e)}reverse(t,e){let s=t.lat+","+t.lng;this.options.reverseGeocodeProxRadius&&(s+=","+this.options.reverseGeocodeProxRadius);const r=nn(this.options,{prox:s,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",r)}async getJSON(t,e){const s=await re(t,e),r=[];if(s.response.view&&s.response.view.length)for(let a=0;a<=s.response.view[0].result.length-1;a++){const c=s.response.view[0].result[a].location,h=V.latLng(c.displayPosition.latitude,c.displayPosition.longitude),p=V.latLngBounds(V.latLng(c.mapView.topLeft.latitude,c.mapView.topLeft.longitude),V.latLng(c.mapView.bottomRight.latitude,c.mapView.bottomRight.longitude));r[a]={name:c.address.label,properties:c.address,bbox:p,center:h}}return r}}class qm{constructor(t){Jt(this,"options",{serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10}),V.Util.setOptions(this,t)}geocode(t){const e=Ge(this.options,{q:t,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!e.at&&!e.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",e)}reverse(t,e){const s=nn(this.options,{at:t.lat+","+t.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",s)}async getJSON(t,e){const s=await re(t,e),r=[];if(s.items&&s.items.length)for(let a=0;a<=s.items.length-1;a++){const c=s.items[a],h=V.latLng(c.position.lat,c.position.lng);let p;c.mapView?p=V.latLngBounds(V.latLng(c.mapView.south,c.mapView.west),V.latLng(c.mapView.north,c.mapView.east)):p=V.latLngBounds(V.latLng(c.position.lat,c.position.lng),V.latLng(c.position.lat,c.position.lng)),r[a]={name:c.address.label,properties:c.address,bbox:p,center:h}}return r}}function Tb(n){return n!=null&&n.apiKey?new qm(n):new jm(n)}function Hm(n){let t;if(t=n.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return V.latLng((/N/i.test(t[1])?1:-1)*+t[2],(/E/i.test(t[3])?1:-1)*+t[4]);if(t=n.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return V.latLng((/N/i.test(t[2])?1:-1)*+t[1],(/E/i.test(t[4])?1:-1)*+t[3]);if(t=n.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?$/))return V.latLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60),(/E/i.test(t[4])?1:-1)*(+t[5]+ +t[6]/60));if(t=n.match(/^(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([NS])\W*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([EW])$/))return V.latLng((/N/i.test(t[3])?1:-1)*(+t[1]+ +t[2]/60),(/E/i.test(t[6])?1:-1)*(+t[4]+ +t[5]/60));if(t=n.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?$/))return V.latLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60+ +t[4]/3600),(/E/i.test(t[5])?1:-1)*(+t[6]+ +t[7]/60+ +t[8]/3600));if(t=n.match(/^(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]\s*([NS])\W*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\s*([EW])$/))return V.latLng((/N/i.test(t[4])?1:-1)*(+t[1]+ +t[2]/60+ +t[3]/3600),(/E/i.test(t[8])?1:-1)*(+t[5]+ +t[6]/60+ +t[7]/3600));if(t=n.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return V.latLng(+t[1],+t[2])}class Zm{constructor(t){Jt(this,"options",{next:void 0,sizeInMeters:1e4}),V.Util.setOptions(this,t)}async geocode(t){const e=Hm(t);return e?[{name:t,center:e,bbox:e.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(t):[]}}function Eb(n){return new Zm(n)}class Wm{constructor(t){Jt(this,"options",{serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"}),V.Util.setOptions(this,t)}_getProperties(t){const e={text:t.text,address:t.address};for(let s=0;s<(t.context||[]).length;s++){const r=t.context[s].id.split(".")[0];e[r]=t.context[s].text,t.context[s].short_code&&(e.countryShortCode=t.context[s].short_code)}return e}async geocode(t){const e=this.options.serviceUrl+encodeURIComponent(t)+".json",s=Ge(this.options,{access_token:this.options.apiKey});s.proximity!==void 0&&s.proximity.lat!==void 0&&s.proximity.lng!==void 0&&(s.proximity=s.proximity.lng+","+s.proximity.lat);const r=await re(e,s);return this._parseResults(r)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=this.options.serviceUrl+t.lng+","+t.lat+".json",r=nn(this.options,{access_token:this.options.apiKey}),a=await re(s,r);return this._parseResults(a)}_parseResults(t){var e;if(!((e=t.features)!=null&&e.length))return[];const s=[];for(let r=0;r<=t.features.length-1;r++){const a=t.features[r],c=V.latLng(a.center.reverse());let h;a.bbox?h=V.latLngBounds(V.latLng(a.bbox.slice(0,2).reverse()),V.latLng(a.bbox.slice(2,4).reverse())):h=V.latLngBounds(c,c),s[r]={name:a.place_name,bbox:h,center:c,properties:this._getProperties(a)}}return s}}function bb(n){return new Wm(n)}class Km{constructor(t){Jt(this,"options",{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"}),V.Util.setOptions(this,t),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...t){return t.filter(e=>!!e).join(", ")}async geocode(t){const e=Ge(this.options,{key:this.options.apiKey,location:t,limit:5,outFormat:"json"}),s=await re(this.options.serviceUrl+"/address",e);return this._parseResults(s)}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey,location:t.lat+","+t.lng,outputFormat:"json"}),r=await re(this.options.serviceUrl+"/reverse",s);return this._parseResults(r)}_parseResults(t){const e=[];if(t.results&&t.results[0].locations)for(let s=t.results[0].locations.length-1;s>=0;s--){const r=t.results[0].locations[s],a=V.latLng(r.latLng);e[s]={name:this._formatName(r.street,r.adminArea4,r.adminArea3,r.adminArea1),bbox:V.latLngBounds(a,a),center:a}}return e}}function Ib(n){return new Km(n)}class Gm{constructor(t){Jt(this,"options",{userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ge(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:t.split(/\s+/).join(".")}),s=await re(this.options.serviceUrl+"geocode-address",e),r=[];if(s.locations){s.geometry=s.locations[0];const a=V.latLng(s.geometry.latitude,s.geometry.longitude),c=V.latLngBounds(a,a);r[0]={name:s.geometry.address,bbox:c,center:a}}return r}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:t.lat,longitude:t.lng}),r=await re(this.options.serviceUrl+"geocode-reverse",s),a=[];if(r.status.status==200&&r.found){const c=V.latLng(t.lat,t.lng),h=V.latLngBounds(c,c);a[0]={name:r.address,bbox:h,center:c}}return a}}function Pb(n){return new Gm(n)}class zc{constructor(t){Jt(this,"options",{serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(e){const s=e.address;let r;const a=[];return(s.road||s.building)&&a.push("{building} {road} {house_number}"),(s.city||s.town||s.village||s.hamlet)&&(r=a.length>0?"leaflet-control-geocoder-address-detail":"",a.push('<span class="'+r+'">{postcode} {city} {town} {village} {hamlet}</span>')),(s.state||s.country)&&(r=a.length>0?"leaflet-control-geocoder-address-context":"",a.push('<span class="'+r+'">{state} {country}</span>')),_b(a.join("<br/>"),s)}}),V.Util.setOptions(this,t||{})}async geocode(t){const e=Ge(this.options,{q:t,limit:5,format:"json",addressdetails:1}),s=await re(this.options.serviceUrl+"search",e),r=[];for(let a=s.length-1;a>=0;a--){const c=s[a].boundingbox;r[a]={icon:s[a].icon,name:s[a].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(s[a]):void 0,bbox:V.latLngBounds([+c[0],+c[2]],[+c[1],+c[3]]),center:V.latLng(+s[a].lat,+s[a].lon),properties:s[a]}}return r}async reverse(t,e){const s=nn(this.options,{lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(e/256)/Math.log(2)),addressdetails:1,format:"json"}),r=await re(this.options.serviceUrl+"reverse",s),a=[];if(r&&r.lat&&r.lon){const c=V.latLng(+r.lat,+r.lon),h=V.latLngBounds(c,c);a.push({name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,center:c,bbox:h,properties:r})}return a}}function Ab(n){return new zc(n)}class Qm{constructor(t){Jt(this,"options",{}),V.Util.setOptions(this,t)}async geocode(t){try{const e=this.options.OpenLocationCode.decode(t);return[{name:t,center:V.latLng(e.latitudeCenter,e.longitudeCenter),bbox:V.latLngBounds(V.latLng(e.latitudeLo,e.longitudeLo),V.latLng(e.latitudeHi,e.longitudeHi))}]}catch(e){return console.warn(e),[]}}async reverse(t,e){try{return[{name:this.options.OpenLocationCode.encode(t.lat,t.lng,this.options.codeLength),center:V.latLng(t.lat,t.lng),bbox:V.latLngBounds(V.latLng(t.lat,t.lng),V.latLng(t.lat,t.lng))}]}catch(s){return console.warn(s),[]}}}function Cb(n){return new Qm(n)}class Xm{constructor(t){Jt(this,"options",{serviceUrl:"https://api.opencagedata.com/geocode/v1/json"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ge(this.options,{key:this.options.apiKey,q:t}),s=await re(this.options.serviceUrl,e);return this._parseResults(s)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey,q:[t.lat,t.lng].join(",")}),r=await re(this.options.serviceUrl,s);return this._parseResults(r)}_parseResults(t){const e=[];if(t.results&&t.results.length)for(let s=0;s<t.results.length;s++){const r=t.results[s],a=V.latLng(r.geometry);let c;r.annotations&&r.annotations.bounds?c=V.latLngBounds(V.latLng(r.annotations.bounds.northeast),V.latLng(r.annotations.bounds.southwest)):c=V.latLngBounds(a,a),e.push({name:r.formatted,bbox:c,center:a})}return e}}function xb(n){return new Xm(n)}class Vo{constructor(t){Jt(this,"options",{serviceUrl:"https://api.geocode.earth/v1"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ge(this.options,{api_key:this.options.apiKey,text:t}),s=await re(this.options.serviceUrl+"/search",e);return this._parseResults(s,"bbox")}async suggest(t){const e=Ge(this.options,{api_key:this.options.apiKey,text:t}),s=await re(this.options.serviceUrl+"/autocomplete",e);return this._parseResults(s,"bbox")}async reverse(t,e){const s=nn(this.options,{api_key:this.options.apiKey,"point.lat":t.lat,"point.lon":t.lng}),r=await re(this.options.serviceUrl+"/reverse",s);return this._parseResults(r,"bounds")}_parseResults(t,e){const s=[];return V.geoJSON(t,{pointToLayer(r,a){return V.circleMarker(a)},onEachFeature(r,a){const c={};let h,p;a.getBounds?(h=a.getBounds(),p=h.getCenter()):a.feature.bbox?(p=a.getLatLng(),h=V.latLngBounds(V.GeoJSON.coordsToLatLng(a.feature.bbox.slice(0,2)),V.GeoJSON.coordsToLatLng(a.feature.bbox.slice(2,4)))):(p=a.getLatLng(),h=V.latLngBounds(p,p)),c.name=a.feature.properties.label,c.center=p,c[e]=h,c.properties=a.feature.properties,s.push(c)}}),s}}function $c(n){return new Vo(n)}const Sb=Vo,Rb=$c,Lb=Vo,kb=$c;class Ym extends Vo{constructor(t){super(V.Util.extend({serviceUrl:"https://api.openrouteservice.org/geocode"},t))}}function Mb(n){return new Ym(n)}class Jm{constructor(t){Jt(this,"options",{serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]}),V.Util.setOptions(this,t)}async geocode(t){const e=Ge(this.options,{q:t}),s=await re(this.options.serviceUrl,e);return this._parseResults(s)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{lat:t.lat,lon:t.lng}),r=await re(this.options.reverseUrl,s);return this._parseResults(r)}_parseResults(t){var e;const s=[];if(t&&t.features)for(let r=0;r<t.features.length;r++){const a=t.features[r],c=a.geometry.coordinates,h=V.latLng(c[1],c[0]),p=(e=a.properties)==null?void 0:e.extent,g=p?V.latLngBounds([p[1],p[0]],[p[3],p[2]]):V.latLngBounds(h,h);s.push({name:this._decodeFeatureName(a),html:this.options.htmlTemplate?this.options.htmlTemplate(a):void 0,center:h,bbox:g,properties:a.properties})}return s}_decodeFeatureName(t){return(this.options.nameProperties||[]).map(e=>{var s;return(s=t.properties)==null?void 0:s[e]}).filter(e=>!!e).join(", ")}}function Db(n){return new Jm(n)}class t_{constructor(t){Jt(this,"options",{serviceUrl:"https://api.what3words.com/v2/"}),V.Util.setOptions(this,t)}async geocode(t){const e=await re(this.options.serviceUrl+"forward",Ge(this.options,{key:this.options.apiKey,addr:t.split(/\s+/).join(".")})),s=[];if(e.geometry){const r=V.latLng(e.geometry.lat,e.geometry.lng),a=V.latLngBounds(r,r);s[0]={name:e.words,bbox:a,center:r}}return s}suggest(t){return this.geocode(t)}async reverse(t,e){const s=await re(this.options.serviceUrl+"reverse",nn(this.options,{key:this.options.apiKey,coords:[t.lat,t.lng].join(",")})),r=[];if(s.status.status==200){const a=V.latLng(s.geometry.lat,s.geometry.lng),c=V.latLngBounds(a,a);r[0]={name:s.words,bbox:c,center:a}}return r}}function Ob(n){return new t_(n)}const Vb=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:Fm,AzureMaps:zm,Bing:Um,GeocodeEarth:Sb,Google:$m,HERE:jm,HEREv2:qm,LatLng:Zm,MapQuest:Km,Mapbox:Wm,Mapzen:Lb,Neutrino:Gm,Nominatim:zc,OpenCage:Xm,OpenLocationCode:Qm,Openrouteservice:Ym,Pelias:Vo,Photon:Jm,What3Words:t_,arcgis:gb,azure:vb,bing:yb,geocodeEarth:Rb,geocodingParams:Ge,google:wb,here:Tb,latLng:Eb,mapQuest:Ib,mapbox:bb,mapzen:kb,neutrino:Pb,nominatim:Ab,openLocationCode:Cb,opencage:xb,openrouteservice:Mb,parseLatLng:Hm,pelias:$c,photon:Db,reverseParams:nn,what3words:Ob},Symbol.toStringTag,{value:"Module"}));class jc{constructor(...t){}}V.Util.extend(jc.prototype,V.Control.prototype);V.Util.extend(jc.prototype,V.Evented.prototype);class qc extends jc{constructor(t){super(t),Jt(this,"options",{showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0}),Jt(this,"_alts"),Jt(this,"_container"),Jt(this,"_errorElement"),Jt(this,"_geocodeMarker"),Jt(this,"_input"),Jt(this,"_lastGeocode"),Jt(this,"_map"),Jt(this,"_preventBlurCollapse"),Jt(this,"_requestCount",0),Jt(this,"_results"),Jt(this,"_selection"),Jt(this,"_suggestTimeout"),V.Util.setOptions(this,t),this.options.geocoder||(this.options.geocoder=new zc)}addThrobberClass(){V.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")}removeThrobberClass(){V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")}onAdd(t){var e;const s="leaflet-control-geocoder",r=V.DomUtil.create("div",s+" leaflet-bar"),a=V.DomUtil.create("button",s+"-icon",r),c=V.DomUtil.create("div",s+"-form",r);this._map=t,this._container=r,a.innerHTML="&nbsp;",a.type="button",a.setAttribute("aria-label",this.options.iconLabel);const h=this._input=V.DomUtil.create("input","",c);return h.type="search",h.value=this.options.query,h.placeholder=this.options.placeholder,V.DomEvent.disableClickPropagation(h),this._errorElement=V.DomUtil.create("div",s+"-form-no-error",r),this._errorElement.innerHTML=this.options.errorMessage,this._alts=V.DomUtil.create("ul",s+"-alternatives leaflet-control-geocoder-alternatives-minimized",r),V.DomEvent.disableClickPropagation(this._alts),V.DomEvent.addListener(h,"keydown",this._keydown,this),(e=this.options.geocoder)!=null&&e.suggest&&V.DomEvent.addListener(h,"input",this._change,this),V.DomEvent.addListener(h,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?V.DomEvent.addListener(r,"click",p=>{p.button===0&&p.detail!==2&&this._toggle()}):this.options.expand==="touch"?V.DomEvent.addListener(r,V.Browser.touch?"touchstart mousedown":"mousedown",p=>{this._toggle(),p.preventDefault(),p.stopPropagation()},this):(V.DomEvent.addListener(r,"mouseover",this._expand,this),V.DomEvent.addListener(r,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),V.Browser.touch?V.DomEvent.addListener(r,"touchstart",()=>this._geocode()):V.DomEvent.addListener(r,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),V.DomEvent.disableClickPropagation(r),r}setQuery(t){return this._input.value=t,this}_geocodeResult(t,e){if(!e&&this.options.showUniqueResult&&t.length===1)this._geocodeResultSelected(t[0]);else if(t.length>0){this._alts.innerHTML="",this._results=t,V.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),V.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(let s=0;s<t.length;s++)this._alts.appendChild(this._createAlt(t[s],s))}else V.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),V.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")}markGeocode(t){const e=t.geocode;return this._map.fitBounds(e.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new V.Marker(e.center).bindPopup(e.html||e.name).addTo(this._map).openPopup(),this}async _geocode(t=!1){const e=this._input.value;if(!t&&e.length<this.options.queryMinLength)return;const s=++this._requestCount;this._lastGeocode=e,t||this._clearResults();const r={input:e};this.fire(t?"startsuggest":"startgeocode",r);const a=t?await this.options.geocoder.suggest(e):await this.options.geocoder.geocode(e);if(s===this._requestCount){const c={input:e,results:a};this.fire(t?"finishsuggest":"finishgeocode",c),this._geocodeResult(a,t)}}_geocodeResultSelected(t){const e={geocode:t};this.fire("markgeocode",e)}_toggle(){V.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){V.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),V.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),V.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){V.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,V.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")}_createAlt(t,e){const s=V.DomUtil.create("li",""),r=V.DomUtil.create("a","",s),a=this.options.showResultIcons&&t.icon?V.DomUtil.create("img","",r):null,c=t.html?void 0:document.createTextNode(t.name),h=p=>{this._preventBlurCollapse=!0,V.DomEvent.stop(p),this._geocodeResultSelected(t),V.DomEvent.on(s,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return a&&(a.src=t.icon),s.setAttribute("data-result-index",String(e)),t.html?r.innerHTML=r.innerHTML+t.html:c&&r.appendChild(c),V.DomEvent.addListener(s,"mousedown touchstart",h,this),s}_keydown(t){const e=s=>{this._selection&&(V.DomUtil.removeClass(this._selection,"leaflet-control-geocoder-selected"),this._selection=this._selection[s>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[s>0?"firstChild":"lastChild"]),this._selection&&V.DomUtil.addClass(this._selection,"leaflet-control-geocoder-selected")};switch(t.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:e(-1);break;case 40:e(1);break;case 13:if(this._selection){const s=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[s]),this._clearResults()}else this._geocode();break;default:return}V.DomEvent.preventDefault(t)}_change(){const t=this._input.value;t!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),t.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}}function Nb(n){return new qc(n)}/* @preserve
 * Leaflet Control Geocoder
 * https://github.com/perliedman/leaflet-control-geocoder
 *
 * Copyright (c) 2012 sa3m (https://github.com/sa3m)
 * Copyright (c) 2018 Per Liedman
 * All rights reserved.
 */V.Util.extend(qc,Vb);V.Util.extend(V.Control,{Geocoder:qc,geocoder:Nb});const Bb={key:0,class:"popup-overlay"},Fb={class:"popup"},Ub={setup(n,{expose:t}){const e=oe(!1),s=oe("");function r(c="Cette fonctionnalité n'est pas encore disponible."){s.value=c,e.value=!0}function a(){e.value=!1}return t({showPopup:r}),(c,h)=>e.value?(Dt(),Zt("div",Bb,[tt("div",Fb,[tt("div",null,Nt(s.value),1),tt("button",{onClick:a},"OK")])])):Cn("",!0)}},e_=Zn(Ub,[["__scopeId","data-v-dfd1c5d0"]]),zb={class:"form-map-wrapper"},$b=["onSubmit"],jb={class:"form-group"},qb={for:"speciality"},Hb={disabled:"",value:""},Zb={value:"Développement Logiciel, Tests et Qualité"},Wb={value:"IA & Big Data"},Kb={class:"form-group"},Gb={for:"name"},Qb={class:"form-group"},Xb={for:"country"},Yb={class:"form-group"},Jb={for:"address"},tI={class:"form-group"},eI={for:"city"},nI={class:"form-group"},iI={for:"pc"},sI={type:"submit",class:"submit-button"},rI={emits:["refresh"],setup(n,{emit:t}){const e=oe(),s=er("t"),r=oe(""),a=oe(""),c=oe(""),h=oe(""),p=oe(""),g=oe(""),v=oe(""),T=oe(""),S=oe(!1);let N=null,z=null;const q=oe(null);let $=null;var it=new li.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});vo(()=>{N=li.map(q.value,{center:[46.656066,.364419],zoom:5,minZoom:3,maxBounds:[[-90,-180],[90,180]],worldCopyJump:!1}),li.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(N)}),nr([c,h,p,g],([ot,ht,Ct,Ft])=>{clearTimeout($),$=setTimeout(async()=>{if(![ot,ht,Ct,Ft].every(E=>E.trim()!=="")){console.warn("Tous les champs d'adresse doivent être remplis avant de rechercher.");return}const R=`${ot}, ${Ct} ${ht}, ${Ft}`;if(R.trim().length>10){S.value=!0;try{const b=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(R)}`,{headers:{Accept:"application/json","User-Agent":"VueApp/1.0 (youremail@example.com)"}})).json();if(b&&b.length>0){const{lat:x,lon:C}=b[0],M=li.latLng(x,C);z?z.setLatLng(M):z=li.marker(M,{icon:it}).addTo(N),N.setView(M,15),v.value=parseFloat(x),T.value=parseFloat(C)}else console.warn("Aucun résultat pour:",R)}catch(E){console.error("Erreur lors de l'appel à Nominatim:",E)}finally{S.value=!1}}},500)});const ft=async()=>{if(!r.value||!a.value||!c.value||!h.value||!g.value||!p.value||!v.value||!T.value){alert("Tous les champs sont obligatoires !");return}try{await J0(Dc(Uc,"companies"),{speciality:r.value,name:a.value,address:c.value,city:h.value,country:g.value,pc:p.value,x:v.value,y:T.value}),r.value="",a.value="",c.value="",h.value="",g.value="",p.value="",v.value="",T.value="",t("refresh"),e.value.showPopup("Fonctionalité refresh en développement ! Faite F5 pour voir les changements."),t("close")}catch(ot){console.error("Erreur lors de l'ajout de l'entreprise : ",ot)}};return(ot,ht)=>(Dt(),Zt(Ve,null,[tt("div",zb,[tt("form",{class:"form-container",onSubmit:ac(ft,["prevent"])},[tt("h2",null,Nt(le(s)("addCompanyForm.addCompany")),1),tt("div",jb,[tt("label",qb,Nt(le(s)("addCompanyForm.schoolSpeciality")),1),rs(tt("select",{id:"speciality","onUpdate:modelValue":ht[0]||(ht[0]=Ct=>r.value=Ct),required:""},[tt("option",Hb,Nt(le(s)("addCompanyForm.selectSpeciality")),1),tt("option",Zb,Nt(le(s)("addCompanyForm.dltq")),1),tt("option",Wb,Nt(le(s)("addCompanyForm.iabd")),1)],512),[[Yd,r.value]])]),tt("div",Kb,[tt("label",Gb,Nt(le(s)("addCompanyForm.companyName")),1),rs(tt("input",{id:"name","onUpdate:modelValue":ht[1]||(ht[1]=Ct=>a.value=Ct),required:""},null,512),[[to,a.value]])]),tt("div",Qb,[tt("label",Xb,Nt(le(s)("addCompanyForm.companyState")),1),rs(tt("input",{id:"country","onUpdate:modelValue":ht[2]||(ht[2]=Ct=>g.value=Ct),required:""},null,512),[[to,g.value]])]),tt("div",Yb,[tt("label",Jb,Nt(le(s)("addCompanyForm.companyAddress")),1),rs(tt("input",{id:"address","onUpdate:modelValue":ht[3]||(ht[3]=Ct=>c.value=Ct),required:""},null,512),[[to,c.value]])]),tt("div",tI,[tt("label",eI,Nt(le(s)("addCompanyForm.companyCity")),1),rs(tt("input",{id:"city","onUpdate:modelValue":ht[4]||(ht[4]=Ct=>h.value=Ct),required:""},null,512),[[to,h.value]])]),tt("div",nI,[tt("label",iI,Nt(le(s)("addCompanyForm.companyPC")),1),rs(tt("input",{id:"pc","onUpdate:modelValue":ht[5]||(ht[5]=Ct=>p.value=Ct),required:""},null,512),[[to,p.value]])]),tt("button",sI,Nt(le(s)("addCompanyForm.addCompanyButton")),1)],40,$b),tt("div",{class:"mini-map",ref_key:"mapContainer",ref:q},null,512)]),we(e_,{ref_key:"popupRef",ref:e},null,512)],64))}},oI=Zn(rI,[["__scopeId","data-v-0bca3d88"]]),aI={class:"company-item"},lI={class:"top"},uI={class:"left"},cI={class:"speciality"},hI={key:0,class:"text"},fI={key:1,class:"skeleton skeleton-text"},dI={class:"name"},pI={key:0,class:"text"},mI={key:1,class:"skeleton skeleton-text"},_I={class:"right"},gI={class:"city"},yI={key:0},vI={key:1,class:"skeleton skeleton-text short"},wI={class:"country"},TI={key:0},EI={key:1,class:"skeleton skeleton-text short"},bI={class:"pc"},II={key:0},PI={key:1,class:"skeleton skeleton-text short"},AI={class:"more"},CI={props:{speciality:String,name:String,city:String,country:String,pc:String},setup(n){const t=er("t"),e="Développement Logiciel, Tests et Qualité";return(s,r)=>(Dt(),Zt("div",aI,[tt("div",lI,[tt("div",uI,[tt("h3",cI,[n.speciality?(Dt(),Zt("span",hI,Nt(n.speciality===e?"Dev Logiciel":n.speciality),1)):(Dt(),Zt("span",fI))]),tt("p",dI,[n.name?(Dt(),Zt("strong",pI,Nt(n.name),1)):(Dt(),Zt("span",mI))])]),tt("div",_I,[tt("p",gI,[n.city?(Dt(),Zt("span",yI,Nt(le(t)("companyItem.companyCity"))+" : "+Nt(n.city),1)):(Dt(),Zt("span",vI))]),tt("p",wI,[n.country?(Dt(),Zt("span",TI,Nt(le(t)("companyItem.companyState"))+" : "+Nt(n.country),1)):(Dt(),Zt("span",EI))]),tt("p",bI,[n.pc?(Dt(),Zt("span",II,Nt(le(t)("companyItem.companyPC"))+" : "+Nt(n.pc),1)):(Dt(),Zt("span",PI))])])]),tt("p",AI,Nt(le(t)("companyItem.clickForDetails")),1)]))}},xI=Zn(CI,[["__scopeId","data-v-d78037c0"]]),SI={class:"modal-content"},RI={props:{isOpen:Boolean},emits:["close"],setup(n,{emit:t}){return(e,s)=>(Dt(),Lo(Dd,{to:"body"},[n.isOpen?(Dt(),Zt("div",{key:0,class:"modal-overlay",onClick:s[1]||(s[1]=ac(r=>t("close"),["self"]))},[tt("div",SI,[tt("button",{class:"modal-close",onClick:s[0]||(s[0]=r=>t("close"))},"×"),Fd(e.$slots,"default",{},void 0)])])):Cn("",!0)]))}},LI=Zn(RI,[["__scopeId","data-v-c1f89822"]]),ji=n=>(Td("data-v-089e2806"),n=n(),Ed(),n),kI={class:"details"},MI=ji(()=>tt("strong",null,"Description :",-1)),DI=ji(()=>tt("strong",null,"Secteurs d'activités :",-1)),OI=ji(()=>tt("strong",null,"Date depuis la dernière embauche :",-1)),VI=ji(()=>tt("strong",null,"Spécialité :",-1)),NI=ji(()=>tt("strong",null,"Ville :",-1)),BI=ji(()=>tt("strong",null,"Pays :",-1)),FI=ji(()=>tt("strong",null,"Code Postal :",-1)),UI=ji(()=>tt("strong",null,"Avis des étudiants :",-1)),zI={props:{company:{type:Object,required:!0}},setup(n){const t="TO DO";return(e,s)=>(Dt(),Zt("div",kI,[tt("h2",null,Nt(n.company.name),1),tt("p",null,[MI,oi(" "+Nt(t))]),tt("p",null,[DI,oi(" "+Nt(t))]),tt("p",null,[OI,oi(" "+Nt(t))]),tt("p",null,[VI,oi(" "+Nt(n.company.speciality),1)]),tt("p",null,[NI,oi(" "+Nt(n.company.city),1)]),tt("p",null,[BI,oi(" "+Nt(n.company.country),1)]),tt("p",null,[FI,oi(" "+Nt(n.company.pc),1)]),tt("p",null,[UI,oi(" "+Nt(t))])]))}},$I=Zn(zI,[["__scopeId","data-v-089e2806"]]),jI=["onClick"],qI={props:{companies:{type:Array,required:!0}},setup(n){const t=n,e=oe(!1),s=oe(null),r=c=>{e.value=!0,s.value=c,t.isOpen&&emit("toggle")},a=()=>{e.value=!1};return(c,h)=>(Dt(),Zt(Ve,null,[tt("ul",null,[(Dt(!0),Zt(Ve,null,Bd(n.companies,p=>(Dt(),Zt("li",{key:p.id,onClick:g=>r(p)},[we(xI,{speciality:p.speciality,name:p.name,city:p.city,country:p.country,pc:p.pc.toString()},null,8,["speciality","name","city","country","pc"])],8,jI))),128))]),we(LI,{isOpen:e.value,onClose:a,class:"modal"},{default:Ju(()=>[we($I,{company:s.value},null,8,["company"])]),_:1},8,["isOpen"])],64))}},HI=Zn(qI,[["__scopeId","data-v-cef73aae"]]),Nu={fr:{dropdownMenu:{companyList:"Liste des entreprises",specialities:"Spécialités",defaultFilter:"Toutes",dltq:"Développement Logiciel, Tests et Qualité",iabd:"IA & Big Data"},addCompanyForm:{addCompany:"Ajouter une entreprise",schoolSpeciality:"Spécialité de l'école",selectSpeciality:"-- Sélectionner une spécialité --",dltq:"Développement Logiciel, Tests et Qualité",iabd:"IA & Big Data",companyName:"Nom",companyState:"Pays",companyAddress:"Adresse",companyCity:"Ville",companyPC:"Code Postal",addCompanyButton:"Ajouter l'entreprise"},companyItem:{companyCity:"Ville",companyState:"Pays",companyPC:"Code Postal",clickForDetails:"Cliquez pour plus d'informations"}},en:{dropdownMenu:{companyList:"Company List",specialities:"Specialities",defaultFilter:"All",dltq:"Software Development, Testing and Quality",iabd:"AI & Big Data"},addCompanyForm:{addCompany:"Add a company",schoolSpeciality:"School speciality",selectSpeciality:"-- Select a speciality --",dltq:"Software Development, Testing and Quality",iabd:"AI & Big Data",companyName:"Name",companyState:"Country",companyAddress:"Address",companyCity:"City",companyPC:"Postal Code",addCompanyButton:"Add company"},companyItem:{companyCity:"City",companyState:"Country",companyPC:"Postal Code",clickForDetails:"Click for more details"}}},tu=_l({currentLang:localStorage.getItem("lang")||"fr"});function n_(){return{t:e=>e.split(".").reduce((r,a)=>r==null?void 0:r[a],Nu[tu.currentLang])||e,changeLang:e=>{Nu[e]&&(tu.currentLang=e,localStorage.setItem("lang",e))},currentLang:tu}}const ZI={class:"lang-switch"},WI=["onClick"],KI={setup(n){const{currentLang:t,changeLang:e}=n_(),s=Object.keys(Nu);return(r,a)=>(Dt(),Zt("div",ZI,[(Dt(!0),Zt(Ve,null,Bd(le(s),c=>(Dt(),Zt("button",{key:c,class:xi({active:le(t).currentLang===c}),onClick:h=>le(e)(c)},Nt(c.toUpperCase()),11,WI))),128))]))}},GI=Zn(KI,[["__scopeId","data-v-bdbadde1"]]),Ol=n=>(Td("data-v-ad0f38d6"),n=n(),Ed(),n),QI={key:0,class:"connection-action"},XI=Ol(()=>tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-user"},[tt("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),tt("circle",{cx:"12",cy:"7",r:"4"})],-1)),YI=[XI],JI={key:1,class:"list-action"},tP=cy('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list" data-v-ad0f38d6><line x1="8" y1="6" x2="21" y2="6" data-v-ad0f38d6></line><line x1="8" y1="12" x2="21" y2="12" data-v-ad0f38d6></line><line x1="8" y1="18" x2="21" y2="18" data-v-ad0f38d6></line><line x1="3" y1="6" x2="3.01" y2="6" data-v-ad0f38d6></line><line x1="3" y1="12" x2="3.01" y2="12" data-v-ad0f38d6></line><line x1="3" y1="18" x2="3.01" y2="18" data-v-ad0f38d6></line></svg>',1),eP=[tP],nP={key:2,class:"refresh-action"},iP={key:3,class:"add-company-action"},sP={key:4,class:"lang-switcher"},rP=Ol(()=>tt("hr",{class:"separator"},null,-1)),oP=Ol(()=>tt("h1",null,"Find My Company",-1)),aP=Ol(()=>tt("hr",{class:"separator"},null,-1)),lP={key:5},uP={key:6,class:"filter-bar"},cP={for:"speciality-select"},hP={value:""},fP={value:"Développement Logiciel, Tests et Qualité"},dP={value:"IA & Big Data"},pP={props:{isOpen:Boolean,visibleCompanies:Array},emits:["toggle","update-speciality"],setup(n,{emit:t}){const e=n,s=oe(!1),r=oe(400),a=0,c=er("t"),h=oe(),p=oe(!1),g=oe([]),v=oe(""),T=()=>{p.value=!0,e.isOpen&&t("toggle")},S=()=>{p.value=!1},N=vd(()=>{let it=e.visibleCompanies.length?e.visibleCompanies:g.value;return!v.value||v.value==="Toutes"?it:it.filter(ft=>ft.speciality.includes(v.value))}),z=async()=>{const it=await Bm(Dc(Uc,"companies"));g.value=it.docs.map(ft=>({id:ft.id,...ft.data()}))};function q(){t("toggle")}function $(){h.value.showPopup("Not available yet!")}return vo(()=>{const it=()=>{s.value=window.innerWidth<=768,r.value=s.value?280:400};window.addEventListener("resize",it),it()}),vo(z),(it,ft)=>(Dt(),Zt(Ve,null,[tt("div",null,[tt("div",{class:xi(["sidebar",{closed:!e.isOpen}]),style:_o({width:e.isOpen?r.value+"px":a+"px"})},[e.isOpen?(Dt(),Zt("div",QI,[tt("button",{onClick:$,class:"refresh-button","aria-label":"Rafraîchir"},YI)])):Cn("",!0),e.isOpen?(Dt(),Zt("div",JI,[tt("button",{onClick:$,class:"refresh-button","aria-label":"Rafraîchir"},eP)])):Cn("",!0),e.isOpen?(Dt(),Zt("div",nP,[tt("button",{onClick:z,class:"refresh-button","aria-label":"Rafraîchir"},"⟳")])):Cn("",!0),e.isOpen?(Dt(),Zt("div",iP,[tt("button",{onClick:T,class:"plus-button","aria-label":"Ajouter"},"+")])):Cn("",!0),e.isOpen?(Dt(),Zt("div",sP,[we(GI)])):Cn("",!0),rP,oP,aP,e.isOpen?(Dt(),Zt("h2",lP,Nt(le(c)("dropdownMenu.companyList")),1)):Cn("",!0),e.isOpen?(Dt(),Zt("div",uP,[tt("label",cP,Nt(le(c)("dropdownMenu.specialities"))+" :",1),rs(tt("select",{id:"speciality-select","onUpdate:modelValue":ft[0]||(ft[0]=ot=>v.value=ot),onChange:ft[1]||(ft[1]=ot=>it.$emit("update-speciality",v.value)),required:""},[tt("option",hP,Nt(le(c)("dropdownMenu.defaultFilter")),1),tt("option",fP,Nt(le(c)("dropdownMenu.dltq")),1),tt("option",dP,Nt(le(c)("dropdownMenu.iabd")),1)],544),[[Yd,v.value]])])):Cn("",!0),e.isOpen?(Dt(),Lo(HI,{key:7,companies:le(N)},null,8,["companies"])):Cn("",!0)],6),we(rb,{isOpen:p.value,onClose:S},{default:Ju(()=>[we(oI,{onRefresh:z})]),_:1},8,["isOpen"]),tt("button",{class:xi(["toggle-button",{closed:!e.isOpen}]),onClick:q,style:_o({left:e.isOpen?r.value+"px":a+"px"})},[tt("span",null,[tt("i",{class:xi(["arrow",e.isOpen?"left":"right"])},null,2)])],6)]),we(e_,{ref_key:"popupRef",ref:h},null,512)],64))}},mP=Zn(pP,[["__scopeId","data-v-ad0f38d6"]]),_P={props:{isOpen:Boolean,selectedSpeciality:String},emits:["update-visible-companies"],setup(n,{emit:t}){const e=n,s=oe(null),r=oe([]);let a=null;var c=new li.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function h(){const g=a.getBounds();t("update-visible-companies",r.value.filter(v=>v.x>=g.getSouth()&&v.x<=g.getNorth()&&v.y>=g.getWest()&&v.y<=g.getEast()))}vo(async()=>{a=li.map(s.value,{center:[46.656066,.364419],zoom:5,minZoom:3,maxBounds:[[-90,-180],[90,180]],worldCopyJump:!1}),li.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(a),await p(),a.on("moveend",()=>{h()}),a.on("zoomend",()=>{h()}),a.on("resize",()=>{h()})});const p=async()=>{try{const g=await Bm(Dc(Uc,"companies")),v=[];g.forEach(T=>{const S=T.data(),{x:N,y:z,name:q}=S;if(N&&z&&q){const $=li.marker([N,z],{icon:c}).addTo(a);$.bindPopup(q),v.push({...S,marker:$})}}),r.value=v}catch(g){console.error("Erreur lors de la récupération des entreprises:",g)}};return nr(()=>e.isOpen,()=>{setTimeout(()=>{a.invalidateSize()},400)}),nr(()=>e.selectedSpeciality,g=>{a&&(r.value.forEach(v=>{v.marker&&(!g||v.speciality===g?a.hasLayer(v.marker)||v.marker.addTo(a):a.hasLayer(v.marker)&&v.marker.remove())}),h())},{immediate:!0}),(g,v)=>(Dt(),Zt("div",{id:"map",ref_key:"mapContainer",ref:s,class:xi(["map-container",{"sidebar-open":n.isOpen,"sidebar-closed":!n.isOpen}])},null,2))}},gP=Zn(_P,[["__scopeId","data-v-c339d8d7"]]),yP={setup(n){const t=oe(!0),e=oe([]),s=oe("");return(r,a)=>(Dt(),Zt(Ve,null,[we(mP,{isOpen:t.value,visibleCompanies:e.value,onToggle:a[0]||(a[0]=c=>t.value=!t.value),onUpdateSpeciality:a[1]||(a[1]=c=>s.value=c)},null,8,["isOpen","visibleCompanies"]),we(gP,{isOpen:t.value,selectedSpeciality:s.value,onUpdateVisibleCompanies:a[2]||(a[2]=c=>e.value=c)},null,8,["isOpen","selectedSpeciality"])],64))}},Vl=Yy(yP),Hc=n_();Vl.provide("t",Hc.t);Vl.provide("changeLang",Hc.changeLang);Vl.provide("currentLang",Hc.currentLang);Vl.mount("#app");
