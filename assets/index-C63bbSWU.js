(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function Vu(n,t){const e=Object.create(null),s=n.split(",");for(let r=0;r<s.length;r++)e[s[r]]=!0;return t?r=>!!e[r.toLowerCase()]:r=>!!e[r]}const b_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",I_=Vu(b_);function Kf(n){return!!n||n===""}function mo(n){if(Tt(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],r=Re(s)?x_(s):mo(s);if(r)for(const a in r)t[a]=r[a]}return t}else{if(Re(n))return n;if(Ee(n))return n}}const P_=/;(?![^(]*\))/g,A_=/:(.+)/;function x_(n){const t={};return n.split(P_).forEach(e=>{if(e){const s=e.split(A_);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function as(n){let t="";if(Re(n))t=n;else if(Tt(n))for(let e=0;e<n.length;e++){const s=as(n[e]);s&&(t+=s+" ")}else if(Ee(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}function C_(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=al(n[s],t[s]);return e}function al(n,t){if(n===t)return!0;let e=hh(n),s=hh(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=Tt(n),s=Tt(t),e||s)return e&&s?C_(n,t):!1;if(e=Ee(n),s=Ee(t),e||s){if(!e||!s)return!1;const r=Object.keys(n).length,a=Object.keys(t).length;if(r!==a)return!1;for(const c in n){const h=n.hasOwnProperty(c),p=t.hasOwnProperty(c);if(h&&!p||!h&&p||!al(n[c],t[c]))return!1}}return String(n)===String(t)}function S_(n,t){return n.findIndex(e=>al(e,t))}const Fn=n=>n==null?"":Tt(n)||Ee(n)&&(n.toString===Xf||!Lt(n.toString))?JSON.stringify(n,Gf,2):String(n),Gf=(n,t)=>t&&t.__v_isRef?Gf(n,t.value):Ys(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,r])=>(e[`${s} =>`]=r,e),{})}:ul(t)?{[`Set(${t.size})`]:[...t.values()]}:Ee(t)&&!Tt(t)&&!Yf(t)?String(t):t,ne={},Xs=[],Un=()=>{},R_=()=>!1,L_=/^on[^a-z]/,ll=n=>L_.test(n),Nu=n=>n.startsWith("onUpdate:"),on=Object.assign,Bu=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},M_=Object.prototype.hasOwnProperty,$t=(n,t)=>M_.call(n,t),Tt=Array.isArray,Ys=n=>cl(n)==="[object Map]",ul=n=>cl(n)==="[object Set]",hh=n=>n instanceof Date,Lt=n=>typeof n=="function",Re=n=>typeof n=="string",Fu=n=>typeof n=="symbol",Ee=n=>n!==null&&typeof n=="object",Qf=n=>Ee(n)&&Lt(n.then)&&Lt(n.catch),Xf=Object.prototype.toString,cl=n=>Xf.call(n),k_=n=>cl(n).slice(8,-1),Yf=n=>cl(n)==="[object Object]",Uu=n=>Re(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ba=Vu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hl=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},D_=/-(\w)/g,ir=hl(n=>n.replace(D_,(t,e)=>e?e.toUpperCase():"")),O_=/\B([A-Z])/g,dr=hl(n=>n.replace(O_,"-$1").toLowerCase()),Jf=hl(n=>n.charAt(0).toUpperCase()+n.slice(1)),jl=hl(n=>n?`on${Jf(n)}`:""),_o=(n,t)=>!Object.is(n,t),Ia=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},ka=(n,t,e)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:e})},Da=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let fh;const V_=()=>fh||(fh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ts;const ca=[];class N_{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ts&&(this.parent=ts,this.index=(ts.scopes||(ts.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(ca.push(this),ts=this)}off(){this.active&&(ca.pop(),ts=ca[ca.length-1])}stop(t){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function B_(n,t){t=t||ts,t&&t.active&&t.effects.push(n)}const zu=n=>{const t=new Set(n);return t.w=0,t.n=0,t},td=n=>(n.w&Mi)>0,ed=n=>(n.n&Mi)>0,F_=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=Mi},U_=n=>{const{deps:t}=n;if(t.length){let e=0;for(let s=0;s<t.length;s++){const r=t[s];td(r)&&!ed(r)?r.delete(n):t[e++]=r,r.w&=~Mi,r.n&=~Mi}t.length=e}},tu=new WeakMap;let Jr=0,Mi=1;const eu=30,Qr=[];let ls;const us=Symbol(""),nu=Symbol("");class $u{constructor(t,e=null,s){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],B_(this,s)}run(){if(!this.active)return this.fn();if(!Qr.includes(this))try{return Qr.push(ls=this),z_(),Mi=1<<++Jr,Jr<=eu?F_(this):dh(this),this.fn()}finally{Jr<=eu&&U_(this),Mi=1<<--Jr,ps(),Qr.pop();const t=Qr.length;ls=t>0?Qr[t-1]:void 0}}stop(){this.active&&(dh(this),this.onStop&&this.onStop(),this.active=!1)}}function dh(n){const{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}let sr=!0;const ju=[];function pr(){ju.push(sr),sr=!1}function z_(){ju.push(sr),sr=!0}function ps(){const n=ju.pop();sr=n===void 0?!0:n}function an(n,t,e){if(!nd())return;let s=tu.get(n);s||tu.set(n,s=new Map);let r=s.get(e);r||s.set(e,r=zu()),id(r)}function nd(){return sr&&ls!==void 0}function id(n,t){let e=!1;Jr<=eu?ed(n)||(n.n|=Mi,e=!td(n)):e=!n.has(ls),e&&(n.add(ls),ls.deps.push(n))}function ai(n,t,e,s,r,a){const c=tu.get(n);if(!c)return;let h=[];if(t==="clear")h=[...c.values()];else if(e==="length"&&Tt(n))c.forEach((p,g)=>{(g==="length"||g>=s)&&h.push(p)});else switch(e!==void 0&&h.push(c.get(e)),t){case"add":Tt(n)?Uu(e)&&h.push(c.get("length")):(h.push(c.get(us)),Ys(n)&&h.push(c.get(nu)));break;case"delete":Tt(n)||(h.push(c.get(us)),Ys(n)&&h.push(c.get(nu)));break;case"set":Ys(n)&&h.push(c.get(us));break}if(h.length===1)h[0]&&iu(h[0]);else{const p=[];for(const g of h)g&&p.push(...g);iu(zu(p))}}function iu(n,t){for(const e of Tt(n)?n:[...n])(e!==ls||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const $_=Vu("__proto__,__v_isRef,__isVue"),sd=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(Fu)),j_=qu(),q_=qu(!1,!0),H_=qu(!0),ph=Z_();function Z_(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const s=Kt(this);for(let a=0,c=this.length;a<c;a++)an(s,"get",a+"");const r=s[t](...e);return r===-1||r===!1?s[t](...e.map(Kt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){pr();const s=Kt(this)[t].apply(this,e);return ps(),s}}),n}function qu(n=!1,t=!1){return function(s,r,a){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_raw"&&a===(n?t?lg:ud:t?ld:ad).get(s))return s;const c=Tt(s);if(!n&&c&&$t(ph,r))return Reflect.get(ph,r,a);const h=Reflect.get(s,r,a);return(Fu(r)?sd.has(r):$_(r))||(n||an(s,"get",r),t)?h:He(h)?!c||!Uu(r)?h.value:h:Ee(h)?n?cd(h):Wu(h):h}}const W_=rd(),K_=rd(!0);function rd(n=!1){return function(e,s,r,a){let c=e[s];if(!n&&!Gu(r)&&(r=Kt(r),c=Kt(c),!Tt(e)&&He(c)&&!He(r)))return c.value=r,!0;const h=Tt(e)&&Uu(s)?Number(s)<e.length:$t(e,s),p=Reflect.set(e,s,r,a);return e===Kt(a)&&(h?_o(r,c)&&ai(e,"set",s,r):ai(e,"add",s,r)),p}}function G_(n,t){const e=$t(n,t);n[t];const s=Reflect.deleteProperty(n,t);return s&&e&&ai(n,"delete",t,void 0),s}function Q_(n,t){const e=Reflect.has(n,t);return(!Fu(t)||!sd.has(t))&&an(n,"has",t),e}function X_(n){return an(n,"iterate",Tt(n)?"length":us),Reflect.ownKeys(n)}const od={get:j_,set:W_,deleteProperty:G_,has:Q_,ownKeys:X_},Y_={get:H_,set(n,t){return!0},deleteProperty(n,t){return!0}},J_=on({},od,{get:q_,set:K_}),Hu=n=>n,fl=n=>Reflect.getPrototypeOf(n);function ha(n,t,e=!1,s=!1){n=n.__v_raw;const r=Kt(n),a=Kt(t);t!==a&&!e&&an(r,"get",t),!e&&an(r,"get",a);const{has:c}=fl(r),h=s?Hu:e?Qu:go;if(c.call(r,t))return h(n.get(t));if(c.call(r,a))return h(n.get(a));n!==r&&n.get(t)}function fa(n,t=!1){const e=this.__v_raw,s=Kt(e),r=Kt(n);return n!==r&&!t&&an(s,"has",n),!t&&an(s,"has",r),n===r?e.has(n):e.has(n)||e.has(r)}function da(n,t=!1){return n=n.__v_raw,!t&&an(Kt(n),"iterate",us),Reflect.get(n,"size",n)}function mh(n){n=Kt(n);const t=Kt(this);return fl(t).has.call(t,n)||(t.add(n),ai(t,"add",n,n)),this}function _h(n,t){t=Kt(t);const e=Kt(this),{has:s,get:r}=fl(e);let a=s.call(e,n);a||(n=Kt(n),a=s.call(e,n));const c=r.call(e,n);return e.set(n,t),a?_o(t,c)&&ai(e,"set",n,t):ai(e,"add",n,t),this}function gh(n){const t=Kt(this),{has:e,get:s}=fl(t);let r=e.call(t,n);r||(n=Kt(n),r=e.call(t,n)),s&&s.call(t,n);const a=t.delete(n);return r&&ai(t,"delete",n,void 0),a}function vh(){const n=Kt(this),t=n.size!==0,e=n.clear();return t&&ai(n,"clear",void 0,void 0),e}function pa(n,t){return function(s,r){const a=this,c=a.__v_raw,h=Kt(c),p=t?Hu:n?Qu:go;return!n&&an(h,"iterate",us),c.forEach((g,y)=>s.call(r,p(g),p(y),a))}}function ma(n,t,e){return function(...s){const r=this.__v_raw,a=Kt(r),c=Ys(a),h=n==="entries"||n===Symbol.iterator&&c,p=n==="keys"&&c,g=r[n](...s),y=e?Hu:t?Qu:go;return!t&&an(a,"iterate",p?nu:us),{next(){const{value:T,done:x}=g.next();return x?{value:T,done:x}:{value:h?[y(T[0]),y(T[1])]:y(T),done:x}},[Symbol.iterator](){return this}}}}function Ti(n){return function(...t){return n==="delete"?!1:this}}function tg(){const n={get(a){return ha(this,a)},get size(){return da(this)},has:fa,add:mh,set:_h,delete:gh,clear:vh,forEach:pa(!1,!1)},t={get(a){return ha(this,a,!1,!0)},get size(){return da(this)},has:fa,add:mh,set:_h,delete:gh,clear:vh,forEach:pa(!1,!0)},e={get(a){return ha(this,a,!0)},get size(){return da(this,!0)},has(a){return fa.call(this,a,!0)},add:Ti("add"),set:Ti("set"),delete:Ti("delete"),clear:Ti("clear"),forEach:pa(!0,!1)},s={get(a){return ha(this,a,!0,!0)},get size(){return da(this,!0)},has(a){return fa.call(this,a,!0)},add:Ti("add"),set:Ti("set"),delete:Ti("delete"),clear:Ti("clear"),forEach:pa(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=ma(a,!1,!1),e[a]=ma(a,!0,!1),t[a]=ma(a,!1,!0),s[a]=ma(a,!0,!0)}),[n,e,t,s]}const[eg,ng,ig,sg]=tg();function Zu(n,t){const e=t?n?sg:ig:n?ng:eg;return(s,r,a)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get($t(e,r)&&r in s?e:s,r,a)}const rg={get:Zu(!1,!1)},og={get:Zu(!1,!0)},ag={get:Zu(!0,!1)},ad=new WeakMap,ld=new WeakMap,ud=new WeakMap,lg=new WeakMap;function ug(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cg(n){return n.__v_skip||!Object.isExtensible(n)?0:ug(k_(n))}function Wu(n){return n&&n.__v_isReadonly?n:Ku(n,!1,od,rg,ad)}function hg(n){return Ku(n,!1,J_,og,ld)}function cd(n){return Ku(n,!0,Y_,ag,ud)}function Ku(n,t,e,s,r){if(!Ee(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const a=r.get(n);if(a)return a;const c=cg(n);if(c===0)return n;const h=new Proxy(n,c===2?s:e);return r.set(n,h),h}function Js(n){return Gu(n)?Js(n.__v_raw):!!(n&&n.__v_isReactive)}function Gu(n){return!!(n&&n.__v_isReadonly)}function hd(n){return Js(n)||Gu(n)}function Kt(n){const t=n&&n.__v_raw;return t?Kt(t):n}function fd(n){return ka(n,"__v_skip",!0),n}const go=n=>Ee(n)?Wu(n):n,Qu=n=>Ee(n)?cd(n):n;function dd(n){nd()&&(n=Kt(n),n.dep||(n.dep=zu()),id(n.dep))}function pd(n,t){n=Kt(n),n.dep&&iu(n.dep)}function He(n){return!!(n&&n.__v_isRef===!0)}function Te(n){return fg(n,!1)}function fg(n,t){return He(n)?n:new dg(n,t)}class dg{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Kt(t),this._value=e?t:go(t)}get value(){return dd(this),this._value}set value(t){t=this._shallow?t:Kt(t),_o(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:go(t),pd(this))}}function md(n){return He(n)?n.value:n}const pg={get:(n,t,e)=>md(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const r=n[t];return He(r)&&!He(e)?(r.value=e,!0):Reflect.set(n,t,e,s)}};function _d(n){return Js(n)?n:new Proxy(n,pg)}class mg{constructor(t,e,s){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new $u(t,()=>{this._dirty||(this._dirty=!0,pd(this))}),this.__v_isReadonly=s}get value(){const t=Kt(this);return dd(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function gd(n,t){let e,s;const r=Lt(n);return r?(e=n,s=Un):(e=n.get,s=n.set),new mg(e,s,r||!s)}Promise.resolve();function _g(n,t,...e){const s=n.vnode.props||ne;let r=e;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const y=`${c==="modelValue"?"model":c}Modifiers`,{number:T,trim:x}=s[y]||ne;x?r=e.map(N=>N.trim()):T&&(r=e.map(Da))}let h,p=s[h=jl(t)]||s[h=jl(ir(t))];!p&&a&&(p=s[h=jl(dr(t))]),p&&xn(p,n,6,r);const g=s[h+"Once"];if(g){if(!n.emitted)n.emitted={};else if(n.emitted[h])return;n.emitted[h]=!0,xn(g,n,6,r)}}function vd(n,t,e=!1){const s=t.emitsCache,r=s.get(n);if(r!==void 0)return r;const a=n.emits;let c={},h=!1;if(!Lt(n)){const p=g=>{const y=vd(g,t,!0);y&&(h=!0,on(c,y))};!e&&t.mixins.length&&t.mixins.forEach(p),n.extends&&p(n.extends),n.mixins&&n.mixins.forEach(p)}return!a&&!h?(s.set(n,null),null):(Tt(a)?a.forEach(p=>c[p]=null):on(c,a),s.set(n,c),c)}function Xu(n,t){return!n||!ll(t)?!1:(t=t.slice(2).replace(/Once$/,""),$t(n,t[0].toLowerCase()+t.slice(1))||$t(n,dr(t))||$t(n,t))}let Pn=null,dl=null;function Oa(n){const t=Pn;return Pn=n,dl=n&&n.type.__scopeId||null,t}function pl(n){dl=n}function ml(){dl=null}function Yu(n,t=Pn,e){if(!t||n._n)return n;const s=(...r)=>{s._d&&Ch(-1);const a=Oa(t),c=n(...r);return Oa(a),s._d&&Ch(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function yh(n){const{type:t,vnode:e,proxy:s,withProxy:r,props:a,propsOptions:[c],slots:h,attrs:p,emit:g,render:y,renderCache:T,data:x,setupState:N,ctx:j,inheritAttrs:H}=n;let $,ot;const lt=Oa(n);try{if(e.shapeFlag&4){const bt=r||s;$=Bn(y.call(bt,bt,T,a,N,x,j)),ot=p}else{const bt=t;$=Bn(bt.length>1?bt(a,{attrs:p,slots:h,emit:g}):bt(a,null)),ot=t.props?p:gg(p)}}catch(bt){ao.length=0,wl(bt,n,1),$=Se(ki)}let nt=$;if(ot&&H!==!1){const bt=Object.keys(ot),{shapeFlag:qt}=nt;bt.length&&qt&7&&(c&&bt.some(Nu)&&(ot=vg(ot,c)),nt=vo(nt,ot))}return e.dirs&&(nt.dirs=nt.dirs?nt.dirs.concat(e.dirs):e.dirs),e.transition&&(nt.transition=e.transition),$=nt,Oa(lt),$}const gg=n=>{let t;for(const e in n)(e==="class"||e==="style"||ll(e))&&((t||(t={}))[e]=n[e]);return t},vg=(n,t)=>{const e={};for(const s in n)(!Nu(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function yg(n,t,e){const{props:s,children:r,component:a}=n,{props:c,children:h,patchFlag:p}=t,g=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&p>=0){if(p&1024)return!0;if(p&16)return s?wh(s,c,g):!!c;if(p&8){const y=t.dynamicProps;for(let T=0;T<y.length;T++){const x=y[T];if(c[x]!==s[x]&&!Xu(g,x))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:s===c?!1:s?c?wh(s,c,g):!0:!!c;return!1}function wh(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const a=s[r];if(t[a]!==n[a]&&!Xu(e,a))return!0}return!1}function wg({vnode:n,parent:t},e){for(;t&&t.subTree===n;)(n=t.vnode).el=e,t=t.parent}const Tg=n=>n.__isSuspense;function Eg(n,t){t&&t.pendingBranch?Tt(n)?t.effects.push(...n):t.effects.push(n):Ev(n)}function bg(n,t){if(Ue){let e=Ue.provides;const s=Ue.parent&&Ue.parent.provides;s===e&&(e=Ue.provides=Object.create(s)),e[n]=t}}function ql(n,t,e=!1){const s=Ue||Pn;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return e&&Lt(t)?t.call(s.proxy):t}}const su=n=>!!n.type.__asyncLoader,yd=n=>n.type.__isKeepAlive;function Ig(n,t){wd(n,"a",t)}function Pg(n,t){wd(n,"da",t)}function wd(n,t,e=Ue){const s=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(_l(t,s,e),e){let r=e.parent;for(;r&&r.parent;)yd(r.parent.vnode)&&Ag(s,t,e,r),r=r.parent}}function Ag(n,t,e,s){const r=_l(t,n,s,!0);Td(()=>{Bu(s[t],r)},e)}function _l(n,t,e=Ue,s=!1){if(e){const r=e[n]||(e[n]=[]),a=t.__weh||(t.__weh=(...c)=>{if(e.isUnmounted)return;pr(),rr(e);const h=xn(t,e,n,c);return hs(),ps(),h});return s?r.unshift(a):r.push(a),a}}const hi=n=>(t,e=Ue)=>(!Fa||n==="sp")&&_l(n,t,e),xg=hi("bm"),gl=hi("m"),Cg=hi("bu"),Sg=hi("u"),Rg=hi("bum"),Td=hi("um"),Lg=hi("sp"),Mg=hi("rtg"),kg=hi("rtc");function Dg(n,t=Ue){_l("ec",n,t)}let ru=!0;function Og(n){const t=bd(n),e=n.proxy,s=n.ctx;ru=!1,t.beforeCreate&&Th(t.beforeCreate,n,"bc");const{data:r,computed:a,methods:c,watch:h,provide:p,inject:g,created:y,beforeMount:T,mounted:x,beforeUpdate:N,updated:j,activated:H,deactivated:$,beforeDestroy:ot,beforeUnmount:lt,destroyed:nt,unmounted:bt,render:qt,renderTracked:Mt,renderTriggered:R,errorCaptured:E,serverPrefetch:b,expose:S,inheritAttrs:C,components:k,directives:A,filters:de}=t;if(g&&Vg(g,s,null,n.appContext.config.unwrapInjectedRef),c)for(const Nt in c){const et=c[Nt];Lt(et)&&(s[Nt]=et.bind(e))}if(r){const Nt=r.call(e,e);Ee(Nt)&&(n.data=Wu(Nt))}if(ru=!0,a)for(const Nt in a){const et=a[Nt],Ve=Lt(et)?et.bind(e,e):Lt(et.get)?et.get.bind(e,e):Un,mt=!Lt(et)&&Lt(et.set)?et.set.bind(e):Un,jt=gd({get:Ve,set:mt});Object.defineProperty(s,Nt,{enumerable:!0,configurable:!0,get:()=>jt.value,set:Zt=>jt.value=Zt})}if(h)for(const Nt in h)Ed(h[Nt],s,e,Nt);if(p){const Nt=Lt(p)?p.call(e):p;Reflect.ownKeys(Nt).forEach(et=>{bg(et,Nt[et])})}y&&Th(y,n,"c");function Ht(Nt,et){Tt(et)?et.forEach(Ve=>Nt(Ve.bind(e))):et&&Nt(et.bind(e))}if(Ht(xg,T),Ht(gl,x),Ht(Cg,N),Ht(Sg,j),Ht(Ig,H),Ht(Pg,$),Ht(Dg,E),Ht(kg,Mt),Ht(Mg,R),Ht(Rg,lt),Ht(Td,bt),Ht(Lg,b),Tt(S))if(S.length){const Nt=n.exposed||(n.exposed={});S.forEach(et=>{Object.defineProperty(Nt,et,{get:()=>e[et],set:Ve=>e[et]=Ve})})}else n.exposed||(n.exposed={});qt&&n.render===Un&&(n.render=qt),C!=null&&(n.inheritAttrs=C),k&&(n.components=k),A&&(n.directives=A)}function Vg(n,t,e=Un,s=!1){Tt(n)&&(n=ou(n));for(const r in n){const a=n[r];let c;Ee(a)?"default"in a?c=ql(a.from||r,a.default,!0):c=ql(a.from||r):c=ql(a),He(c)&&s?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:h=>c.value=h}):t[r]=c}}function Th(n,t,e){xn(Tt(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function Ed(n,t,e,s){const r=s.includes(".")?jd(e,s):()=>e[s];if(Re(n)){const a=t[n];Lt(a)&&tr(r,a)}else if(Lt(n))tr(r,n.bind(e));else if(Ee(n))if(Tt(n))n.forEach(a=>Ed(a,t,e,s));else{const a=Lt(n.handler)?n.handler.bind(e):t[n.handler];Lt(a)&&tr(r,a,n)}}function bd(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:c}}=n.appContext,h=a.get(t);let p;return h?p=h:!r.length&&!e&&!s?p=t:(p={},r.length&&r.forEach(g=>Va(p,g,c,!0)),Va(p,t,c)),a.set(t,p),p}function Va(n,t,e,s=!1){const{mixins:r,extends:a}=t;a&&Va(n,a,e,!0),r&&r.forEach(c=>Va(n,c,e,!0));for(const c in t)if(!(s&&c==="expose")){const h=Ng[c]||e&&e[c];n[c]=h?h(n[c],t[c]):t[c]}return n}const Ng={data:Eh,props:es,emits:es,methods:es,computed:es,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:es,directives:es,watch:Fg,provide:Eh,inject:Bg};function Eh(n,t){return t?n?function(){return on(Lt(n)?n.call(this,this):n,Lt(t)?t.call(this,this):t)}:t:n}function Bg(n,t){return es(ou(n),ou(t))}function ou(n){if(Tt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function qe(n,t){return n?[...new Set([].concat(n,t))]:t}function es(n,t){return n?on(on(Object.create(null),n),t):t}function Fg(n,t){if(!n)return t;if(!t)return n;const e=on(Object.create(null),n);for(const s in t)e[s]=qe(n[s],t[s]);return e}function Ug(n,t,e,s=!1){const r={},a={};ka(a,yl,1),n.propsDefaults=Object.create(null),Id(n,t,r,a);for(const c in n.propsOptions[0])c in r||(r[c]=void 0);e?n.props=s?r:hg(r):n.type.props?n.props=r:n.props=a,n.attrs=a}function zg(n,t,e,s){const{props:r,attrs:a,vnode:{patchFlag:c}}=n,h=Kt(r),[p]=n.propsOptions;let g=!1;if((s||c>0)&&!(c&16)){if(c&8){const y=n.vnode.dynamicProps;for(let T=0;T<y.length;T++){let x=y[T];const N=t[x];if(p)if($t(a,x))N!==a[x]&&(a[x]=N,g=!0);else{const j=ir(x);r[j]=au(p,h,j,N,n,!1)}else N!==a[x]&&(a[x]=N,g=!0)}}}else{Id(n,t,r,a)&&(g=!0);let y;for(const T in h)(!t||!$t(t,T)&&((y=dr(T))===T||!$t(t,y)))&&(p?e&&(e[T]!==void 0||e[y]!==void 0)&&(r[T]=au(p,h,T,void 0,n,!0)):delete r[T]);if(a!==h)for(const T in a)(!t||!$t(t,T))&&(delete a[T],g=!0)}g&&ai(n,"set","$attrs")}function Id(n,t,e,s){const[r,a]=n.propsOptions;let c=!1,h;if(t)for(let p in t){if(ba(p))continue;const g=t[p];let y;r&&$t(r,y=ir(p))?!a||!a.includes(y)?e[y]=g:(h||(h={}))[y]=g:Xu(n.emitsOptions,p)||(!(p in s)||g!==s[p])&&(s[p]=g,c=!0)}if(a){const p=Kt(e),g=h||ne;for(let y=0;y<a.length;y++){const T=a[y];e[T]=au(r,p,T,g[T],n,!$t(g,T))}}return c}function au(n,t,e,s,r,a){const c=n[e];if(c!=null){const h=$t(c,"default");if(h&&s===void 0){const p=c.default;if(c.type!==Function&&Lt(p)){const{propsDefaults:g}=r;e in g?s=g[e]:(rr(r),s=g[e]=p.call(null,t),hs())}else s=p}c[0]&&(a&&!h?s=!1:c[1]&&(s===""||s===dr(e))&&(s=!0))}return s}function Pd(n,t,e=!1){const s=t.propsCache,r=s.get(n);if(r)return r;const a=n.props,c={},h=[];let p=!1;if(!Lt(n)){const y=T=>{p=!0;const[x,N]=Pd(T,t,!0);on(c,x),N&&h.push(...N)};!e&&t.mixins.length&&t.mixins.forEach(y),n.extends&&y(n.extends),n.mixins&&n.mixins.forEach(y)}if(!a&&!p)return s.set(n,Xs),Xs;if(Tt(a))for(let y=0;y<a.length;y++){const T=ir(a[y]);bh(T)&&(c[T]=ne)}else if(a)for(const y in a){const T=ir(y);if(bh(T)){const x=a[y],N=c[T]=Tt(x)||Lt(x)?{type:x}:x;if(N){const j=Ah(Boolean,N.type),H=Ah(String,N.type);N[0]=j>-1,N[1]=H<0||j<H,(j>-1||$t(N,"default"))&&h.push(T)}}}const g=[c,h];return s.set(n,g),g}function bh(n){return n[0]!=="$"}function Ih(n){const t=n&&n.toString().match(/^\s*function (\w+)/);return t?t[1]:n===null?"null":""}function Ph(n,t){return Ih(n)===Ih(t)}function Ah(n,t){return Tt(t)?t.findIndex(e=>Ph(e,n)):Lt(t)&&Ph(t,n)?0:-1}const Ad=n=>n[0]==="_"||n==="$stable",Ju=n=>Tt(n)?n.map(Bn):[Bn(n)],$g=(n,t,e)=>{const s=Yu((...r)=>Ju(t(...r)),e);return s._c=!1,s},xd=(n,t,e)=>{const s=n._ctx;for(const r in n){if(Ad(r))continue;const a=n[r];if(Lt(a))t[r]=$g(r,a,s);else if(a!=null){const c=Ju(a);t[r]=()=>c}}},Cd=(n,t)=>{const e=Ju(t);n.slots.default=()=>e},jg=(n,t)=>{if(n.vnode.shapeFlag&32){const e=t._;e?(n.slots=Kt(t),ka(t,"_",e)):xd(t,n.slots={})}else n.slots={},t&&Cd(n,t);ka(n.slots,yl,1)},qg=(n,t,e)=>{const{vnode:s,slots:r}=n;let a=!0,c=ne;if(s.shapeFlag&32){const h=t._;h?e&&h===1?a=!1:(on(r,t),!e&&h===1&&delete r._):(a=!t.$stable,xd(t,r)),c=t}else t&&(Cd(n,t),c={default:1});if(a)for(const h in r)!Ad(h)&&!(h in c)&&delete r[h]};function ns(n,t){const e=Pn;if(e===null)return n;const s=e.proxy,r=n.dirs||(n.dirs=[]);for(let a=0;a<t.length;a++){let[c,h,p,g=ne]=t[a];Lt(c)&&(c={mounted:c,updated:c}),c.deep&&rs(h),r.push({dir:c,instance:s,value:h,oldValue:void 0,arg:p,modifiers:g})}return n}function Yi(n,t,e,s){const r=n.dirs,a=t&&t.dirs;for(let c=0;c<r.length;c++){const h=r[c];a&&(h.oldValue=a[c].value);let p=h.dir[s];p&&(pr(),xn(p,e,8,[n.el,h,n,t]),ps())}}function Sd(){return{app:null,config:{isNativeTag:R_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hg=0;function Zg(n,t){return function(s,r=null){r!=null&&!Ee(r)&&(r=null);const a=Sd(),c=new Set;let h=!1;const p=a.app={_uid:Hg++,_component:s,_props:r,_container:null,_context:a,_instance:null,version:Iv,get config(){return a.config},set config(g){},use(g,...y){return c.has(g)||(g&&Lt(g.install)?(c.add(g),g.install(p,...y)):Lt(g)&&(c.add(g),g(p,...y))),p},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),p},component(g,y){return y?(a.components[g]=y,p):a.components[g]},directive(g,y){return y?(a.directives[g]=y,p):a.directives[g]},mount(g,y,T){if(!h){const x=Se(s,r);return x.appContext=a,n(x,g,T),h=!0,p._container=g,g.__vue_app__=p,ic(x.component)||x.component.proxy}},unmount(){h&&(n(null,p._container),delete p._container.__vue_app__)},provide(g,y){return a.provides[g]=y,p}};return p}}function lu(n,t,e,s,r=!1){if(Tt(n)){n.forEach((x,N)=>lu(x,t&&(Tt(t)?t[N]:t),e,s,r));return}if(su(s)&&!r)return;const a=s.shapeFlag&4?ic(s.component)||s.component.proxy:s.el,c=r?null:a,{i:h,r:p}=n,g=t&&t.r,y=h.refs===ne?h.refs={}:h.refs,T=h.setupState;if(g!=null&&g!==p&&(Re(g)?(y[g]=null,$t(T,g)&&(T[g]=null)):He(g)&&(g.value=null)),Lt(p))Ai(p,h,12,[c,y]);else{const x=Re(p),N=He(p);if(x||N){const j=()=>{if(n.f){const H=x?y[p]:p.value;r?Tt(H)&&Bu(H,a):Tt(H)?H.includes(a)||H.push(a):x?y[p]=[a]:(p.value=[a],n.k&&(y[n.k]=p.value))}else x?(y[p]=c,$t(T,p)&&(T[p]=c)):He(p)&&(p.value=c,n.k&&(y[n.k]=c))};c?(j.id=-1,Xe(j,e)):j()}}}const Xe=Eg;function Wg(n){return Kg(n)}function Kg(n,t){const e=V_();e.__VUE__=!0;const{insert:s,remove:r,patchProp:a,createElement:c,createText:h,createComment:p,setText:g,setElementText:y,parentNode:T,nextSibling:x,setScopeId:N=Un,cloneNode:j,insertStaticContent:H}=n,$=(P,M,U,q=null,Z=null,X=null,tt=!1,Q=null,Y=!!M.dynamicChildren)=>{if(P===M)return;P&&!Xr(P,M)&&(q=ze(P),xt(P,Z,X,!0),P=null),M.patchFlag===-2&&(Y=!1,M.dynamicChildren=null);const{type:K,ref:ct,shapeFlag:at}=M;switch(K){case ec:ot(P,M,U,q);break;case ki:lt(P,M,U,q);break;case Pa:P==null&&nt(M,U,q,tt);break;case Je:A(P,M,U,q,Z,X,tt,Q,Y);break;default:at&1?Mt(P,M,U,q,Z,X,tt,Q,Y):at&6?de(P,M,U,q,Z,X,tt,Q,Y):(at&64||at&128)&&K.process(P,M,U,q,Z,X,tt,Q,Y,We)}ct!=null&&Z&&lu(ct,P&&P.ref,X,M||P,!M)},ot=(P,M,U,q)=>{if(P==null)s(M.el=h(M.children),U,q);else{const Z=M.el=P.el;M.children!==P.children&&g(Z,M.children)}},lt=(P,M,U,q)=>{P==null?s(M.el=p(M.children||""),U,q):M.el=P.el},nt=(P,M,U,q)=>{[P.el,P.anchor]=H(P.children,M,U,q)},bt=({el:P,anchor:M},U,q)=>{let Z;for(;P&&P!==M;)Z=x(P),s(P,U,q),P=Z;s(M,U,q)},qt=({el:P,anchor:M})=>{let U;for(;P&&P!==M;)U=x(P),r(P),P=U;r(M)},Mt=(P,M,U,q,Z,X,tt,Q,Y)=>{tt=tt||M.type==="svg",P==null?R(M,U,q,Z,X,tt,Q,Y):S(P,M,Z,X,tt,Q,Y)},R=(P,M,U,q,Z,X,tt,Q)=>{let Y,K;const{type:ct,props:at,shapeFlag:ut,transition:_t,patchFlag:ft,dirs:Pt}=P;if(P.el&&j!==void 0&&ft===-1)Y=P.el=j(P.el);else{if(Y=P.el=c(P.type,X,at&&at.is,at),ut&8?y(Y,P.children):ut&16&&b(P.children,Y,null,q,Z,X&&ct!=="foreignObject",tt,Q),Pt&&Yi(P,null,q,"created"),at){for(const te in at)te!=="value"&&!ba(te)&&a(Y,te,null,at[te],X,P.children,q,Z,oe);"value"in at&&a(Y,"value",null,at.value),(K=at.onVnodeBeforeMount)&&Vn(K,q,P)}E(Y,P,P.scopeId,tt,q)}Pt&&Yi(P,null,q,"beforeMount");const Bt=(!Z||Z&&!Z.pendingBranch)&&_t&&!_t.persisted;Bt&&_t.beforeEnter(Y),s(Y,M,U),((K=at&&at.onVnodeMounted)||Bt||Pt)&&Xe(()=>{K&&Vn(K,q,P),Bt&&_t.enter(Y),Pt&&Yi(P,null,q,"mounted")},Z)},E=(P,M,U,q,Z)=>{if(U&&N(P,U),q)for(let X=0;X<q.length;X++)N(P,q[X]);if(Z){let X=Z.subTree;if(M===X){const tt=Z.vnode;E(P,tt,tt.scopeId,tt.slotScopeIds,Z.parent)}}},b=(P,M,U,q,Z,X,tt,Q,Y=0)=>{for(let K=Y;K<P.length;K++){const ct=P[K]=Q?Ii(P[K]):Bn(P[K]);$(null,ct,M,U,q,Z,X,tt,Q)}},S=(P,M,U,q,Z,X,tt)=>{const Q=M.el=P.el;let{patchFlag:Y,dynamicChildren:K,dirs:ct}=M;Y|=P.patchFlag&16;const at=P.props||ne,ut=M.props||ne;let _t;U&&Ji(U,!1),(_t=ut.onVnodeBeforeUpdate)&&Vn(_t,U,M,P),ct&&Yi(M,P,U,"beforeUpdate"),U&&Ji(U,!0);const ft=Z&&M.type!=="foreignObject";if(K?C(P.dynamicChildren,K,Q,U,q,ft,X):tt||Ve(P,M,Q,null,U,q,ft,X,!1),Y>0){if(Y&16)k(Q,M,at,ut,U,q,Z);else if(Y&2&&at.class!==ut.class&&a(Q,"class",null,ut.class,Z),Y&4&&a(Q,"style",at.style,ut.style,Z),Y&8){const Pt=M.dynamicProps;for(let Bt=0;Bt<Pt.length;Bt++){const te=Pt[Bt],Le=at[te],vn=ut[te];(vn!==Le||te==="value")&&a(Q,te,Le,vn,Z,P.children,U,q,oe)}}Y&1&&P.children!==M.children&&y(Q,M.children)}else!tt&&K==null&&k(Q,M,at,ut,U,q,Z);((_t=ut.onVnodeUpdated)||ct)&&Xe(()=>{_t&&Vn(_t,U,M,P),ct&&Yi(M,P,U,"updated")},q)},C=(P,M,U,q,Z,X,tt)=>{for(let Q=0;Q<M.length;Q++){const Y=P[Q],K=M[Q],ct=Y.el&&(Y.type===Je||!Xr(Y,K)||Y.shapeFlag&70)?T(Y.el):U;$(Y,K,ct,null,q,Z,X,tt,!0)}},k=(P,M,U,q,Z,X,tt)=>{if(U!==q){for(const Q in q){if(ba(Q))continue;const Y=q[Q],K=U[Q];Y!==K&&Q!=="value"&&a(P,Q,K,Y,tt,M.children,Z,X,oe)}if(U!==ne)for(const Q in U)!ba(Q)&&!(Q in q)&&a(P,Q,U[Q],null,tt,M.children,Z,X,oe);"value"in q&&a(P,"value",U.value,q.value)}},A=(P,M,U,q,Z,X,tt,Q,Y)=>{const K=M.el=P?P.el:h(""),ct=M.anchor=P?P.anchor:h("");let{patchFlag:at,dynamicChildren:ut,slotScopeIds:_t}=M;_t&&(Q=Q?Q.concat(_t):_t),P==null?(s(K,U,q),s(ct,U,q),b(M.children,U,ct,Z,X,tt,Q,Y)):at>0&&at&64&&ut&&P.dynamicChildren?(C(P.dynamicChildren,ut,U,Z,X,tt,Q),(M.key!=null||Z&&M===Z.subTree)&&tc(P,M,!0)):Ve(P,M,U,ct,Z,X,tt,Q,Y)},de=(P,M,U,q,Z,X,tt,Q,Y)=>{M.slotScopeIds=Q,P==null?M.shapeFlag&512?Z.ctx.activate(M,U,q,tt,Y):gn(M,U,q,Z,X,tt,Y):Ht(P,M,Y)},gn=(P,M,U,q,Z,X,tt)=>{const Q=P.component=hv(P,q,Z);if(yd(P)&&(Q.ctx.renderer=We),fv(Q),Q.asyncDep){if(Z&&Z.registerDep(Q,Nt),!P.el){const Y=Q.subTree=Se(ki);lt(null,Y,M,U)}return}Nt(Q,P,M,U,Z,X,tt)},Ht=(P,M,U)=>{const q=M.component=P.component;if(yg(P,M,U))if(q.asyncDep&&!q.asyncResolved){et(q,M,U);return}else q.next=M,wv(q.update),q.update();else M.component=P.component,M.el=P.el,q.vnode=M},Nt=(P,M,U,q,Z,X,tt)=>{const Q=()=>{if(P.isMounted){let{next:ct,bu:at,u:ut,parent:_t,vnode:ft}=P,Pt=ct,Bt;Ji(P,!1),ct?(ct.el=ft.el,et(P,ct,tt)):ct=ft,at&&Ia(at),(Bt=ct.props&&ct.props.onVnodeBeforeUpdate)&&Vn(Bt,_t,ct,ft),Ji(P,!0);const te=yh(P),Le=P.subTree;P.subTree=te,$(Le,te,T(Le.el),ze(Le),P,Z,X),ct.el=te.el,Pt===null&&wg(P,te.el),ut&&Xe(ut,Z),(Bt=ct.props&&ct.props.onVnodeUpdated)&&Xe(()=>Vn(Bt,_t,ct,ft),Z)}else{let ct;const{el:at,props:ut}=M,{bm:_t,m:ft,parent:Pt}=P,Bt=su(M);Ji(P,!1),_t&&Ia(_t),!Bt&&(ct=ut&&ut.onVnodeBeforeMount)&&Vn(ct,Pt,M),Ji(P,!0);{const te=P.subTree=yh(P);$(null,te,U,q,P,Z,X),M.el=te.el}if(ft&&Xe(ft,Z),!Bt&&(ct=ut&&ut.onVnodeMounted)){const te=M;Xe(()=>Vn(ct,Pt,te),Z)}M.shapeFlag&256&&P.a&&Xe(P.a,Z),P.isMounted=!0,M=U=q=null}},Y=P.effect=new $u(Q,()=>Nd(P.update),P.scope),K=P.update=Y.run.bind(Y);K.id=P.uid,Ji(P,!0),K()},et=(P,M,U)=>{M.component=P;const q=P.vnode.props;P.vnode=M,P.next=null,zg(P,M.props,q,U),qg(P,M.children,U),pr(),rc(void 0,P.update),ps()},Ve=(P,M,U,q,Z,X,tt,Q,Y=!1)=>{const K=P&&P.children,ct=P?P.shapeFlag:0,at=M.children,{patchFlag:ut,shapeFlag:_t}=M;if(ut>0){if(ut&128){jt(K,at,U,q,Z,X,tt,Q,Y);return}else if(ut&256){mt(K,at,U,q,Z,X,tt,Q,Y);return}}_t&8?(ct&16&&oe(K,Z,X),at!==K&&y(U,at)):ct&16?_t&16?jt(K,at,U,q,Z,X,tt,Q,Y):oe(K,Z,X,!0):(ct&8&&y(U,""),_t&16&&b(at,U,q,Z,X,tt,Q,Y))},mt=(P,M,U,q,Z,X,tt,Q,Y)=>{P=P||Xs,M=M||Xs;const K=P.length,ct=M.length,at=Math.min(K,ct);let ut;for(ut=0;ut<at;ut++){const _t=M[ut]=Y?Ii(M[ut]):Bn(M[ut]);$(P[ut],_t,U,null,Z,X,tt,Q,Y)}K>ct?oe(P,Z,X,!0,!1,at):b(M,U,q,Z,X,tt,Q,Y,at)},jt=(P,M,U,q,Z,X,tt,Q,Y)=>{let K=0;const ct=M.length;let at=P.length-1,ut=ct-1;for(;K<=at&&K<=ut;){const _t=P[K],ft=M[K]=Y?Ii(M[K]):Bn(M[K]);if(Xr(_t,ft))$(_t,ft,U,null,Z,X,tt,Q,Y);else break;K++}for(;K<=at&&K<=ut;){const _t=P[at],ft=M[ut]=Y?Ii(M[ut]):Bn(M[ut]);if(Xr(_t,ft))$(_t,ft,U,null,Z,X,tt,Q,Y);else break;at--,ut--}if(K>at){if(K<=ut){const _t=ut+1,ft=_t<ct?M[_t].el:q;for(;K<=ut;)$(null,M[K]=Y?Ii(M[K]):Bn(M[K]),U,ft,Z,X,tt,Q,Y),K++}}else if(K>ut)for(;K<=at;)xt(P[K],Z,X,!0),K++;else{const _t=K,ft=K,Pt=new Map;for(K=ft;K<=ut;K++){const ge=M[K]=Y?Ii(M[K]):Bn(M[K]);ge.key!=null&&Pt.set(ge.key,K)}let Bt,te=0;const Le=ut-ft+1;let vn=!1,Rn=0;const yn=new Array(Le);for(K=0;K<Le;K++)yn[K]=0;for(K=_t;K<=at;K++){const ge=P[K];if(te>=Le){xt(ge,Z,X,!0);continue}let Ke;if(ge.key!=null)Ke=Pt.get(ge.key);else for(Bt=ft;Bt<=ut;Bt++)if(yn[Bt-ft]===0&&Xr(ge,M[Bt])){Ke=Bt;break}Ke===void 0?xt(ge,Z,X,!0):(yn[Ke-ft]=K+1,Ke>=Rn?Rn=Ke:vn=!0,$(ge,M[Ke],U,null,Z,X,tt,Q,Y),te++)}const Zn=vn?Gg(yn):Xs;for(Bt=Zn.length-1,K=Le-1;K>=0;K--){const ge=ft+K,Ke=M[ge],Ln=ge+1<ct?M[ge+1].el:q;yn[K]===0?$(null,Ke,U,Ln,Z,X,tt,Q,Y):vn&&(Bt<0||K!==Zn[Bt]?Zt(Ke,U,Ln,2):Bt--)}}},Zt=(P,M,U,q,Z=null)=>{const{el:X,type:tt,transition:Q,children:Y,shapeFlag:K}=P;if(K&6){Zt(P.component.subTree,M,U,q);return}if(K&128){P.suspense.move(M,U,q);return}if(K&64){tt.move(P,M,U,We);return}if(tt===Je){s(X,M,U);for(let at=0;at<Y.length;at++)Zt(Y[at],M,U,q);s(P.anchor,M,U);return}if(tt===Pa){bt(P,M,U);return}if(q!==2&&K&1&&Q)if(q===0)Q.beforeEnter(X),s(X,M,U),Xe(()=>Q.enter(X),Z);else{const{leave:at,delayLeave:ut,afterLeave:_t}=Q,ft=()=>s(X,M,U),Pt=()=>{at(X,()=>{ft(),_t&&_t()})};ut?ut(X,ft,Pt):Pt()}else s(X,M,U)},xt=(P,M,U,q=!1,Z=!1)=>{const{type:X,props:tt,ref:Q,children:Y,dynamicChildren:K,shapeFlag:ct,patchFlag:at,dirs:ut}=P;if(Q!=null&&lu(Q,null,U,P,!0),ct&256){M.ctx.deactivate(P);return}const _t=ct&1&&ut,ft=!su(P);let Pt;if(ft&&(Pt=tt&&tt.onVnodeBeforeUnmount)&&Vn(Pt,M,P),ct&6)St(P.component,U,q);else{if(ct&128){P.suspense.unmount(U,q);return}_t&&Yi(P,null,M,"beforeUnmount"),ct&64?P.type.remove(P,M,U,Z,We,q):K&&(X!==Je||at>0&&at&64)?oe(K,M,U,!1,!0):(X===Je&&at&384||!Z&&ct&16)&&oe(Y,M,U),q&&re(P)}(ft&&(Pt=tt&&tt.onVnodeUnmounted)||_t)&&Xe(()=>{Pt&&Vn(Pt,M,P),_t&&Yi(P,null,M,"unmounted")},U)},re=P=>{const{type:M,el:U,anchor:q,transition:Z}=P;if(M===Je){Dt(U,q);return}if(M===Pa){qt(P);return}const X=()=>{r(U),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(P.shapeFlag&1&&Z&&!Z.persisted){const{leave:tt,delayLeave:Q}=Z,Y=()=>tt(U,X);Q?Q(P.el,X,Y):Y()}else X()},Dt=(P,M)=>{let U;for(;P!==M;)U=x(P),r(P),P=U;r(M)},St=(P,M,U)=>{const{bum:q,scope:Z,update:X,subTree:tt,um:Q}=P;q&&Ia(q),Z.stop(),X&&(X.active=!1,xt(tt,P,M,U)),Q&&Xe(Q,M),Xe(()=>{P.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},oe=(P,M,U,q=!1,Z=!1,X=0)=>{for(let tt=X;tt<P.length;tt++)xt(P[tt],M,U,q,Z)},ze=P=>P.shapeFlag&6?ze(P.component.subTree):P.shapeFlag&128?P.suspense.next():x(P.anchor||P.el),zi=(P,M,U)=>{P==null?M._vnode&&xt(M._vnode,null,null,!0):$(M._vnode||null,P,M,null,null,null,U),Ud(),M._vnode=P},We={p:$,um:xt,m:Zt,r:re,mt:gn,mc:b,pc:Ve,pbc:C,n:ze,o:n};return{render:zi,hydrate:void 0,createApp:Zg(zi)}}function Ji({effect:n,update:t},e){n.allowRecurse=t.allowRecurse=e}function tc(n,t,e=!1){const s=n.children,r=t.children;if(Tt(s)&&Tt(r))for(let a=0;a<s.length;a++){const c=s[a];let h=r[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[a]=Ii(r[a]),h.el=c.el),e||tc(c,h))}}function Gg(n){const t=n.slice(),e=[0];let s,r,a,c,h;const p=n.length;for(s=0;s<p;s++){const g=n[s];if(g!==0){if(r=e[e.length-1],n[r]<g){t[s]=r,e.push(s);continue}for(a=0,c=e.length-1;a<c;)h=a+c>>1,n[e[h]]<g?a=h+1:c=h;g<n[e[a]]&&(a>0&&(t[s]=e[a-1]),e[a]=s)}}for(a=e.length,c=e[a-1];a-- >0;)e[a]=c,c=t[c];return e}const Qg=n=>n.__isTeleport,oo=n=>n&&(n.disabled||n.disabled===""),xh=n=>typeof SVGElement<"u"&&n instanceof SVGElement,uu=(n,t)=>{const e=n&&n.to;return Re(e)?t?t(e):null:e},Xg={__isTeleport:!0,process(n,t,e,s,r,a,c,h,p,g){const{mc:y,pc:T,pbc:x,o:{insert:N,querySelector:j,createText:H,createComment:$}}=g,ot=oo(t.props);let{shapeFlag:lt,children:nt,dynamicChildren:bt}=t;if(n==null){const qt=t.el=H(""),Mt=t.anchor=H("");N(qt,e,s),N(Mt,e,s);const R=t.target=uu(t.props,j),E=t.targetAnchor=H("");R&&(N(E,R),c=c||xh(R));const b=(S,C)=>{lt&16&&y(nt,S,C,r,a,c,h,p)};ot?b(e,Mt):R&&b(R,E)}else{t.el=n.el;const qt=t.anchor=n.anchor,Mt=t.target=n.target,R=t.targetAnchor=n.targetAnchor,E=oo(n.props),b=E?e:Mt,S=E?qt:R;if(c=c||xh(Mt),bt?(x(n.dynamicChildren,bt,b,r,a,c,h),tc(n,t,!0)):p||T(n,t,b,S,r,a,c,h,!1),ot)E||_a(t,e,qt,g,1);else if((t.props&&t.props.to)!==(n.props&&n.props.to)){const C=t.target=uu(t.props,j);C&&_a(t,C,null,g,0)}else E&&_a(t,Mt,R,g,1)}},remove(n,t,e,s,{um:r,o:{remove:a}},c){const{shapeFlag:h,children:p,anchor:g,targetAnchor:y,target:T,props:x}=n;if(T&&a(y),(c||!oo(x))&&(a(g),h&16))for(let N=0;N<p.length;N++){const j=p[N];r(j,t,e,!0,!!j.dynamicChildren)}},move:_a,hydrate:Yg};function _a(n,t,e,{o:{insert:s},m:r},a=2){a===0&&s(n.targetAnchor,t,e);const{el:c,anchor:h,shapeFlag:p,children:g,props:y}=n,T=a===2;if(T&&s(c,t,e),(!T||oo(y))&&p&16)for(let x=0;x<g.length;x++)r(g[x],t,e,2);T&&s(h,t,e)}function Yg(n,t,e,s,r,a,{o:{nextSibling:c,parentNode:h,querySelector:p}},g){const y=t.target=uu(t.props,p);if(y){const T=y._lpa||y.firstChild;t.shapeFlag&16&&(oo(t.props)?(t.anchor=g(c(n),t,h(n),e,s,r,a),t.targetAnchor=T):(t.anchor=c(n),t.targetAnchor=g(T,t,y,e,s,r,a)),y._lpa=t.targetAnchor&&c(t.targetAnchor))}return t.anchor&&c(t.anchor)}const Jg=Xg,tv=Symbol(),Je=Symbol(void 0),ec=Symbol(void 0),ki=Symbol(void 0),Pa=Symbol(void 0),ao=[];let cs=null;function Wt(n=!1){ao.push(cs=n?null:[])}function ev(){ao.pop(),cs=ao[ao.length-1]||null}let Na=1;function Ch(n){Na+=n}function Rd(n){return n.dynamicChildren=Na>0?cs||Xs:null,ev(),Na>0&&cs&&cs.push(n),n}function se(n,t,e,s,r,a){return Rd(rt(n,t,e,s,r,a,!0))}function vl(n,t,e,s,r){return Rd(Se(n,t,e,s,r,!0))}function Ld(n){return n?n.__v_isVNode===!0:!1}function Xr(n,t){return n.type===t.type&&n.key===t.key}const yl="__vInternal",Md=({key:n})=>n??null,Aa=({ref:n,ref_key:t,ref_for:e})=>n!=null?Re(n)||He(n)||Lt(n)?{i:Pn,r:n,k:t,f:!!e}:n:null;function rt(n,t=null,e=null,s=0,r=null,a=n===Je?0:1,c=!1,h=!1){const p={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Md(t),ref:t&&Aa(t),scopeId:dl,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return h?(nc(p,e),a&128&&n.normalize(p)):e&&(p.shapeFlag|=Re(e)?8:16),Na>0&&!c&&cs&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&cs.push(p),p}const Se=nv;function nv(n,t=null,e=null,s=0,r=null,a=!1){if((!n||n===tv)&&(n=ki),Ld(n)){const h=vo(n,t,!0);return e&&nc(h,e),h}if(_v(n)&&(n=n.__vccOpts),t){t=iv(t);let{class:h,style:p}=t;h&&!Re(h)&&(t.class=as(h)),Ee(p)&&(hd(p)&&!Tt(p)&&(p=on({},p)),t.style=mo(p))}const c=Re(n)?1:Tg(n)?128:Qg(n)?64:Ee(n)?4:Lt(n)?2:0;return rt(n,t,e,s,r,c,a,!0)}function iv(n){return n?hd(n)||yl in n?on({},n):n:null}function vo(n,t,e=!1){const{props:s,ref:r,patchFlag:a,children:c}=n,h=t?rv(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Md(h),ref:t&&t.ref?e&&r?Tt(r)?r.concat(Aa(t)):[r,Aa(t)]:Aa(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Je?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&vo(n.ssContent),ssFallback:n.ssFallback&&vo(n.ssFallback),el:n.el,anchor:n.anchor}}function to(n=" ",t=0){return Se(ec,null,n,t)}function sv(n,t){const e=Se(Pa,null,n);return e.staticCount=t,e}function Ei(n="",t=!1){return t?(Wt(),vl(ki,null,n)):Se(ki,null,n)}function Bn(n){return n==null||typeof n=="boolean"?Se(ki):Tt(n)?Se(Je,null,n.slice()):typeof n=="object"?Ii(n):Se(ec,null,String(n))}function Ii(n){return n.el===null||n.memo?n:vo(n)}function nc(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(Tt(t))e=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),nc(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!(yl in t)?t._ctx=Pn:r===3&&Pn&&(Pn.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Lt(t)?(t={default:t,_ctx:Pn},e=32):(t=String(t),s&64?(e=16,t=[to(t)]):e=8);n.children=t,n.shapeFlag|=e}function rv(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=as([t.class,s.class]));else if(r==="style")t.style=mo([t.style,s.style]);else if(ll(r)){const a=t[r],c=s[r];a!==c&&!(Tt(a)&&a.includes(c))&&(t[r]=a?[].concat(a,c):c)}else r!==""&&(t[r]=s[r])}return t}function Vn(n,t,e,s=null){xn(n,t,7,[e,s])}function ov(n,t,e,s){let r;const a=e;if(Tt(n)||Re(n)){r=new Array(n.length);for(let c=0,h=n.length;c<h;c++)r[c]=t(n[c],c,void 0,a)}else if(typeof n=="number"){r=new Array(n);for(let c=0;c<n;c++)r[c]=t(c+1,c,void 0,a)}else if(Ee(n))if(n[Symbol.iterator])r=Array.from(n,(c,h)=>t(c,h,void 0,a));else{const c=Object.keys(n);r=new Array(c.length);for(let h=0,p=c.length;h<p;h++){const g=c[h];r[h]=t(n[g],g,h,a)}}else r=[];return r}function av(n,t,e={},s,r){if(Pn.isCE)return Se("slot",null,s);let a=n[t];a&&a._c&&(a._d=!1),Wt();const c=a&&kd(a(e)),h=vl(Je,{key:e.key||`_${t}`},c||[],c&&n._===1?64:-2);return a&&a._c&&(a._d=!0),h}function kd(n){return n.some(t=>Ld(t)?!(t.type===ki||t.type===Je&&!kd(t.children)):!0)?n:null}const cu=n=>n?Dd(n)?ic(n)||n.proxy:cu(n.parent):null,Ba=on(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>cu(n.parent),$root:n=>cu(n.root),$emit:n=>n.emit,$options:n=>bd(n),$forceUpdate:n=>()=>Nd(n.update),$nextTick:n=>vv.bind(n.proxy),$watch:n=>bv.bind(n)}),lv={get({_:n},t){const{ctx:e,setupState:s,data:r,props:a,accessCache:c,type:h,appContext:p}=n;let g;if(t[0]!=="$"){const N=c[t];if(N!==void 0)switch(N){case 1:return s[t];case 2:return r[t];case 4:return e[t];case 3:return a[t]}else{if(s!==ne&&$t(s,t))return c[t]=1,s[t];if(r!==ne&&$t(r,t))return c[t]=2,r[t];if((g=n.propsOptions[0])&&$t(g,t))return c[t]=3,a[t];if(e!==ne&&$t(e,t))return c[t]=4,e[t];ru&&(c[t]=0)}}const y=Ba[t];let T,x;if(y)return t==="$attrs"&&an(n,"get",t),y(n);if((T=h.__cssModules)&&(T=T[t]))return T;if(e!==ne&&$t(e,t))return c[t]=4,e[t];if(x=p.config.globalProperties,$t(x,t))return x[t]},set({_:n},t,e){const{data:s,setupState:r,ctx:a}=n;if(r!==ne&&$t(r,t))r[t]=e;else if(s!==ne&&$t(s,t))s[t]=e;else if($t(n.props,t))return!1;return t[0]==="$"&&t.slice(1)in n?!1:(a[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:r,propsOptions:a}},c){let h;return!!e[c]||n!==ne&&$t(n,c)||t!==ne&&$t(t,c)||(h=a[0])&&$t(h,c)||$t(s,c)||$t(Ba,c)||$t(r.config.globalProperties,c)}},uv=Sd();let cv=0;function hv(n,t,e){const s=n.type,r=(t?t.appContext:n.appContext)||uv,a={uid:cv++,vnode:n,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new N_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pd(s,r),emitsOptions:vd(s,r),emit:null,emitted:null,propsDefaults:ne,inheritAttrs:s.inheritAttrs,ctx:ne,data:ne,props:ne,attrs:ne,slots:ne,refs:ne,setupState:ne,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=_g.bind(null,a),n.ce&&n.ce(a),a}let Ue=null;const rr=n=>{Ue=n,n.scope.on()},hs=()=>{Ue&&Ue.scope.off(),Ue=null};function Dd(n){return n.vnode.shapeFlag&4}let Fa=!1;function fv(n,t=!1){Fa=t;const{props:e,children:s}=n.vnode,r=Dd(n);Ug(n,e,r,t),jg(n,s);const a=r?dv(n,t):void 0;return Fa=!1,a}function dv(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=fd(new Proxy(n.ctx,lv));const{setup:s}=e;if(s){const r=n.setupContext=s.length>1?mv(n):null;rr(n),pr();const a=Ai(s,n,0,[n.props,r]);if(ps(),hs(),Qf(a)){if(a.then(hs,hs),t)return a.then(c=>{Sh(n,c)}).catch(c=>{wl(c,n,0)});n.asyncDep=a}else Sh(n,a)}else Od(n)}function Sh(n,t,e){Lt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Ee(t)&&(n.setupState=_d(t)),Od(n)}function Od(n,t,e){const s=n.type;n.render||(n.render=s.render||Un),rr(n),pr(),Og(n),ps(),hs()}function pv(n){return new Proxy(n.attrs,{get(t,e){return an(n,"get","$attrs"),t[e]}})}function mv(n){const t=s=>{n.exposed=s||{}};let e;return{get attrs(){return e||(e=pv(n))},slots:n.slots,emit:n.emit,expose:t}}function ic(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(_d(fd(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ba)return Ba[e](n)}}))}function _v(n){return Lt(n)&&"__vccOpts"in n}function Ai(n,t,e,s){let r;try{r=s?n(...s):n()}catch(a){wl(a,t,e)}return r}function xn(n,t,e,s){if(Lt(n)){const a=Ai(n,t,e,s);return a&&Qf(a)&&a.catch(c=>{wl(c,t,e)}),a}const r=[];for(let a=0;a<n.length;a++)r.push(xn(n[a],t,e,s));return r}function wl(n,t,e,s=!0){const r=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,h=e;for(;a;){const g=a.ec;if(g){for(let y=0;y<g.length;y++)if(g[y](n,c,h)===!1)return}a=a.parent}const p=t.appContext.config.errorHandler;if(p){Ai(p,null,10,[n,c,h]);return}}gv(n,e,r,s)}function gv(n,t,e,s=!0){console.error(n)}let Ua=!1,hu=!1;const rn=[];let si=0;const lo=[];let eo=null,Hs=0;const uo=[];let bi=null,Zs=0;const Vd=Promise.resolve();let sc=null,fu=null;function vv(n){const t=sc||Vd;return n?t.then(this?n.bind(this):n):t}function yv(n){let t=si+1,e=rn.length;for(;t<e;){const s=t+e>>>1;yo(rn[s])<n?t=s+1:e=s}return t}function Nd(n){(!rn.length||!rn.includes(n,Ua&&n.allowRecurse?si+1:si))&&n!==fu&&(n.id==null?rn.push(n):rn.splice(yv(n.id),0,n),Bd())}function Bd(){!Ua&&!hu&&(hu=!0,sc=Vd.then(zd))}function wv(n){const t=rn.indexOf(n);t>si&&rn.splice(t,1)}function Fd(n,t,e,s){Tt(n)?e.push(...n):(!t||!t.includes(n,n.allowRecurse?s+1:s))&&e.push(n),Bd()}function Tv(n){Fd(n,eo,lo,Hs)}function Ev(n){Fd(n,bi,uo,Zs)}function rc(n,t=null){if(lo.length){for(fu=t,eo=[...new Set(lo)],lo.length=0,Hs=0;Hs<eo.length;Hs++)eo[Hs]();eo=null,Hs=0,fu=null,rc(n,t)}}function Ud(n){if(uo.length){const t=[...new Set(uo)];if(uo.length=0,bi){bi.push(...t);return}for(bi=t,bi.sort((e,s)=>yo(e)-yo(s)),Zs=0;Zs<bi.length;Zs++)bi[Zs]();bi=null,Zs=0}}const yo=n=>n.id==null?1/0:n.id;function zd(n){hu=!1,Ua=!0,rc(n),rn.sort((t,e)=>yo(t)-yo(e));try{for(si=0;si<rn.length;si++){const t=rn[si];t&&t.active!==!1&&Ai(t,null,14)}}finally{si=0,rn.length=0,Ud(),Ua=!1,sc=null,(rn.length||lo.length||uo.length)&&zd(n)}}const Rh={};function tr(n,t,e){return $d(n,t,e)}function $d(n,t,{immediate:e,deep:s,flush:r,onTrack:a,onTrigger:c}=ne){const h=Ue;let p,g=!1,y=!1;if(He(n)?(p=()=>n.value,g=!!n._shallow):Js(n)?(p=()=>n,s=!0):Tt(n)?(y=!0,g=n.some(Js),p=()=>n.map(ot=>{if(He(ot))return ot.value;if(Js(ot))return rs(ot);if(Lt(ot))return Ai(ot,h,2)})):Lt(n)?t?p=()=>Ai(n,h,2):p=()=>{if(!(h&&h.isUnmounted))return T&&T(),xn(n,h,3,[x])}:p=Un,t&&s){const ot=p;p=()=>rs(ot())}let T,x=ot=>{T=$.onStop=()=>{Ai(ot,h,4)}};if(Fa)return x=Un,t?e&&xn(t,h,3,[p(),y?[]:void 0,x]):p(),Un;let N=y?[]:Rh;const j=()=>{if($.active)if(t){const ot=$.run();(s||g||(y?ot.some((lt,nt)=>_o(lt,N[nt])):_o(ot,N)))&&(T&&T(),xn(t,h,3,[ot,N===Rh?void 0:N,x]),N=ot)}else $.run()};j.allowRecurse=!!t;let H;r==="sync"?H=j:r==="post"?H=()=>Xe(j,h&&h.suspense):H=()=>{!h||h.isMounted?Tv(j):j()};const $=new $u(p,H);return t?e?j():N=$.run():r==="post"?Xe($.run.bind($),h&&h.suspense):$.run(),()=>{$.stop(),h&&h.scope&&Bu(h.scope.effects,$)}}function bv(n,t,e){const s=this.proxy,r=Re(n)?n.includes(".")?jd(s,n):()=>s[n]:n.bind(s,s);let a;Lt(t)?a=t:(a=t.handler,e=t);const c=Ue;rr(this);const h=$d(r,a.bind(s),e);return c?rr(c):hs(),h}function jd(n,t){const e=t.split(".");return()=>{let s=n;for(let r=0;r<e.length&&s;r++)s=s[e[r]];return s}}function rs(n,t){if(!Ee(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),He(n))rs(n.value,t);else if(Tt(n))for(let e=0;e<n.length;e++)rs(n[e],t);else if(ul(n)||Ys(n))n.forEach(e=>{rs(e,t)});else if(Yf(n))for(const e in n)rs(n[e],t);return n}const Iv="3.2.26",Pv="http://www.w3.org/2000/svg",qs=typeof document<"u"?document:null,Lh=new Map,Av={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const r=t?qs.createElementNS(Pv,n):qs.createElement(n,e?{is:e}:void 0);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>qs.createTextNode(n),createComment:n=>qs.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>qs.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},cloneNode(n){const t=n.cloneNode(!0);return"_value"in n&&(t._value=n._value),t},insertStaticContent(n,t,e,s){const r=e?e.previousSibling:t.lastChild;let a=Lh.get(n);if(!a){const c=qs.createElement("template");if(c.innerHTML=s?`<svg>${n}</svg>`:n,a=c.content,s){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}Lh.set(n,a)}return t.insertBefore(a.cloneNode(!0),e),[r?r.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function xv(n,t,e){const s=n._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}function Cv(n,t,e){const s=n.style,r=Re(e);if(e&&!r){for(const a in e)du(s,a,e[a]);if(t&&!Re(t))for(const a in t)e[a]==null&&du(s,a,"")}else{const a=s.display;r?t!==e&&(s.cssText=e):t&&n.removeAttribute("style"),"_vod"in n&&(s.display=a)}}const Mh=/\s*!important$/;function du(n,t,e){if(Tt(e))e.forEach(s=>du(n,t,s));else if(t.startsWith("--"))n.setProperty(t,e);else{const s=Sv(n,t);Mh.test(e)?n.setProperty(dr(s),e.replace(Mh,""),"important"):n[s]=e}}const kh=["Webkit","Moz","ms"],Hl={};function Sv(n,t){const e=Hl[t];if(e)return e;let s=ir(t);if(s!=="filter"&&s in n)return Hl[t]=s;s=Jf(s);for(let r=0;r<kh.length;r++){const a=kh[r]+s;if(a in n)return Hl[t]=a}return t}const Dh="http://www.w3.org/1999/xlink";function Rv(n,t,e,s,r){if(s&&t.startsWith("xlink:"))e==null?n.removeAttributeNS(Dh,t.slice(6,t.length)):n.setAttributeNS(Dh,t,e);else{const a=I_(t);e==null||a&&!Kf(e)?n.removeAttribute(t):n.setAttribute(t,a?"":e)}}function Lv(n,t,e,s,r,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,r,a),n[t]=e??"";return}if(t==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=e;const h=e??"";(n.value!==h||n.tagName==="OPTION")&&(n.value=h),e==null&&n.removeAttribute(t);return}if(e===""||e==null){const h=typeof n[t];if(h==="boolean"){n[t]=Kf(e);return}else if(e==null&&h==="string"){n[t]="",n.removeAttribute(t);return}else if(h==="number"){try{n[t]=0}catch{}n.removeAttribute(t);return}}try{n[t]=e}catch{}}let za=Date.now,qd=!1;if(typeof window<"u"){za()>document.createEvent("Event").timeStamp&&(za=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);qd=!!(n&&Number(n[1])<=53)}let pu=0;const Mv=Promise.resolve(),kv=()=>{pu=0},Dv=()=>pu||(Mv.then(kv),pu=za());function ss(n,t,e,s){n.addEventListener(t,e,s)}function Ov(n,t,e,s){n.removeEventListener(t,e,s)}function Vv(n,t,e,s,r=null){const a=n._vei||(n._vei={}),c=a[t];if(s&&c)c.value=s;else{const[h,p]=Nv(t);if(s){const g=a[t]=Bv(s,r);ss(n,h,g,p)}else c&&(Ov(n,h,c,p),a[t]=void 0)}}const Oh=/(?:Once|Passive|Capture)$/;function Nv(n){let t;if(Oh.test(n)){t={};let e;for(;e=n.match(Oh);)n=n.slice(0,n.length-e[0].length),t[e[0].toLowerCase()]=!0}return[dr(n.slice(2)),t]}function Bv(n,t){const e=s=>{const r=s.timeStamp||za();(qd||r>=e.attached-1)&&xn(Fv(s,e.value),t,5,[s])};return e.value=n,e.attached=Dv(),e}function Fv(n,t){if(Tt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>r=>!r._stopped&&s(r))}else return t}const Vh=/^on[a-z]/,Uv=(n,t,e,s,r=!1,a,c,h,p)=>{t==="class"?xv(n,s,r):t==="style"?Cv(n,e,s):ll(t)?Nu(t)||Vv(n,t,e,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):zv(n,t,s,r))?Lv(n,t,s,a,c,h,p):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),Rv(n,t,s,r))};function zv(n,t,e,s){return s?!!(t==="innerHTML"||t==="textContent"||t in n&&Vh.test(t)&&Lt(e)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA"||Vh.test(t)&&Re(e)?!1:t in n}const $a=n=>{const t=n.props["onUpdate:modelValue"];return Tt(t)?e=>Ia(t,e):t};function $v(n){n.target.composing=!0}function Nh(n){const t=n.target;t.composing&&(t.composing=!1,jv(t,"input"))}function jv(n,t){const e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),n.dispatchEvent(e)}const Yr={created(n,{modifiers:{lazy:t,trim:e,number:s}},r){n._assign=$a(r);const a=s||r.props&&r.props.type==="number";ss(n,t?"change":"input",c=>{if(c.target.composing)return;let h=n.value;e?h=h.trim():a&&(h=Da(h)),n._assign(h)}),e&&ss(n,"change",()=>{n.value=n.value.trim()}),t||(ss(n,"compositionstart",$v),ss(n,"compositionend",Nh),ss(n,"change",Nh))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,modifiers:{lazy:e,trim:s,number:r}},a){if(n._assign=$a(a),n.composing||document.activeElement===n&&(e||s&&n.value.trim()===t||(r||n.type==="number")&&Da(n.value)===t))return;const c=t??"";n.value!==c&&(n.value=c)}},Hd={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const r=ul(t);ss(n,"change",()=>{const a=Array.prototype.filter.call(n.options,c=>c.selected).map(c=>e?Da(ja(c)):ja(c));n._assign(n.multiple?r?new Set(a):a:a[0])}),n._assign=$a(s)},mounted(n,{value:t}){Bh(n,t)},beforeUpdate(n,t,e){n._assign=$a(e)},updated(n,{value:t}){Bh(n,t)}};function Bh(n,t){const e=n.multiple;if(!(e&&!Tt(t)&&!ul(t))){for(let s=0,r=n.options.length;s<r;s++){const a=n.options[s],c=ja(a);if(e)Tt(t)?a.selected=S_(t,c)>-1:a.selected=t.has(c);else if(al(ja(a),t)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function ja(n){return"_value"in n?n._value:n.value}const qv=["ctrl","shift","alt","meta"],Hv={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>qv.some(e=>n[`${e}Key`]&&!t.includes(e))},Zd=(n,t)=>(e,...s)=>{for(let r=0;r<t.length;r++){const a=Hv[t[r]];if(a&&a(e,t))return}return n(e,...s)},Zv=on({patchProp:Uv},Av);let Fh;function Wv(){return Fh||(Fh=Wg(Zv))}const Kv=(...n)=>{const t=Wv().createApp(...n),{mount:e}=t;return t.mount=s=>{const r=Gv(s);if(!r)return;const a=t._component;!Lt(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const c=e(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),c},t};function Gv(n){return Re(n)?document.querySelector(n):n}const Qv=()=>{};var Uh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Xv=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const r=n[e++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[e++];t[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[e++],c=n[e++],h=n[e++],p=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const a=n[e++],c=n[e++];t[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return t.join("")},Kd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const a=n[r],c=r+1<n.length,h=c?n[r+1]:0,p=r+2<n.length,g=p?n[r+2]:0,y=a>>2,T=(a&3)<<4|h>>4;let x=(h&15)<<2|g>>6,N=g&63;p||(N=64,c||(x=64)),s.push(e[y],e[T],e[x],e[N])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Wd(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Xv(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const a=e[n.charAt(r++)],h=r<n.length?e[n.charAt(r)]:0;++r;const g=r<n.length?e[n.charAt(r)]:64;++r;const T=r<n.length?e[n.charAt(r)]:64;if(++r,a==null||h==null||g==null||T==null)throw new Yv;const x=a<<2|h>>4;if(s.push(x),g!==64){const N=h<<4&240|g>>2;if(s.push(N),T!==64){const j=g<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Yv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jv=function(n){const t=Wd(n);return Kd.encodeByteArray(t,!0)},qa=function(n){return Jv(n).replace(/\./g,"")},ty=function(n){try{return Kd.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=()=>ey().__FIREBASE_DEFAULTS__,iy=()=>{if(typeof process>"u"||typeof Uh>"u")return;const n=Uh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sy=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&ty(n[1]);return t&&JSON.parse(t)},oc=()=>{try{return Qv()||ny()||iy()||sy()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ry=n=>{var t,e;return(e=(t=oc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},oy=n=>{const t=ry(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},Gd=()=>{var n;return(n=oc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qa(JSON.stringify(e)),qa(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cy(){var n;const t=(n=oc())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hy(){return!cy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fy(){try{return typeof indexedDB=="object"}catch{return!1}}function dy(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var a;t(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="FirebaseError";class mr extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=py,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qd.prototype.create)}}class Qd{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},r=`${this.service}/${t}`,a=this.errors[t],c=a?my(a,s):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new mr(r,h,s)}}function my(n,t){return n.replace(_y,(e,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const _y=/\{\$([^}]+)}/g;function Ha(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const r of e){if(!s.includes(r))return!1;const a=n[r],c=t[r];if(zh(a)&&zh(c)){if(!Ha(a,c))return!1}else if(a!==c)return!1}for(const r of s)if(!e.includes(r))return!1;return!0}function zh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(n){return n&&n._delegate?n._delegate:n}class To{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new ay;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yy(t))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(t=is){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=is){return this.instances.has(t)}getOptions(t=is){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(r)}return r}onInit(t,e){var s;const r=this.normalizeInstanceIdentifier(e),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&t(c,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const r of s)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vy(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=is){return this.component?this.component.multipleInstances?t:is:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vy(n){return n===is?void 0:n}function yy(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new gy(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(zt||(zt={}));const Ty={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},Ey=zt.INFO,by={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},Iy=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),r=by[t];if(r)console[r](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Xd{constructor(t){this.name=t,this._logLevel=Ey,this._logHandler=Iy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in zt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ty[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...t),this._logHandler(this,zt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...t),this._logHandler(this,zt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...t),this._logHandler(this,zt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...t),this._logHandler(this,zt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...t),this._logHandler(this,zt.ERROR,...t)}}const Py=(n,t)=>t.some(e=>n instanceof e);let $h,jh;function Ay(){return $h||($h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xy(){return jh||(jh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yd=new WeakMap,mu=new WeakMap,Jd=new WeakMap,Zl=new WeakMap,ac=new WeakMap;function Cy(n){const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{e(xi(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Yd.set(e,n)}).catch(()=>{}),ac.set(t,n),t}function Sy(n){if(mu.has(n))return;const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{e(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});mu.set(n,t)}let _u={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return mu.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Jd.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return xi(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Ry(n){_u=n(_u)}function Ly(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(Wl(this),t,...e);return Jd.set(s,t.sort?t.sort():[t]),xi(s)}:xy().includes(n)?function(...t){return n.apply(Wl(this),t),xi(Yd.get(this))}:function(...t){return xi(n.apply(Wl(this),t))}}function My(n){return typeof n=="function"?Ly(n):(n instanceof IDBTransaction&&Sy(n),Py(n,Ay())?new Proxy(n,_u):n)}function xi(n){if(n instanceof IDBRequest)return Cy(n);if(Zl.has(n))return Zl.get(n);const t=My(n);return t!==n&&(Zl.set(n,t),ac.set(t,n)),t}const Wl=n=>ac.get(n);function ky(n,t,{blocked:e,upgrade:s,blocking:r,terminated:a}={}){const c=indexedDB.open(n,t),h=xi(c);return s&&c.addEventListener("upgradeneeded",p=>{s(xi(c.result),p.oldVersion,p.newVersion,xi(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),r&&p.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const Dy=["get","getKey","getAll","getAllKeys","count"],Oy=["put","add","delete","clear"],Kl=new Map;function qh(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Kl.get(t))return Kl.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,r=Oy.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Dy.includes(e)))return;const a=async function(c,...h){const p=this.transaction(c,r?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),r&&p.done]))[0]};return Kl.set(t,a),a}Ry(n=>({...n,get:(t,e,s)=>qh(t,e)||n.get(t,e,s),has:(t,e)=>!!qh(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Ny(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function Ny(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const gu="@firebase/app",Hh="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Xd("@firebase/app"),By="@firebase/app-compat",Fy="@firebase/analytics-compat",Uy="@firebase/analytics",zy="@firebase/app-check-compat",$y="@firebase/app-check",jy="@firebase/auth",qy="@firebase/auth-compat",Hy="@firebase/database",Zy="@firebase/data-connect",Wy="@firebase/database-compat",Ky="@firebase/functions",Gy="@firebase/functions-compat",Qy="@firebase/installations",Xy="@firebase/installations-compat",Yy="@firebase/messaging",Jy="@firebase/messaging-compat",tw="@firebase/performance",ew="@firebase/performance-compat",nw="@firebase/remote-config",iw="@firebase/remote-config-compat",sw="@firebase/storage",rw="@firebase/storage-compat",ow="@firebase/firestore",aw="@firebase/vertexai",lw="@firebase/firestore-compat",uw="firebase",cw="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="[DEFAULT]",hw={[gu]:"fire-core",[By]:"fire-core-compat",[Uy]:"fire-analytics",[Fy]:"fire-analytics-compat",[$y]:"fire-app-check",[zy]:"fire-app-check-compat",[jy]:"fire-auth",[qy]:"fire-auth-compat",[Hy]:"fire-rtdb",[Zy]:"fire-data-connect",[Wy]:"fire-rtdb-compat",[Ky]:"fire-fn",[Gy]:"fire-fn-compat",[Qy]:"fire-iid",[Xy]:"fire-iid-compat",[Yy]:"fire-fcm",[Jy]:"fire-fcm-compat",[tw]:"fire-perf",[ew]:"fire-perf-compat",[nw]:"fire-rc",[iw]:"fire-rc-compat",[sw]:"fire-gcs",[rw]:"fire-gcs-compat",[ow]:"fire-fst",[lw]:"fire-fst-compat",[aw]:"fire-vertex","fire-js":"fire-js",[uw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Map,fw=new Map,yu=new Map;function Zh(n,t){try{n.container.addComponent(t)}catch(e){li.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Wa(n){const t=n.name;if(yu.has(t))return li.debug(`There were multiple attempts to register component ${t}.`),!1;yu.set(t,n);for(const e of Za.values())Zh(e,n);for(const e of fw.values())Zh(e,n);return!0}function dw(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function pw(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new Qd("app","Firebase",mw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t,e,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new To("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=cw;function tp(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:vu,automaticDataCollectionEnabled:!1},t),r=s.name;if(typeof r!="string"||!r)throw Ci.create("bad-app-name",{appName:String(r)});if(e||(e=Gd()),!e)throw Ci.create("no-options");const a=Za.get(r);if(a){if(Ha(e,a.options)&&Ha(s,a.config))return a;throw Ci.create("duplicate-app",{appName:r})}const c=new wy(r);for(const p of yu.values())c.addComponent(p);const h=new _w(e,s,c);return Za.set(r,h),h}function vw(n=vu){const t=Za.get(n);if(!t&&n===vu&&Gd())return tp();if(!t)throw Ci.create("no-app",{appName:n});return t}function er(n,t,e){var s;let r=(s=hw[n])!==null&&s!==void 0?s:n;e&&(r+=`-${e}`);const a=r.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${t}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),li.warn(h.join(" "));return}Wa(new To(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firebase-heartbeat-database",ww=1,Eo="firebase-heartbeat-store";let Gl=null;function ep(){return Gl||(Gl=ky(yw,ww,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Eo)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ci.create("idb-open",{originalErrorMessage:n.message})})),Gl}async function Tw(n){try{const e=(await ep()).transaction(Eo),s=await e.objectStore(Eo).get(np(n));return await e.done,s}catch(t){if(t instanceof mr)li.warn(t.message);else{const e=Ci.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});li.warn(e.message)}}}async function Wh(n,t){try{const s=(await ep()).transaction(Eo,"readwrite");await s.objectStore(Eo).put(t,np(n)),await s.done}catch(e){if(e instanceof mr)li.warn(e.message);else{const s=Ci.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});li.warn(s.message)}}}function np(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=1024,bw=30;class Iw{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Aw(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Kh();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>bw){const c=xw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){li.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kh(),{heartbeatsToSend:s,unsentEntries:r}=Pw(this._heartbeatsCache.heartbeats),a=qa(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return li.warn(e),""}}}function Kh(){return new Date().toISOString().substring(0,10)}function Pw(n,t=Ew){const e=[];let s=n.slice();for(const r of n){const a=e.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),Gh(e)>t){a.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Gh(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class Aw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fy()?dy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Tw(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Wh(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Wh(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Gh(n){return qa(JSON.stringify({version:2,heartbeats:n})).length}function xw(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n){Wa(new To("platform-logger",t=>new Vy(t),"PRIVATE")),Wa(new To("heartbeat",t=>new Iw(t),"PRIVATE")),er(gu,Hh,n),er(gu,Hh,"esm2017"),er("fire-js","")}Cw("");var Sw="firebase",Rw="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(Sw,Rw,"app");var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,ip;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,E){function b(){}b.prototype=E.prototype,R.D=E.prototype,R.prototype=new b,R.prototype.constructor=R,R.C=function(S,C,k){for(var A=Array(arguments.length-2),de=2;de<arguments.length;de++)A[de-2]=arguments[de];return E.prototype[C].apply(S,A)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,e),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,E,b){b||(b=0);var S=Array(16);if(typeof E=="string")for(var C=0;16>C;++C)S[C]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(C=0;16>C;++C)S[C]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=R.g[0],b=R.g[1],C=R.g[2];var k=R.g[3],A=E+(k^b&(C^k))+S[0]+3614090360&4294967295;E=b+(A<<7&4294967295|A>>>25),A=k+(C^E&(b^C))+S[1]+3905402710&4294967295,k=E+(A<<12&4294967295|A>>>20),A=C+(b^k&(E^b))+S[2]+606105819&4294967295,C=k+(A<<17&4294967295|A>>>15),A=b+(E^C&(k^E))+S[3]+3250441966&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(k^b&(C^k))+S[4]+4118548399&4294967295,E=b+(A<<7&4294967295|A>>>25),A=k+(C^E&(b^C))+S[5]+1200080426&4294967295,k=E+(A<<12&4294967295|A>>>20),A=C+(b^k&(E^b))+S[6]+2821735955&4294967295,C=k+(A<<17&4294967295|A>>>15),A=b+(E^C&(k^E))+S[7]+4249261313&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(k^b&(C^k))+S[8]+1770035416&4294967295,E=b+(A<<7&4294967295|A>>>25),A=k+(C^E&(b^C))+S[9]+2336552879&4294967295,k=E+(A<<12&4294967295|A>>>20),A=C+(b^k&(E^b))+S[10]+4294925233&4294967295,C=k+(A<<17&4294967295|A>>>15),A=b+(E^C&(k^E))+S[11]+2304563134&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(k^b&(C^k))+S[12]+1804603682&4294967295,E=b+(A<<7&4294967295|A>>>25),A=k+(C^E&(b^C))+S[13]+4254626195&4294967295,k=E+(A<<12&4294967295|A>>>20),A=C+(b^k&(E^b))+S[14]+2792965006&4294967295,C=k+(A<<17&4294967295|A>>>15),A=b+(E^C&(k^E))+S[15]+1236535329&4294967295,b=C+(A<<22&4294967295|A>>>10),A=E+(C^k&(b^C))+S[1]+4129170786&4294967295,E=b+(A<<5&4294967295|A>>>27),A=k+(b^C&(E^b))+S[6]+3225465664&4294967295,k=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(k^E))+S[11]+643717713&4294967295,C=k+(A<<14&4294967295|A>>>18),A=b+(k^E&(C^k))+S[0]+3921069994&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(C^k&(b^C))+S[5]+3593408605&4294967295,E=b+(A<<5&4294967295|A>>>27),A=k+(b^C&(E^b))+S[10]+38016083&4294967295,k=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(k^E))+S[15]+3634488961&4294967295,C=k+(A<<14&4294967295|A>>>18),A=b+(k^E&(C^k))+S[4]+3889429448&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(C^k&(b^C))+S[9]+568446438&4294967295,E=b+(A<<5&4294967295|A>>>27),A=k+(b^C&(E^b))+S[14]+3275163606&4294967295,k=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(k^E))+S[3]+4107603335&4294967295,C=k+(A<<14&4294967295|A>>>18),A=b+(k^E&(C^k))+S[8]+1163531501&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(C^k&(b^C))+S[13]+2850285829&4294967295,E=b+(A<<5&4294967295|A>>>27),A=k+(b^C&(E^b))+S[2]+4243563512&4294967295,k=E+(A<<9&4294967295|A>>>23),A=C+(E^b&(k^E))+S[7]+1735328473&4294967295,C=k+(A<<14&4294967295|A>>>18),A=b+(k^E&(C^k))+S[12]+2368359562&4294967295,b=C+(A<<20&4294967295|A>>>12),A=E+(b^C^k)+S[5]+4294588738&4294967295,E=b+(A<<4&4294967295|A>>>28),A=k+(E^b^C)+S[8]+2272392833&4294967295,k=E+(A<<11&4294967295|A>>>21),A=C+(k^E^b)+S[11]+1839030562&4294967295,C=k+(A<<16&4294967295|A>>>16),A=b+(C^k^E)+S[14]+4259657740&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(b^C^k)+S[1]+2763975236&4294967295,E=b+(A<<4&4294967295|A>>>28),A=k+(E^b^C)+S[4]+1272893353&4294967295,k=E+(A<<11&4294967295|A>>>21),A=C+(k^E^b)+S[7]+4139469664&4294967295,C=k+(A<<16&4294967295|A>>>16),A=b+(C^k^E)+S[10]+3200236656&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(b^C^k)+S[13]+681279174&4294967295,E=b+(A<<4&4294967295|A>>>28),A=k+(E^b^C)+S[0]+3936430074&4294967295,k=E+(A<<11&4294967295|A>>>21),A=C+(k^E^b)+S[3]+3572445317&4294967295,C=k+(A<<16&4294967295|A>>>16),A=b+(C^k^E)+S[6]+76029189&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(b^C^k)+S[9]+3654602809&4294967295,E=b+(A<<4&4294967295|A>>>28),A=k+(E^b^C)+S[12]+3873151461&4294967295,k=E+(A<<11&4294967295|A>>>21),A=C+(k^E^b)+S[15]+530742520&4294967295,C=k+(A<<16&4294967295|A>>>16),A=b+(C^k^E)+S[2]+3299628645&4294967295,b=C+(A<<23&4294967295|A>>>9),A=E+(C^(b|~k))+S[0]+4096336452&4294967295,E=b+(A<<6&4294967295|A>>>26),A=k+(b^(E|~C))+S[7]+1126891415&4294967295,k=E+(A<<10&4294967295|A>>>22),A=C+(E^(k|~b))+S[14]+2878612391&4294967295,C=k+(A<<15&4294967295|A>>>17),A=b+(k^(C|~E))+S[5]+4237533241&4294967295,b=C+(A<<21&4294967295|A>>>11),A=E+(C^(b|~k))+S[12]+1700485571&4294967295,E=b+(A<<6&4294967295|A>>>26),A=k+(b^(E|~C))+S[3]+2399980690&4294967295,k=E+(A<<10&4294967295|A>>>22),A=C+(E^(k|~b))+S[10]+4293915773&4294967295,C=k+(A<<15&4294967295|A>>>17),A=b+(k^(C|~E))+S[1]+2240044497&4294967295,b=C+(A<<21&4294967295|A>>>11),A=E+(C^(b|~k))+S[8]+1873313359&4294967295,E=b+(A<<6&4294967295|A>>>26),A=k+(b^(E|~C))+S[15]+4264355552&4294967295,k=E+(A<<10&4294967295|A>>>22),A=C+(E^(k|~b))+S[6]+2734768916&4294967295,C=k+(A<<15&4294967295|A>>>17),A=b+(k^(C|~E))+S[13]+1309151649&4294967295,b=C+(A<<21&4294967295|A>>>11),A=E+(C^(b|~k))+S[4]+4149444226&4294967295,E=b+(A<<6&4294967295|A>>>26),A=k+(b^(E|~C))+S[11]+3174756917&4294967295,k=E+(A<<10&4294967295|A>>>22),A=C+(E^(k|~b))+S[2]+718787259&4294967295,C=k+(A<<15&4294967295|A>>>17),A=b+(k^(C|~E))+S[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+k&4294967295}s.prototype.u=function(R,E){E===void 0&&(E=R.length);for(var b=E-this.blockSize,S=this.B,C=this.h,k=0;k<E;){if(C==0)for(;k<=b;)r(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<E;)if(S[C++]=R.charCodeAt(k++),C==this.blockSize){r(this,S),C=0;break}}else for(;k<E;)if(S[C++]=R[k++],C==this.blockSize){r(this,S),C=0;break}}this.h=C,this.o+=E},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;var b=8*this.o;for(E=R.length-8;E<R.length;++E)R[E]=b&255,b/=256;for(this.u(R),R=Array(16),E=b=0;4>E;++E)for(var S=0;32>S;S+=8)R[b++]=this.g[E]>>>S&255;return R};function a(R,E){var b=h;return Object.prototype.hasOwnProperty.call(b,R)?b[R]:b[R]=E(R)}function c(R,E){this.h=E;for(var b=[],S=!0,C=R.length-1;0<=C;C--){var k=R[C]|0;S&&k==E||(b[C]=k,S=!1)}this.g=b}var h={};function p(R){return-128<=R&&128>R?a(R,function(E){return new c([E|0],0>E?-1:0)}):new c([R|0],0>R?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return $(g(-R));for(var E=[],b=1,S=0;R>=b;S++)E[S]=R/b|0,b*=4294967296;return new c(E,0)}function y(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return $(y(R.substring(1),E));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(E,8)),S=T,C=0;C<R.length;C+=8){var k=Math.min(8,R.length-C),A=parseInt(R.substring(C,C+k),E);8>k?(k=g(Math.pow(E,k)),S=S.j(k).add(g(A))):(S=S.j(b),S=S.add(g(A)))}return S}var T=p(0),x=p(1),N=p(16777216);n=c.prototype,n.m=function(){if(H(this))return-$(this).m();for(var R=0,E=1,b=0;b<this.g.length;b++){var S=this.i(b);R+=(0<=S?S:4294967296+S)*E,E*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(j(this))return"0";if(H(this))return"-"+$(this).toString(R);for(var E=g(Math.pow(R,6)),b=this,S="";;){var C=bt(b,E).g;b=ot(b,C.j(E));var k=((0<b.g.length?b.g[0]:b.h)>>>0).toString(R);if(b=C,j(b))return k+S;for(;6>k.length;)k="0"+k;S=k+S}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function j(R){if(R.h!=0)return!1;for(var E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function H(R){return R.h==-1}n.l=function(R){return R=ot(this,R),H(R)?-1:j(R)?0:1};function $(R){for(var E=R.g.length,b=[],S=0;S<E;S++)b[S]=~R.g[S];return new c(b,~R.h).add(x)}n.abs=function(){return H(this)?$(this):this},n.add=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],S=0,C=0;C<=E;C++){var k=S+(this.i(C)&65535)+(R.i(C)&65535),A=(k>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);S=A>>>16,k&=65535,A&=65535,b[C]=A<<16|k}return new c(b,b[b.length-1]&-2147483648?-1:0)};function ot(R,E){return R.add($(E))}n.j=function(R){if(j(this)||j(R))return T;if(H(this))return H(R)?$(this).j($(R)):$($(this).j(R));if(H(R))return $(this.j($(R)));if(0>this.l(N)&&0>R.l(N))return g(this.m()*R.m());for(var E=this.g.length+R.g.length,b=[],S=0;S<2*E;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(var C=0;C<R.g.length;C++){var k=this.i(S)>>>16,A=this.i(S)&65535,de=R.i(C)>>>16,gn=R.i(C)&65535;b[2*S+2*C]+=A*gn,lt(b,2*S+2*C),b[2*S+2*C+1]+=k*gn,lt(b,2*S+2*C+1),b[2*S+2*C+1]+=A*de,lt(b,2*S+2*C+1),b[2*S+2*C+2]+=k*de,lt(b,2*S+2*C+2)}for(S=0;S<E;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=E;S<2*E;S++)b[S]=0;return new c(b,0)};function lt(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function nt(R,E){this.g=R,this.h=E}function bt(R,E){if(j(E))throw Error("division by zero");if(j(R))return new nt(T,T);if(H(R))return E=bt($(R),E),new nt($(E.g),$(E.h));if(H(E))return E=bt(R,$(E)),new nt($(E.g),E.h);if(30<R.g.length){if(H(R)||H(E))throw Error("slowDivide_ only works with positive integers.");for(var b=x,S=E;0>=S.l(R);)b=qt(b),S=qt(S);var C=Mt(b,1),k=Mt(S,1);for(S=Mt(S,2),b=Mt(b,2);!j(S);){var A=k.add(S);0>=A.l(R)&&(C=C.add(b),k=A),S=Mt(S,1),b=Mt(b,1)}return E=ot(R,C.j(E)),new nt(C,E)}for(C=T;0<=R.l(E);){for(b=Math.max(1,Math.floor(R.m()/E.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),k=g(b),A=k.j(E);H(A)||0<A.l(R);)b-=S,k=g(b),A=k.j(E);j(k)&&(k=x),C=C.add(k),R=ot(R,A)}return new nt(C,R)}n.A=function(R){return bt(this,R).h},n.and=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],S=0;S<E;S++)b[S]=this.i(S)&R.i(S);return new c(b,this.h&R.h)},n.or=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],S=0;S<E;S++)b[S]=this.i(S)|R.i(S);return new c(b,this.h|R.h)},n.xor=function(R){for(var E=Math.max(this.g.length,R.g.length),b=[],S=0;S<E;S++)b[S]=this.i(S)^R.i(S);return new c(b,this.h^R.h)};function qt(R){for(var E=R.g.length+1,b=[],S=0;S<E;S++)b[S]=R.i(S)<<1|R.i(S-1)>>>31;return new c(b,R.h)}function Mt(R,E){var b=E>>5;E%=32;for(var S=R.g.length-b,C=[],k=0;k<S;k++)C[k]=0<E?R.i(k+b)>>>E|R.i(k+b+1)<<32-E:R.i(k+b);return new c(C,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ip=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Si=c}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});var ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sp,no,rp,xa,wu,op,ap,lp;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,_){return l==Array.prototype||l==Object.prototype||(l[d]=_.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ga=="object"&&ga];for(var d=0;d<l.length;++d){var _=l[d];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=e(this);function r(l,d){if(d)t:{var _=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var D=l[w];if(!(D in _))break t;_=_[D]}l=l[l.length-1],w=_[l],d=d(w),d!=w&&d!=null&&t(_,l,{configurable:!0,writable:!0,value:d})}}function a(l,d){l instanceof String&&(l+="");var _=0,w=!1,D={next:function(){if(!w&&_<l.length){var F=_++;return{value:d(F,l[F]),done:!1}}return w=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(l){return l||function(){return a(this,function(d,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function g(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function y(l,d,_){return l.call.apply(l.bind,arguments)}function T(l,d,_){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,w),l.apply(d,D)}}return function(){return l.apply(d,arguments)}}function x(l,d,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,x.apply(null,arguments)}function N(l,d){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function j(l,d){function _(){}_.prototype=d.prototype,l.aa=d.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(w,D,F){for(var J=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)J[Qt-2]=arguments[Qt];return d.prototype[D].apply(w,J)}}function H(l){const d=l.length;if(0<d){const _=Array(d);for(let w=0;w<d;w++)_[w]=l[w];return _}return[]}function $(l,d){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const D=l.length||0,F=w.length||0;l.length=D+F;for(let J=0;J<F;J++)l[D+J]=w[J]}else l.push(w)}}class ot{constructor(d,_){this.i=d,this.j=_,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function lt(l){return/^[\s\xa0]*$/.test(l)}function nt(){var l=h.navigator;return l&&(l=l.userAgent)?l:""}function bt(l){return bt[" "](l),l}bt[" "]=function(){};var qt=nt().indexOf("Gecko")!=-1&&!(nt().toLowerCase().indexOf("webkit")!=-1&&nt().indexOf("Edge")==-1)&&!(nt().indexOf("Trident")!=-1||nt().indexOf("MSIE")!=-1)&&nt().indexOf("Edge")==-1;function Mt(l,d,_){for(const w in l)d.call(_,l[w],w,l)}function R(l,d){for(const _ in l)d.call(void 0,l[_],_,l)}function E(l){const d={};for(const _ in l)d[_]=l[_];return d}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,d){let _,w;for(let D=1;D<arguments.length;D++){w=arguments[D];for(_ in w)l[_]=w[_];for(let F=0;F<b.length;F++)_=b[F],Object.prototype.hasOwnProperty.call(w,_)&&(l[_]=w[_])}}function C(l){var d=1;l=l.split(":");const _=[];for(;0<d&&l.length;)_.push(l.shift()),d--;return l.length&&_.push(l.join(":")),_}function k(l){h.setTimeout(()=>{throw l},0)}function A(){var l=Ve;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class de{constructor(){this.h=this.g=null}add(d,_){const w=gn.get();w.set(d,_),this.h?this.h.next=w:this.g=w,this.h=w}}var gn=new ot(()=>new Ht,l=>l.reset());class Ht{constructor(){this.next=this.g=this.h=null}set(d,_){this.h=d,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Nt,et=!1,Ve=new de,mt=()=>{const l=h.Promise.resolve(void 0);Nt=()=>{l.then(jt)}};var jt=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(_){k(_)}var d=gn;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}et=!1};function Zt(){this.s=this.s,this.C=this.C}Zt.prototype.s=!1,Zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};h.addEventListener("test",_,d),h.removeEventListener("test",_,d)}catch{}return l}();function Dt(l,d){if(xt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(qt){t:{try{bt(d.nodeName);var D=!0;break t}catch{}D=!1}D||(d=null)}}else _=="mouseover"?d=l.fromElement:_=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:St[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Dt.aa.h.call(this)}}j(Dt,xt);var St={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),ze=0;function zi(l,d,_,w,D){this.listener=l,this.proxy=null,this.src=d,this.type=_,this.capture=!!w,this.ha=D,this.key=++ze,this.da=this.fa=!1}function We(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Hn(l){this.src=l,this.g={},this.h=0}Hn.prototype.add=function(l,d,_,w,D){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var J=M(l,d,w,D);return-1<J?(d=l[J],_||(d.fa=!1)):(d=new zi(d,this.src,F,!!w,D),d.fa=_,l.push(d)),d};function P(l,d){var _=d.type;if(_ in l.g){var w=l.g[_],D=Array.prototype.indexOf.call(w,d,void 0),F;(F=0<=D)&&Array.prototype.splice.call(w,D,1),F&&(We(d),l.g[_].length==0&&(delete l.g[_],l.h--))}}function M(l,d,_,w){for(var D=0;D<l.length;++D){var F=l[D];if(!F.da&&F.listener==d&&F.capture==!!_&&F.ha==w)return D}return-1}var U="closure_lm_"+(1e6*Math.random()|0),q={};function Z(l,d,_,w,D){if(Array.isArray(d)){for(var F=0;F<d.length;F++)Z(l,d[F],_,w,D);return null}return _=_t(_),l&&l[oe]?l.K(d,_,g(w)?!!w.capture:!1,D):X(l,d,_,!1,w,D)}function X(l,d,_,w,D,F){if(!d)throw Error("Invalid event type");var J=g(D)?!!D.capture:!!D,Qt=at(l);if(Qt||(l[U]=Qt=new Hn(l)),_=Qt.add(d,_,w,J,F),_.proxy)return _;if(w=tt(),_.proxy=w,w.src=l,w.listener=_,l.addEventListener)re||(D=J),D===void 0&&(D=!1),l.addEventListener(d.toString(),w,D);else if(l.attachEvent)l.attachEvent(K(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function tt(){function l(_){return d.call(l.src,l.listener,_)}const d=ct;return l}function Q(l,d,_,w,D){if(Array.isArray(d))for(var F=0;F<d.length;F++)Q(l,d[F],_,w,D);else w=g(w)?!!w.capture:!!w,_=_t(_),l&&l[oe]?(l=l.i,d=String(d).toString(),d in l.g&&(F=l.g[d],_=M(F,_,w,D),-1<_&&(We(F[_]),Array.prototype.splice.call(F,_,1),F.length==0&&(delete l.g[d],l.h--)))):l&&(l=at(l))&&(d=l.g[d.toString()],l=-1,d&&(l=M(d,_,w,D)),(_=-1<l?d[l]:null)&&Y(_))}function Y(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[oe])P(d.i,l);else{var _=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(_,w,l.capture):d.detachEvent?d.detachEvent(K(_),w):d.addListener&&d.removeListener&&d.removeListener(w),(_=at(d))?(P(_,l),_.h==0&&(_.src=null,d[U]=null)):We(l)}}}function K(l){return l in q?q[l]:q[l]="on"+l}function ct(l,d){if(l.da)l=!0;else{d=new Dt(d,this);var _=l.listener,w=l.ha||l.src;l.fa&&Y(l),l=_.call(w,d)}return l}function at(l){return l=l[U],l instanceof Hn?l:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(l){return typeof l=="function"?l:(l[ut]||(l[ut]=function(d){return l.handleEvent(d)}),l[ut])}function ft(){Zt.call(this),this.i=new Hn(this),this.M=this,this.F=null}j(ft,Zt),ft.prototype[oe]=!0,ft.prototype.removeEventListener=function(l,d,_,w){Q(this,l,d,_,w)};function Pt(l,d){var _,w=l.F;if(w)for(_=[];w;w=w.F)_.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new xt(d,l);else if(d instanceof xt)d.target=d.target||l;else{var D=d;d=new xt(w,l),S(d,D)}if(D=!0,_)for(var F=_.length-1;0<=F;F--){var J=d.g=_[F];D=Bt(J,w,!0,d)&&D}if(J=d.g=l,D=Bt(J,w,!0,d)&&D,D=Bt(J,w,!1,d)&&D,_)for(F=0;F<_.length;F++)J=d.g=_[F],D=Bt(J,w,!1,d)&&D}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var _=l.g[d],w=0;w<_.length;w++)We(_[w]);delete l.g[d],l.h--}}this.F=null},ft.prototype.K=function(l,d,_,w){return this.i.add(String(l),d,!1,_,w)},ft.prototype.L=function(l,d,_,w){return this.i.add(String(l),d,!0,_,w)};function Bt(l,d,_,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,F=0;F<d.length;++F){var J=d[F];if(J&&!J.da&&J.capture==_){var Qt=J.listener,ve=J.ha||J.src;J.fa&&P(l.i,J),D=Qt.call(ve,w)!==!1&&D}}return D&&!w.defaultPrevented}function te(l,d,_){if(typeof l=="function")_&&(l=x(l,_));else if(l&&typeof l.handleEvent=="function")l=x(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:h.setTimeout(l,d||0)}function Le(l){l.g=te(()=>{l.g=null,l.i&&(l.i=!1,Le(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class vn extends Zt{constructor(d,_){super(),this.m=d,this.l=_,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(l){Zt.call(this),this.h=l,this.g={}}j(Rn,Zt);var yn=[];function Zn(l){Mt(l.g,function(d,_){this.g.hasOwnProperty(_)&&Y(d)},l),l.g={}}Rn.prototype.N=function(){Rn.aa.N.call(this),Zn(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=h.JSON.stringify,Ke=h.JSON.parse,Ln=class{stringify(l){return h.JSON.stringify(l,void 0)}parse(l){return h.JSON.parse(l,void 0)}};function wr(){}wr.prototype.h=null;function Do(l){return l.h||(l.h=l.i())}function Tr(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ws(){xt.call(this,"d")}j(ws,xt);function Er(){xt.call(this,"c")}j(Er,xt);var Wn={},Oo=null;function Ts(){return Oo=Oo||new ft}Wn.La="serverreachability";function Vo(l){xt.call(this,Wn.La,l)}j(Vo,xt);function $i(l){const d=Ts();Pt(d,new Vo(d))}Wn.STAT_EVENT="statevent";function Es(l,d){xt.call(this,Wn.STAT_EVENT,l),this.stat=d}j(Es,xt);function Me(l){const d=Ts();Pt(d,new Es(d,l))}Wn.Ma="timingevent";function No(l,d){xt.call(this,Wn.Ma,l),this.size=d}j(No,xt);function ji(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){l()},d)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function ln(l,d,_,w,D,F){l.info(function(){if(l.g)if(F)for(var J="",Qt=F.split("&"),ve=0;ve<Qt.length;ve++){var Ft=Qt[ve].split("=");if(1<Ft.length){var Jt=Ft[0];Ft=Ft[1];var he=Jt.split("_");J=2<=he.length&&he[1]=="type"?J+(Jt+"="+Ft+"&"):J+(Jt+"=redacted&")}}else J=null;else J=F;return"XMLHTTP REQ ("+w+") [attempt "+D+"]: "+d+`
`+_+`
`+J})}function ht(l,d,_,w,D,F,J){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+D+"]: "+d+`
`+_+`
`+F+" "+J})}function Kn(l,d,_,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Fo(l,_)+(w?" "+w:"")})}function Bo(l,d){l.info(function(){return"TIMEOUT: "+d})}qi.prototype.info=function(){};function Fo(l,d){if(!l.g)return d;if(!d)return null;try{var _=JSON.parse(d);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var w=_[l];if(!(2>w.length)){var D=w[1];if(Array.isArray(D)&&!(1>D.length)){var F=D[0];if(F!="noop"&&F!="stop"&&F!="close")for(var J=1;J<D.length;J++)D[J]=""}}}}return ge(_)}catch{return d}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Is;function wn(){}j(wn,wr),wn.prototype.g=function(){return new XMLHttpRequest},wn.prototype.i=function(){return{}},Is=new wn;function Tn(l,d,_,w){this.j=l,this.i=d,this.l=_,this.R=w||1,this.U=new Rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uo}function Uo(){this.i=null,this.g="",this.h=!1}var zo={},br={};function Ir(l,d,_){l.L=1,l.v=cn(pe(d)),l.m=_,l.P=!0,Pr(l,null)}function Pr(l,d){l.F=Date.now(),As(l),l.A=pe(l.v);var _=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),qo(_.i,"t",w),l.C=0,_=l.j.J,l.h=new Uo,l.g=Xo(l.j,_?d:null,!l.m),0<l.O&&(l.M=new vn(x(l.Y,l,l.g),l.O)),d=l.U,_=l.g,w=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(yn[0]=D.toString()),D=yn);for(var F=0;F<D.length;F++){var J=Z(_,D[F],w||d.handleEvent,!1,d.h||d);if(!J)break;d.g[J.key]=J}d=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),$i(),ln(l.i,l.u,l.A,l.l,l.R,l.m)}Tn.prototype.ca=function(l){l=l.target;const d=this.M;d&&$e(l)==3?d.j():this.Y(l)},Tn.prototype.Y=function(l){try{if(l==this.g)t:{const he=$e(this.g);var d=this.g.Ba();const yi=this.g.Z();if(!(3>he)&&(he!=3||this.g&&(this.h.h||this.g.oa()||zr(this.g)))){this.J||he!=4||d==7||(d==8||0>=yi?$i(3):$i(2)),Ar(this);var _=this.g.Z();this.X=_;e:if($o(this)){var w=zr(this.g);l="";var D=w.length,F=$e(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),Zi(this);var J="";break e}this.h.i=new h.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(F&&d==D-1)});w.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,ht(this.i,this.u,this.A,this.l,this.R,he,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Qt,ve=this.g;if((Qt=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lt(Qt)){var Ft=Qt;break e}}Ft=null}if(_=Ft)Kn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wi(this,_);else{this.o=!1,this.s=3,Me(12),Gn(this),Zi(this);break t}}if(this.P){_=!0;let me;for(;!this.J&&this.C<J.length;)if(me=Ps(this,J),me==br){he==4&&(this.s=4,Me(14),_=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(me==zo){this.s=4,Me(15),Kn(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else Kn(this.i,this.l,me,null),Wi(this,me);if($o(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),he!=4||J.length!=0||this.h.h||(this.s=1,Me(16),_=!1),this.o=this.o&&_,!_)Kn(this.i,this.l,J,"[Invalid Chunked Response]"),Gn(this),Zi(this);else if(0<J.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Os(Jt),Jt.M=!0,Me(11))}}else Kn(this.i,this.l,J,null),Wi(this,J);he==4&&Gn(this),this.o&&!this.J&&(he==4?jr(this.j,this):(this.o=!1,As(this)))}else Vl(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),Gn(this),Zi(this)}}}catch{}finally{}};function $o(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Ps(l,d){var _=l.C,w=d.indexOf(`
`,_);return w==-1?br:(_=Number(d.substring(_,w)),isNaN(_)?zo:(w+=1,w+_>d.length?br:(d=d.slice(w,w+_),l.C=w+_,d)))}Tn.prototype.cancel=function(){this.J=!0,Gn(this)};function As(l){l.S=Date.now()+l.I,jo(l,l.I)}function jo(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ji(x(l.ba,l),d)}function Ar(l){l.B&&(h.clearTimeout(l.B),l.B=null)}Tn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Bo(this.i,this.A),this.L!=2&&($i(),Me(17)),Gn(this),this.s=2,Zi(this)):jo(this,this.S-l)};function Zi(l){l.j.G==0||l.J||jr(l.j,l)}function Gn(l){Ar(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Zn(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Wi(l,d){try{var _=l.j;if(_.G!=0&&(_.g==l||Ot(_.h,l))){if(!l.K&&Ot(_.h,l)&&_.G==3){try{var w=_.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var D=w;if(D[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)Ns(_),ks(_);else break t;Ds(_),Me(18)}}else _.za=D[1],0<_.za-_.T&&37500>D[2]&&_.F&&_.v==0&&!_.C&&(_.C=ji(x(_.Za,_),6e3));if(1>=di(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ti(_,11)}else if((l.K||_.g==l)&&Ns(_),!lt(d))for(D=_.Da.g.parse(d),d=0;d<D.length;d++){let Ft=D[d];if(_.T=Ft[0],Ft=Ft[1],_.G==2)if(Ft[0]=="c"){_.K=Ft[1],_.ia=Ft[2];const Jt=Ft[3];Jt!=null&&(_.la=Jt,_.j.info("VER="+_.la));const he=Ft[4];he!=null&&(_.Aa=he,_.j.info("SVER="+_.Aa));const yi=Ft[5];yi!=null&&typeof yi=="number"&&0<yi&&(w=1.5*yi,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const me=l.g;if(me){const Fs=me.g?me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var F=w.h;F.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ee(F,F.h),F.h=null))}if(w.D){const Dn=me.g?me.g.getResponseHeader("X-HTTP-Session-Id"):null;Dn&&(w.ya=Dn,wt(w.I,w.D,Dn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var J=l;if(w.qa=Bs(w,w.J?w.ia:null,w.W),J.K){Gi(w.h,J);var Qt=J,ve=w.L;ve&&(Qt.I=ve),Qt.B&&(Ar(Qt),As(Qt)),w.g=J}else In(w);0<_.i.length&&vi(_)}else Ft[0]!="stop"&&Ft[0]!="close"||ti(_,7);else _.G==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?ti(_,7):Ms(_):Ft[0]!="noop"&&_.l&&_.l.ta(Ft),_.v=0)}}$i(4)}catch{}}var Ki=class{constructor(l,d){this.g=l,this.map=d}};function xr(l){this.l=l||10,h.PerformanceNavigationTiming?(l=h.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cr(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function di(l){return l.h?1:l.g?l.g.size:0}function Ot(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ee(l,d){l.g?l.g.add(d):l.h=d}function Gi(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}xr.prototype.cancel=function(){if(this.i=Qn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Qn(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const _ of l.g.values())d=d.concat(_.D);return d}return H(l.i)}function pi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(p(l)){for(var d=[],_=l.length,w=0;w<_;w++)d.push(l[w]);return d}d=[],_=0;for(w in l)d[_++]=l[w];return d}function Sr(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(p(l)||typeof l=="string"){var d=[];l=l.length;for(var _=0;_<l;_++)d.push(_);return d}d=[],_=0;for(const w in l)d[_++]=w;return d}}}function At(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(p(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var _=Sr(l),w=pi(l),D=w.length,F=0;F<D;F++)d.call(void 0,w[F],_&&_[F],l)}var ae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rr(l,d){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var w=l[_].indexOf("="),D=null;if(0<=w){var F=l[_].substring(0,w);D=l[_].substring(w+1)}else F=l[_];d(F,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function un(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof un){this.h=l.h,xs(this,l.j),this.o=l.o,this.g=l.g,Xn(this,l.s),this.l=l.l;var d=l.i,_=new Yn;_.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),Mn(this,_),this.m=l.m}else l&&(d=String(l).match(ae))?(this.h=!1,xs(this,d[1]||"",!0),this.o=En(d[2]||""),this.g=En(d[3]||"",!0),Xn(this,d[4]),this.l=En(d[5]||"",!0),Mn(this,d[6]||"",!0),this.m=En(d[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}un.prototype.toString=function(){var l=[],d=this.j;d&&l.push(bn(d,mi,!0),":");var _=this.g;return(_||d=="file")&&(l.push("//"),(d=this.o)&&l.push(bn(d,mi,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(bn(_,_.charAt(0)=="/"?kr:Mr,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",bn(_,Dr)),l.join("")};function pe(l){return new un(l)}function xs(l,d,_){l.j=_?En(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Xn(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Mn(l,d,_){d instanceof Yn?(l.i=d,hn(l.i,l.h)):(_||(d=bn(d,Cs)),l.i=new Yn(d,l.h))}function wt(l,d,_){l.i.set(d,_)}function cn(l){return wt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function En(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function bn(l,d,_){return typeof l=="string"?(l=encodeURI(l).replace(d,Lr),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Lr(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var mi=/[#\/\?@]/g,Mr=/[#\?:]/g,kr=/[#\?]/g,Cs=/[#\?@]/g,Dr=/#/g;function Yn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function en(l){l.g||(l.g=new Map,l.h=0,l.i&&Rr(l.i,function(d,_){l.add(decodeURIComponent(d.replace(/\+/g," ")),_)}))}n=Yn.prototype,n.add=function(l,d){en(this),this.i=null,l=gt(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(d),this.h+=1,this};function Or(l,d){en(l),d=gt(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Ss(l,d){return en(l),d=gt(l,d),l.g.has(d)}n.forEach=function(l,d){en(this),this.g.forEach(function(_,w){_.forEach(function(D){l.call(d,D,w,this)},this)},this)},n.na=function(){en(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),_=[];for(let w=0;w<d.length;w++){const D=l[w];for(let F=0;F<D.length;F++)_.push(d[w])}return _},n.V=function(l){en(this);let d=[];if(typeof l=="string")Ss(this,l)&&(d=d.concat(this.g.get(gt(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)d=d.concat(l[_])}return d},n.set=function(l,d){return en(this),this.i=null,l=gt(this,l),Ss(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},n.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function qo(l,d,_){Or(l,d),0<_.length&&(l.i=null,l.g.set(gt(l,d),H(_)),l.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var _=0;_<d.length;_++){var w=d[_];const F=encodeURIComponent(String(w)),J=this.V(w);for(w=0;w<J.length;w++){var D=F;J[w]!==""&&(D+="="+encodeURIComponent(String(J[w]))),l.push(D)}}return this.i=l.join("&")};function gt(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function hn(l,d){d&&!l.j&&(en(l),l.i=null,l.g.forEach(function(_,w){var D=w.toLowerCase();w!=D&&(Or(this,w),qo(this,D,_))},l)),l.j=d}function Yt(l,d){const _=new qi;if(h.Image){const w=new Image;w.onload=N(fn,_,"TestLoadImage: loaded",!0,d,w),w.onerror=N(fn,_,"TestLoadImage: error",!1,d,w),w.onabort=N(fn,_,"TestLoadImage: abort",!1,d,w),w.ontimeout=N(fn,_,"TestLoadImage: timeout",!1,d,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function Ho(l,d){const _=new qi,w=new AbortController,D=setTimeout(()=>{w.abort(),fn(_,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(F=>{clearTimeout(D),F.ok?fn(_,"TestPingServer: ok",!0,d):fn(_,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),fn(_,"TestPingServer: error",!1,d)})}function fn(l,d,_,w,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),w(_)}catch{}}function Vr(){this.g=new Ln}function Nr(l,d,_){const w=_||"";try{At(l,function(D,F){let J=D;g(D)&&(J=ge(D)),d.push(w+F+"="+encodeURIComponent(J))})}catch(D){throw d.push(w+"type="+encodeURIComponent("_badmap")),D}}function dn(l){this.l=l.Ub||null,this.j=l.eb||!1}j(dn,wr),dn.prototype.g=function(){return new _i(this.l,this.j)},dn.prototype.i=function(l){return function(){return l}}({});function _i(l,d){ft.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(_i,ft),n=_i.prototype,n.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,nn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||h).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ce(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,nn(this)),this.g&&(this.readyState=3,nn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gi(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function gi(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?ce(this):nn(this),this.readyState==3&&gi(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,ce(this))},n.Qa=function(l){this.g&&(this.response=l,ce(this))},n.ga=function(){this.g&&ce(this)};function ce(l){l.readyState=4,l.l=null,l.j=null,l.v=null,nn(l)}n.setRequestHeader=function(l,d){this.u.append(l,d)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var _=d.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=d.next();return l.join(`\r
`)};function nn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Br(l){let d="";return Mt(l,function(_,w){d+=w,d+=":",d+=_,d+=`\r
`}),d}function Rs(l,d,_){t:{for(w in _){var w=!1;break t}w=!0}w||(_=Br(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):wt(l,d,_))}function le(l){ft.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(le,ft);var Zo=/^https?$/i,Fr=["POST","PUT"];n=le.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,d,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Is.g(),this.v=this.o?Do(this.o):Do(Is),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(F){Wo(this,F);return}if(l=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var D in w)_.set(D,w[D]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())_.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),D=h.FormData&&l instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Fr,d,void 0))||w||D||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,J]of _)this.g.setRequestHeader(F,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ge(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Wo(this,F)}};function Wo(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Ur(l),Ls(l)}function Ur(l){l.A||(l.A=!0,Pt(l,"complete"),Pt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Pt(this,"complete"),Pt(this,"abort"),Ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),le.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?kt(this):this.bb())},n.bb=function(){kt(this)};function kt(l){if(l.h&&typeof c<"u"&&(!l.v[1]||$e(l)!=4||l.Z()!=2)){if(l.u&&$e(l)==4)te(l.Ea,0,l);else if(Pt(l,"readystatechange"),$e(l)==4){l.h=!1;try{const J=l.Z();t:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break t;default:d=!1}var _;if(!(_=d)){var w;if(w=J===0){var D=String(l.D).match(ae)[1]||null;!D&&h.self&&h.self.location&&(D=h.self.location.protocol.slice(0,-1)),w=!Zo.test(D?D.toLowerCase():"")}_=w}if(_)Pt(l,"complete"),Pt(l,"success");else{l.m=6;try{var F=2<$e(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",Ur(l)}}finally{Ls(l)}}}}function Ls(l,d){if(l.g){Ge(l);const _=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||Pt(l,"ready");try{_.onreadystatechange=w}catch{}}}function Ge(l){l.I&&(h.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function $e(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<$e(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Ke(d)}};function zr(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Vl(l){const d={};l=(l.g&&2<=$e(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(lt(l[w]))continue;var _=C(l[w]);const D=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=d[D]||[];d[D]=F,F.push(_)}R(d,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(l,d,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||d}function Ko(l){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jn("baseRetryDelayMs",5e3,l),this.cb=Jn("retryDelaySeedMs",1e4,l),this.Wa=Jn("forwardChannelMaxRetries",2,l),this.wa=Jn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new xr(l&&l.concurrentRequestLimit),this.Da=new Vr,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ko.prototype,n.la=8,n.G=1,n.connect=function(l,d,_,w){Me(0),this.W=l,this.H=d||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Bs(this,null,this.W),vi(this)};function Ms(l){if(Go(l),l.G==3){var d=l.U++,_=pe(l.I);if(wt(_,"SID",l.K),wt(_,"RID",d),wt(_,"TYPE","terminate"),Qi(l,_),d=new Tn(l,l.j,d),d.L=2,d.v=cn(pe(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(d.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=d.v,_=!0),_||(d.g=Xo(d.j,null),d.g.ea(d.v)),d.F=Date.now(),As(d)}Qo(l)}function ks(l){l.g&&(Os(l),l.g.cancel(),l.g=null)}function Go(l){ks(l),l.u&&(h.clearTimeout(l.u),l.u=null),Ns(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&h.clearTimeout(l.s),l.s=null)}function vi(l){if(!Cr(l.h)&&!l.s){l.s=!0;var d=l.Ga;Nt||mt(),et||(Nt(),et=!0),Ve.add(d,l),l.B=0}}function Nl(l,d){return di(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ji(x(l.Ga,l,d),qr(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new Tn(this,this.j,l);let F=this.o;if(this.S&&(F?(F=E(F),S(F,this.S)):F=this.S),this.m!==null||this.O||(D.H=F,F=null),this.P)t:{for(var d=0,_=0;_<this.i.length;_++){e:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=_;break t}if(d===4096||_===this.i.length-1){d=_+1;break t}}d=1e3}else d=1e3;d=$r(this,D,d),_=pe(this.I),wt(_,"RID",l),wt(_,"CVER",22),this.D&&wt(_,"X-HTTP-Session-Id",this.D),Qi(this,_),F&&(this.O?d="headers="+encodeURIComponent(String(Br(F)))+"&"+d:this.m&&Rs(_,this.m,F)),ee(this.h,D),this.Ua&&wt(_,"TYPE","init"),this.P?(wt(_,"$req",d),wt(_,"SID","null"),D.T=!0,Ir(D,_,null)):Ir(D,_,d),this.G=2}}else this.G==3&&(l?sn(this,l):this.i.length==0||Cr(this.h)||sn(this))};function sn(l,d){var _;d?_=d.l:_=l.U++;const w=pe(l.I);wt(w,"SID",l.K),wt(w,"RID",_),wt(w,"AID",l.T),Qi(l,w),l.m&&l.o&&Rs(w,l.m,l.o),_=new Tn(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),d&&(l.i=d.D.concat(l.i)),d=$r(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ee(l.h,_),Ir(_,w,d)}function Qi(l,d){l.H&&Mt(l.H,function(_,w){wt(d,w,_)}),l.l&&At({},function(_,w){wt(d,w,_)})}function $r(l,d,_){_=Math.min(l.i.length,_);var w=l.l?x(l.l.Na,l.l,l):null;t:{var D=l.i;let F=-1;for(;;){const J=["count="+_];F==-1?0<_?(F=D[0].g,J.push("ofs="+F)):F=0:J.push("ofs="+F);let Qt=!0;for(let ve=0;ve<_;ve++){let Ft=D[ve].g;const Jt=D[ve].map;if(Ft-=F,0>Ft)F=Math.max(0,D[ve].g-100),Qt=!1;else try{Nr(Jt,J,"req"+Ft+"_")}catch{w&&w(Jt)}}if(Qt){w=J.join("&");break t}}}return l=l.i.splice(0,_),d.D=l,w}function In(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Nt||mt(),et||(Nt(),et=!0),Ve.add(d,l),l.v=0}}function Ds(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ji(x(l.Fa,l),qr(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Vs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ji(x(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),ks(this),Vs(this))};function Os(l){l.A!=null&&(h.clearTimeout(l.A),l.A=null)}function Vs(l){l.g=new Tn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=pe(l.qa);wt(d,"RID","rpc"),wt(d,"SID",l.K),wt(d,"AID",l.T),wt(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&wt(d,"TO",l.ja),wt(d,"TYPE","xmlhttp"),Qi(l,d),l.m&&l.o&&Rs(d,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=cn(pe(d)),_.m=null,_.P=!0,Pr(_,l)}n.Za=function(){this.C!=null&&(this.C=null,ks(this),Ds(this),Me(19))};function Ns(l){l.C!=null&&(h.clearTimeout(l.C),l.C=null)}function jr(l,d){var _=null;if(l.g==d){Ns(l),Os(l),l.g=null;var w=2}else if(Ot(l.h,d))_=d.D,Gi(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){_=d.m?d.m.length:0,d=Date.now()-d.F;var D=l.B;w=Ts(),Pt(w,new No(w,_)),vi(l)}else In(l);else if(D=d.s,D==3||D==0&&0<d.X||!(w==1&&Nl(l,d)||w==2&&Ds(l)))switch(_&&0<_.length&&(d=l.h,d.i=d.i.concat(_)),D){case 1:ti(l,5);break;case 4:ti(l,10);break;case 3:ti(l,6);break;default:ti(l,2)}}}function qr(l,d){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*d}function ti(l,d){if(l.j.info("Error code "+d),d==2){var _=x(l.fb,l),w=l.Xa;const D=!w;w=new un(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||xs(w,"https"),cn(w),D?Yt(w.toString(),_):Ho(w.toString(),_)}else Me(2);l.G=0,l.l&&l.l.sa(d),Qo(l),Go(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function Qo(l){if(l.G=0,l.ka=[],l.l){const d=Qn(l.h);(d.length!=0||l.i.length!=0)&&($(l.ka,d),$(l.ka,l.i),l.h.i.length=0,H(l.i),l.i.length=0),l.l.ra()}}function Bs(l,d,_){var w=_ instanceof un?pe(_):new un(_);if(w.g!="")d&&(w.g=d+"."+w.g),Xn(w,w.s);else{var D=h.location;w=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var F=new un(null);w&&xs(F,w),d&&(F.g=d),D&&Xn(F,D),_&&(F.l=_),w=F}return _=l.D,d=l.ya,_&&d&&wt(w,_,d),wt(w,"VER",l.la),Qi(l,w),w}function Xo(l,d,_){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new le(new dn({eb:_})):new le(l.pa),d.Ha(l.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hr(){}n=Hr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xi(){}Xi.prototype.g=function(l,d){return new Ae(l,d)};function Ae(l,d){ft.call(this),this.g=new Ko(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!lt(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!lt(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new pn(this)}j(Ae,ft),Ae.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ae.prototype.close=function(){Ms(this.g)},Ae.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=ge(l),l=_);d.i.push(new Ki(d.Ya++,l)),d.G==3&&vi(d)},Ae.prototype.N=function(){this.g.l=null,delete this.j,Ms(this.g),delete this.g,Ae.aa.N.call(this)};function kn(l){ws.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){t:{for(const _ in d){l=_;break t}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}j(kn,ws);function Yo(){Er.call(this),this.status=1}j(Yo,Er);function pn(l){this.g=l}j(pn,Hr),pn.prototype.ua=function(){Pt(this.g,"a")},pn.prototype.ta=function(l){Pt(this.g,new kn(l))},pn.prototype.sa=function(l){Pt(this.g,new Yo)},pn.prototype.ra=function(){Pt(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,Ae.prototype.send=Ae.prototype.o,Ae.prototype.open=Ae.prototype.m,Ae.prototype.close=Ae.prototype.close,lp=function(){return new Xi},ap=function(){return Ts()},op=Wn,wu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,xa=Hi,bs.COMPLETE="complete",rp=bs,Tr.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",ft.prototype.listen=ft.prototype.K,no=Tr,le.prototype.listenOnce=le.prototype.L,le.prototype.getLastError=le.prototype.Ka,le.prototype.getLastErrorCode=le.prototype.Ba,le.prototype.getStatus=le.prototype.Z,le.prototype.getResponseJson=le.prototype.Oa,le.prototype.getResponseText=le.prototype.oa,le.prototype.send=le.prototype.ea,le.prototype.setWithCredentials=le.prototype.Ha,sp=le}).apply(typeof ga<"u"?ga:typeof self<"u"?self:typeof window<"u"?window:{});const Xh="@firebase/firestore",Yh="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Be.UNAUTHENTICATED=new Be(null),Be.GOOGLE_CREDENTIALS=new Be("google-credentials-uid"),Be.FIRST_PARTY=new Be("first-party-uid"),Be.MOCK_USER=new Be("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _r="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Xd("@firebase/firestore");function Ws(){return fs.logLevel}function st(n,...t){if(fs.logLevel<=zt.DEBUG){const e=t.map(lc);fs.debug(`Firestore (${_r}): ${n}`,...e)}}function ui(n,...t){if(fs.logLevel<=zt.ERROR){const e=t.map(lc);fs.error(`Firestore (${_r}): ${n}`,...e)}}function or(n,...t){if(fs.logLevel<=zt.WARN){const e=t.map(lc);fs.warn(`Firestore (${_r}): ${n}`,...e)}}function lc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n="Unexpected state"){const t=`FIRESTORE (${_r}) INTERNAL ASSERTION FAILED: `+n;throw ui(t),new Error(t)}function Gt(n,t){n||yt()}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends mr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Lw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Be.UNAUTHENTICATED))}shutdown(){}}class Mw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class kw{constructor(t){this.t=t,this.currentUser=Be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Gt(this.o===void 0);let s=this.i;const r=p=>this.i!==s?(s=this.i,e(p)):Promise.resolve();let a=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ri,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const p=a;t.enqueueRetryable(async()=>{await p.promise,await r(this.currentUser)})},h=p=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ri)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Gt(typeof s.accessToken=="string"),new up(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string"),new Be(t)}}class Dw{constructor(t,e,s){this.l=t,this.h=e,this.P=s,this.type="FirstParty",this.user=Be.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ow{constructor(t,e,s){this.l=t,this.h=e,this.P=s}getToken(){return Promise.resolve(new Dw(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Be.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jh{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vw{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,pw(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){Gt(this.o===void 0);const s=a=>{a.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,st("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>s(a))};const r=a=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Jh(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Gt(typeof e.token=="string"),this.R=e.token,new Jh(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Nw(40);for(let a=0;a<r.length;++a)s.length<20&&r[a]<e&&(s+=t.charAt(r[a]%62))}return s}}function Ct(n,t){return n<t?-1:n>t?1:0}function Tu(n,t){let e=0;for(;e<n.length&&e<t.length;){const s=n.codePointAt(e),r=t.codePointAt(e);if(s!==r){if(s<128&&r<128)return Ct(s,r);{const a=cp(),c=Bw(a.encode(tf(n,e)),a.encode(tf(t,e)));return c!==0?c:Ct(s,r)}}e+=s>65535?2:1}return Ct(n.length,t.length)}function tf(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function Bw(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Ct(n[e],t[e]);return Ct(n.length,t.length)}function ar(n,t,e){return n.length===t.length&&n.every((s,r)=>e(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=-62135596800,nf=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(t){return Ie.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*nf);return new Ie(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new dt(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new dt(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<ef)throw new dt(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dt(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nf}_compareTo(t){return this.seconds===t.seconds?Ct(this.nanoseconds,t.nanoseconds):Ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-ef;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(t){return new Et(t)}static min(){return new Et(new Ie(0,0))}static max(){return new Et(new Ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="__name__";class Nn{constructor(t,e,s){e===void 0?e=0:e>t.length&&yt(),s===void 0?s=t.length-e:s>t.length-e&&yt(),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Nn.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Nn?t.forEach(s=>{e.push(s)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let r=0;r<s;r++){const a=Nn.compareSegments(t.get(r),e.get(r));if(a!==0)return a}return Ct(t.length,e.length)}static compareSegments(t,e){const s=Nn.isNumericId(t),r=Nn.isNumericId(e);return s&&!r?-1:!s&&r?1:s&&r?Nn.extractNumericId(t).compare(Nn.extractNumericId(e)):Tu(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Si.fromString(t.substring(4,t.length-2))}}class ue extends Nn{construct(t,e,s){return new ue(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new dt(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(r=>r.length>0))}return new ue(e)}static emptyPath(){return new ue([])}}const Fw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class De extends Nn{construct(t,e,s){return new De(t,e,s)}static isValidIdentifier(t){return Fw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),De.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sf}static keyField(){return new De([sf])}static fromServerFormat(t){const e=[];let s="",r=0;const a=()=>{if(s.length===0)throw new dt(G.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new dt(G.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new dt(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(s+=h,r++):(a(),r++)}if(a(),c)throw new dt(G.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new De(e)}static emptyPath(){return new De([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.path=t}static fromPath(t){return new pt(ue.fromString(t))}static fromName(t){return new pt(ue.fromString(t).popFirst(5))}static empty(){return new pt(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ue.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ue.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pt(new ue(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=-1;function Uw(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Et.fromTimestamp(s===1e9?new Ie(e+1,0):new Ie(e,s));return new Di(r,pt.empty(),t)}function zw(n){return new Di(n.readTime,n.key,bo)}class Di{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new Di(Et.min(),pt.empty(),bo)}static max(){return new Di(Et.max(),pt.empty(),bo)}}function $w(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=pt.comparator(n.documentKey,t.documentKey),e!==0?e:Ct(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gr(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==jw)throw n;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new z((s,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(s,r)},this.catchCallback=a=>{this.wrapFailure(e,a).next(s,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof z?e:z.resolve(e)}catch(e){return z.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):z.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):z.reject(e)}static resolve(t){return new z((e,s)=>{e(t)})}static reject(t){return new z((e,s)=>{s(t)})}static waitFor(t){return new z((e,s)=>{let r=0,a=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&e()},p=>s(p))}),c=!0,a===r&&e()})}static or(t){let e=z.resolve(!1);for(const s of t)e=e.next(r=>r?z.resolve(r):s());return e}static forEach(t,e){const s=[];return t.forEach((r,a)=>{s.push(e.call(this,r,a))}),this.waitFor(s)}static mapArray(t,e){return new z((s,r)=>{const a=t.length,c=new Array(a);let h=0;for(let p=0;p<a;p++){const g=p;e(t[g]).next(y=>{c[g]=y,++h,h===a&&s(c)},y=>r(y))}})}static doWhile(t,e){return new z((s,r)=>{const a=()=>{t()===!0?e().next(()=>{a()},r):s()};a()})}}function Hw(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function vr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.oe(s),this._e=s=>e.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Tl.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=-1;function El(n){return n==null}function Ka(n){return n===0&&1/n==-1/0}function Zw(n){return typeof n=="number"&&Number.isInteger(n)&&!Ka(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="";function Ww(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=rf(t)),t=Kw(n.get(e),t);return rf(t)}function Kw(n,t){let e=t;const s=n.length;for(let r=0;r<s;r++){const a=n.charAt(r);switch(a){case"\0":e+="";break;case fp:e+="";break;default:e+=a}}return e}function rf(n){return n+fp+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ms(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function dp(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.comparator=t,this.root=e||ke.EMPTY}insert(t,e){return new fe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ke.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ke.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return e+s.left.size;r<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,s)=>(t(e,s),!1))}toString(){const t=[];return this.inorderTraversal((e,s)=>(t.push(`${e}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new va(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new va(this.root,t,this.comparator,!1)}getReverseIterator(){return new va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new va(this.root,t,this.comparator,!0)}}class va{constructor(t,e,s,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?s(t.key,e):1,e&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ke{constructor(t,e,s,r,a){this.key=t,this.value=e,this.color=s??ke.RED,this.left=r??ke.EMPTY,this.right=a??ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,r,a){return new ke(t??this.key,e??this.value,s??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let r=this;const a=s(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,e,s),null):a===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return ke.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const t=this.left.check();if(t!==this.right.check())throw yt();return t+(this.isRed()?0:1)}}ke.EMPTY=null,ke.RED=!0,ke.BLACK=!1;ke.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(t,e,s,r,a){return this}insert(t,e,s){return new ke(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,s)=>(t(e),!1))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new af(this.data.getIterator())}getIteratorFrom(t){return new af(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(s=>{e=e.add(s)}),e}isEqual(t){if(!(t instanceof Pe)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=s.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Pe(this.comparator);return e.data=t,e}}class af{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.fields=t,t.sort(De.comparator)}static empty(){return new An([])}unionWith(t){let e=new Pe(De.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new An(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ar(this.fields,t.fields,(e,s)=>e.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new pp("Invalid base64 string: "+a):a}}(t);return new Oe(e)}static fromUint8Array(t){const e=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(t);return new Oe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Oe.EMPTY_BYTE_STRING=new Oe("");const Gw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(n){if(Gt(!!n),typeof n=="string"){let t=0;const e=Gw.exec(n);if(Gt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:_e(n.seconds),nanos:_e(n.nanos)}}function _e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vi(n){return typeof n=="string"?Oe.fromBase64String(n):Oe.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="server_timestamp",_p="__type__",gp="__previous_value__",vp="__local_write_time__";function cc(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[_p])===null||e===void 0?void 0:e.stringValue)===mp}function bl(n){const t=n.mapValue.fields[gp];return cc(t)?bl(t):t}function Io(n){const t=Oi(n.mapValue.fields[vp].timestampValue);return new Ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t,e,s,r,a,c,h,p,g){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g}}const Ga="(default)";class Po{constructor(t,e){this.projectId=t,this.database=e||Ga}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database===Ga}isEqual(t){return t instanceof Po&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="__type__",Xw="__max__",ya={mapValue:{}},wp="__vector__",Qa="value";function Ni(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cc(n)?4:Jw(n)?9007199254740991:Yw(n)?10:11:yt()}function jn(n,t){if(n===t)return!0;const e=Ni(n);if(e!==Ni(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Io(n).isEqual(Io(t));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Oi(r.timestampValue),h=Oi(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,a){return Vi(r.bytesValue).isEqual(Vi(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,a){return _e(r.geoPointValue.latitude)===_e(a.geoPointValue.latitude)&&_e(r.geoPointValue.longitude)===_e(a.geoPointValue.longitude)}(n,t);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return _e(r.integerValue)===_e(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=_e(r.doubleValue),h=_e(a.doubleValue);return c===h?Ka(c)===Ka(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return ar(n.arrayValue.values||[],t.arrayValue.values||[],jn);case 10:case 11:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(of(c)!==of(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!jn(c[p],h[p])))return!1;return!0}(n,t);default:return yt()}}function Ao(n,t){return(n.values||[]).find(e=>jn(e,t))!==void 0}function lr(n,t){if(n===t)return 0;const e=Ni(n),s=Ni(t);if(e!==s)return Ct(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ct(n.booleanValue,t.booleanValue);case 2:return function(a,c){const h=_e(a.integerValue||a.doubleValue),p=_e(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,t);case 3:return lf(n.timestampValue,t.timestampValue);case 4:return lf(Io(n),Io(t));case 5:return Tu(n.stringValue,t.stringValue);case 6:return function(a,c){const h=Vi(a),p=Vi(c);return h.compareTo(p)}(n.bytesValue,t.bytesValue);case 7:return function(a,c){const h=a.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const y=Ct(h[g],p[g]);if(y!==0)return y}return Ct(h.length,p.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,c){const h=Ct(_e(a.latitude),_e(c.latitude));return h!==0?h:Ct(_e(a.longitude),_e(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return uf(n.arrayValue,t.arrayValue);case 10:return function(a,c){var h,p,g,y;const T=a.fields||{},x=c.fields||{},N=(h=T[Qa])===null||h===void 0?void 0:h.arrayValue,j=(p=x[Qa])===null||p===void 0?void 0:p.arrayValue,H=Ct(((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0,((y=j==null?void 0:j.values)===null||y===void 0?void 0:y.length)||0);return H!==0?H:uf(N,j)}(n.mapValue,t.mapValue);case 11:return function(a,c){if(a===ya.mapValue&&c===ya.mapValue)return 0;if(a===ya.mapValue)return 1;if(c===ya.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),g=c.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let T=0;T<p.length&&T<y.length;++T){const x=Tu(p[T],y[T]);if(x!==0)return x;const N=lr(h[p[T]],g[y[T]]);if(N!==0)return N}return Ct(p.length,y.length)}(n.mapValue,t.mapValue);default:throw yt()}}function lf(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ct(n,t);const e=Oi(n),s=Oi(t),r=Ct(e.seconds,s.seconds);return r!==0?r:Ct(e.nanos,s.nanos)}function uf(n,t){const e=n.values||[],s=t.values||[];for(let r=0;r<e.length&&r<s.length;++r){const a=lr(e[r],s[r]);if(a)return a}return Ct(e.length,s.length)}function ur(n){return Eu(n)}function Eu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const s=Oi(e);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Vi(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return pt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let s="[",r=!0;for(const a of e.values||[])r?r=!1:s+=",",s+=Eu(a);return s+"]"}(n.arrayValue):"mapValue"in n?function(e){const s=Object.keys(e.fields||{}).sort();let r="{",a=!0;for(const c of s)a?a=!1:r+=",",r+=`${c}:${Eu(e.fields[c])}`;return r+"}"}(n.mapValue):yt()}function Ca(n){switch(Ni(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bl(n);return t?16+Ca(t):16;case 5:return 2*n.stringValue.length;case 6:return Vi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,a)=>r+Ca(a),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return ms(s.fields,(a,c)=>{r+=a.length+Ca(c)}),r}(n.mapValue);default:throw yt()}}function bu(n){return!!n&&"integerValue"in n}function hc(n){return!!n&&"arrayValue"in n}function cf(n){return!!n&&"nullValue"in n}function hf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sa(n){return!!n&&"mapValue"in n}function Yw(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[yp])===null||e===void 0?void 0:e.stringValue)===wp}function co(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ms(n.mapValue.fields,(e,s)=>t.mapValue.fields[e]=co(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=co(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Jw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Xw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.value=t}static empty(){return new _n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!Sa(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=co(e)}setAll(t){let e=De.emptyPath(),s={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,s,r),s={},r=[],e=h.popLast()}c?s[h.lastSegment()]=co(c):r.push(h.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,s,r)}delete(t){const e=this.field(t.popLast());Sa(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return jn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=e.mapValue.fields[t.get(s)];Sa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,s){ms(e,(r,a)=>t[r]=a);for(const r of s)delete t[r]}clone(){return new _n(co(this.value))}}function Tp(n){const t=[];return ms(n.fields,(e,s)=>{const r=new De([e]);if(Sa(s)){const a=Tp(s.mapValue).fields;if(a.length===0)t.push(r);else for(const c of a)t.push(r.child(c))}else t.push(r)}),new An(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t,e,s,r,a,c,h){this.key=t,this.documentType=e,this.version=s,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(t){return new Fe(t,0,Et.min(),Et.min(),Et.min(),_n.empty(),0)}static newFoundDocument(t,e,s,r){return new Fe(t,1,e,Et.min(),s,r,0)}static newNoDocument(t,e){return new Fe(t,2,e,Et.min(),Et.min(),_n.empty(),0)}static newUnknownDocument(t,e){return new Fe(t,3,e,Et.min(),Et.min(),_n.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Fe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t,e){this.position=t,this.inclusive=e}}function ff(n,t,e){let s=0;for(let r=0;r<n.position.length;r++){const a=t[r],c=n.position[r];if(a.field.isKeyField()?s=pt.comparator(pt.fromName(c.referenceValue),e.key):s=lr(c,e.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function df(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!jn(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,e="asc"){this.field=t,this.dir=e}}function tT(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{}class be extends Ep{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new nT(t,e,s):e==="array-contains"?new rT(t,s):e==="in"?new oT(t,s):e==="not-in"?new aT(t,s):e==="array-contains-any"?new lT(t,s):new be(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new iT(t,s):new sT(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(lr(e,this.value)):e!==null&&Ni(this.value)===Ni(e)&&this.matchesComparison(lr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends Ep{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new qn(t,e)}matches(t){return bp(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function bp(n){return n.op==="and"}function Ip(n){return eT(n)&&bp(n)}function eT(n){for(const t of n.filters)if(t instanceof qn)return!1;return!0}function Iu(n){if(n instanceof be)return n.field.canonicalString()+n.op.toString()+ur(n.value);if(Ip(n))return n.filters.map(t=>Iu(t)).join(",");{const t=n.filters.map(e=>Iu(e)).join(",");return`${n.op}(${t})`}}function Pp(n,t){return n instanceof be?function(s,r){return r instanceof be&&s.op===r.op&&s.field.isEqual(r.field)&&jn(s.value,r.value)}(n,t):n instanceof qn?function(s,r){return r instanceof qn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((a,c,h)=>a&&Pp(c,r.filters[h]),!0):!1}(n,t):void yt()}function Ap(n){return n instanceof be?function(e){return`${e.field.canonicalString()} ${e.op} ${ur(e.value)}`}(n):n instanceof qn?function(e){return e.op.toString()+" {"+e.getFilters().map(Ap).join(" ,")+"}"}(n):"Filter"}class nT extends be{constructor(t,e,s){super(t,e,s),this.key=pt.fromName(s.referenceValue)}matches(t){const e=pt.comparator(t.key,this.key);return this.matchesComparison(e)}}class iT extends be{constructor(t,e){super(t,"in",e),this.keys=xp("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class sT extends be{constructor(t,e){super(t,"not-in",e),this.keys=xp("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function xp(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(s=>pt.fromName(s.referenceValue))}class rT extends be{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return hc(e)&&Ao(e.arrayValue,this.value)}}class oT extends be{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ao(this.value.arrayValue,e)}}class aT extends be{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Ao(this.value.arrayValue,e)}}class lT extends be{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!hc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(s=>Ao(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t,e=null,s=[],r=[],a=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.le=null}}function pf(n,t=null,e=[],s=[],r=null,a=null,c=null){return new uT(n,t,e,s,r,a,c)}function fc(n){const t=It(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(s=>Iu(s)).join(","),e+="|ob:",e+=t.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),El(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(s=>ur(s)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(s=>ur(s)).join(",")),t.le=e}return t.le}function dc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!tT(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Pp(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!df(n.startAt,t.startAt)&&df(n.endAt,t.endAt)}function Pu(n){return pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,e=null,s=[],r=[],a=null,c="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function cT(n,t,e,s,r,a,c,h){return new Il(n,t,e,s,r,a,c,h)}function Cp(n){return new Il(n)}function mf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hT(n){return n.collectionGroup!==null}function ho(n){const t=It(n);if(t.he===null){t.he=[];const e=new Set;for(const a of t.explicitOrderBy)t.he.push(a),e.add(a.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Pe(De.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.he.push(new Ya(a,s))}),e.has(De.keyField().canonicalString())||t.he.push(new Ya(De.keyField(),s))}return t.he}function zn(n){const t=It(n);return t.Pe||(t.Pe=fT(t,ho(n))),t.Pe}function fT(n,t){if(n.limitType==="F")return pf(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new Ya(r.field,a)});const e=n.endAt?new Xa(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Xa(n.startAt.position,n.startAt.inclusive):null;return pf(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function Au(n,t,e){return new Il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Pl(n,t){return dc(zn(n),zn(t))&&n.limitType===t.limitType}function Sp(n){return`${fc(zn(n))}|lt:${n.limitType}`}function Ks(n){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(r=>Ap(r)).join(", ")}]`),El(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>ur(r)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>ur(r)).join(",")),`Target(${s})`}(zn(n))}; limitType=${n.limitType})`}function Al(n,t){return t.isFoundDocument()&&function(s,r){const a=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):pt.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(n,t)&&function(s,r){for(const a of ho(s))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(n,t)&&function(s,r){for(const a of s.filters)if(!a.matches(r))return!1;return!0}(n,t)&&function(s,r){return!(s.startAt&&!function(c,h,p){const g=ff(c,h,p);return c.inclusive?g<=0:g<0}(s.startAt,ho(s),r)||s.endAt&&!function(c,h,p){const g=ff(c,h,p);return c.inclusive?g>=0:g>0}(s.endAt,ho(s),r))}(n,t)}function dT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Rp(n){return(t,e)=>{let s=!1;for(const r of ho(n)){const a=pT(r,t,e);if(a!==0)return a;s=s||r.field.isKeyField()}return 0}}function pT(n,t,e){const s=n.field.isKeyField()?pt.comparator(t.key,e.key):function(a,c,h){const p=c.data.field(a),g=h.data.field(a);return p!==null&&g!==null?lr(p,g):yt()}(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[r,a]of s)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[e]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ms(this.inner,(e,s)=>{for(const[r,a]of s)t(r,a)})}isEmpty(){return dp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new fe(pt.comparator);function ci(){return mT}const Lp=new fe(pt.comparator);function io(...n){let t=Lp;for(const e of n)t=t.insert(e.key,e);return t}function Mp(n){let t=Lp;return n.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function os(){return fo()}function kp(){return fo()}function fo(){return new _s(n=>n.toString(),(n,t)=>n.isEqual(t))}const _T=new fe(pt.comparator),gT=new Pe(pt.comparator);function Vt(...n){let t=gT;for(const e of n)t=t.add(e);return t}const vT=new Pe(Ct);function yT(){return vT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ka(t)?"-0":t}}function Dp(n){return{integerValue:""+n}}function wT(n,t){return Zw(t)?Dp(t):pc(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this._=void 0}}function TT(n,t,e){return n instanceof Ja?function(r,a){const c={fields:{[_p]:{stringValue:mp},[vp]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&cc(a)&&(a=bl(a)),a&&(c.fields[gp]=a),{mapValue:c}}(e,t):n instanceof xo?Vp(n,t):n instanceof Co?Np(n,t):function(r,a){const c=Op(r,a),h=_f(c)+_f(r.Ie);return bu(c)&&bu(r.Ie)?Dp(h):pc(r.serializer,h)}(n,t)}function ET(n,t,e){return n instanceof xo?Vp(n,t):n instanceof Co?Np(n,t):e}function Op(n,t){return n instanceof tl?function(s){return bu(s)||function(a){return!!a&&"doubleValue"in a}(s)}(t)?t:{integerValue:0}:null}class Ja extends xl{}class xo extends xl{constructor(t){super(),this.elements=t}}function Vp(n,t){const e=Bp(t);for(const s of n.elements)e.some(r=>jn(r,s))||e.push(s);return{arrayValue:{values:e}}}class Co extends xl{constructor(t){super(),this.elements=t}}function Np(n,t){let e=Bp(t);for(const s of n.elements)e=e.filter(r=>!jn(r,s));return{arrayValue:{values:e}}}class tl extends xl{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function _f(n){return _e(n.integerValue||n.doubleValue)}function Bp(n){return hc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bT(n,t){return n.field.isEqual(t.field)&&function(s,r){return s instanceof xo&&r instanceof xo||s instanceof Co&&r instanceof Co?ar(s.elements,r.elements,jn):s instanceof tl&&r instanceof tl?jn(s.Ie,r.Ie):s instanceof Ja&&r instanceof Ja}(n.transform,t.transform)}class IT{constructor(t,e){this.version=t,this.transformResults=e}}class oi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new oi}static exists(t){return new oi(void 0,t)}static updateTime(t){return new oi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ra(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Cl{}function Fp(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new zp(n.key,oi.none()):new So(n.key,n.data,oi.none());{const e=n.data,s=_n.empty();let r=new Pe(De.comparator);for(let a of t.fields)if(!r.has(a)){let c=e.field(a);c===null&&a.length>1&&(a=a.popLast(),c=e.field(a)),c===null?s.delete(a):s.set(a,c),r=r.add(a)}return new gs(n.key,s,new An(r.toArray()),oi.none())}}function PT(n,t,e){n instanceof So?function(r,a,c){const h=r.value.clone(),p=vf(r.fieldTransforms,a,c.transformResults);h.setAll(p),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof gs?function(r,a,c){if(!Ra(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=vf(r.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(Up(r)),p.setAll(h),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,t,e):function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function po(n,t,e,s){return n instanceof So?function(a,c,h,p){if(!Ra(a.precondition,c))return h;const g=a.value.clone(),y=yf(a.fieldTransforms,p,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,t,e,s):n instanceof gs?function(a,c,h,p){if(!Ra(a.precondition,c))return h;const g=yf(a.fieldTransforms,p,c),y=c.data;return y.setAll(Up(a)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(n,t,e,s):function(a,c,h){return Ra(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function AT(n,t){let e=null;for(const s of n.fieldTransforms){const r=t.data.field(s.field),a=Op(s.transform,r||null);a!=null&&(e===null&&(e=_n.empty()),e.set(s.field,a))}return e||null}function gf(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ar(s,r,(a,c)=>bT(a,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class So extends Cl{constructor(t,e,s,r=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gs extends Cl{constructor(t,e,s,r,a=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Up(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}}),t}function vf(n,t,e){const s=new Map;Gt(n.length===e.length);for(let r=0;r<e.length;r++){const a=n[r],c=a.transform,h=t.data.field(a.field);s.set(a.field,ET(c,h,e[r]))}return s}function yf(n,t,e){const s=new Map;for(const r of n){const a=r.transform,c=e.data.field(r.field);s.set(r.field,TT(a,c,t))}return s}class zp extends Cl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xT extends Cl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t,e,s,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&PT(a,t,s[r])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=po(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=po(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=kp();return this.mutations.forEach(r=>{const a=t.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=e.has(r.key)?null:h;const p=Fp(c,h);p!==null&&s.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(Et.min())}),s}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&ar(this.mutations,t.mutations,(e,s)=>gf(e,s))&&ar(this.baseMutations,t.baseMutations,(e,s)=>gf(e,s))}}class mc{constructor(t,e,s,r){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=r}static from(t,e,s){Gt(t.mutations.length===s.length);let r=function(){return _T}();const a=t.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,s[c].version);return new mc(t,e,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Ut;function LT(n){switch(n){case G.OK:return yt();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return yt()}}function $p(n){if(n===void 0)return ui("GRPC error has no .code"),G.UNKNOWN;switch(n){case we.OK:return G.OK;case we.CANCELLED:return G.CANCELLED;case we.UNKNOWN:return G.UNKNOWN;case we.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case we.INTERNAL:return G.INTERNAL;case we.UNAVAILABLE:return G.UNAVAILABLE;case we.UNAUTHENTICATED:return G.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case we.NOT_FOUND:return G.NOT_FOUND;case we.ALREADY_EXISTS:return G.ALREADY_EXISTS;case we.PERMISSION_DENIED:return G.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case we.ABORTED:return G.ABORTED;case we.OUT_OF_RANGE:return G.OUT_OF_RANGE;case we.UNIMPLEMENTED:return G.UNIMPLEMENTED;case we.DATA_LOSS:return G.DATA_LOSS;default:return yt()}}(Ut=we||(we={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Si([4294967295,4294967295],0);function wf(n){const t=cp().encode(n),e=new ip;return e.update(t),new Uint8Array(e.digest())}function Tf(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Si([e,s],0),new Si([r,a],0)]}class _c{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new so(`Invalid padding: ${e}`);if(s<0)throw new so(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new so(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new so(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Si.fromNumber(this.Ee)}Ae(t,e,s){let r=t.add(e.multiply(Si.fromNumber(s)));return r.compare(MT)===1&&(r=new Si([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=wf(t),[s,r]=Tf(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(s,r,a);if(!this.Re(c))return!1}return!0}static create(t,e,s){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),c=new _c(a,r,e);return s.forEach(h=>c.insert(h)),c}insert(t){if(this.Ee===0)return;const e=wf(t),[s,r]=Tf(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(s,r,a);this.Ve(c)}}Ve(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class so extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,e,s,r,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const r=new Map;return r.set(t,Ro.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new Sl(Et.min(),r,new fe(Ct),ci(),Vt())}}class Ro{constructor(t,e,s,r,a){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new Ro(s,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t,e,s,r){this.me=t,this.removedTargetIds=e,this.key=s,this.fe=r}}class jp{constructor(t,e){this.targetId=t,this.ge=e}}class qp{constructor(t,e,s=Oe.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=r}}class Ef{constructor(){this.pe=0,this.ye=bf(),this.we=Oe.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Vt(),e=Vt(),s=Vt();return this.ye.forEach((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:s=s.add(r);break;default:yt()}}),new Ro(this.we,this.Se,t,e,s)}Me(){this.be=!1,this.ye=bf()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Gt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class kT{constructor(t){this.ke=t,this.qe=new Map,this.Qe=ci(),this.$e=wa(),this.Ue=wa(),this.Ke=new fe(Ct)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const s=this.He(e);switch(t.state){case 0:this.Je(e)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(e);break;case 3:this.Je(e)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),s.Ce(t.resumeToken));break;default:yt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((s,r)=>{this.Je(r)&&e(r)})}Ze(t){const e=t.targetId,s=t.ge.count,r=this.Xe(e);if(r){const a=r.target;if(Pu(a))if(s===0){const c=new pt(a.path);this.ze(e,c,Fe.newNoDocument(c,Et.min()))}else Gt(s===1);else{const c=this.et(e);if(c!==s){const h=this.tt(t),p=h?this.nt(h,t,c):1;if(p!==0){this.Ye(e);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,g)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:a=0}=e;let c,h;try{c=Vi(s).toUint8Array()}catch(p){if(p instanceof pp)return or("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new _c(c,r,a)}catch(p){return or(p instanceof so?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(t,e,s){return e.ge.count===s-this.st(t,e.targetId)?0:2}st(t,e){const s=this.ke.getRemoteKeysForTarget(e);let r=0;return s.forEach(a=>{const c=this.ke.it(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.ze(e,a,null),r++)}),r}ot(t){const e=new Map;this.qe.forEach((a,c)=>{const h=this.Xe(c);if(h){if(a.current&&Pu(h.target)){const p=new pt(h.target.path);this._t(p).has(c)||this.ut(c,p)||this.ze(c,p,Fe.newNoDocument(p,t))}a.ve&&(e.set(c,a.Fe()),a.Me())}});let s=Vt();this.Ue.forEach((a,c)=>{let h=!0;c.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(s=s.add(a))}),this.Qe.forEach((a,c)=>c.setReadTime(t));const r=new Sl(t,e,this.Ke,this.Qe,s);return this.Qe=ci(),this.$e=wa(),this.Ue=wa(),this.Ke=new fe(Ct),r}Ge(t,e){if(!this.Je(t))return;const s=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,s),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,s){if(!this.Je(t))return;const r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),s&&(this.Qe=this.Qe.insert(e,s))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Ef,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Pe(Ct),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Pe(Ct),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||st("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Ef),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function wa(){return new fe(pt.comparator)}function bf(){return new fe(pt.comparator)}const DT={asc:"ASCENDING",desc:"DESCENDING"},OT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VT={and:"AND",or:"OR"};class NT{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function xu(n,t){return n.useProto3Json||El(t)?t:{value:t}}function el(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hp(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function BT(n,t){return el(n,t.toTimestamp())}function $n(n){return Gt(!!n),Et.fromTimestamp(function(e){const s=Oi(e);return new Ie(s.seconds,s.nanos)}(n))}function gc(n,t){return Cu(n,t).canonicalString()}function Cu(n,t){const e=function(r){return new ue(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Zp(n){const t=ue.fromString(n);return Gt(Xp(t)),t}function Su(n,t){return gc(n.databaseId,t.path)}function Ql(n,t){const e=Zp(t);if(e.get(1)!==n.databaseId.projectId)throw new dt(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new dt(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new pt(Kp(e))}function Wp(n,t){return gc(n.databaseId,t)}function FT(n){const t=Zp(n);return t.length===4?ue.emptyPath():Kp(t)}function Ru(n){return new ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kp(n){return Gt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function If(n,t,e){return{name:Su(n,t),fields:e.value.mapValue.fields}}function UT(n,t){let e;if("targetChange"in t){t.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:yt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=function(g,y){return g.useProto3Json?(Gt(y===void 0||typeof y=="string"),Oe.fromBase64String(y||"")):(Gt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Oe.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(g){const y=g.code===void 0?G.UNKNOWN:$p(g.code);return new dt(y,g.message||"")}(c);e=new qp(s,r,a,h||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ql(n,s.document.name),a=$n(s.document.updateTime),c=s.document.createTime?$n(s.document.createTime):Et.min(),h=new _n({mapValue:{fields:s.document.fields}}),p=Fe.newFoundDocument(r,a,c,h),g=s.targetIds||[],y=s.removedTargetIds||[];e=new La(g,y,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Ql(n,s.document),a=s.readTime?$n(s.readTime):Et.min(),c=Fe.newNoDocument(r,a),h=s.removedTargetIds||[];e=new La([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Ql(n,s.document),a=s.removedTargetIds||[];e=new La([],a,r,null)}else{if(!("filter"in t))return yt();{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:a}=s,c=new RT(r,a),h=s.targetId;e=new jp(h,c)}}return e}function zT(n,t){let e;if(t instanceof So)e={update:If(n,t.key,t.value)};else if(t instanceof zp)e={delete:Su(n,t.key)};else if(t instanceof gs)e={update:If(n,t.key,t.data),updateMask:QT(t.fieldMask)};else{if(!(t instanceof xT))return yt();e={verify:Su(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(s=>function(a,c){const h=c.transform;if(h instanceof Ja)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof xo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Co)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof tl)return{fieldPath:c.field.canonicalString(),increment:h.Ie};throw yt()}(0,s))),t.precondition.isNone||(e.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:BT(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:yt()}(n,t.precondition)),e}function $T(n,t){return n&&n.length>0?(Gt(t!==void 0),n.map(e=>function(r,a){let c=r.updateTime?$n(r.updateTime):$n(a);return c.isEqual(Et.min())&&(c=$n(a)),new IT(c,r.transformResults||[])}(e,t))):[]}function jT(n,t){return{documents:[Wp(n,t.path)]}}function qT(n,t){const e={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=Wp(n,r);const a=function(g){if(g.length!==0)return Qp(qn.create(g,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const c=function(g){if(g.length!==0)return g.map(y=>function(x){return{field:Gs(x.field),direction:WT(x.dir)}}(y))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=xu(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{ht:e,parent:r}}function HT(n){let t=FT(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let r=null;if(s>0){Gt(s===1);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let a=[];e.where&&(a=function(T){const x=Gp(T);return x instanceof qn&&Ip(x)?x.getFilters():[x]}(e.where));let c=[];e.orderBy&&(c=function(T){return T.map(x=>function(j){return new Ya(Qs(j.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(x))}(e.orderBy));let h=null;e.limit&&(h=function(T){let x;return x=typeof T=="object"?T.value:T,El(x)?null:x}(e.limit));let p=null;e.startAt&&(p=function(T){const x=!!T.before,N=T.values||[];return new Xa(N,x)}(e.startAt));let g=null;return e.endAt&&(g=function(T){const x=!T.before,N=T.values||[];return new Xa(N,x)}(e.endAt)),cT(t,r,c,a,h,"F",p,g)}function ZT(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Gp(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=Qs(e.unaryFilter.field);return be.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Qs(e.unaryFilter.field);return be.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qs(e.unaryFilter.field);return be.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Qs(e.unaryFilter.field);return be.create(c,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(n):n.fieldFilter!==void 0?function(e){return be.create(Qs(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return qn.create(e.compositeFilter.filters.map(s=>Gp(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return yt()}}(e.compositeFilter.op))}(n):yt()}function WT(n){return DT[n]}function KT(n){return OT[n]}function GT(n){return VT[n]}function Gs(n){return{fieldPath:n.canonicalString()}}function Qs(n){return De.fromServerFormat(n.fieldPath)}function Qp(n){return n instanceof be?function(e){if(e.op==="=="){if(hf(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NAN"}};if(cf(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(hf(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NAN"}};if(cf(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(e.field),op:KT(e.op),value:e.value}}}(n):n instanceof qn?function(e){const s=e.getFilters().map(r=>Qp(r));return s.length===1?s[0]:{compositeFilter:{op:GT(e.op),filters:s}}}(n):yt()}function QT(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Xp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t,e,s,r,a=Et.min(),c=Et.min(),h=Oe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(t){return new Pi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t){this.Tt=t}}function YT(n){const t=HT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Au(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.Tn=new tE}addToCollectionParentIndex(t,e){return this.Tn.add(e),z.resolve()}getCollectionParents(t,e){return z.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return z.resolve()}deleteFieldIndex(t,e){return z.resolve()}deleteAllFieldIndexes(t){return z.resolve()}createTargetIndexes(t,e){return z.resolve()}getDocumentsMatchingTarget(t,e){return z.resolve(null)}getIndexType(t,e){return z.resolve(0)}getFieldIndexes(t,e){return z.resolve([])}getNextCollectionGroupToUpdate(t){return z.resolve(null)}getMinOffset(t,e){return z.resolve(Di.min())}getMinOffsetFromCollectionGroup(t,e){return z.resolve(Di.min())}updateCollectionGroup(t,e,s){return z.resolve()}updateIndexEntries(t,e){return z.resolve()}}class tE{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e]||new Pe(ue.comparator),a=!r.has(s);return this.index[e]=r.add(s),a}has(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e];return r&&r.has(s)}getEntries(t){return(this.index[t]||new Pe(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yp=41943040;class Ye{static withCacheSize(t){return new Ye(t,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ye.DEFAULT_COLLECTION_PERCENTILE=10,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ye.DEFAULT=new Ye(Yp,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ye.DISABLED=new Ye(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new cr(0)}static Kn(){return new cr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="LruGarbageCollector",eE=1048576;function xf([n,t],[e,s]){const r=Ct(n,e);return r===0?Ct(t,s):r}class nE{constructor(t){this.Hn=t,this.buffer=new Pe(xf),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();xf(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class iE{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){st(Af,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){vr(e)?st(Af,"Ignoring IndexedDB error during garbage collection: ",e):await gr(e)}await this.er(3e5)})}}class sE{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(s=>Math.floor(e/100*s))}nthSequenceNumber(t,e){if(e===0)return z.resolve(Tl.ae);const s=new nE(e);return this.tr.forEachTarget(t,r=>s.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>s.Zn(r))).next(()=>s.maxValue)}removeTargets(t,e,s){return this.tr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Pf)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pf):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let s,r,a,c,h,p,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(t,r))).next(T=>(s=T,h=Date.now(),this.removeTargets(t,s,e))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(T=>(g=Date.now(),Ws()<=zt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T})))}}function rE(n,t){return new sE(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.changes=new _s(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Fe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?z.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(t,e,s,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(s!==null&&po(s.mutation,r,An.empty(),Ie.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.getLocalViewOfDocuments(t,s,Vt()).next(()=>s))}getLocalViewOfDocuments(t,e,s=Vt()){const r=os();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,s).next(a=>{let c=io();return a.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const s=os();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,Vt()))}populateOverlays(t,e,s){const r=[];return s.forEach(a=>{e.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(t,r).next(a=>{a.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,s,r){let a=ci();const c=fo(),h=function(){return fo()}();return e.forEach((p,g)=>{const y=s.get(g.key);r.has(g.key)&&(y===void 0||y.mutation instanceof gs)?a=a.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),po(y.mutation,g,y.mutation.getFieldMask(),Ie.now())):c.set(g.key,An.empty())}),this.recalculateAndSaveOverlays(t,a).next(p=>(p.forEach((g,y)=>c.set(g,y)),e.forEach((g,y)=>{var T;return h.set(g,new aE(y,(T=c.get(g))!==null&&T!==void 0?T:null))}),h))}recalculateAndSaveOverlays(t,e){const s=fo();let r=new fe((c,h)=>c-h),a=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(p=>{const g=e.get(p);if(g===null)return;let y=s.get(p)||An.empty();y=h.applyToLocalView(g,y),s.set(p,y);const T=(r.get(h.batchId)||Vt()).add(p);r=r.insert(h.batchId,T)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,y=p.value,T=kp();y.forEach(x=>{if(!a.has(x)){const N=Fp(e.get(x),s.get(x));N!==null&&T.set(x,N),a=a.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,T))}return z.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,e,s,r){return function(c){return pt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):hT(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,r):this.getDocumentsMatchingCollectionQuery(t,e,s,r)}getNextDocuments(t,e,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,r).next(a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,r-a.size):z.resolve(os());let h=bo,p=a;return c.next(g=>z.forEach(g,(y,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),a.get(y)?z.resolve():this.remoteDocumentCache.getEntry(t,y).next(x=>{p=p.insert(y,x)}))).next(()=>this.populateOverlays(t,g,a)).next(()=>this.computeViews(t,p,g,Vt())).next(y=>({batchId:h,changes:Mp(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pt(e)).next(s=>{let r=io();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,s,r){const a=e.collectionGroup;let c=io();return this.indexManager.getCollectionParents(t,a).next(h=>z.forEach(h,p=>{const g=function(T,x){return new Il(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,p.child(a));return this.getDocumentsMatchingCollectionQuery(t,g,s,r).next(y=>{y.forEach((T,x)=>{c=c.insert(T,x)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,s,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,a,r))).next(c=>{a.forEach((p,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Fe.newInvalidDocument(y)))});let h=io();return c.forEach((p,g)=>{const y=a.get(p);y!==void 0&&po(y.mutation,g,An.empty(),Ie.now()),Al(e,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return z.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:$n(r.createTime)}}(e)),z.resolve()}getNamedQuery(t,e){return z.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:YT(r.bundledQuery),readTime:$n(r.readTime)}}(e)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.overlays=new fe(pt.comparator),this.Rr=new Map}getOverlay(t,e){return z.resolve(this.overlays.get(e))}getOverlays(t,e){const s=os();return z.forEach(e,r=>this.getOverlay(t,r).next(a=>{a!==null&&s.set(r,a)})).next(()=>s)}saveOverlays(t,e,s){return s.forEach((r,a)=>{this.Et(t,e,a)}),z.resolve()}removeOverlaysForBatchId(t,e,s){const r=this.Rr.get(s);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(s)),z.resolve()}getOverlaysForCollection(t,e,s){const r=os(),a=e.length+1,c=new pt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>s&&r.set(p.getKey(),p)}return z.resolve(r)}getOverlaysForCollectionGroup(t,e,s,r){let a=new fe((g,y)=>g-y);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>s){let y=a.get(g.largestBatchId);y===null&&(y=os(),a=a.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=os(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,y)=>h.set(g,y)),!(h.size()>=r)););return z.resolve(h)}Et(t,e,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.Rr.get(r.largestBatchId).delete(s.key);this.Rr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new ST(e,s));let a=this.Rr.get(e);a===void 0&&(a=Vt(),this.Rr.set(e,a)),this.Rr.set(e,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.sessionToken=Oe.EMPTY_BYTE_STRING}getSessionToken(t){return z.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.Vr=new Pe(Ce.mr),this.gr=new Pe(Ce.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const s=new Ce(t,e);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,e){t.forEach(s=>this.addReference(s,e))}removeReference(t,e){this.wr(new Ce(t,e))}Sr(t,e){t.forEach(s=>this.removeReference(s,e))}br(t){const e=new pt(new ue([])),s=new Ce(e,t),r=new Ce(e,t+1),a=[];return this.gr.forEachInRange([s,r],c=>{this.wr(c),a.push(c.key)}),a}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new pt(new ue([])),s=new Ce(e,t),r=new Ce(e,t+1);let a=Vt();return this.gr.forEachInRange([s,r],c=>{a=a.add(c.key)}),a}containsKey(t){const e=new Ce(t,0),s=this.Vr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class Ce{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return pt.comparator(t.key,e.key)||Ct(t.Cr,e.Cr)}static pr(t,e){return Ct(t.Cr,e.Cr)||pt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Pe(Ce.mr)}checkEmpty(t){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,r){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new CT(a,e,s,r);this.mutationQueue.push(c);for(const h of r)this.Mr=this.Mr.add(new Ce(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return z.resolve(c)}lookupMutationBatch(t,e){return z.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,r=this.Nr(s),a=r<0?0:r;return z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?uc:this.Fr-1)}getAllMutationBatches(t){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new Ce(e,0),r=new Ce(e,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([s,r],c=>{const h=this.Or(c.Cr);a.push(h)}),z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new Pe(Ct);return e.forEach(r=>{const a=new Ce(r,0),c=new Ce(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,c],h=>{s=s.add(h.Cr)})}),z.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,r=s.length+1;let a=s;pt.isDocumentKey(a)||(a=a.child(""));const c=new Ce(new pt(a),0);let h=new Pe(Ct);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===r&&(h=h.add(p.Cr)),!0)},c),z.resolve(this.Br(h))}Br(t){const e=[];return t.forEach(s=>{const r=this.Or(s);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Gt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return z.forEach(e.mutations,r=>{const a=new Ce(r.key,e.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,e){const s=new Ce(e,0),r=this.Mr.firstAfterOrEqual(s);return z.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,z.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t){this.kr=t,this.docs=function(){return new fe(pt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,r=this.docs.get(s),a=r?r.size:0,c=this.kr(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return z.resolve(s?s.document.mutableCopy():Fe.newInvalidDocument(e))}getEntries(t,e){let s=ci();return e.forEach(r=>{const a=this.docs.get(r);s=s.insert(r,a?a.document.mutableCopy():Fe.newInvalidDocument(r))}),z.resolve(s)}getDocumentsMatchingQuery(t,e,s,r){let a=ci();const c=e.path,h=new pt(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||$w(zw(y),s)<=0||(r.has(y.key)||Al(e,y))&&(a=a.insert(y.key,y.mutableCopy()))}return z.resolve(a)}getAllFromCollectionGroup(t,e,s,r){yt()}qr(t,e){return z.forEach(this.docs,s=>e(s))}newChangeBuffer(t){return new pE(this)}getSize(t){return z.resolve(this.size)}}class pE extends oE{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(s)}),z.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(t){this.persistence=t,this.Qr=new _s(e=>fc(e),dc),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.$r=0,this.Ur=new vc,this.targetCount=0,this.Kr=cr.Un()}forEachTarget(t,e){return this.Qr.forEach((s,r)=>e(r)),z.resolve()}getLastRemoteSnapshotVersion(t){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return z.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.$r&&(this.$r=e),z.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new cr(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,z.resolve()}updateTargetData(t,e){return this.zn(e),z.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,z.resolve()}removeTargets(t,e,s){let r=0;const a=[];return this.Qr.forEach((c,h)=>{h.sequenceNumber<=e&&s.get(h.targetId)===null&&(this.Qr.delete(c),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),z.waitFor(a).next(()=>r)}getTargetCount(t){return z.resolve(this.targetCount)}getTargetData(t,e){const s=this.Qr.get(e)||null;return z.resolve(s)}addMatchingKeys(t,e,s){return this.Ur.yr(e,s),z.resolve()}removeMatchingKeys(t,e,s){this.Ur.Sr(e,s);const r=this.persistence.referenceDelegate,a=[];return r&&e.forEach(c=>{a.push(r.markPotentiallyOrphaned(t,c))}),z.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),z.resolve()}getMatchingKeysForTargetId(t,e){const s=this.Ur.vr(e);return z.resolve(s)}containsKey(t,e){return z.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new Tl(0),this.zr=!1,this.zr=!0,this.jr=new hE,this.referenceDelegate=t(this),this.Hr=new mE(this),this.indexManager=new JT,this.remoteDocumentCache=function(r){return new dE(r)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new XT(e),this.Yr=new uE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new cE,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.Wr[t.toKey()];return s||(s=new fE(e,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,s){st("MemoryPersistence","Starting transaction:",t);const r=new _E(this.Gr.next());return this.referenceDelegate.Zr(),s(r).next(a=>this.referenceDelegate.Xr(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}ei(t,e){return z.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,e)))}}class _E extends qw{constructor(t){super(),this.currentSequenceNumber=t}}class yc{constructor(t){this.persistence=t,this.ti=new vc,this.ni=null}static ri(t){return new yc(t)}get ii(){if(this.ni)return this.ni;throw yt()}addReference(t,e,s){return this.ti.addReference(s,e),this.ii.delete(s.toString()),z.resolve()}removeReference(t,e,s){return this.ti.removeReference(s,e),this.ii.add(s.toString()),z.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),z.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(r=>this.ii.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(a=>this.ii.add(a.toString()))}).next(()=>s.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.ii,s=>{const r=pt.fromPath(s);return this.si(t,r).next(a=>{a||e.removeEntry(r,Et.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(s=>{s?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return z.or([()=>z.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class nl{constructor(t,e){this.persistence=t,this.oi=new _s(s=>Ww(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=rE(this,e)}static ri(t,e){return new nl(t,e)}Zr(){}Xr(t){return z.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>e.next(r=>s+r))}sr(t){let e=0;return this.rr(t,s=>{e++}).next(()=>e)}rr(t,e){return z.forEach(this.oi,(s,r)=>this.ar(t,s,r).next(a=>a?z.resolve():e(r)))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.qr(t,c=>this.ar(t,c,e).next(h=>{h||(s++,a.removeEntry(c,Et.min()))})).next(()=>a.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),z.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),z.resolve()}removeReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),z.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),z.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ca(t.data.value)),e}ar(t,e,s){return z.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.oi.get(e);return z.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(t,e,s,r){this.targetId=t,this.fromCache=e,this.Hi=s,this.Ji=r}static Yi(t,e){let s=Vt(),r=Vt();for(const a of e.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new wc(t,e.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return hy()?8:Hw(uy())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,s,r){const a={result:null};return this.rs(t,e).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ss(t,e,r,s).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new gE;return this._s(t,e,c).next(h=>{if(a.result=h,this.Xi)return this.us(t,e,c,h.size)})}).next(()=>a.result)}us(t,e,s,r){return s.documentReadCount<this.es?(Ws()<=zt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Ks(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),z.resolve()):(Ws()<=zt.DEBUG&&st("QueryEngine","Query:",Ks(e),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ts*r?(Ws()<=zt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Ks(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zn(e))):z.resolve())}rs(t,e){if(mf(e))return z.resolve(null);let s=zn(e);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Au(e,null,"F"),s=zn(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next(a=>{const c=Vt(...a);return this.ns.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,s).next(p=>{const g=this.cs(e,h);return this.ls(e,g,c,p.readTime)?this.rs(t,Au(e,null,"F")):this.hs(t,g,e,p)}))})))}ss(t,e,s,r){return mf(e)||r.isEqual(Et.min())?z.resolve(null):this.ns.getDocuments(t,s).next(a=>{const c=this.cs(e,a);return this.ls(e,c,s,r)?z.resolve(null):(Ws()<=zt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ks(e)),this.hs(t,c,e,Uw(r,bo)).next(h=>h))})}cs(t,e){let s=new Pe(Rp(t));return e.forEach((r,a)=>{Al(t,a)&&(s=s.add(a))}),s}ls(t,e,s,r){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}_s(t,e,s){return Ws()<=zt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Ks(e)),this.ns.getDocumentsMatchingQuery(t,e,Di.min(),s)}hs(t,e,s,r){return this.ns.getDocumentsMatchingQuery(t,s,r).next(a=>(e.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="LocalStore",yE=3e8;class wE{constructor(t,e,s,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new fe(Ct),this.Is=new _s(a=>fc(a),dc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lE(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function TE(n,t,e,s){return new wE(n,t,e,s)}async function tm(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",s=>{let r;return e.mutationQueue.getAllMutationBatches(s).next(a=>(r=a,e.As(t),e.mutationQueue.getAllMutationBatches(s))).next(a=>{const c=[],h=[];let p=Vt();for(const g of r){c.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of a){h.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return e.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:c,addedBatchIds:h}))})})}function EE(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),a=e.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,g,y){const T=g.batch,x=T.keys();let N=z.resolve();return x.forEach(j=>{N=N.next(()=>y.getEntry(p,j)).next(H=>{const $=g.docVersions.get(j);Gt($!==null),H.version.compareTo($)<0&&(T.applyToRemoteDocument(H,g),H.isValidDocument()&&(H.setReadTime(g.commitVersion),y.addEntry(H)))})}),N.next(()=>h.mutationQueue.removeMutationBatch(p,T))}(e,s,t,a).next(()=>a.apply(s)).next(()=>e.mutationQueue.performConsistencyCheck(s)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(h){let p=Vt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(t))).next(()=>e.localDocuments.getDocuments(s,r))})}function em(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function bE(n,t){const e=It(n),s=t.snapshotVersion;let r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;const h=[];t.targetChanges.forEach((y,T)=>{const x=r.get(T);if(!x)return;h.push(e.Hr.removeMatchingKeys(a,y.removedDocuments,T).next(()=>e.Hr.addMatchingKeys(a,y.addedDocuments,T)));let N=x.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(T)!==null?N=N.withResumeToken(Oe.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):y.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(y.resumeToken,s)),r=r.insert(T,N),function(H,$,ot){return H.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=yE?!0:ot.addedDocuments.size+ot.modifiedDocuments.size+ot.removedDocuments.size>0}(x,N,y)&&h.push(e.Hr.updateTargetData(a,N))});let p=ci(),g=Vt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(a,y))}),h.push(IE(a,c,t.documentUpdates).next(y=>{p=y.Vs,g=y.fs})),!s.isEqual(Et.min())){const y=e.Hr.getLastRemoteSnapshotVersion(a).next(T=>e.Hr.setTargetsMetadata(a,a.currentSequenceNumber,s));h.push(y)}return z.waitFor(h).next(()=>c.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,p,g)).next(()=>p)}).then(a=>(e.Ts=r,a))}function IE(n,t,e){let s=Vt(),r=Vt();return e.forEach(a=>s=s.add(a)),t.getEntries(n,s).next(a=>{let c=ci();return e.forEach((h,p)=>{const g=a.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(Et.min())?(t.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),c=c.insert(h,p)):st(Tc,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{Vs:c,fs:r}})}function PE(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=uc),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function AE(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return e.Hr.getTargetData(s,t).next(a=>a?(r=a,z.resolve(r)):e.Hr.allocateTargetId(s).next(c=>(r=new Pi(t,c,"TargetPurposeListen",s.currentSequenceNumber),e.Hr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=e.Ts.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(s.targetId,s),e.Is.set(t,s.targetId)),s})}async function Lu(n,t,e){const s=It(n),r=s.Ts.get(t),a=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",a,c=>s.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!vr(c))throw c;st(Tc,`Failed to update sequence numbers for target ${t}: ${c}`)}s.Ts=s.Ts.remove(t),s.Is.delete(r.target)}function Cf(n,t,e){const s=It(n);let r=Et.min(),a=Vt();return s.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,y){const T=It(p),x=T.Is.get(y);return x!==void 0?z.resolve(T.Ts.get(x)):T.Hr.getTargetData(g,y)}(s,c,zn(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{a=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(c,t,e?r:Et.min(),e?a:Vt())).next(h=>(xE(s,dT(t),h),{documents:h,gs:a})))}function xE(n,t,e){let s=n.Es.get(t)||Et.min();e.forEach((r,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),n.Es.set(t,s)}class Sf{constructor(){this.activeTargetIds=yT()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class CE{constructor(){this.ho=new Sf,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,s){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Sf,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="ConnectivityMonitor";class Lf{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){st(Rf,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){st(Rf,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta=null;function Mu(){return Ta===null?Ta=function(){return 268435456+Math.round(2147483648*Math.random())}():Ta++,"0x"+Ta.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="RestConnection",RE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LE{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${s}/databases/${r}`,this.wo=this.databaseId.database===Ga?`project_id=${s}`:`project_id=${s}&database_id=${r}`}So(t,e,s,r,a){const c=Mu(),h=this.bo(t,e.toUriEncodedString());st(Xl,`Sending RPC '${t}' ${c}:`,h,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,r,a),this.vo(t,h,p,s).then(g=>(st(Xl,`Received RPC '${t}' ${c}: `,g),g),g=>{throw or(Xl,`RPC '${t}' ${c} failed with error: `,g,"url: ",h,"request:",s),g})}Co(t,e,s,r,a,c){return this.So(t,e,s,r,a)}Do(t,e,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_r}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,a)=>t[a]=r),s&&s.headers.forEach((r,a)=>t[a]=r)}bo(t,e){const s=RE[t];return`${this.po}/v1/${e}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne="WebChannelConnection";class kE extends LE{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,s,r){const a=Mu();return new Promise((c,h)=>{const p=new sp;p.setWithCredentials(!0),p.listenOnce(rp.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case xa.NO_ERROR:const y=p.getResponseJson();st(Ne,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(y)),c(y);break;case xa.TIMEOUT:st(Ne,`RPC '${t}' ${a} timed out`),h(new dt(G.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:const T=p.getStatus();if(st(Ne,`RPC '${t}' ${a} failed with status:`,T,"response text:",p.getResponseText()),T>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x==null?void 0:x.error;if(N&&N.status&&N.message){const j=function($){const ot=$.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(ot)>=0?ot:G.UNKNOWN}(N.status);h(new dt(j,N.message))}else h(new dt(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new dt(G.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{st(Ne,`RPC '${t}' ${a} completed.`)}});const g=JSON.stringify(r);st(Ne,`RPC '${t}' ${a} sending request:`,r),p.send(e,"POST",g,s,15)})}Wo(t,e,s){const r=Mu(),a=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=lp(),h=ap(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,e,s),p.encodeInitMessageHeaders=!0;const y=a.join("");st(Ne,`Creating RPC '${t}' stream ${r}: ${y}`,p);const T=c.createWebChannel(y,p);let x=!1,N=!1;const j=new ME({Fo:$=>{N?st(Ne,`Not sending because RPC '${t}' stream ${r} is closed:`,$):(x||(st(Ne,`Opening RPC '${t}' stream ${r} transport.`),T.open(),x=!0),st(Ne,`RPC '${t}' stream ${r} sending:`,$),T.send($))},Mo:()=>T.close()}),H=($,ot,lt)=>{$.listen(ot,nt=>{try{lt(nt)}catch(bt){setTimeout(()=>{throw bt},0)}})};return H(T,no.EventType.OPEN,()=>{N||(st(Ne,`RPC '${t}' stream ${r} transport opened.`),j.Qo())}),H(T,no.EventType.CLOSE,()=>{N||(N=!0,st(Ne,`RPC '${t}' stream ${r} transport closed`),j.Uo())}),H(T,no.EventType.ERROR,$=>{N||(N=!0,or(Ne,`RPC '${t}' stream ${r} transport errored:`,$),j.Uo(new dt(G.UNAVAILABLE,"The operation could not be completed")))}),H(T,no.EventType.MESSAGE,$=>{var ot;if(!N){const lt=$.data[0];Gt(!!lt);const nt=lt,bt=(nt==null?void 0:nt.error)||((ot=nt[0])===null||ot===void 0?void 0:ot.error);if(bt){st(Ne,`RPC '${t}' stream ${r} received error:`,bt);const qt=bt.status;let Mt=function(b){const S=we[b];if(S!==void 0)return $p(S)}(qt),R=bt.message;Mt===void 0&&(Mt=G.INTERNAL,R="Unknown error status: "+qt+" with message "+bt.message),N=!0,j.Uo(new dt(Mt,R)),T.close()}else st(Ne,`RPC '${t}' stream ${r} received:`,lt),j.Ko(lt)}}),H(h,op.STAT_EVENT,$=>{$.stat===wu.PROXY?st(Ne,`RPC '${t}' stream ${r} detected buffering proxy`):$.stat===wu.NOPROXY&&st(Ne,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{j.$o()},0),j}}function Yl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(n){return new NT(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,e,s=1e3,r=1.5,a=6e4){this.Ti=t,this.timerId=e,this.Go=s,this.zo=r,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-s);r>0&&st("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="PersistentStream";class im{constructor(t,e,s,r,a,c,h,p){this.Ti=t,this.n_=s,this.r_=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new nm(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===G.RESOURCE_EXHAUSTED?(ui(e.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.i_===e&&this.V_(s,r)},s=>{t(()=>{const r=new dt(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(r)})})}V_(t,e){const s=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{s(()=>this.m_(r))}),this.stream.onMessage(r=>{s(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return st(Mf,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(st(Mf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DE extends im{constructor(t,e,s,r,a,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,r,c),this.serializer=a}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=UT(this.serializer,t),s=function(a){if(!("targetChange"in a))return Et.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Et.min():c.readTime?$n(c.readTime):Et.min()}(t);return this.listener.p_(e,s)}y_(t){const e={};e.database=Ru(this.serializer),e.addTarget=function(a,c){let h;const p=c.target;if(h=Pu(p)?{documents:jT(a,p)}:{query:qT(a,p).ht},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=Hp(a,c.resumeToken);const g=xu(a,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(Et.min())>0){h.readTime=el(a,c.snapshotVersion.toTimestamp());const g=xu(a,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,t);const s=ZT(this.serializer,t);s&&(e.labels=s),this.I_(e)}w_(t){const e={};e.database=Ru(this.serializer),e.removeTarget=t,this.I_(e)}}class OE extends im{constructor(t,e,s,r,a,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,r,c),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return Gt(!!t.streamToken),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=$T(t.writeResults,t.commitTime),s=$n(t.commitTime);return this.listener.v_(s,e)}C_(){const t={};t.database=Ru(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(s=>zT(this.serializer,s))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{}class NE extends VE{constructor(t,e,s,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new dt(G.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.So(t,Cu(e,s),r,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new dt(G.UNKNOWN,a.toString())})}Co(t,e,s,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Co(t,Cu(e,s),r,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new dt(G.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class BE{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ui(e),this.N_=!1):st("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="RemoteStore";class FE{constructor(t,e,s,r,a){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(c=>{s.enqueueAndForget(async()=>{vs(this)&&(st(ds,"Restarting streams for network reachability change."),await async function(p){const g=It(p);g.W_.add(4),await Lo(g),g.j_.set("Unknown"),g.W_.delete(4),await Ll(g)}(this))})}),this.j_=new BE(s,r)}}async function Ll(n){if(vs(n))for(const t of n.G_)await t(!0)}async function Lo(n){for(const t of n.G_)await t(!1)}function sm(n,t){const e=It(n);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),Pc(e)?Ic(e):yr(e).c_()&&bc(e,t))}function Ec(n,t){const e=It(n),s=yr(e);e.K_.delete(t),s.c_()&&rm(e,t),e.K_.size===0&&(s.c_()?s.P_():vs(e)&&e.j_.set("Unknown"))}function bc(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}yr(n).y_(t)}function rm(n,t){n.H_.Ne(t),yr(n).w_(t)}function Ic(n){n.H_=new kT({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.K_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),yr(n).start(),n.j_.B_()}function Pc(n){return vs(n)&&!yr(n).u_()&&n.K_.size>0}function vs(n){return It(n).W_.size===0}function om(n){n.H_=void 0}async function UE(n){n.j_.set("Online")}async function zE(n){n.K_.forEach((t,e)=>{bc(n,t)})}async function $E(n,t){om(n),Pc(n)?(n.j_.q_(t),Ic(n)):n.j_.set("Unknown")}async function jE(n,t,e){if(n.j_.set("Online"),t instanceof qp&&t.state===2&&t.cause)try{await async function(r,a){const c=a.cause;for(const h of a.targetIds)r.K_.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.K_.delete(h),r.H_.removeTarget(h))}(n,t)}catch(s){st(ds,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await il(n,s)}else if(t instanceof La?n.H_.We(t):t instanceof jp?n.H_.Ze(t):n.H_.je(t),!e.isEqual(Et.min()))try{const s=await em(n.localStore);e.compareTo(s)>=0&&await function(a,c){const h=a.H_.ot(c);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=a.K_.get(g);y&&a.K_.set(g,y.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,g)=>{const y=a.K_.get(p);if(!y)return;a.K_.set(p,y.withResumeToken(Oe.EMPTY_BYTE_STRING,y.snapshotVersion)),rm(a,p);const T=new Pi(y.target,p,g,y.sequenceNumber);bc(a,T)}),a.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(s){st(ds,"Failed to raise snapshot:",s),await il(n,s)}}async function il(n,t,e){if(!vr(t))throw t;n.W_.add(1),await Lo(n),n.j_.set("Offline"),e||(e=()=>em(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{st(ds,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await Ll(n)})}function am(n,t){return t().catch(e=>il(n,e,t))}async function Ml(n){const t=It(n),e=Bi(t);let s=t.U_.length>0?t.U_[t.U_.length-1].batchId:uc;for(;qE(t);)try{const r=await PE(t.localStore,s);if(r===null){t.U_.length===0&&e.P_();break}s=r.batchId,HE(t,r)}catch(r){await il(t,r)}lm(t)&&um(t)}function qE(n){return vs(n)&&n.U_.length<10}function HE(n,t){n.U_.push(t);const e=Bi(n);e.c_()&&e.S_&&e.b_(t.mutations)}function lm(n){return vs(n)&&!Bi(n).u_()&&n.U_.length>0}function um(n){Bi(n).start()}async function ZE(n){Bi(n).C_()}async function WE(n){const t=Bi(n);for(const e of n.U_)t.b_(e.mutations)}async function KE(n,t,e){const s=n.U_.shift(),r=mc.from(s,t,e);await am(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Ml(n)}async function GE(n,t){t&&Bi(n).S_&&await async function(s,r){if(function(c){return LT(c)&&c!==G.ABORTED}(r.code)){const a=s.U_.shift();Bi(s).h_(),await am(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,r)),await Ml(s)}}(n,t),lm(n)&&um(n)}async function kf(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),st(ds,"RemoteStore received new credentials");const s=vs(e);e.W_.add(3),await Lo(e),s&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Ll(e)}async function QE(n,t){const e=It(n);t?(e.W_.delete(2),await Ll(e)):t||(e.W_.add(2),await Lo(e),e.j_.set("Unknown"))}function yr(n){return n.J_||(n.J_=function(e,s,r){const a=It(e);return a.M_(),new DE(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{xo:UE.bind(null,n),No:zE.bind(null,n),Lo:$E.bind(null,n),p_:jE.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),Pc(n)?Ic(n):n.j_.set("Unknown")):(await n.J_.stop(),om(n))})),n.J_}function Bi(n){return n.Y_||(n.Y_=function(e,s,r){const a=It(e);return a.M_(),new OE(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:ZE.bind(null,n),Lo:GE.bind(null,n),D_:WE.bind(null,n),v_:KE.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await Ml(n)):(await n.Y_.stop(),n.U_.length>0&&(st(ds,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,e,s,r,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=r,this.removalCallback=a,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,r,a){const c=Date.now()+s,h=new Ac(t,e,c,r,a);return h.start(s),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(G.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xc(n,t){if(ui("AsyncQueue",`${t}: ${n}`),vr(n))return new dt(G.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{static emptySet(t){return new nr(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||pt.comparator(e.key,s.key):(e,s)=>pt.comparator(e.key,s.key),this.keyedMap=io(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,s)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof nr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=s.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new nr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this.Z_=new fe(pt.comparator)}track(t){const e=t.doc.key,s=this.Z_.get(e);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(e):t.type===1&&s.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):yt():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,s)=>{t.push(s)}),t}}class hr{constructor(t,e,s,r,a,c,h,p,g){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,e,s,r,a){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new hr(t,e,nr.emptySet(e),c,s,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Pl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==s[r].type||!e[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class YE{constructor(){this.queries=Of(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,s){const r=It(e),a=r.queries;r.queries=Of(),a.forEach((c,h)=>{for(const p of h.ta)p.onError(s)})})(this,new dt(G.ABORTED,"Firestore shutting down"))}}function Of(){return new _s(n=>Sp(n),Pl)}async function JE(n,t){const e=It(n);let s=3;const r=t.query;let a=e.queries.get(r);a?!a.na()&&t.ra()&&(s=2):(a=new XE,s=t.ra()?0:1);try{switch(s){case 0:a.ea=await e.onListen(r,!0);break;case 1:a.ea=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const h=xc(c,`Initialization of query '${Ks(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,a),a.ta.push(t),t.sa(e.onlineState),a.ea&&t.oa(a.ea)&&Cc(e)}async function t0(n,t){const e=It(n),s=t.query;let r=3;const a=e.queries.get(s);if(a){const c=a.ta.indexOf(t);c>=0&&(a.ta.splice(c,1),a.ta.length===0?r=t.ra()?0:1:!a.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function e0(n,t){const e=It(n);let s=!1;for(const r of t){const a=r.query,c=e.queries.get(a);if(c){for(const h of c.ta)h.oa(r)&&(s=!0);c.ea=r}}s&&Cc(e)}function n0(n,t,e){const s=It(n),r=s.queries.get(t);if(r)for(const a of r.ta)a.onError(e);s.queries.delete(t)}function Cc(n){n.ia.forEach(t=>{t.next()})}var ku,Vf;(Vf=ku||(ku={}))._a="default",Vf.Cache="cache";class i0{constructor(t,e,s){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new hr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const s=e!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=hr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==ku.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(t){this.key=t}}class hm{constructor(t){this.key=t}}class s0{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Vt(),this.mutatedKeys=Vt(),this.ya=Rp(t),this.wa=new nr(this.ya)}get Sa(){return this.fa}ba(t,e){const s=e?e.Da:new Df,r=e?e.wa:this.wa;let a=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const p=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((y,T)=>{const x=r.get(y),N=Al(this.query,T)?T:null,j=!!x&&this.mutatedKeys.has(x.key),H=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let $=!1;x&&N?x.data.isEqual(N.data)?j!==H&&(s.track({type:3,doc:N}),$=!0):this.va(x,N)||(s.track({type:2,doc:N}),$=!0,(p&&this.ya(N,p)>0||g&&this.ya(N,g)<0)&&(h=!0)):!x&&N?(s.track({type:0,doc:N}),$=!0):x&&!N&&(s.track({type:1,doc:x}),$=!0,(p||g)&&(h=!0)),$&&(N?(c=c.add(N),a=H?a.add(y):a.delete(y)):(c=c.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),a=a.delete(y.key),s.track({type:1,doc:y})}return{wa:c,Da:s,ls:h,mutatedKeys:a}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,r){const a=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const c=t.Da.X_();c.sort((y,T)=>function(N,j){const H=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return H(N)-H(j)}(y.type,T.type)||this.ya(y.doc,T.doc)),this.Ca(s),r=r!=null&&r;const h=e&&!r?this.Fa():[],p=this.pa.size===0&&this.current&&!r?1:0,g=p!==this.ga;return this.ga=p,c.length!==0||g?{snapshot:new hr(this.query,t.wa,a,c,t.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Df,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Vt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const e=[];return t.forEach(s=>{this.pa.has(s)||e.push(new hm(s))}),this.pa.forEach(s=>{t.has(s)||e.push(new cm(s))}),e}Oa(t){this.fa=t.gs,this.pa=Vt();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return hr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Sc="SyncEngine";class r0{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class o0{constructor(t){this.key=t,this.Ba=!1}}class a0{constructor(t,e,s,r,a,c){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new _s(h=>Sp(h),Pl),this.qa=new Map,this.Qa=new Set,this.$a=new fe(pt.comparator),this.Ua=new Map,this.Ka=new vc,this.Wa={},this.Ga=new Map,this.za=cr.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function l0(n,t,e=!0){const s=gm(n);let r;const a=s.ka.get(t);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Na()):r=await fm(s,t,e,!0),r}async function u0(n,t){const e=gm(n);await fm(e,t,!0,!1)}async function fm(n,t,e,s){const r=await AE(n.localStore,zn(t)),a=r.targetId,c=n.sharedClientState.addLocalQueryTarget(a,e);let h;return s&&(h=await c0(n,t,a,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&sm(n.remoteStore,r),h}async function c0(n,t,e,s,r){n.Ha=(T,x,N)=>async function(H,$,ot,lt){let nt=$.view.ba(ot);nt.ls&&(nt=await Cf(H.localStore,$.query,!1).then(({documents:R})=>$.view.ba(R,nt)));const bt=lt&&lt.targetChanges.get($.targetId),qt=lt&&lt.targetMismatches.get($.targetId)!=null,Mt=$.view.applyChanges(nt,H.isPrimaryClient,bt,qt);return Bf(H,$.targetId,Mt.Ma),Mt.snapshot}(n,T,x,N);const a=await Cf(n.localStore,t,!0),c=new s0(t,a.gs),h=c.ba(a.documents),p=Ro.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",r),g=c.applyChanges(h,n.isPrimaryClient,p);Bf(n,e,g.Ma);const y=new r0(t,e,c);return n.ka.set(t,y),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),g.snapshot}async function h0(n,t,e){const s=It(n),r=s.ka.get(t),a=s.qa.get(r.targetId);if(a.length>1)return s.qa.set(r.targetId,a.filter(c=>!Pl(c,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Lu(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),e&&Ec(s.remoteStore,r.targetId),Du(s,r.targetId)}).catch(gr)):(Du(s,r.targetId),await Lu(s.localStore,r.targetId,!0))}async function f0(n,t){const e=It(n),s=e.ka.get(t),r=e.qa.get(s.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),Ec(e.remoteStore,s.targetId))}async function d0(n,t,e){const s=w0(n);try{const r=await function(c,h){const p=It(c),g=Ie.now(),y=h.reduce((N,j)=>N.add(j.key),Vt());let T,x;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let j=ci(),H=Vt();return p.ds.getEntries(N,y).next($=>{j=$,j.forEach((ot,lt)=>{lt.isValidDocument()||(H=H.add(ot))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,j)).next($=>{T=$;const ot=[];for(const lt of h){const nt=AT(lt,T.get(lt.key).overlayedDocument);nt!=null&&ot.push(new gs(lt.key,nt,Tp(nt.value.mapValue),oi.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,ot,h)}).next($=>{x=$;const ot=$.applyToLocalDocumentSet(T,H);return p.documentOverlayCache.saveOverlays(N,$.batchId,ot)})}).then(()=>({batchId:x.batchId,changes:Mp(T)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(c,h,p){let g=c.Wa[c.currentUser.toKey()];g||(g=new fe(Ct)),g=g.insert(h,p),c.Wa[c.currentUser.toKey()]=g}(s,r.batchId,e),await Mo(s,r.changes),await Ml(s.remoteStore)}catch(r){const a=xc(r,"Failed to persist write");e.reject(a)}}async function dm(n,t){const e=It(n);try{const s=await bE(e.localStore,t);t.targetChanges.forEach((r,a)=>{const c=e.Ua.get(a);c&&(Gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Ba=!0:r.modifiedDocuments.size>0?Gt(c.Ba):r.removedDocuments.size>0&&(Gt(c.Ba),c.Ba=!1))}),await Mo(e,s,t)}catch(s){await gr(s)}}function Nf(n,t,e){const s=It(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const r=[];s.ka.forEach((a,c)=>{const h=c.view.sa(t);h.snapshot&&r.push(h.snapshot)}),function(c,h){const p=It(c);p.onlineState=h;let g=!1;p.queries.forEach((y,T)=>{for(const x of T.ta)x.sa(h)&&(g=!0)}),g&&Cc(p)}(s.eventManager,t),r.length&&s.La.p_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function p0(n,t,e){const s=It(n);s.sharedClientState.updateQueryState(t,"rejected",e);const r=s.Ua.get(t),a=r&&r.key;if(a){let c=new fe(pt.comparator);c=c.insert(a,Fe.newNoDocument(a,Et.min()));const h=Vt().add(a),p=new Sl(Et.min(),new Map,new fe(Ct),c,h);await dm(s,p),s.$a=s.$a.remove(a),s.Ua.delete(t),Rc(s)}else await Lu(s.localStore,t,!1).then(()=>Du(s,t,e)).catch(gr)}async function m0(n,t){const e=It(n),s=t.batch.batchId;try{const r=await EE(e.localStore,t);mm(e,s,null),pm(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await Mo(e,r)}catch(r){await gr(r)}}async function _0(n,t,e){const s=It(n);try{const r=await function(c,h){const p=It(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return p.mutationQueue.lookupMutationBatch(g,h).next(T=>(Gt(T!==null),y=T.keys(),p.mutationQueue.removeMutationBatch(g,T))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>p.localDocuments.getDocuments(g,y))})}(s.localStore,t);mm(s,t,e),pm(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await Mo(s,r)}catch(r){await gr(r)}}function pm(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function mm(n,t,e){const s=It(n);let r=s.Wa[s.currentUser.toKey()];if(r){const a=r.get(t);a&&(e?a.reject(e):a.resolve(),r=r.remove(t)),s.Wa[s.currentUser.toKey()]=r}}function Du(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.qa.get(t))n.ka.delete(s),e&&n.La.Ja(s,e);n.qa.delete(t),n.isPrimaryClient&&n.Ka.br(t).forEach(s=>{n.Ka.containsKey(s)||_m(n,s)})}function _m(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(Ec(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ua.delete(e),Rc(n))}function Bf(n,t,e){for(const s of e)s instanceof cm?(n.Ka.addReference(s.key,t),g0(n,s)):s instanceof hm?(st(Sc,"Document no longer in limbo: "+s.key),n.Ka.removeReference(s.key,t),n.Ka.containsKey(s.key)||_m(n,s.key)):yt()}function g0(n,t){const e=t.key,s=e.path.canonicalString();n.$a.get(e)||n.Qa.has(s)||(st(Sc,"New document in limbo: "+e),n.Qa.add(s),Rc(n))}function Rc(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new pt(ue.fromString(t)),s=n.za.next();n.Ua.set(s,new o0(e)),n.$a=n.$a.insert(e,s),sm(n.remoteStore,new Pi(zn(Cp(e.path)),s,"TargetPurposeLimboResolution",Tl.ae))}}async function Mo(n,t,e){const s=It(n),r=[],a=[],c=[];s.ka.isEmpty()||(s.ka.forEach((h,p)=>{c.push(s.Ha(p,t,e).then(g=>{var y;if((g||e)&&s.isPrimaryClient){const T=g?!g.fromCache:(y=e==null?void 0:e.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){r.push(g);const T=wc.Yi(p.targetId,g);a.push(T)}}))}),await Promise.all(c),s.La.p_(r),await async function(p,g){const y=It(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>z.forEach(g,x=>z.forEach(x.Hi,N=>y.persistence.referenceDelegate.addReference(T,x.targetId,N)).next(()=>z.forEach(x.Ji,N=>y.persistence.referenceDelegate.removeReference(T,x.targetId,N)))))}catch(T){if(!vr(T))throw T;st(Tc,"Failed to update sequence numbers: "+T)}for(const T of g){const x=T.targetId;if(!T.fromCache){const N=y.Ts.get(x),j=N.snapshotVersion,H=N.withLastLimboFreeSnapshotVersion(j);y.Ts=y.Ts.insert(x,H)}}}(s.localStore,a))}async function v0(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){st(Sc,"User change. New user:",t.toKey());const s=await tm(e.localStore,t);e.currentUser=t,function(a,c){a.Ga.forEach(h=>{h.forEach(p=>{p.reject(new dt(G.CANCELLED,c))})}),a.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Mo(e,s.Rs)}}function y0(n,t){const e=It(n),s=e.Ua.get(t);if(s&&s.Ba)return Vt().add(s.key);{let r=Vt();const a=e.qa.get(t);if(!a)return r;for(const c of a){const h=e.ka.get(c);r=r.unionWith(h.view.Sa)}return r}}function gm(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=dm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=y0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=p0.bind(null,t),t.La.p_=e0.bind(null,t.eventManager),t.La.Ja=n0.bind(null,t.eventManager),t}function w0(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=m0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_0.bind(null,t),t}class sl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Rl(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return TE(this.persistence,new vE,t.initialUser,this.serializer)}Xa(t){return new Jp(yc.ri,this.serializer)}Za(t){return new CE}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sl.provider={build:()=>new sl};class T0 extends sl{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){Gt(this.persistence.referenceDelegate instanceof nl);const s=this.persistence.referenceDelegate.garbageCollector;return new iE(s,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?Ye.withCacheSize(this.cacheSizeBytes):Ye.DEFAULT;return new Jp(s=>nl.ri(s,e),this.serializer)}}class Ou{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Nf(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=v0.bind(null,this.syncEngine),await QE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new YE}()}createDatastore(t){const e=Rl(t.databaseInfo.databaseId),s=function(a){return new kE(a)}(t.databaseInfo);return function(a,c,h,p){return new NE(a,c,h,p)}(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return function(s,r,a,c,h){return new FE(s,r,a,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>Nf(this.syncEngine,e,0),function(){return Lf.D()?new Lf:new SE}())}createSyncEngine(t,e){return function(r,a,c,h,p,g,y){const T=new a0(r,a,c,h,p,g);return y&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const a=It(r);st(ds,"RemoteStore shutting down."),a.W_.add(5),await Lo(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Ou.provider={build:()=>new Ou};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ui("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="FirestoreClient";class b0{constructor(t,e,s,r,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=r,this.user=Be.UNAUTHENTICATED,this.clientId=hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async c=>{st(Fi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(st(Fi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=xc(e,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Jl(n,t){n.asyncQueue.verifyOperationInProgress(),st(Fi,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await tm(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function Ff(n,t){n.asyncQueue.verifyOperationInProgress();const e=await I0(n);st(Fi,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(s=>kf(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>kf(t.remoteStore,r)),n._onlineComponents=t}async function I0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){st(Fi,"Using user provided OfflineComponentProvider");try{await Jl(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;or("Error using user provided cache. Falling back to memory cache: "+e),await Jl(n,new sl)}}else st(Fi,"Using default OfflineComponentProvider"),await Jl(n,new T0(void 0));return n._offlineComponents}async function vm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(st(Fi,"Using user provided OnlineComponentProvider"),await Ff(n,n._uninitializedComponentsProvider._online)):(st(Fi,"Using default OnlineComponentProvider"),await Ff(n,new Ou))),n._onlineComponents}function P0(n){return vm(n).then(t=>t.syncEngine)}async function A0(n){const t=await vm(n),e=t.eventManager;return e.onListen=l0.bind(null,t.syncEngine),e.onUnlisten=h0.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=u0.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=f0.bind(null,t.syncEngine),e}function x0(n,t,e={}){const s=new Ri;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,h,p,g){const y=new E0({next:x=>{y.su(),c.enqueueAndForget(()=>t0(a,T)),x.fromCache&&p.source==="server"?g.reject(new dt(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),T=new i0(h,y,{includeMetadataChanges:!0,Ta:!0});return JE(a,T)}(await A0(n),n.asyncQueue,t,e,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n,t,e){if(!e)throw new dt(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function C0(n,t,e,s){if(t===!0&&s===!0)throw new dt(G.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function zf(n){if(!pt.isDocumentKey(n))throw new dt(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $f(n){if(pt.isDocumentKey(n))throw new dt(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":yt()}function rl(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new dt(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Lc(n);throw new dt(G.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="firestore.googleapis.com",jf=!0;class qf{constructor(t){var e,s;if(t.host===void 0){if(t.ssl!==void 0)throw new dt(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Tm,this.ssl=jf}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:jf;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Yp;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<eE)throw new dt(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}C0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ym((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new dt(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new dt(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new dt(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kl{constructor(t,e,s,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dt(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new dt(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qf(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Lw;switch(s.type){case"firstParty":return new Ow(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new dt(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=Uf.get(e);s&&(st("ComponentProvider","Removing Datastore"),Uf.delete(e),s.terminate())}(this),Promise.resolve()}}function S0(n,t,e,s={}){var r;const a=(n=rl(n,kl))._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),h=`${t}:${e}`;a.host!==Tm&&a.host!==h&&or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},a),{host:h,ssl:!1,emulatorOptions:s});if(!Ha(p,c)&&(n._setSettings(p),s.mockUserToken)){let g,y;if(typeof s.mockUserToken=="string")g=s.mockUserToken,y=Be.MOCK_USER;else{g=ly(s.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new dt(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Be(T)}n._authCredentials=new Mw(new up(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Dl(this.firestore,t,this._query)}}class Cn{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Li(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Cn(this.firestore,t,this._key)}}class Li extends Dl{constructor(t,e,s){super(t,e,Cp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Cn(this.firestore,null,new pt(t))}withConverter(t){return new Li(this.firestore,t,this._path)}}function Mc(n,t,...e){if(n=wo(n),wm("collection","path",t),n instanceof kl){const s=ue.fromString(t,...e);return $f(s),new Li(n,null,s)}{if(!(n instanceof Cn||n instanceof Li))throw new dt(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ue.fromString(t,...e));return $f(s),new Li(n.firestore,null,s)}}function R0(n,t,...e){if(n=wo(n),arguments.length===1&&(t=hp.newId()),wm("doc","path",t),n instanceof kl){const s=ue.fromString(t,...e);return zf(s),new Cn(n,null,new pt(s))}{if(!(n instanceof Cn||n instanceof Li))throw new dt(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ue.fromString(t,...e));return zf(s),new Cn(n.firestore,n instanceof Li?n.converter:null,new pt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="AsyncQueue";class Zf{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new nm(this,"async_queue_retry"),this.Su=()=>{const s=Yl();s&&st(Hf,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=t;const e=Yl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Yl();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Ri;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!vr(t))throw t;st(Hf,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const r=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(s);throw ui("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.pu=!1,s))));return this.bu=e,e}enqueueAfterDelay(t,e,s){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const r=Ac.createAndSchedule(this,t,e,s,a=>this.Fu(a));return this.fu.push(r),r}Du(){this.gu&&yt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,s)=>e.targetTimeMs-s.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class kc extends kl{constructor(t,e,s,r){super(t,e,s,r),this.type="firestore",this._queue=new Zf,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Zf(t),this._firestoreClient=void 0,await t}}}function L0(n,t){const e=typeof n=="object"?n:vw(),s=typeof n=="string"?n:Ga,r=dw(e,"firestore").getImmediate({identifier:s});if(!r._initialized){const a=oy("firestore");a&&S0(r,...a)}return r}function Em(n){if(n._terminated)throw new dt(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||M0(n),n._firestoreClient}function M0(n){var t,e,s;const r=n._freezeSettings(),a=function(h,p,g,y){return new Qw(h,p,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,ym(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new b0(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new fr(Oe.fromBase64String(t))}catch(e){throw new dt(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new fr(Oe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new dt(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new De(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new dt(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new dt(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ct(this._lat,t._lat)||Ct(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==r[a])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=/^__.*__$/;class D0{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new gs(t,this.data,this.fieldMask,e,this.fieldTransforms):new So(t,this.data,e,this.fieldTransforms)}}function Im(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class Nc{constructor(t,e,s,r,a,c){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=r,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Nc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.$u(t),r}Uu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.Bu(),r}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return ol(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(Im(this.Lu)&&k0.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class O0{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Rl(t)}ju(t,e,s,r=!1){return new Nc({Lu:t,methodName:e,zu:s,path:De.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V0(n){const t=n._freezeSettings(),e=Rl(n._databaseId);return new O0(n._databaseId,!!t.ignoreUndefinedProperties,e)}function N0(n,t,e,s,r,a={}){const c=n.ju(a.merge||a.mergeFields?2:0,t,e,r);Cm("Data must be an object, but it was:",c,s);const h=Am(s,c);let p,g;if(a.merge)p=new An(c.fieldMask),g=c.fieldTransforms;else if(a.mergeFields){const y=[];for(const T of a.mergeFields){const x=B0(t,T,e);if(!c.contains(x))throw new dt(G.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);U0(y,x)||y.push(x)}p=new An(y),g=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,g=c.fieldTransforms;return new D0(new _n(h),p,g)}function Pm(n,t){if(xm(n=wo(n)))return Cm("Unsupported field value:",t,n),Am(n,t);if(n instanceof bm)return function(s,r){if(!Im(r.Lu))throw r.Wu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,r){const a=[];let c=0;for(const h of s){let p=Pm(h,r.Ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,t)}return function(s,r){if((s=wo(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return wT(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Ie.fromDate(s);return{timestampValue:el(r.serializer,a)}}if(s instanceof Ie){const a=new Ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:el(r.serializer,a)}}if(s instanceof Oc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof fr)return{bytesValue:Hp(r.serializer,s._byteString)};if(s instanceof Cn){const a=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(a))throw r.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gc(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Vc)return function(c,h){return{mapValue:{fields:{[yp]:{stringValue:wp},[Qa]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Wu("VectorValues must only contain numeric values.");return pc(h.serializer,g)})}}}}}}(s,r);throw r.Wu(`Unsupported field value: ${Lc(s)}`)}(n,t)}function Am(n,t){const e={};return dp(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ms(n,(s,r)=>{const a=Pm(r,t.qu(s));a!=null&&(e[s]=a)}),{mapValue:{fields:e}}}function xm(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ie||n instanceof Oc||n instanceof fr||n instanceof Cn||n instanceof bm||n instanceof Vc)}function Cm(n,t,e){if(!xm(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const s=Lc(e);throw s==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+s)}}function B0(n,t,e){if((t=wo(t))instanceof Dc)return t._internalPath;if(typeof t=="string")return Sm(n,t);throw ol("Field path arguments must be of type string or ",n,!1,void 0,e)}const F0=new RegExp("[~\\*/\\[\\]]");function Sm(n,t,e){if(t.search(F0)>=0)throw ol(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Dc(...t.split("."))._internalPath}catch{throw ol(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ol(n,t,e,s,r){const a=s&&!s.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${s}`),c&&(p+=` in document ${r}`),p+=")"),new dt(G.INVALID_ARGUMENT,h+n+p)}function U0(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(t,e,s,r,a){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new z0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Lm("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class z0 extends Rm{data(){return super.data()}}function Lm(n,t){return typeof t=="string"?Sm(n,t):t instanceof Dc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new dt(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class j0{convertValue(t,e="none"){switch(Ni(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw yt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return ms(t,(r,a)=>{s[r]=this.convertValue(a,e)}),s}convertVectorValue(t){var e,s,r;const a=(r=(s=(e=t.fields)===null||e===void 0?void 0:e[Qa].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(c=>_e(c.doubleValue));return new Vc(a)}convertGeoPoint(t){return new Oc(_e(t.latitude),_e(t.longitude))}convertArray(t,e){return(t.values||[]).map(s=>this.convertValue(s,e))}convertServerTimestamp(t,e){switch(e){case"previous":const s=bl(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(Io(t));default:return null}}convertTimestamp(t){const e=Oi(t);return new Ie(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=ue.fromString(t);Gt(Xp(s));const r=new Po(s.get(1),s.get(3)),a=new pt(s.popFirst(5));return r.isEqual(e)||ui(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(n,t,e){let s;return s=n?n.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class H0 extends Rm{constructor(t,e,s,r,a,c){super(t,e,s,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Lm("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}}class Ma extends H0{data(t={}){return super.data(t)}}class Z0{constructor(t,e,s,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ea(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(s=>{t.call(e,new Ma(this._firestore,this._userDataWriter,s.key,s,new Ea(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dt(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const p=new Ma(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ea(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const p=new Ma(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ea(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:W0(h.type),doc:p,oldIndex:g,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function W0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}class K0 extends j0{constructor(t){super(),this.firestore=t}convertBytes(t){return new fr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Cn(this.firestore,null,e)}}function Mm(n){n=rl(n,Dl);const t=rl(n.firestore,kc),e=Em(t),s=new K0(t);return $0(n._query),x0(e,n._query).then(r=>new Z0(t,s,n,r))}function G0(n,t){const e=rl(n.firestore,kc),s=R0(n),r=q0(n.converter,t);return Q0(e,[N0(V0(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,oi.exists(!1))]).then(()=>s)}function Q0(n,t){return function(s,r){const a=new Ri;return s.asyncQueue.enqueueAndForget(async()=>d0(await P0(s),r,a)),a.promise}(Em(n),t)}(function(t,e=!0){(function(r){_r=r})(gw),Wa(new To("firestore",(s,{instanceIdentifier:r,options:a})=>{const c=s.getProvider("app").getImmediate(),h=new kc(new kw(s.getProvider("auth-internal")),new Vw(c,s.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new dt(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(g.options.projectId,y)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),er(Xh,Yh,t),er(Xh,Yh,"esm2017")})();const X0={apiKey:"AIzaSyB90Q5hbE3a5QWo510CCJI0Wm21sczeIaQ",authDomain:"find-my-company-30652.firebaseapp.com",projectId:"find-my-company-30652",storageBucket:"find-my-company-30652.firebasestorage.app",messagingSenderId:"563118719650",appId:"1:563118719650:web:ebaaf3d949d66323168dfb",measurementId:"G-LYWPQXCMYB"},Y0=tp(X0),Bc=L0(Y0),ys=(n,t)=>{const e=n.__vccOpts||n;for(const[s,r]of t)e[s]=r;return e},J0=n=>(pl("data-v-fb52f5a6"),n=n(),ml(),n),tb={class:"company-item"},eb={class:"top"},nb={class:"left"},ib={class:"speciality"},sb={key:0,class:"text"},rb={key:1,class:"skeleton skeleton-text"},ob={class:"name"},ab={key:0,class:"text"},lb={key:1,class:"skeleton skeleton-text"},ub={class:"right"},cb={class:"city"},hb={key:0},fb={key:1,class:"skeleton skeleton-text short"},db={class:"country"},pb={key:0},mb={key:1,class:"skeleton skeleton-text short"},_b={class:"pc"},gb={key:0},vb={key:1,class:"skeleton skeleton-text short"},yb=J0(()=>rt("p",{class:"more"},"Cliquer pour plus d'informations",-1)),wb={props:{speciality:String,name:String,city:String,country:String,pc:String},setup(n){return(t,e)=>(Wt(),se("div",tb,[rt("div",eb,[rt("div",nb,[rt("h3",ib,[n.speciality?(Wt(),se("span",sb,Fn(n.speciality==="Dveloppement Logiciel, Tests et Qualit"?"Dev Logiciel":n.speciality),1)):(Wt(),se("span",rb))]),rt("p",ob,[n.name?(Wt(),se("strong",ab,Fn(n.name),1)):(Wt(),se("span",lb))])]),rt("div",ub,[rt("p",cb,[n.city?(Wt(),se("span",hb,"Ville : "+Fn(n.city),1)):(Wt(),se("span",fb))]),rt("p",db,[n.country?(Wt(),se("span",pb,"Pays : "+Fn(n.country),1)):(Wt(),se("span",mb))]),rt("p",_b,[n.pc?(Wt(),se("span",gb,"Code Postal : "+Fn(n.pc),1)):(Wt(),se("span",vb))])])]),yb]))}},Tb=ys(wb,[["__scopeId","data-v-fb52f5a6"]]),Eb={class:"modal-content"},bb={props:{isOpen:Boolean},emits:["close"],setup(n,{emit:t}){return(e,s)=>(Wt(),vl(Jg,{to:"body"},[n.isOpen?(Wt(),se("div",{key:0,class:"modal-overlay",onClick:s[1]||(s[1]=Zd(r=>t("close"),["self"]))},[rt("div",Eb,[rt("button",{class:"modal-close",onClick:s[0]||(s[0]=r=>t("close"))},""),av(e.$slots,"default",{},void 0)])])):Ei("",!0)]))}},km=ys(bb,[["__scopeId","data-v-e7136a1e"]]);function Ib(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ro={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Pb=ro.exports,Wf;function Ab(){return Wf||(Wf=1,function(n,t){(function(e,s){s(t)})(Pb,function(e){var s="1.9.4";function r(i){var o,u,f,m;for(u=1,f=arguments.length;u<f;u++){m=arguments[u];for(o in m)i[o]=m[o]}return i}var a=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function c(i,o){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var f=u.call(arguments,2);return function(){return i.apply(o,f.length?f.concat(u.call(arguments)):arguments)}}var h=0;function p(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function g(i,o,u){var f,m,v,I;return I=function(){f=!1,m&&(v.apply(u,m),m=!1)},v=function(){f?m=arguments:(i.apply(u,arguments),setTimeout(I,o),f=!0)},v}function y(i,o,u){var f=o[1],m=o[0],v=f-m;return i===f&&u?i:((i-m)%v+v)%v+m}function T(){return!1}function x(i,o){if(o===!1)return i;var u=Math.pow(10,o===void 0?6:o);return Math.round(i*u)/u}function N(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function j(i){return N(i).split(/\s+/)}function H(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var u in o)i.options[u]=o[u];return i.options}function $(i,o,u){var f=[];for(var m in i)f.push(encodeURIComponent(u?m.toUpperCase():m)+"="+encodeURIComponent(i[m]));return(!o||o.indexOf("?")===-1?"?":"&")+f.join("&")}var ot=/\{ *([\w_ -]+) *\}/g;function lt(i,o){return i.replace(ot,function(u,f){var m=o[f];if(m===void 0)throw new Error("No value provided for variable "+u);return typeof m=="function"&&(m=m(o)),m})}var nt=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function bt(i,o){for(var u=0;u<i.length;u++)if(i[u]===o)return u;return-1}var qt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Mt(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var R=0;function E(i){var o=+new Date,u=Math.max(0,16-(o-R));return R=o+u,window.setTimeout(i,u)}var b=window.requestAnimationFrame||Mt("RequestAnimationFrame")||E,S=window.cancelAnimationFrame||Mt("CancelAnimationFrame")||Mt("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function C(i,o,u){if(u&&b===E)i.call(o);else return b.call(window,c(i,o))}function k(i){i&&S.call(window,i)}var A={__proto__:null,extend:r,create:a,bind:c,get lastId(){return h},stamp:p,throttle:g,wrapNum:y,falseFn:T,formatNum:x,trim:N,splitWords:j,setOptions:H,getParamString:$,template:lt,isArray:nt,indexOf:bt,emptyImageUrl:qt,requestFn:b,cancelFn:S,requestAnimFrame:C,cancelAnimFrame:k};function de(){}de.extend=function(i){var o=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,f=a(u);f.constructor=o,o.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return i.statics&&r(o,i.statics),i.includes&&(gn(i.includes),r.apply(null,[f].concat(i.includes))),r(f,i),delete f.statics,delete f.includes,f.options&&(f.options=u.options?a(u.options):{},r(f.options,i.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,I=f._initHooks.length;v<I;v++)f._initHooks[v].call(this)}},o},de.include=function(i){var o=this.prototype.options;return r(this.prototype,i),i.options&&(this.prototype.options=o,this.mergeOptions(i.options)),this},de.mergeOptions=function(i){return r(this.prototype.options,i),this},de.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function gn(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=nt(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ht={on:function(i,o,u){if(typeof i=="object")for(var f in i)this._on(f,i[f],o);else{i=j(i);for(var m=0,v=i.length;m<v;m++)this._on(i[m],o,u)}return this},off:function(i,o,u){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var f in i)this._off(f,i[f],o);else{i=j(i);for(var m=arguments.length===1,v=0,I=i.length;v<I;v++)m?this._off(i[v]):this._off(i[v],o,u)}return this},_on:function(i,o,u,f){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(i,o,u)===!1){u===this&&(u=void 0);var m={fn:o,ctx:u};f&&(m.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(m)}},_off:function(i,o,u){var f,m,v;if(this._events&&(f=this._events[i],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,v=f.length;m<v;m++)f[m].fn=T;delete this._events[i];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var I=this._listens(i,o,u);if(I!==!1){var O=f[I];this._firingCount&&(O.fn=T,this._events[i]=f=f.slice()),f.splice(I,1)}}},fire:function(i,o,u){if(!this.listens(i,u))return this;var f=r({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[i];if(m){this._firingCount=this._firingCount+1||1;for(var v=0,I=m.length;v<I;v++){var O=m[v],B=O.fn;O.once&&this.off(i,B,O.ctx),B.call(O.ctx||this,f)}this._firingCount--}}return u&&this._propagateEvent(f),this},listens:function(i,o,u,f){typeof i!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(f=!!o,m=void 0,u=void 0);var v=this._events&&this._events[i];if(v&&v.length&&this._listens(i,m,u)!==!1)return!0;if(f){for(var I in this._eventParents)if(this._eventParents[I].listens(i,o,u,f))return!0}return!1},_listens:function(i,o,u){if(!this._events)return!1;var f=this._events[i]||[];if(!o)return!!f.length;u===this&&(u=void 0);for(var m=0,v=f.length;m<v;m++)if(f[m].fn===o&&f[m].ctx===u)return m;return!1},once:function(i,o,u){if(typeof i=="object")for(var f in i)this._on(f,i[f],o,!0);else{i=j(i);for(var m=0,v=i.length;m<v;m++)this._on(i[m],o,u,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[p(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[p(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,r({layer:i.target,propagatedFrom:i.target},i),!0)}};Ht.addEventListener=Ht.on,Ht.removeEventListener=Ht.clearAllEventListeners=Ht.off,Ht.addOneTimeEventListener=Ht.once,Ht.fireEvent=Ht.fire,Ht.hasEventListeners=Ht.listens;var Nt=de.extend(Ht);function et(i,o,u){this.x=u?Math.round(i):i,this.y=u?Math.round(o):o}var Ve=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};et.prototype={clone:function(){return new et(this.x,this.y)},add:function(i){return this.clone()._add(mt(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(mt(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new et(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new et(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ve(this.x),this.y=Ve(this.y),this},distanceTo:function(i){i=mt(i);var o=i.x-this.x,u=i.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(i){return i=mt(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=mt(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function mt(i,o,u){return i instanceof et?i:nt(i)?new et(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new et(i.x,i.y):new et(i,o,u)}function jt(i,o){if(i)for(var u=o?[i,o]:i,f=0,m=u.length;f<m;f++)this.extend(u[f])}jt.prototype={extend:function(i){var o,u;if(!i)return this;if(i instanceof et||typeof i[0]=="number"||"x"in i)o=u=mt(i);else if(i=Zt(i),o=i.min,u=i.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(i){return mt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return mt(this.min.x,this.max.y)},getTopRight:function(){return mt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,u;return typeof i[0]=="number"||i instanceof et?i=mt(i):i=Zt(i),i instanceof jt?(o=i.min,u=i.max):o=u=i,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=Zt(i);var o=this.min,u=this.max,f=i.min,m=i.max,v=m.x>=o.x&&f.x<=u.x,I=m.y>=o.y&&f.y<=u.y;return v&&I},overlaps:function(i){i=Zt(i);var o=this.min,u=this.max,f=i.min,m=i.max,v=m.x>o.x&&f.x<u.x,I=m.y>o.y&&f.y<u.y;return v&&I},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var o=this.min,u=this.max,f=Math.abs(o.x-u.x)*i,m=Math.abs(o.y-u.y)*i;return Zt(mt(o.x-f,o.y-m),mt(u.x+f,u.y+m))},equals:function(i){return i?(i=Zt(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Zt(i,o){return!i||i instanceof jt?i:new jt(i,o)}function xt(i,o){if(i)for(var u=o?[i,o]:i,f=0,m=u.length;f<m;f++)this.extend(u[f])}xt.prototype={extend:function(i){var o=this._southWest,u=this._northEast,f,m;if(i instanceof Dt)f=i,m=i;else if(i instanceof xt){if(f=i._southWest,m=i._northEast,!f||!m)return this}else return i?this.extend(St(i)||re(i)):this;return!o&&!u?(this._southWest=new Dt(f.lat,f.lng),this._northEast=new Dt(m.lat,m.lng)):(o.lat=Math.min(f.lat,o.lat),o.lng=Math.min(f.lng,o.lng),u.lat=Math.max(m.lat,u.lat),u.lng=Math.max(m.lng,u.lng)),this},pad:function(i){var o=this._southWest,u=this._northEast,f=Math.abs(o.lat-u.lat)*i,m=Math.abs(o.lng-u.lng)*i;return new xt(new Dt(o.lat-f,o.lng-m),new Dt(u.lat+f,u.lng+m))},getCenter:function(){return new Dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Dt||"lat"in i?i=St(i):i=re(i);var o=this._southWest,u=this._northEast,f,m;return i instanceof xt?(f=i.getSouthWest(),m=i.getNorthEast()):f=m=i,f.lat>=o.lat&&m.lat<=u.lat&&f.lng>=o.lng&&m.lng<=u.lng},intersects:function(i){i=re(i);var o=this._southWest,u=this._northEast,f=i.getSouthWest(),m=i.getNorthEast(),v=m.lat>=o.lat&&f.lat<=u.lat,I=m.lng>=o.lng&&f.lng<=u.lng;return v&&I},overlaps:function(i){i=re(i);var o=this._southWest,u=this._northEast,f=i.getSouthWest(),m=i.getNorthEast(),v=m.lat>o.lat&&f.lat<u.lat,I=m.lng>o.lng&&f.lng<u.lng;return v&&I},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=re(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(i,o){return i instanceof xt?i:new xt(i,o)}function Dt(i,o,u){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,u!==void 0&&(this.alt=+u)}Dt.prototype={equals:function(i,o){if(!i)return!1;i=St(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+x(this.lat,i)+", "+x(this.lng,i)+")"},distanceTo:function(i){return ze.distance(this,St(i))},wrap:function(){return ze.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,u=o/Math.cos(Math.PI/180*this.lat);return re([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new Dt(this.lat,this.lng,this.alt)}};function St(i,o,u){return i instanceof Dt?i:nt(i)&&typeof i[0]!="object"?i.length===3?new Dt(i[0],i[1],i[2]):i.length===2?new Dt(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Dt(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new Dt(i,o,u)}var oe={latLngToPoint:function(i,o){var u=this.projection.project(i),f=this.scale(o);return this.transformation._transform(u,f)},pointToLatLng:function(i,o){var u=this.scale(o),f=this.transformation.untransform(i,u);return this.projection.unproject(f)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(i),f=this.transformation.transform(o.min,u),m=this.transformation.transform(o.max,u);return new jt(f,m)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?y(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?y(i.lat,this.wrapLat,!0):i.lat,f=i.alt;return new Dt(u,o,f)},wrapLatLngBounds:function(i){var o=i.getCenter(),u=this.wrapLatLng(o),f=o.lat-u.lat,m=o.lng-u.lng;if(f===0&&m===0)return i;var v=i.getSouthWest(),I=i.getNorthEast(),O=new Dt(v.lat-f,v.lng-m),B=new Dt(I.lat-f,I.lng-m);return new xt(O,B)}},ze=r({},oe,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var u=Math.PI/180,f=i.lat*u,m=o.lat*u,v=Math.sin((o.lat-i.lat)*u/2),I=Math.sin((o.lng-i.lng)*u/2),O=v*v+Math.cos(f)*Math.cos(m)*I*I,B=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*B}}),zi=6378137,We={R:zi,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,u=this.MAX_LATITUDE,f=Math.max(Math.min(u,i.lat),-u),m=Math.sin(f*o);return new et(this.R*i.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(i){var o=180/Math.PI;return new Dt((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=zi*Math.PI;return new jt([-i,-i],[i,i])}()};function Hn(i,o,u,f){if(nt(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=u,this._d=f}Hn.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new et((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function P(i,o,u,f){return new Hn(i,o,u,f)}var M=r({},ze,{code:"EPSG:3857",projection:We,transformation:function(){var i=.5/(Math.PI*We.R);return P(i,.5,-i,.5)}()}),U=r({},M,{code:"EPSG:900913"});function q(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Z(i,o){var u="",f,m,v,I,O,B;for(f=0,v=i.length;f<v;f++){for(O=i[f],m=0,I=O.length;m<I;m++)B=O[m],u+=(m?"L":"M")+B.x+" "+B.y;u+=o?ht.svg?"z":"x":""}return u||"M0 0"}var X=document.documentElement.style,tt="ActiveXObject"in window,Q=tt&&!document.addEventListener,Y="msLaunchUri"in navigator&&!("documentMode"in document),K=ln("webkit"),ct=ln("android"),at=ln("android 2")||ln("android 3"),ut=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_t=ct&&ln("Google")&&ut<537&&!("AudioNode"in window),ft=!!window.opera,Pt=!Y&&ln("chrome"),Bt=ln("gecko")&&!K&&!ft&&!tt,te=!Pt&&ln("safari"),Le=ln("phantom"),vn="OTransition"in X,Rn=navigator.platform.indexOf("Win")===0,yn=tt&&"transition"in X,Zn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!at,ge="MozPerspective"in X,Ke=!window.L_DISABLE_3D&&(yn||Zn||ge)&&!vn&&!Le,Ln=typeof orientation<"u"||ln("mobile"),wr=Ln&&K,Do=Ln&&Zn,Tr=!window.PointerEvent&&window.MSPointerEvent,fi=!!(window.PointerEvent||Tr),ws="ontouchstart"in window||!!window.TouchEvent,Er=!window.L_NO_TOUCH&&(ws||fi),Wn=Ln&&ft,Oo=Ln&&Bt,Ts=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Vo=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",T,o),window.removeEventListener("testPassiveEventSupport",T,o)}catch{}return i}(),$i=function(){return!!document.createElement("canvas").getContext}(),Es=!!(document.createElementNS&&q("svg").createSVGRect),Me=!!Es&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),No=!Es&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),ji=navigator.platform.indexOf("Mac")===0,qi=navigator.platform.indexOf("Linux")===0;function ln(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ht={ie:tt,ielt9:Q,edge:Y,webkit:K,android:ct,android23:at,androidStock:_t,opera:ft,chrome:Pt,gecko:Bt,safari:te,phantom:Le,opera12:vn,win:Rn,ie3d:yn,webkit3d:Zn,gecko3d:ge,any3d:Ke,mobile:Ln,mobileWebkit:wr,mobileWebkit3d:Do,msPointer:Tr,pointer:fi,touch:Er,touchNative:ws,mobileOpera:Wn,mobileGecko:Oo,retina:Ts,passiveEvents:Vo,canvas:$i,svg:Es,vml:No,inlineSvg:Me,mac:ji,linux:qi},Kn=ht.msPointer?"MSPointerDown":"pointerdown",Bo=ht.msPointer?"MSPointerMove":"pointermove",Fo=ht.msPointer?"MSPointerUp":"pointerup",Hi=ht.msPointer?"MSPointerCancel":"pointercancel",bs={touchstart:Kn,touchmove:Bo,touchend:Fo,touchcancel:Hi},Is={touchstart:As,touchmove:Ps,touchend:Ps,touchcancel:Ps},wn={},Tn=!1;function Uo(i,o,u){return o==="touchstart"&&$o(),Is[o]?(u=Is[o].bind(this,u),i.addEventListener(bs[o],u,!1),u):(console.warn("wrong event specified:",o),T)}function zo(i,o,u){if(!bs[o]){console.warn("wrong event specified:",o);return}i.removeEventListener(bs[o],u,!1)}function br(i){wn[i.pointerId]=i}function Ir(i){wn[i.pointerId]&&(wn[i.pointerId]=i)}function Pr(i){delete wn[i.pointerId]}function $o(){Tn||(document.addEventListener(Kn,br,!0),document.addEventListener(Bo,Ir,!0),document.addEventListener(Fo,Pr,!0),document.addEventListener(Hi,Pr,!0),Tn=!0)}function Ps(i,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in wn)o.touches.push(wn[u]);o.changedTouches=[o],i(o)}}function As(i,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&ce(o),Ps(i,o)}function jo(i){var o={},u,f;for(f in i)u=i[f],o[f]=u&&u.bind?u.bind(i):u;return i=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ar=200;function Zi(i,o){i.addEventListener("dblclick",o);var u=0,f;function m(v){if(v.detail!==1){f=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var I=Br(v);if(!(I.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!I.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var O=Date.now();O-u<=Ar?(f++,f===2&&o(jo(v))):f=1,u=O}}}return i.addEventListener("click",m),{dblclick:o,simDblclick:m}}function Gn(i,o){i.removeEventListener("dblclick",o.dblclick),i.removeEventListener("click",o.simDblclick)}var Wi=Xn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ki=Xn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xr=Ki==="webkitTransition"||Ki==="OTransition"?Ki+"End":"transitionend";function Cr(i){return typeof i=="string"?document.getElementById(i):i}function di(i,o){var u=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(i,null);u=f?f[o]:null}return u==="auto"?null:u}function Ot(i,o,u){var f=document.createElement(i);return f.className=o||"",u&&u.appendChild(f),f}function ee(i){var o=i.parentNode;o&&o.removeChild(i)}function Gi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Qn(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function pi(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function Sr(i,o){if(i.classList!==void 0)return i.classList.contains(o);var u=un(i);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function At(i,o){if(i.classList!==void 0)for(var u=j(o),f=0,m=u.length;f<m;f++)i.classList.add(u[f]);else if(!Sr(i,o)){var v=un(i);Rr(i,(v?v+" ":"")+o)}}function ae(i,o){i.classList!==void 0?i.classList.remove(o):Rr(i,N((" "+un(i)+" ").replace(" "+o+" "," ")))}function Rr(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function un(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function pe(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&xs(i,o)}function xs(i,o){var u=!1,f="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(f)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):i.style.filter+=" progid:"+f+"(opacity="+o+")"}function Xn(i){for(var o=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in o)return i[u];return!1}function Mn(i,o,u){var f=o||new et(0,0);i.style[Wi]=(ht.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(u?" scale("+u+")":"")}function wt(i,o){i._leaflet_pos=o,ht.any3d?Mn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function cn(i){return i._leaflet_pos||new et(0,0)}var En,bn,Lr;if("onselectstart"in document)En=function(){gt(window,"selectstart",ce)},bn=function(){Yt(window,"selectstart",ce)};else{var mi=Xn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);En=function(){if(mi){var i=document.documentElement.style;Lr=i[mi],i[mi]="none"}},bn=function(){mi&&(document.documentElement.style[mi]=Lr,Lr=void 0)}}function Mr(){gt(window,"dragstart",ce)}function kr(){Yt(window,"dragstart",ce)}var Cs,Dr;function Yn(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(en(),Cs=i,Dr=i.style.outlineStyle,i.style.outlineStyle="none",gt(window,"keydown",en))}function en(){Cs&&(Cs.style.outlineStyle=Dr,Cs=void 0,Dr=void 0,Yt(window,"keydown",en))}function Or(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Ss(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var qo={__proto__:null,TRANSFORM:Wi,TRANSITION:Ki,TRANSITION_END:xr,get:Cr,getStyle:di,create:Ot,remove:ee,empty:Gi,toFront:Qn,toBack:pi,hasClass:Sr,addClass:At,removeClass:ae,setClass:Rr,getClass:un,setOpacity:pe,testProp:Xn,setTransform:Mn,setPosition:wt,getPosition:cn,get disableTextSelection(){return En},get enableTextSelection(){return bn},disableImageDrag:Mr,enableImageDrag:kr,preventOutline:Yn,restoreOutline:en,getSizedParentNode:Or,getScale:Ss};function gt(i,o,u,f){if(o&&typeof o=="object")for(var m in o)Vr(i,m,o[m],u);else{o=j(o);for(var v=0,I=o.length;v<I;v++)Vr(i,o[v],u,f)}return this}var hn="_leaflet_events";function Yt(i,o,u,f){if(arguments.length===1)Ho(i),delete i[hn];else if(o&&typeof o=="object")for(var m in o)Nr(i,m,o[m],u);else if(o=j(o),arguments.length===2)Ho(i,function(O){return bt(o,O)!==-1});else for(var v=0,I=o.length;v<I;v++)Nr(i,o[v],u,f);return this}function Ho(i,o){for(var u in i[hn]){var f=u.split(/\d/)[0];(!o||o(f))&&Nr(i,f,null,null,u)}}var fn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vr(i,o,u,f){var m=o+p(u)+(f?"_"+p(f):"");if(i[hn]&&i[hn][m])return this;var v=function(O){return u.call(f||i,O||window.event)},I=v;!ht.touchNative&&ht.pointer&&o.indexOf("touch")===0?v=Uo(i,o,v):ht.touch&&o==="dblclick"?v=Zi(i,v):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(fn[o]||o,v,ht.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(v=function(O){O=O||window.event,Fr(i,O)&&I(O)},i.addEventListener(fn[o],v,!1)):i.addEventListener(o,I,!1):i.attachEvent("on"+o,v),i[hn]=i[hn]||{},i[hn][m]=v}function Nr(i,o,u,f,m){m=m||o+p(u)+(f?"_"+p(f):"");var v=i[hn]&&i[hn][m];if(!v)return this;!ht.touchNative&&ht.pointer&&o.indexOf("touch")===0?zo(i,o,v):ht.touch&&o==="dblclick"?Gn(i,v):"removeEventListener"in i?i.removeEventListener(fn[o]||o,v,!1):i.detachEvent("on"+o,v),i[hn][m]=null}function dn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function _i(i){return Vr(i,"wheel",dn),this}function gi(i){return gt(i,"mousedown touchstart dblclick contextmenu",dn),i._leaflet_disable_click=!0,this}function ce(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function nn(i){return ce(i),dn(i),this}function Br(i){if(i.composedPath)return i.composedPath();for(var o=[],u=i.target;u;)o.push(u),u=u.parentNode;return o}function Rs(i,o){if(!o)return new et(i.clientX,i.clientY);var u=Ss(o),f=u.boundingClientRect;return new et((i.clientX-f.left)/u.x-o.clientLeft,(i.clientY-f.top)/u.y-o.clientTop)}var le=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zo(i){return ht.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/le:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Fr(i,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var Wo={__proto__:null,on:gt,off:Yt,stopPropagation:dn,disableScrollPropagation:_i,disableClickPropagation:gi,preventDefault:ce,stop:nn,getPropagationPath:Br,getMousePosition:Rs,getWheelDelta:Zo,isExternalTarget:Fr,addListener:gt,removeListener:Yt},Ur=Nt.extend({run:function(i,o,u,f){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=cn(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var u=this._startPos.add(this._offset.multiplyBy(i));o&&u._round(),wt(this._el,u),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),kt=Nt.extend({options:{crs:M,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=H(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(St(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ki&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),gt(this._proxy,xr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(St(i),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var f=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,u.zoom):this._tryAnimatedPan(i,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,u){var f=this.getZoomScale(o),m=this.getSize().divideBy(2),v=i instanceof et?i:this.latLngToContainerPoint(i),I=v.subtract(m).multiplyBy(1-1/f),O=this.containerPointToLatLng(m.add(I));return this.setView(O,o,{zoom:u})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():re(i);var u=mt(o.paddingTopLeft||o.padding||[0,0]),f=mt(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(i,!1,u.add(f));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:i.getCenter(),zoom:m};var v=f.subtract(u).divideBy(2),I=this.project(i.getSouthWest(),m),O=this.project(i.getNorthEast(),m),B=this.unproject(I.add(O).divideBy(2).add(v),m);return{center:B,zoom:m}},fitBounds:function(i,o){if(i=re(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=mt(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ur,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){At(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,u){if(u=u||{},u.animate===!1||!ht.any3d)return this.setView(i,o,u);this._stop();var f=this.project(this.getCenter()),m=this.project(i),v=this.getSize(),I=this._zoom;i=St(i),o=o===void 0?I:o;var O=Math.max(v.x,v.y),B=O*this.getZoomScale(I,o),W=m.distanceTo(f)||1,it=1.42,vt=it*it;function Rt(ye){var ua=ye?-1:1,y_=ye?B:O,w_=B*B-O*O+ua*vt*vt*W*W,T_=2*y_*vt*W,$l=w_/T_,ch=Math.sqrt($l*$l+1)-$l,E_=ch<1e-9?-18:Math.log(ch);return E_}function je(ye){return(Math.exp(ye)-Math.exp(-ye))/2}function xe(ye){return(Math.exp(ye)+Math.exp(-ye))/2}function mn(ye){return je(ye)/xe(ye)}var Qe=Rt(0);function js(ye){return O*(xe(Qe)/xe(Qe+it*ye))}function m_(ye){return O*(xe(Qe)*mn(Qe+it*ye)-je(Qe))/vt}function __(ye){return 1-Math.pow(1-ye,1.5)}var g_=Date.now(),lh=(Rt(1)-Qe)/it,v_=u.duration?1e3*u.duration:1e3*lh*.8;function uh(){var ye=(Date.now()-g_)/v_,ua=__(ye)*lh;ye<=1?(this._flyToFrame=C(uh,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(m_(ua)/W)),I),this.getScaleZoom(O/js(ua),I),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),uh.call(this),this},flyToBounds:function(i,o){var u=this._getBoundsCenterZoom(i,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(i){return i=re(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var u=this.getCenter(),f=this._limitCenter(u,this._zoom,re(i));return u.equals(f)||this.panTo(f,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var u=mt(o.paddingTopLeft||o.padding||[0,0]),f=mt(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),v=this.project(i),I=this.getPixelBounds(),O=Zt([I.min.add(u),I.max.subtract(f)]),B=O.getSize();if(!O.contains(v)){this._enforcingBounds=!0;var W=v.subtract(O.getCenter()),it=O.extend(v).getSize().subtract(B);m.x+=W.x<0?-it.x:it.x,m.y+=W.y<0?-it.y:it.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=r({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),f=o.divideBy(2).round(),m=u.divideBy(2).round(),v=f.subtract(m);return!v.x&&!v.y?this:(i.animate&&i.pan?this.panBy(v):(i.pan&&this._rawPanBy(v),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=r({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,i):navigator.geolocation.getCurrentPosition(o,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var o=i.code,u=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var o=i.coords.latitude,u=i.coords.longitude,f=new Dt(o,u),m=f.toBounds(i.coords.accuracy*2),v=this._locateOptions;if(v.setView){var I=this.getBoundsZoom(m);this.setView(f,v.maxZoom?Math.min(I,v.maxZoom):I)}var O={latlng:f,bounds:m,timestamp:i.timestamp};for(var B in i.coords)typeof i.coords[B]=="number"&&(O[B]=i.coords[B]);this.fire("locationfound",O)}},addHandler:function(i,o){if(!o)return this;var u=this[i]=new o(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ee(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ee(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),f=Ot("div",u,o||this._mapPane);return i&&(this._panes[i]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new xt(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,u){i=re(i),u=mt(u||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),v=this.getMaxZoom(),I=i.getNorthWest(),O=i.getSouthEast(),B=this.getSize().subtract(u),W=Zt(this.project(O,f),this.project(I,f)).getSize(),it=ht.any3d?this.options.zoomSnap:1,vt=B.x/W.x,Rt=B.y/W.y,je=o?Math.max(vt,Rt):Math.min(vt,Rt);return f=this.getScaleZoom(je,f),it&&(f=Math.round(f/(it/100))*(it/100),f=o?Math.ceil(f/it)*it:Math.floor(f/it)*it),Math.max(m,Math.min(v,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new et(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var u=this._getTopLeftPoint(i,o);return new jt(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(i)/u.scale(o)},getScaleZoom:function(i,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var f=u.zoom(i*u.scale(o));return isNaN(f)?1/0:f},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(St(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(mt(i),o)},layerPointToLatLng:function(i){var o=mt(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(St(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(St(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(re(i))},distance:function(i,o){return this.options.crs.distance(St(i),St(o))},containerPointToLayerPoint:function(i){return mt(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return mt(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint(mt(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(St(i)))},mouseEventToContainerPoint:function(i){return Rs(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=Cr(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");gt(o,"scroll",this._onScroll,this),this._containerId=p(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,At(i,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=di(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wt(this._mapPane,new et(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(At(i.markerPane,"leaflet-zoom-hide"),At(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o,u){wt(this._mapPane,new et(0,0));var f=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,u)._move(i,o)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,u,f){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),f?u&&u.pinch&&this.fire("zoom",u):((m||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){wt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[p(this._container)]=this;var o=i?Yt:gt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var u=[],f,m=o==="mouseout"||o==="mouseover",v=i.target||i.srcElement,I=!1;v;){if(f=this._targets[p(v)],f&&(o==="click"||o==="preclick")&&this._draggableMoved(f)){I=!0;break}if(f&&f.listens(o,!0)&&(m&&!Fr(v,i)||(u.push(f),m))||v===this._container)break;v=v.parentNode}return!u.length&&!I&&!m&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var o=i.target||i.srcElement;if(!(!this._loaded||o._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(o))){var u=i.type;u==="mousedown"&&Yn(o),this._fireDOMEvent(i,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,u){if(i.type==="click"){var f=r({},i);f.type="preclick",this._fireDOMEvent(f,f.type,u)}var m=this._findEventTargets(i,o);if(u){for(var v=[],I=0;I<u.length;I++)u[I].listens(o,!0)&&v.push(u[I]);m=v.concat(m)}if(m.length){o==="contextmenu"&&ce(i);var O=m[0],B={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var W=O.getLatLng&&(!O._radius||O._radius<=10);B.containerPoint=W?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(i),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=W?O.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(I=0;I<m.length;I++)if(m[I].fire(o,B,!0),B.originalEvent._stopped||m[I].options.bubblingMouseEvents===!1&&bt(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return cn(this._mapPane)||new et(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var u=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var u=this.getSize()._divideBy(2);return this.project(i,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,u){var f=this._getNewPixelOrigin(u,o);return this.project(i,o)._subtract(f)},_latLngBoundsToNewLayerBounds:function(i,o,u){var f=this._getNewPixelOrigin(u,o);return Zt([this.project(i.getSouthWest(),o)._subtract(f),this.project(i.getNorthWest(),o)._subtract(f),this.project(i.getSouthEast(),o)._subtract(f),this.project(i.getNorthEast(),o)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,u){if(!u)return i;var f=this.project(i,o),m=this.getSize().divideBy(2),v=new jt(f.subtract(m),f.add(m)),I=this._getBoundsOffset(v,u,o);return Math.abs(I.x)<=1&&Math.abs(I.y)<=1?i:this.unproject(f.add(I),o)},_limitOffset:function(i,o){if(!o)return i;var u=this.getPixelBounds(),f=new jt(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(f,o))},_getBoundsOffset:function(i,o,u){var f=Zt(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),m=f.min.subtract(i.min),v=f.max.subtract(i.max),I=this._rebound(m.x,-v.x),O=this._rebound(m.y,-v.y);return new et(I,O)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),u=this.getMaxZoom(),f=ht.any3d?this.options.zoomSnap:1;return f&&(i=Math.round(i/f)*f),Math.max(o,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ae(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var u=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var i=this._proxy=Ot("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var u=Wi,f=this._proxy.style[u];Mn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),f===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ee(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();Mn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(o),m=this._getCenterOffset(i)._divideBy(1-1/f);return u.animate!==!0&&!this.getSize().contains(m)?!1:(C(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,u,f){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,At(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ae(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ls(i,o){return new kt(i,o)}var Ge=de.extend({options:{position:"topright"},initialize:function(i){H(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),u=this.getPosition(),f=i._controlCorners[u];return At(o,"leaflet-control"),u.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ee(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),$e=function(i){return new Ge(i)};kt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",u=this._controlContainer=Ot("div",o+"control-container",this._container);function f(m,v){var I=o+m+" "+o+v;i[m+v]=Ot("div",I,u)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ee(this._controlCorners[i]);ee(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zr=Ge.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,u,f){return u<f?-1:f<u?1:0}},initialize:function(i,o,u){H(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in i)this._addLayer(i[f],f);for(f in o)this._addLayer(o[f],f,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ge.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(p(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){At(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(At(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ae(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ae(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=Ot("div",i),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),gi(o),_i(o);var f=this._section=Ot("section",i+"-list");u&&(this._map.on("click",this.collapse,this),gt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Ot("a",i+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),gt(m,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){ce(v),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Ot("div",i+"-base",f),this._separator=Ot("div",i+"-separator",f),this._overlaysList=Ot("div",i+"-overlays",f),o.appendChild(f)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&p(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Gi(this._baseLayersList),Gi(this._overlaysList),this._layerControlInputs=[];var i,o,u,f,m=0;for(u=0;u<this._layers.length;u++)f=this._layers[u],this._addItem(f),o=o||f.overlay,i=i||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(i=i&&m>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(p(i.target)),u=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(i,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=u,f.firstChild},_addItem:function(i){var o=document.createElement("label"),u=this._map.hasLayer(i.layer),f;i.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=u):f=this._createRadioElement("leaflet-base-layers_"+p(this),u),this._layerControlInputs.push(f),f.layerId=p(i.layer),gt(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+i.name;var v=document.createElement("span");o.appendChild(v),v.appendChild(f),v.appendChild(m);var I=i.overlay?this._overlaysList:this._baseLayersList;return I.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,o,u,f=[],m=[];this._handlingClick=!0;for(var v=i.length-1;v>=0;v--)o=i[v],u=this._getLayer(o.layerId).layer,o.checked?f.push(u):o.checked||m.push(u);for(v=0;v<m.length;v++)this._map.hasLayer(m[v])&&this._map.removeLayer(m[v]);for(v=0;v<f.length;v++)this._map.hasLayer(f[v])||this._map.addLayer(f[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,u,f=this._map.getZoom(),m=i.length-1;m>=0;m--)o=i[m],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&f<u.options.minZoom||u.options.maxZoom!==void 0&&f>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,gt(i,"click",ce),this.expand();var o=this;setTimeout(function(){Yt(i,"click",ce),o._preventClick=!1})}}),Vl=function(i,o,u){return new zr(i,o,u)},Jn=Ge.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",u=Ot("div",o+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,u,f,m){var v=Ot("a",u,f);return v.innerHTML=i,v.href="#",v.title=o,v.setAttribute("role","button"),v.setAttribute("aria-label",o),gi(v),gt(v,"click",nn),gt(v,"click",m,this),gt(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";ae(this._zoomInButton,o),ae(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(At(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(At(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});kt.mergeOptions({zoomControl:!0}),kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Jn,this.addControl(this.zoomControl))});var Ko=function(i){return new Jn(i)},Ms=Ge.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",u=Ot("div",o),f=this.options;return this._addScales(f,o+"-line",u),i.on(f.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,u){i.metric&&(this._mScale=Ot("div",o,u)),i.imperial&&(this._iScale=Ot("div",o,u))},_update:function(){var i=this._map,o=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/i)},_updateImperial:function(i){var o=i*3.2808399,u,f,m;o>5280?(u=o/5280,f=this._getRoundNum(u),this._updateScale(this._iScale,f+" mi",f/u)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(i,o,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),u=i/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),ks=function(i){return new Ms(i)},Go='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vi=Ge.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?Go+" ":"")+"Leaflet</a>"},initialize:function(i){H(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ot("div","leaflet-control-attribution"),gi(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});kt.mergeOptions({attributionControl:!0}),kt.addInitHook(function(){this.options.attributionControl&&new vi().addTo(this)});var Nl=function(i){return new vi(i)};Ge.Layers=zr,Ge.Zoom=Jn,Ge.Scale=Ms,Ge.Attribution=vi,$e.layers=Vl,$e.zoom=Ko,$e.scale=ks,$e.attribution=Nl;var sn=de.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sn.addTo=function(i,o){return i.addHandler(o,this),this};var Qi={Events:Ht},$r=ht.touch?"touchstart mousedown":"mousedown",In=Nt.extend({options:{clickTolerance:3},initialize:function(i,o,u,f){H(this,f),this._element=i,this._dragStartTarget=o||i,this._preventOutline=u},enable:function(){this._enabled||(gt(this._dragStartTarget,$r,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(In._dragging===this&&this.finishDrag(!0),Yt(this._dragStartTarget,$r,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Sr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){In._dragging===this&&this.finishDrag();return}if(!(In._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(In._dragging=this,this._preventOutline&&Yn(this._element),Mr(),En(),!this._moving)){this.fire("down");var o=i.touches?i.touches[0]:i,u=Or(this._element);this._startPoint=new et(o.clientX,o.clientY),this._startPos=cn(this._element),this._parentScale=Ss(u);var f=i.type==="mousedown";gt(document,f?"mousemove":"touchmove",this._onMove,this),gt(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,u=new et(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ce(i),this._moved||(this.fire("dragstart"),this._moved=!0,At(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),At(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),wt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ae(document.body,"leaflet-dragging"),this._lastTarget&&(ae(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yt(document,"mousemove touchmove",this._onMove,this),Yt(document,"mouseup touchend touchcancel",this._onUp,this),kr(),bn();var o=this._moved&&this._moving;this._moving=!1,In._dragging=!1,o&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ds(i,o,u){var f,m=[1,4,2,8],v,I,O,B,W,it,vt,Rt;for(v=0,it=i.length;v<it;v++)i[v]._code=kn(i[v],o);for(O=0;O<4;O++){for(vt=m[O],f=[],v=0,it=i.length,I=it-1;v<it;I=v++)B=i[v],W=i[I],B._code&vt?W._code&vt||(Rt=Ae(W,B,vt,o,u),Rt._code=kn(Rt,o),f.push(Rt)):(W._code&vt&&(Rt=Ae(W,B,vt,o,u),Rt._code=kn(Rt,o),f.push(Rt)),f.push(B));i=f}return i}function Os(i,o){var u,f,m,v,I,O,B,W,it;if(!i||i.length===0)throw new Error("latlngs not passed");l(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var vt=St([0,0]),Rt=re(i),je=Rt.getNorthWest().distanceTo(Rt.getSouthWest())*Rt.getNorthEast().distanceTo(Rt.getNorthWest());je<1700&&(vt=Vs(i));var xe=i.length,mn=[];for(u=0;u<xe;u++){var Qe=St(i[u]);mn.push(o.project(St([Qe.lat-vt.lat,Qe.lng-vt.lng])))}for(O=B=W=0,u=0,f=xe-1;u<xe;f=u++)m=mn[u],v=mn[f],I=m.y*v.x-v.y*m.x,B+=(m.x+v.x)*I,W+=(m.y+v.y)*I,O+=I*3;O===0?it=mn[0]:it=[B/O,W/O];var js=o.unproject(mt(it));return St([js.lat+vt.lat,js.lng+vt.lng])}function Vs(i){for(var o=0,u=0,f=0,m=0;m<i.length;m++){var v=St(i[m]);o+=v.lat,u+=v.lng,f++}return St([o/f,u/f])}var Ns={__proto__:null,clipPolygon:Ds,polygonCenter:Os,centroid:Vs};function jr(i,o){if(!o||!i.length)return i.slice();var u=o*o;return i=Xo(i,u),i=Qo(i,u),i}function qr(i,o,u){return Math.sqrt(pn(i,o,u,!0))}function ti(i,o,u){return pn(i,o,u)}function Qo(i,o){var u=i.length,f=typeof Uint8Array<"u"?Uint8Array:Array,m=new f(u);m[0]=m[u-1]=1,Bs(i,m,o,0,u-1);var v,I=[];for(v=0;v<u;v++)m[v]&&I.push(i[v]);return I}function Bs(i,o,u,f,m){var v=0,I,O,B;for(O=f+1;O<=m-1;O++)B=pn(i[O],i[f],i[m],!0),B>v&&(I=O,v=B);v>u&&(o[I]=1,Bs(i,o,u,f,I),Bs(i,o,u,I,m))}function Xo(i,o){for(var u=[i[0]],f=1,m=0,v=i.length;f<v;f++)Yo(i[f],i[m])>o&&(u.push(i[f]),m=f);return m<v-1&&u.push(i[v-1]),u}var Hr;function Xi(i,o,u,f,m){var v=f?Hr:kn(i,u),I=kn(o,u),O,B,W;for(Hr=I;;){if(!(v|I))return[i,o];if(v&I)return!1;O=v||I,B=Ae(i,o,O,u,m),W=kn(B,u),O===v?(i=B,v=W):(o=B,I=W)}}function Ae(i,o,u,f,m){var v=o.x-i.x,I=o.y-i.y,O=f.min,B=f.max,W,it;return u&8?(W=i.x+v*(B.y-i.y)/I,it=B.y):u&4?(W=i.x+v*(O.y-i.y)/I,it=O.y):u&2?(W=B.x,it=i.y+I*(B.x-i.x)/v):u&1&&(W=O.x,it=i.y+I*(O.x-i.x)/v),new et(W,it,m)}function kn(i,o){var u=0;return i.x<o.min.x?u|=1:i.x>o.max.x&&(u|=2),i.y<o.min.y?u|=4:i.y>o.max.y&&(u|=8),u}function Yo(i,o){var u=o.x-i.x,f=o.y-i.y;return u*u+f*f}function pn(i,o,u,f){var m=o.x,v=o.y,I=u.x-m,O=u.y-v,B=I*I+O*O,W;return B>0&&(W=((i.x-m)*I+(i.y-v)*O)/B,W>1?(m=u.x,v=u.y):W>0&&(m+=I*W,v+=O*W)),I=i.x-m,O=i.y-v,f?I*I+O*O:new et(m,v)}function l(i){return!nt(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function d(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),l(i)}function _(i,o){var u,f,m,v,I,O,B,W;if(!i||i.length===0)throw new Error("latlngs not passed");l(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var it=St([0,0]),vt=re(i),Rt=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Rt<1700&&(it=Vs(i));var je=i.length,xe=[];for(u=0;u<je;u++){var mn=St(i[u]);xe.push(o.project(St([mn.lat-it.lat,mn.lng-it.lng])))}for(u=0,f=0;u<je-1;u++)f+=xe[u].distanceTo(xe[u+1])/2;if(f===0)W=xe[0];else for(u=0,v=0;u<je-1;u++)if(I=xe[u],O=xe[u+1],m=I.distanceTo(O),v+=m,v>f){B=(v-f)/m,W=[O.x-B*(O.x-I.x),O.y-B*(O.y-I.y)];break}var Qe=o.unproject(mt(W));return St([Qe.lat+it.lat,Qe.lng+it.lng])}var w={__proto__:null,simplify:jr,pointToSegmentDistance:qr,closestPointOnSegment:ti,clipSegment:Xi,_getEdgeIntersection:Ae,_getBitCode:kn,_sqClosestPointOnSegment:pn,isFlat:l,_flat:d,polylineCenter:_},D={project:function(i){return new et(i.lng,i.lat)},unproject:function(i){return new Dt(i.y,i.x)},bounds:new jt([-180,-90],[180,90])},F={R:6378137,R_MINOR:6356752314245179e-9,bounds:new jt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,u=this.R,f=i.lat*o,m=this.R_MINOR/u,v=Math.sqrt(1-m*m),I=v*Math.sin(f),O=Math.tan(Math.PI/4-f/2)/Math.pow((1-I)/(1+I),v/2);return f=-u*Math.log(Math.max(O,1e-10)),new et(i.lng*o*u,f)},unproject:function(i){for(var o=180/Math.PI,u=this.R,f=this.R_MINOR/u,m=Math.sqrt(1-f*f),v=Math.exp(-i.y/u),I=Math.PI/2-2*Math.atan(v),O=0,B=.1,W;O<15&&Math.abs(B)>1e-7;O++)W=m*Math.sin(I),W=Math.pow((1-W)/(1+W),m/2),B=Math.PI/2-2*Math.atan(v*W)-I,I+=B;return new Dt(I*o,i.x*o/u)}},J={__proto__:null,LonLat:D,Mercator:F,SphericalMercator:We},Qt=r({},ze,{code:"EPSG:3395",projection:F,transformation:function(){var i=.5/(Math.PI*F.R);return P(i,.5,-i,.5)}()}),ve=r({},ze,{code:"EPSG:4326",projection:D,transformation:P(1/180,1,-1/180,.5)}),Ft=r({},oe,{projection:D,transformation:P(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var u=o.lng-i.lng,f=o.lat-i.lat;return Math.sqrt(u*u+f*f)},infinite:!0});oe.Earth=ze,oe.EPSG3395=Qt,oe.EPSG3857=M,oe.EPSG900913=U,oe.EPSG4326=ve,oe.Simple=Ft;var Jt=Nt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[p(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[p(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});kt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=p(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=p(i);return this._layers[o]?(this._loaded&&i.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return p(i)in this._layers},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},_addLayers:function(i){i=i?nt(i)?i:[i]:[];for(var o=0,u=i.length;o<u;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[p(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=p(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,u=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;i=m.minZoom===void 0?i:Math.min(i,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var he=Jt.extend({initialize:function(i,o){H(this,o),this._layers={};var u,f;if(i)for(u=0,f=i.length;u<f;u++)this.addLayer(i[u])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),u,f;for(u in this._layers)f=this._layers[u],f[i]&&f[i].apply(f,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return p(i)}}),yi=function(i,o){return new he(i,o)},me=he.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),he.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),he.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new xt;for(var o in this._layers){var u=this._layers[o];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),Fs=function(i,o){return new me(i,o)},Dn=de.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){H(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(f,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(i,o){var u=this.options,f=u[o+"Size"];typeof f=="number"&&(f=[f,f]);var m=mt(f),v=mt(o==="shadow"&&u.shadowAnchor||u.iconAnchor||m&&m.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(u.className||""),v&&(i.style.marginLeft=-v.x+"px",i.style.marginTop=-v.y+"px"),m&&(i.style.width=m.x+"px",i.style.height=m.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return ht.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Qm(i){return new Dn(i)}var Zr=Dn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Zr.imagePath!="string"&&(Zr.imagePath=this._detectIconPath()),(this.options.imagePath||Zr.imagePath)+Dn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var o=function(u,f,m){var v=f.exec(u);return v&&v[m]};return i=o(i,/^url\((['"])?(.+)\1\)$/,2),i&&o(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ot("div","leaflet-default-icon-path",document.body),o=di(i,"background-image")||di(i,"backgroundImage");if(document.body.removeChild(i),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),jc=sn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new In(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),At(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ae(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,u=o._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,v=cn(o._icon),I=u.getPixelBounds(),O=u.getPixelOrigin(),B=Zt(I.min._subtract(O).add(m),I.max._subtract(O).subtract(m));if(!B.contains(v)){var W=mt((Math.max(B.max.x,v.x)-B.max.x)/(I.max.x-B.max.x)-(Math.min(B.min.x,v.x)-B.min.x)/(I.min.x-B.min.x),(Math.max(B.max.y,v.y)-B.max.y)/(I.max.y-B.max.y)-(Math.min(B.min.y,v.y)-B.min.y)/(I.min.y-B.min.y)).multiplyBy(f);u.panBy(W,{animate:!1}),this._draggable._newPos._add(W),this._draggable._startPos._add(W),wt(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=C(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,u=o._shadow,f=cn(o._icon),m=o._map.layerPointToLatLng(f);u&&wt(u,f),o._latlng=m,i.latlng=m,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Jo=Jt.extend({options:{icon:new Zr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){H(this,o),this._latlng=St(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=St(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),f=!1;u!==this._icon&&(this._icon&&this._removeIcon(),f=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),At(u,o),i.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(u,"focus",this._panOnFocus,this);var m=i.icon.createShadow(this._shadow),v=!1;m!==this._shadow&&(this._removeShadow(),v=!0),m&&(At(m,o),m.alt=""),this._shadow=m,i.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&v&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yt(this._icon,"focus",this._panOnFocus,this),ee(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ee(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&wt(this._icon,i),this._shadow&&wt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(At(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),jc)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new jc(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&pe(this._icon,i),this._shadow&&pe(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var o=this.options.icon.options,u=o.iconSize?mt(o.iconSize):mt(0,0),f=o.iconAnchor?mt(o.iconAnchor):mt(0,0);i.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:u.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xm(i,o){return new Jo(i,o)}var wi=Jt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return H(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ta=wi.extend({options:{fill:!0,radius:10},initialize:function(i,o){H(this,o),this._latlng=St(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=St(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return wi.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,u=this._clickTolerance(),f=[i+u,o+u];this._pxBounds=new jt(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ym(i,o){return new ta(i,o)}var Bl=ta.extend({initialize:function(i,o,u){if(typeof o=="number"&&(o=r({},u,{radius:o})),H(this,o),this._latlng=St(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new xt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:wi.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,u=this._map,f=u.options.crs;if(f.distance===ze.distance){var m=Math.PI/180,v=this._mRadius/ze.R/m,I=u.project([o+v,i]),O=u.project([o-v,i]),B=I.add(O).divideBy(2),W=u.unproject(B).lat,it=Math.acos((Math.cos(v*m)-Math.sin(o*m)*Math.sin(W*m))/(Math.cos(o*m)*Math.cos(W*m)))/m;(isNaN(it)||it===0)&&(it=v/Math.cos(Math.PI/180*o)),this._point=B.subtract(u.getPixelOrigin()),this._radius=isNaN(it)?0:B.x-u.project([W,i-it]).x,this._radiusY=B.y-I.y}else{var vt=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(vt).x}this._updateBounds()}});function Jm(i,o,u){return new Bl(i,o,u)}var ei=wi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){H(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,u=null,f=pn,m,v,I=0,O=this._parts.length;I<O;I++)for(var B=this._parts[I],W=1,it=B.length;W<it;W++){m=B[W-1],v=B[W];var vt=f(i,m,v,!0);vt<o&&(o=vt,u=f(i,m,v))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=St(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new xt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return l(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],u=l(i),f=0,m=i.length;f<m;f++)u?(o[f]=St(i[f]),this._bounds.extend(o[f])):o[f]=this._convertLatLngs(i[f]);return o},_project:function(){var i=new jt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new et(i,i);this._rawPxBounds&&(this._pxBounds=new jt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(i,o,u){var f=i[0]instanceof Dt,m=i.length,v,I;if(f){for(I=[],v=0;v<m;v++)I[v]=this._map.latLngToLayerPoint(i[v]),u.extend(I[v]);o.push(I)}else for(v=0;v<m;v++)this._projectLatlngs(i[v],o,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,f,m,v,I,O,B;for(u=0,m=0,v=this._rings.length;u<v;u++)for(B=this._rings[u],f=0,I=B.length;f<I-1;f++)O=Xi(B[f],B[f+1],i,f,!0),O&&(o[m]=o[m]||[],o[m].push(O[0]),(O[1]!==B[f+1]||f===I-2)&&(o[m].push(O[1]),m++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,u=0,f=i.length;u<f;u++)i[u]=jr(i[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var u,f,m,v,I,O,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,v=this._parts.length;u<v;u++)for(O=this._parts[u],f=0,I=O.length,m=I-1;f<I;m=f++)if(!(!o&&f===0)&&qr(i,O[m],O[f])<=B)return!0;return!1}});function t_(i,o){return new ei(i,o)}ei._flat=d;var Us=ei.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Os(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var o=ei.prototype._convertLatLngs.call(this,i),u=o.length;return u>=2&&o[0]instanceof Dt&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(i){ei.prototype._setLatLngs.call(this,i),l(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return l(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,u=new et(o,o);if(i=new jt(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,v;f<m;f++)v=Ds(this._rings[f],i,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,u,f,m,v,I,O,B,W;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(v=0,B=this._parts.length;v<B;v++)for(u=this._parts[v],I=0,W=u.length,O=W-1;I<W;O=I++)f=u[I],m=u[O],f.y>i.y!=m.y>i.y&&i.x<(m.x-f.x)*(i.y-f.y)/(m.y-f.y)+f.x&&(o=!o);return o||ei.prototype._containsPoint.call(this,i,!0)}});function e_(i,o){return new Us(i,o)}var ni=me.extend({initialize:function(i,o){H(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=nt(i)?i:i.features,u,f,m;if(o){for(u=0,f=o.length;u<f;u++)m=o[u],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var v=this.options;if(v.filter&&!v.filter(i))return this;var I=ea(i,v);return I?(I.feature=sa(i),I.defaultOptions=I.options,this.resetStyle(I),v.onEachFeature&&v.onEachFeature(i,I),this.addLayer(I)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=r({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function ea(i,o){var u=i.type==="Feature"?i.geometry:i,f=u?u.coordinates:null,m=[],v=o&&o.pointToLayer,I=o&&o.coordsToLatLng||Fl,O,B,W,it;if(!f&&!u)return null;switch(u.type){case"Point":return O=I(f),qc(v,i,O,o);case"MultiPoint":for(W=0,it=f.length;W<it;W++)O=I(f[W]),m.push(qc(v,i,O,o));return new me(m);case"LineString":case"MultiLineString":return B=na(f,u.type==="LineString"?0:1,I),new ei(B,o);case"Polygon":case"MultiPolygon":return B=na(f,u.type==="Polygon"?1:2,I),new Us(B,o);case"GeometryCollection":for(W=0,it=u.geometries.length;W<it;W++){var vt=ea({geometry:u.geometries[W],type:"Feature",properties:i.properties},o);vt&&m.push(vt)}return new me(m);case"FeatureCollection":for(W=0,it=u.features.length;W<it;W++){var Rt=ea(u.features[W],o);Rt&&m.push(Rt)}return new me(m);default:throw new Error("Invalid GeoJSON object.")}}function qc(i,o,u,f){return i?i(o,u):new Jo(u,f&&f.markersInheritOptions&&f)}function Fl(i){return new Dt(i[1],i[0],i[2])}function na(i,o,u){for(var f=[],m=0,v=i.length,I;m<v;m++)I=o?na(i[m],o-1,u):(u||Fl)(i[m]),f.push(I);return f}function Ul(i,o){return i=St(i),i.alt!==void 0?[x(i.lng,o),x(i.lat,o),x(i.alt,o)]:[x(i.lng,o),x(i.lat,o)]}function ia(i,o,u,f){for(var m=[],v=0,I=i.length;v<I;v++)m.push(o?ia(i[v],l(i[v])?0:o-1,u,f):Ul(i[v],f));return!o&&u&&m.length>0&&m.push(m[0].slice()),m}function zs(i,o){return i.feature?r({},i.feature,{geometry:o}):sa(o)}function sa(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var zl={toGeoJSON:function(i){return zs(this,{type:"Point",coordinates:Ul(this.getLatLng(),i)})}};Jo.include(zl),Bl.include(zl),ta.include(zl),ei.include({toGeoJSON:function(i){var o=!l(this._latlngs),u=ia(this._latlngs,o?1:0,!1,i);return zs(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),Us.include({toGeoJSON:function(i){var o=!l(this._latlngs),u=o&&!l(this._latlngs[0]),f=ia(this._latlngs,u?2:o?1:0,!0,i);return o||(f=[f]),zs(this,{type:(u?"Multi":"")+"Polygon",coordinates:f})}}),he.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(i).geometry.coordinates)}),zs(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var u=o==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var v=m.toGeoJSON(i);if(u)f.push(v.geometry);else{var I=sa(v);I.type==="FeatureCollection"?f.push.apply(f,I.features):f.push(I)}}}),u?zs(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Hc(i,o){return new ni(i,o)}var n_=Hc,ra=Jt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,u){this._url=i,this._bounds=re(o),H(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(At(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ee(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Qn(this._image),this},bringToBack:function(){return this._map&&pi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=re(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:Ot("img");if(At(o,"leaflet-image-layer"),this._zoomAnimated&&At(o,"leaflet-zoom-animated"),this.options.className&&At(o,this.options.className),o.onselectstart=T,o.onmousemove=T,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Mn(this._image,u,o)},_reset:function(){var i=this._image,o=new jt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();wt(i,o.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),i_=function(i,o,u){return new ra(i,o,u)},Zc=ra.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:Ot("video");if(At(o,"leaflet-image-layer"),this._zoomAnimated&&At(o,"leaflet-zoom-animated"),this.options.className&&At(o,this.options.className),o.onselectstart=T,o.onmousemove=T,o.onloadeddata=c(this.fire,this,"load"),i){for(var u=o.getElementsByTagName("source"),f=[],m=0;m<u.length;m++)f.push(u[m].src);this._url=u.length>0?f:[o.src];return}nt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var I=Ot("source");I.src=this._url[v],o.appendChild(I)}}});function s_(i,o,u){return new Zc(i,o,u)}var Wc=ra.extend({_initImage:function(){var i=this._image=this._url;At(i,"leaflet-image-layer"),this._zoomAnimated&&At(i,"leaflet-zoom-animated"),this.options.className&&At(i,this.options.className),i.onselectstart=T,i.onmousemove=T}});function r_(i,o,u){return new Wc(i,o,u)}var On=Jt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,o){i&&(i instanceof Dt||nt(i))?(this._latlng=St(i),H(this,o)):(H(this,i),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&pe(this._container,1),this.bringToFront(),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(c(ee,void 0,this._container),200)):ee(this._container),this.options.interactive&&(ae(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=St(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qn(this._container),this},bringToBack:function(){return this._map&&pi(this._container),this},_prepareOpen:function(i){var o=this._source;if(!o._map)return!1;if(o instanceof me){o=null;var u=this._source._layers;for(var f in u)if(u[f]._map){o=u[f];break}if(!o)return!1;this._source=o}if(!i)if(o.getCenter)i=o.getCenter();else if(o.getLatLng)i=o.getLatLng();else if(o.getBounds)i=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=mt(this.options.offset),u=this._getAnchor();this._zoomAnimated?wt(this._container,i.add(u)):o=o.add(i).add(u);var f=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});kt.include({_initOverlay:function(i,o,u,f){var m=o;return m instanceof i||(m=new i(f).setContent(o)),u&&m.setLatLng(u),m}}),Jt.include({_initOverlay:function(i,o,u,f){var m=u;return m instanceof i?(H(m,f),m._source=this):(m=o&&!f?o:new i(f,this),m.setContent(u)),m}});var oa=On.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,On.prototype.openOn.call(this,i)},onAdd:function(i){On.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof wi||this._source.on("preclick",dn))},onRemove:function(i){On.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof wi||this._source.off("preclick",dn))},getEvents:function(){var i=On.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",o=this._container=Ot("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Ot("div",i+"-content-wrapper",o);if(this._contentNode=Ot("div",i+"-content",u),gi(o),_i(this._contentNode),gt(o,"contextmenu",dn),this._tipContainer=Ot("div",i+"-tip-container",o),this._tip=Ot("div",i+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ot("a",i+"-close-button",o);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',gt(f,"click",function(m){ce(m),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var f=i.offsetHeight,m=this.options.maxHeight,v="leaflet-popup-scrolled";m&&f>m?(o.height=m+"px",At(i,v)):ae(i,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();wt(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,o=parseInt(di(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,f=this._containerWidth,m=new et(this._containerLeft,-u-this._containerBottom);m._add(cn(this._container));var v=i.layerPointToContainerPoint(m),I=mt(this.options.autoPanPadding),O=mt(this.options.autoPanPaddingTopLeft||I),B=mt(this.options.autoPanPaddingBottomRight||I),W=i.getSize(),it=0,vt=0;v.x+f+B.x>W.x&&(it=v.x+f-W.x+B.x),v.x-it-O.x<0&&(it=v.x-O.x),v.y+u+B.y>W.y&&(vt=v.y+u-W.y+B.y),v.y-vt-O.y<0&&(vt=v.y-O.y),(it||vt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([it,vt]))}},_getAnchor:function(){return mt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),o_=function(i,o){return new oa(i,o)};kt.mergeOptions({closePopupOnClick:!0}),kt.include({openPopup:function(i,o,u){return this._initOverlay(oa,i,o,u).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Jt.include({bindPopup:function(i,o){return this._popup=this._initOverlay(oa,this._popup,i,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof me||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){nn(i);var o=i.layer||i.target;if(this._popup._source===o&&!(o instanceof wi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=o,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var aa=On.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){On.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){On.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=On.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ot("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,u,f=this._map,m=this._container,v=f.latLngToContainerPoint(f.getCenter()),I=f.layerPointToContainerPoint(i),O=this.options.direction,B=m.offsetWidth,W=m.offsetHeight,it=mt(this.options.offset),vt=this._getAnchor();O==="top"?(o=B/2,u=W):O==="bottom"?(o=B/2,u=0):O==="center"?(o=B/2,u=W/2):O==="right"?(o=0,u=W/2):O==="left"?(o=B,u=W/2):I.x<v.x?(O="right",o=0,u=W/2):(O="left",o=B+(it.x+vt.x)*2,u=W/2),i=i.subtract(mt(o,u,!0)).add(it).add(vt),ae(m,"leaflet-tooltip-right"),ae(m,"leaflet-tooltip-left"),ae(m,"leaflet-tooltip-top"),ae(m,"leaflet-tooltip-bottom"),At(m,"leaflet-tooltip-"+O),wt(m,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&pe(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return mt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),a_=function(i,o){return new aa(i,o)};kt.include({openTooltip:function(i,o,u){return this._initOverlay(aa,i,o,u).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Jt.include({bindTooltip:function(i,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(aa,this._tooltip,i,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof me||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&(gt(o,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),gt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var o=i.latlng,u,f;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),f=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(o)}});var Kc=Dn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Gi(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var f=mt(u.bgPos);o.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function l_(i){return new Kc(i)}Dn.Default=Zr;var Wr=Jt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){H(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ee(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof et?i:new et(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,u=-i(-1/0,1/0),f=0,m=o.length,v;f<m;f++)v=o[f].style.zIndex,o[f]!==this._container&&v&&(u=i(u,+v));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){pe(this._container,this.options.opacity);var i=+new Date,o=!1,u=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var v=Math.min(1,(i-m.loaded)/200);pe(m.el,v),v<1?o=!0:(m.active?u=!0:this._onOpaqueTile(m),m.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(k(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=Ot("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=o-Math.abs(i-u),this._onUpdateLevel(u)):(ee(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var f=this._levels[i],m=this._map;return f||(f=this._levels[i]={},f.el=Ot("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=o,f.origin=m.project(m.unproject(m.getPixelOrigin()),i).round(),f.zoom=i,this._setZoomTransform(f,m.getCenter(),m.getZoom()),T(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var i,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var f=o.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ee(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,u,f){var m=Math.floor(i/2),v=Math.floor(o/2),I=u-1,O=new et(+m,+v);O.z=+I;var B=this._tileCoordsToKey(O),W=this._tiles[B];return W&&W.active?(W.retain=!0,!0):(W&&W.loaded&&(W.retain=!0),I>f?this._retainParent(m,v,I,f):!1)},_retainChildren:function(i,o,u,f){for(var m=2*i;m<2*i+2;m++)for(var v=2*o;v<2*o+2;v++){var I=new et(m,v);I.z=u+1;var O=this._tileCoordsToKey(I),B=this._tiles[O];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);u+1<f&&this._retainChildren(m,v,u+1,f)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,u,f){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var v=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||v)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,o)},_setZoomTransform:function(i,o,u){var f=this._map.getZoomScale(u,i.zoom),m=i.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(o,u)).round();ht.any3d?Mn(i.el,m,f):wt(i.el,m)},_resetGrid:function(){var i=this._map,o=i.options.crs,u=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],f).x/u.x),Math.ceil(i.project([0,o.wrapLng[1]],f).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],f).y/u.x),Math.ceil(i.project([o.wrapLat[1],0],f).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),f=o.getZoomScale(u,this._tileZoom),m=o.project(i,this._tileZoom).floor(),v=o.getSize().divideBy(f*2);return new jt(m.subtract(v),m.add(v))},_update:function(i){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(i),m=this._pxBoundsToTileRange(f),v=m.getCenter(),I=[],O=this.options.keepBuffer,B=new jt(m.getBottomLeft().subtract([O,-O]),m.getTopRight().add([O,-O]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var W in this._tiles){var it=this._tiles[W].coords;(it.z!==this._tileZoom||!B.contains(new et(it.x,it.y)))&&(this._tiles[W].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var vt=m.min.y;vt<=m.max.y;vt++)for(var Rt=m.min.x;Rt<=m.max.x;Rt++){var je=new et(Rt,vt);if(je.z=this._tileZoom,!!this._isValidTile(je)){var xe=this._tiles[this._tileCoordsToKey(je)];xe?xe.current=!0:I.push(je)}}if(I.sort(function(Qe,js){return Qe.distanceTo(v)-js.distanceTo(v)}),I.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var mn=document.createDocumentFragment();for(Rt=0;Rt<I.length;Rt++)this._addTile(I[Rt],mn);this._level.el.appendChild(mn)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!o.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(i);return re(this.options.bounds).overlaps(f)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,u=this.getTileSize(),f=i.scaleBy(u),m=f.add(u),v=o.unproject(f,i.z),I=o.unproject(m,i.z);return[v,I]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),u=new xt(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),u=new et(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(i){var o=this._tiles[i];o&&(ee(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){At(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=T,i.onmousemove=T,ht.ielt9&&this.options.opacity<1&&pe(i,this.options.opacity)},_addTile:function(i,o){var u=this._getTilePos(i),f=this._tileCoordsToKey(i),m=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(m),this.createTile.length<2&&C(c(this._tileReady,this,i,null,m)),wt(m,u),this._tiles[f]={el:m,coords:i,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:i})},_tileReady:function(i,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:i});var f=this._tileCoordsToKey(i);u=this._tiles[f],u&&(u.loaded=+new Date,this._map._fadeAnimated?(pe(u.el,0),k(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(At(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new et(this._wrapX?y(i.x,this._wrapX):i.x,this._wrapY?y(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new jt(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function u_(i){return new Wr(i)}var $s=Wr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,o){this._url=i,o=H(this,o),o.detectRetina&&ht.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var u=document.createElement("img");return gt(u,"load",c(this._tileOnLoad,this,o,u)),gt(u,"error",c(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(i),u},getTileUrl:function(i){var o={r:ht.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=u),o["-y"]=u}return lt(this._url,r(o,this.options))},_tileOnLoad:function(i,o){ht.ielt9?setTimeout(c(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,u){var f=this.options.errorTileUrl;f&&o.getAttribute("src")!==f&&(o.src=f),i(u,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,f=this.options.zoomOffset;return u&&(i=o-i),i+f},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=T,o.onerror=T,!o.complete)){o.src=qt;var u=this._tiles[i].coords;ee(o),delete this._tiles[i],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(i){var o=this._tiles[i];if(o)return o.el.setAttribute("src",qt),Wr.prototype._removeTile.call(this,i)},_tileReady:function(i,o,u){if(!(!this._map||u&&u.getAttribute("src")===qt))return Wr.prototype._tileReady.call(this,i,o,u)}});function Gc(i,o){return new $s(i,o)}var Qc=$s.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var u=r({},this.defaultWmsParams);for(var f in o)f in this.options||(u[f]=o[f]);o=H(this,o);var m=o.detectRetina&&ht.retina?2:1,v=this.getTileSize();u.width=v.x*m,u.height=v.y*m,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,$s.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),u=this._crs,f=Zt(u.project(o[0]),u.project(o[1])),m=f.min,v=f.max,I=(this._wmsVersion>=1.3&&this._crs===ve?[m.y,m.x,v.y,v.x]:[m.x,m.y,v.x,v.y]).join(","),O=$s.prototype.getTileUrl.call(this,i);return O+$(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(i,o){return r(this.wmsParams,i),o||this.redraw(),this}});function c_(i,o){return new Qc(i,o)}$s.WMS=Qc,Gc.wms=c_;var ii=Jt.extend({options:{padding:.1},initialize:function(i){H(this,i),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),At(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var u=this._map.getZoomScale(o,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),v=f.multiplyBy(-u).add(m).subtract(this._map._getNewPixelOrigin(i,o));ht.any3d?Mn(this._container,v,u):wt(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new jt(u,u.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Xc=ii.extend({options:{tolerance:0},getEvents:function(){var i=ii.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ii.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");gt(i,"mousemove",this._onMouseMove,this),gt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),gt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,ee(this._container),Yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ii.prototype._update.call(this);var i=this._bounds,o=this._container,u=i.getSize(),f=ht.retina?2:1;wt(o,i.min),o.width=f*u.x,o.height=f*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ii.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[p(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,u=o.next,f=o.prev;u?u.prev=f:this._drawLast=f,f?f.next=u:this._drawFirst=u,delete i._order,delete this._layers[p(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),u=[],f,m;for(m=0;m<o.length;m++){if(f=Number(o[m]),isNaN(f))return;u.push(f)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new jt,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)i=f.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(this._drawing){var u,f,m,v,I=i._parts,O=I.length,B=this._ctx;if(O){for(B.beginPath(),u=0;u<O;u++){for(f=0,m=I[u].length;f<m;f++)v=I[u][f],B[f?"lineTo":"moveTo"](v.x,v.y);o&&B.closePath()}this._fillStroke(B,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,u=this._ctx,f=Math.max(Math.round(i._radius),1),m=(Math.max(Math.round(i._radiusY),1)||f)/f;m!==1&&(u.save(),u.scale(1,m)),u.beginPath(),u.arc(o.x,o.y/m,f,0,Math.PI*2,!1),m!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,o){var u=o.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),u,f,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(f=u);this._fireEvent(f?[f]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(ae(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var u,f,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(f=u);f!==this._hoveredLayer&&(this._handleMouseOut(i),f&&(At(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,u){this._map._fireDOMEvent(o,u||o.type,i)},_bringToFront:function(i){var o=i._order;if(o){var u=o.next,f=o.prev;if(u)u.prev=f;else return;f?f.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(o){var u=o.next,f=o.prev;if(f)f.next=u;else return;u?u.prev=f:f&&(this._drawLast=f),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function Yc(i){return ht.canvas?new Xc(i):null}var Kr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),h_={_initContainer:function(){this._container=Ot("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ii.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=Kr("shape");At(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=Kr("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;ee(o),i.removeInteractiveTarget(o),delete this._layers[p(i)]},_updateStyle:function(i){var o=i._stroke,u=i._fill,f=i.options,m=i._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(o||(o=i._stroke=Kr("stroke")),m.appendChild(o),o.weight=f.weight+"px",o.color=f.color,o.opacity=f.opacity,f.dashArray?o.dashStyle=nt(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=f.lineCap.replace("butt","flat"),o.joinstyle=f.lineJoin):o&&(m.removeChild(o),i._stroke=null),f.fill?(u||(u=i._fill=Kr("fill")),m.appendChild(u),u.color=f.fillColor||f.color,u.opacity=f.fillOpacity):u&&(m.removeChild(u),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),u=Math.round(i._radius),f=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+f+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){Qn(i._container)},_bringToBack:function(i){pi(i._container)}},la=ht.vml?Kr:q,Gr=ii.extend({_initContainer:function(){this._container=la("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=la("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ee(this._container),Yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ii.prototype._update.call(this);var i=this._bounds,o=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),wt(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=la("path");i.options.className&&At(o,i.options.className),i.options.interactive&&At(o,"leaflet-interactive"),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ee(i._path),i.removeInteractiveTarget(i._path),delete this._layers[p(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,u=i.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,Z(i._parts,o))},_updateCircle:function(i){var o=i._point,u=Math.max(Math.round(i._radius),1),f=Math.max(Math.round(i._radiusY),1)||u,m="a"+u+","+f+" 0 1,0 ",v=i._empty()?"M0 0":"M"+(o.x-u)+","+o.y+m+u*2+",0 "+m+-u*2+",0 ";this._setPath(i,v)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){Qn(i._path)},_bringToBack:function(i){pi(i._path)}});ht.vml&&Gr.include(h_);function Jc(i){return ht.svg||ht.vml?new Gr(i):null}kt.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&Yc(i)||Jc(i)}});var th=Us.extend({initialize:function(i,o){Us.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=re(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function f_(i,o){return new th(i,o)}Gr.create=la,Gr.pointsToPath=Z,ni.geometryToLayer=ea,ni.coordsToLatLng=Fl,ni.coordsToLatLngs=na,ni.latLngToCoords=Ul,ni.latLngsToCoords=ia,ni.getFeature=zs,ni.asFeature=sa,kt.mergeOptions({boxZoom:!0});var eh=sn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ee(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),En(),Mr(),this._startPoint=this._map.mouseEventToContainerPoint(i),gt(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ot("div","leaflet-zoom-box",this._container),At(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new jt(this._point,this._startPoint),u=o.getSize();wt(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ee(this._box),ae(this._container,"leaflet-crosshair")),bn(),kr(),Yt(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new xt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});kt.addInitHook("addHandler","boxZoom",eh),kt.mergeOptions({doubleClickZoom:!0});var nh=sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,u=o.getZoom(),f=o.options.zoomDelta,m=i.originalEvent.shiftKey?u-f:u+f;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(i.containerPoint,m)}});kt.addInitHook("addHandler","doubleClickZoom",nh),kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ih=sn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new In(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}At(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ae(this._map._container,"leaflet-grab"),ae(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=re(this._map.options.maxBounds);this._offsetLimit=Zt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),u=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-o+u)%i+o-u,v=(f+o+u)%i-o-u,I=Math.abs(m+u)<Math.abs(v+u)?m:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(i){var o=this._map,u=o.options,f=!u.inertia||i.noInertia||this._times.length<2;if(o.fire("dragend",i),f)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,I=u.easeLinearity,O=m.multiplyBy(I/v),B=O.distanceTo([0,0]),W=Math.min(u.inertiaMaxSpeed,B),it=O.multiplyBy(W/B),vt=W/(u.inertiaDeceleration*I),Rt=it.multiplyBy(-vt/2).round();!Rt.x&&!Rt.y?o.fire("moveend"):(Rt=o._limitOffset(Rt,o.options.maxBounds),C(function(){o.panBy(Rt,{duration:vt,easeLinearity:I,noMoveStart:!0,animate:!0})}))}}});kt.addInitHook("addHandler","dragging",ih),kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sh=sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),gt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,u=i.scrollTop||o.scrollTop,f=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(f,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},u=this.keyCodes,f,m;for(f=0,m=u.left.length;f<m;f++)o[u.left[f]]=[-1*i,0];for(f=0,m=u.right.length;f<m;f++)o[u.right[f]]=[i,0];for(f=0,m=u.down.length;f<m;f++)o[u.down[f]]=[0,i];for(f=0,m=u.up.length;f<m;f++)o[u.up[f]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},u=this.keyCodes,f,m;for(f=0,m=u.zoomIn.length;f<m;f++)o[u.zoomIn[f]]=i;for(f=0,m=u.zoomOut.length;f<m;f++)o[u.zoomOut[f]]=-i},_addHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,u=this._map,f;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(f=this._panKeys[o],i.shiftKey&&(f=mt(f).multiplyBy(3)),u.options.maxBounds&&(f=u._limitOffset(mt(f),u.options.maxBounds)),u.options.worldCopyJump){var m=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(f)));u.panTo(m)}else u.panBy(f)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;nn(i)}}});kt.addInitHook("addHandler","keyboard",sh),kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rh=sn.extend({addHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=Zo(i),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var f=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),f),nn(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,v=u?Math.ceil(m/u)*u:m,I=i._limitZoom(o+(this._delta>0?v:-v))-o;this._delta=0,this._startTime=null,I&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+I):i.setZoomAround(this._lastMousePos,o+I))}});kt.addInitHook("addHandler","scrollWheelZoom",rh);var d_=600;kt.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var oh=sn.extend({addHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var o=i.touches[0];this._startPos=this._newPos=new et(o.clientX,o.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(gt(document,"touchend",ce),gt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),d_),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Yt(document,"touchend",ce),Yt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Yt(document,"touchend touchcancel contextmenu",this._cancel,this),Yt(document,"touchmove",this._onMove,this)},_onMove:function(i){var o=i.touches[0];this._newPos=new et(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,o){var u=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});kt.addInitHook("addHandler","tapHold",oh),kt.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var ah=sn.extend({addHooks:function(){At(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(i.touches[0]),f=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(f)._divideBy(2))),this._startDist=u.distanceTo(f),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),ce(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(i.touches[0]),f=o.mouseEventToContainerPoint(i.touches[1]),m=u.distanceTo(f)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var v=u._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&v.x===0&&v.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var I=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(I,this,!0),ce(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,k(this._animRequest),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});kt.addInitHook("addHandler","touchZoom",ah),kt.BoxZoom=eh,kt.DoubleClickZoom=nh,kt.Drag=ih,kt.Keyboard=sh,kt.ScrollWheelZoom=rh,kt.TapHold=oh,kt.TouchZoom=ah,e.Bounds=jt,e.Browser=ht,e.CRS=oe,e.Canvas=Xc,e.Circle=Bl,e.CircleMarker=ta,e.Class=de,e.Control=Ge,e.DivIcon=Kc,e.DivOverlay=On,e.DomEvent=Wo,e.DomUtil=qo,e.Draggable=In,e.Evented=Nt,e.FeatureGroup=me,e.GeoJSON=ni,e.GridLayer=Wr,e.Handler=sn,e.Icon=Dn,e.ImageOverlay=ra,e.LatLng=Dt,e.LatLngBounds=xt,e.Layer=Jt,e.LayerGroup=he,e.LineUtil=w,e.Map=kt,e.Marker=Jo,e.Mixin=Qi,e.Path=wi,e.Point=et,e.PolyUtil=Ns,e.Polygon=Us,e.Polyline=ei,e.Popup=oa,e.PosAnimation=Ur,e.Projection=J,e.Rectangle=th,e.Renderer=ii,e.SVG=Gr,e.SVGOverlay=Wc,e.TileLayer=$s,e.Tooltip=aa,e.Transformation=Hn,e.Util=A,e.VideoOverlay=Zc,e.bind=c,e.bounds=Zt,e.canvas=Yc,e.circle=Jm,e.circleMarker=Ym,e.control=$e,e.divIcon=l_,e.extend=r,e.featureGroup=Fs,e.geoJSON=Hc,e.geoJson=n_,e.gridLayer=u_,e.icon=Qm,e.imageOverlay=i_,e.latLng=St,e.latLngBounds=re,e.layerGroup=yi,e.map=Ls,e.marker=Xm,e.point=mt,e.polygon=e_,e.polyline=t_,e.popup=o_,e.rectangle=f_,e.setOptions=H,e.stamp=p,e.svg=Jc,e.svgOverlay=r_,e.tileLayer=Gc,e.tooltip=a_,e.transformation=P,e.version=s,e.videoOverlay=s_;var p_=window.L;e.noConflict=function(){return window.L=p_,this},window.L=e})}(ro,ro.exports)),ro.exports}var V=Ab();const ri=Ib(V);var xb=Object.defineProperty,Cb=(n,t,e)=>t in n?xb(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Xt=(n,t,e)=>Cb(n,typeof t!="symbol"?t+"":t,e);function Ze(n,t){return V.Util.extend(t,n.geocodingQueryParams)}function tn(n,t){return V.Util.extend(t,n.reverseQueryParams)}const Sb=/[&<>"'`]/g,Rb=/[&<>"'`]/,Lb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function Mb(n){return Lb[n]}function kb(n){return n==null?"":n?(n=""+n,Rb.test(n)?n.replace(Sb,Mb):n):n+""}function ie(n,t){const e={Accept:"application/json"},s=new URL(n);return Object.entries(t).forEach(([r,a])=>{(Array.isArray(a)?a:[a]).forEach(c=>{s.searchParams.append(r,c)})}),fetch(s.toString(),{headers:e}).then(r=>r.json())}function Db(n,t){return n.replace(/\{ *([\w_]+) *\}/g,(e,s)=>{let r=t[s];return r===void 0?r="":typeof r=="function"&&(r=r(t)),kb(r)})}let Dm=class{constructor(t){Xt(this,"options",{serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""}),V.Util.setOptions(this,t)}async geocode(t){const e=Ze(this.options,{token:this.options.apiKey,SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"}),s=await ie(this.options.serviceUrl+"/findAddressCandidates",e),r=[];if(s.candidates&&s.candidates.length)for(let a=0;a<=s.candidates.length-1;a++){const c=s.candidates[a],h=V.latLng(c.location.y,c.location.x),p=V.latLngBounds(V.latLng(c.extent.ymax,c.extent.xmax),V.latLng(c.extent.ymin,c.extent.xmin));r[a]={name:c.address,bbox:p,center:h}}return r}suggest(t){return this.geocode(t)}async reverse(t,e){const s=tn(this.options,{location:t.lng+","+t.lat,distance:100,f:"json"}),r=await ie(this.options.serviceUrl+"/reverseGeocode",s),a=[];if(r&&!r.error){const c=V.latLng(r.location.y,r.location.x),h=V.latLngBounds(c,c);a.push({name:r.address.Match_addr,center:c,bbox:h})}return a}};function Ob(n){return new Dm(n)}class Om{constructor(t){Xt(this,"options",{serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ze(this.options,{query:t,key:this.options.apiKey}),s=await ie(this.options.serviceUrl,e),r=[];if(s.resourceSets.length>0)for(let a=s.resourceSets[0].resources.length-1;a>=0;a--){const c=s.resourceSets[0].resources[a],h=c.bbox;r[a]={name:c.name,bbox:V.latLngBounds([h[0],h[1]],[h[2],h[3]]),center:V.latLng(c.point.coordinates)}}return r}async reverse(t,e){const s=tn(this.options,{key:this.options.apiKey}),r=await ie(this.options.serviceUrl+t.lat+","+t.lng,s),a=[];for(let c=r.resourceSets[0].resources.length-1;c>=0;c--){const h=r.resourceSets[0].resources[c],p=h.bbox;a[c]={name:h.name,bbox:V.latLngBounds([p[0],p[1]],[p[2],p[3]]),center:V.latLng(h.point.coordinates)}}return a}}function Vb(n){return new Om(n)}class Vm{constructor(t){if(Xt(this,"options",{apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"}),V.Util.setOptions(this,t),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}async geocode(t){const e={"api-version":"1.0",query:t,"subscription-key":this.options.apiKey},s=this.options.serviceUrl+"/address/json",r=await ie(s,e),a=[];if(r.results&&r.results.length>0)for(const c of r.results)a.push({name:c.address.freeformAddress,bbox:V.latLngBounds([c.viewport.topLeftPoint.lat,c.viewport.topLeftPoint.lon],[c.viewport.btmRightPoint.lat,c.viewport.btmRightPoint.lon]),center:V.latLng(c.position.lat,c.position.lon)});return a}async reverse(t,e){const s={"api-version":"1.0",query:t.lat+","+t.lng,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+"/address/reverse/json",a=await ie(r,s),c=[];if(a.addresses&&a.addresses.length>0)for(const h of a.addresses)c.push({name:h.address.freeformAddress,bbox:V.latLngBounds([h.viewport.topLeftPoint.lat,h.viewport.topLeftPoint.lon],[h.viewport.btmRightPoint.lat,h.viewport.btmRightPoint.lon]),center:V.latLng(t.lat,t.lng)});return c}}function Nb(n){return new Vm(n)}class Nm{constructor(t){Xt(this,"options",{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ze(this.options,{key:this.options.apiKey,address:t}),s=await ie(this.options.serviceUrl,e),r=[];if(s.results&&s.results.length)for(let a=0;a<=s.results.length-1;a++){const c=s.results[a],h=V.latLng(c.geometry.location),p=V.latLngBounds(V.latLng(c.geometry.viewport.northeast),V.latLng(c.geometry.viewport.southwest));r[a]={name:c.formatted_address,bbox:p,center:h,properties:c.address_components}}return r}async reverse(t,e){const s=tn(this.options,{key:this.options.apiKey,latlng:t.lat+","+t.lng}),r=await ie(this.options.serviceUrl,s),a=[];if(r.results&&r.results.length)for(let c=0;c<=r.results.length-1;c++){const h=r.results[c],p=V.latLng(h.geometry.location),g=V.latLngBounds(V.latLng(h.geometry.viewport.northeast),V.latLng(h.geometry.viewport.southwest));a[c]={name:h.formatted_address,bbox:g,center:p,properties:h.address_components}}return a}}function Bb(n){return new Nm(n)}class Bm{constructor(t){if(Xt(this,"options",{serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5}),V.Util.setOptions(this,t),t!=null&&t.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(t){const e=Ze(this.options,{searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",e)}reverse(t,e){let s=t.lat+","+t.lng;this.options.reverseGeocodeProxRadius&&(s+=","+this.options.reverseGeocodeProxRadius);const r=tn(this.options,{prox:s,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",r)}async getJSON(t,e){const s=await ie(t,e),r=[];if(s.response.view&&s.response.view.length)for(let a=0;a<=s.response.view[0].result.length-1;a++){const c=s.response.view[0].result[a].location,h=V.latLng(c.displayPosition.latitude,c.displayPosition.longitude),p=V.latLngBounds(V.latLng(c.mapView.topLeft.latitude,c.mapView.topLeft.longitude),V.latLng(c.mapView.bottomRight.latitude,c.mapView.bottomRight.longitude));r[a]={name:c.address.label,properties:c.address,bbox:p,center:h}}return r}}class Fm{constructor(t){Xt(this,"options",{serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10}),V.Util.setOptions(this,t)}geocode(t){const e=Ze(this.options,{q:t,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!e.at&&!e.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",e)}reverse(t,e){const s=tn(this.options,{at:t.lat+","+t.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",s)}async getJSON(t,e){const s=await ie(t,e),r=[];if(s.items&&s.items.length)for(let a=0;a<=s.items.length-1;a++){const c=s.items[a],h=V.latLng(c.position.lat,c.position.lng);let p;c.mapView?p=V.latLngBounds(V.latLng(c.mapView.south,c.mapView.west),V.latLng(c.mapView.north,c.mapView.east)):p=V.latLngBounds(V.latLng(c.position.lat,c.position.lng),V.latLng(c.position.lat,c.position.lng)),r[a]={name:c.address.label,properties:c.address,bbox:p,center:h}}return r}}function Fb(n){return n!=null&&n.apiKey?new Fm(n):new Bm(n)}function Um(n){let t;if(t=n.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return V.latLng((/N/i.test(t[1])?1:-1)*+t[2],(/E/i.test(t[3])?1:-1)*+t[4]);if(t=n.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return V.latLng((/N/i.test(t[2])?1:-1)*+t[1],(/E/i.test(t[4])?1:-1)*+t[3]);if(t=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\W*([EW])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?$/))return V.latLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60),(/E/i.test(t[4])?1:-1)*(+t[5]+ +t[6]/60));if(t=n.match(/^(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([NS])\W*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([EW])$/))return V.latLng((/N/i.test(t[3])?1:-1)*(+t[1]+ +t[2]/60),(/E/i.test(t[6])?1:-1)*(+t[4]+ +t[5]/60));if(t=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\W*([EW])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?$/))return V.latLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60+ +t[4]/3600),(/E/i.test(t[5])?1:-1)*(+t[6]+ +t[7]/60+ +t[8]/3600));if(t=n.match(/^(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]\s*([NS])\W*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\s*([EW])$/))return V.latLng((/N/i.test(t[4])?1:-1)*(+t[1]+ +t[2]/60+ +t[3]/3600),(/E/i.test(t[8])?1:-1)*(+t[5]+ +t[6]/60+ +t[7]/3600));if(t=n.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return V.latLng(+t[1],+t[2])}class zm{constructor(t){Xt(this,"options",{next:void 0,sizeInMeters:1e4}),V.Util.setOptions(this,t)}async geocode(t){const e=Um(t);return e?[{name:t,center:e,bbox:e.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(t):[]}}function Ub(n){return new zm(n)}class $m{constructor(t){Xt(this,"options",{serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"}),V.Util.setOptions(this,t)}_getProperties(t){const e={text:t.text,address:t.address};for(let s=0;s<(t.context||[]).length;s++){const r=t.context[s].id.split(".")[0];e[r]=t.context[s].text,t.context[s].short_code&&(e.countryShortCode=t.context[s].short_code)}return e}async geocode(t){const e=this.options.serviceUrl+encodeURIComponent(t)+".json",s=Ze(this.options,{access_token:this.options.apiKey});s.proximity!==void 0&&s.proximity.lat!==void 0&&s.proximity.lng!==void 0&&(s.proximity=s.proximity.lng+","+s.proximity.lat);const r=await ie(e,s);return this._parseResults(r)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=this.options.serviceUrl+t.lng+","+t.lat+".json",r=tn(this.options,{access_token:this.options.apiKey}),a=await ie(s,r);return this._parseResults(a)}_parseResults(t){var e;if(!((e=t.features)!=null&&e.length))return[];const s=[];for(let r=0;r<=t.features.length-1;r++){const a=t.features[r],c=V.latLng(a.center.reverse());let h;a.bbox?h=V.latLngBounds(V.latLng(a.bbox.slice(0,2).reverse()),V.latLng(a.bbox.slice(2,4).reverse())):h=V.latLngBounds(c,c),s[r]={name:a.place_name,bbox:h,center:c,properties:this._getProperties(a)}}return s}}function zb(n){return new $m(n)}class jm{constructor(t){Xt(this,"options",{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"}),V.Util.setOptions(this,t),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...t){return t.filter(e=>!!e).join(", ")}async geocode(t){const e=Ze(this.options,{key:this.options.apiKey,location:t,limit:5,outFormat:"json"}),s=await ie(this.options.serviceUrl+"/address",e);return this._parseResults(s)}async reverse(t,e){const s=tn(this.options,{key:this.options.apiKey,location:t.lat+","+t.lng,outputFormat:"json"}),r=await ie(this.options.serviceUrl+"/reverse",s);return this._parseResults(r)}_parseResults(t){const e=[];if(t.results&&t.results[0].locations)for(let s=t.results[0].locations.length-1;s>=0;s--){const r=t.results[0].locations[s],a=V.latLng(r.latLng);e[s]={name:this._formatName(r.street,r.adminArea4,r.adminArea3,r.adminArea1),bbox:V.latLngBounds(a,a),center:a}}return e}}function $b(n){return new jm(n)}class qm{constructor(t){Xt(this,"options",{userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ze(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:t.split(/\s+/).join(".")}),s=await ie(this.options.serviceUrl+"geocode-address",e),r=[];if(s.locations){s.geometry=s.locations[0];const a=V.latLng(s.geometry.latitude,s.geometry.longitude),c=V.latLngBounds(a,a);r[0]={name:s.geometry.address,bbox:c,center:a}}return r}suggest(t){return this.geocode(t)}async reverse(t,e){const s=tn(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:t.lat,longitude:t.lng}),r=await ie(this.options.serviceUrl+"geocode-reverse",s),a=[];if(r.status.status==200&&r.found){const c=V.latLng(t.lat,t.lng),h=V.latLngBounds(c,c);a[0]={name:r.address,bbox:h,center:c}}return a}}function jb(n){return new qm(n)}class Fc{constructor(t){Xt(this,"options",{serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(e){const s=e.address;let r;const a=[];return(s.road||s.building)&&a.push("{building} {road} {house_number}"),(s.city||s.town||s.village||s.hamlet)&&(r=a.length>0?"leaflet-control-geocoder-address-detail":"",a.push('<span class="'+r+'">{postcode} {city} {town} {village} {hamlet}</span>')),(s.state||s.country)&&(r=a.length>0?"leaflet-control-geocoder-address-context":"",a.push('<span class="'+r+'">{state} {country}</span>')),Db(a.join("<br/>"),s)}}),V.Util.setOptions(this,t||{})}async geocode(t){const e=Ze(this.options,{q:t,limit:5,format:"json",addressdetails:1}),s=await ie(this.options.serviceUrl+"search",e),r=[];for(let a=s.length-1;a>=0;a--){const c=s[a].boundingbox;r[a]={icon:s[a].icon,name:s[a].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(s[a]):void 0,bbox:V.latLngBounds([+c[0],+c[2]],[+c[1],+c[3]]),center:V.latLng(+s[a].lat,+s[a].lon),properties:s[a]}}return r}async reverse(t,e){const s=tn(this.options,{lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(e/256)/Math.log(2)),addressdetails:1,format:"json"}),r=await ie(this.options.serviceUrl+"reverse",s),a=[];if(r&&r.lat&&r.lon){const c=V.latLng(+r.lat,+r.lon),h=V.latLngBounds(c,c);a.push({name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,center:c,bbox:h,properties:r})}return a}}function qb(n){return new Fc(n)}class Hm{constructor(t){Xt(this,"options",{}),V.Util.setOptions(this,t)}async geocode(t){try{const e=this.options.OpenLocationCode.decode(t);return[{name:t,center:V.latLng(e.latitudeCenter,e.longitudeCenter),bbox:V.latLngBounds(V.latLng(e.latitudeLo,e.longitudeLo),V.latLng(e.latitudeHi,e.longitudeHi))}]}catch(e){return console.warn(e),[]}}async reverse(t,e){try{return[{name:this.options.OpenLocationCode.encode(t.lat,t.lng,this.options.codeLength),center:V.latLng(t.lat,t.lng),bbox:V.latLngBounds(V.latLng(t.lat,t.lng),V.latLng(t.lat,t.lng))}]}catch(s){return console.warn(s),[]}}}function Hb(n){return new Hm(n)}class Zm{constructor(t){Xt(this,"options",{serviceUrl:"https://api.opencagedata.com/geocode/v1/json"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ze(this.options,{key:this.options.apiKey,q:t}),s=await ie(this.options.serviceUrl,e);return this._parseResults(s)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=tn(this.options,{key:this.options.apiKey,q:[t.lat,t.lng].join(",")}),r=await ie(this.options.serviceUrl,s);return this._parseResults(r)}_parseResults(t){const e=[];if(t.results&&t.results.length)for(let s=0;s<t.results.length;s++){const r=t.results[s],a=V.latLng(r.geometry);let c;r.annotations&&r.annotations.bounds?c=V.latLngBounds(V.latLng(r.annotations.bounds.northeast),V.latLng(r.annotations.bounds.southwest)):c=V.latLngBounds(a,a),e.push({name:r.formatted,bbox:c,center:a})}return e}}function Zb(n){return new Zm(n)}class ko{constructor(t){Xt(this,"options",{serviceUrl:"https://api.geocode.earth/v1"}),V.Util.setOptions(this,t)}async geocode(t){const e=Ze(this.options,{api_key:this.options.apiKey,text:t}),s=await ie(this.options.serviceUrl+"/search",e);return this._parseResults(s,"bbox")}async suggest(t){const e=Ze(this.options,{api_key:this.options.apiKey,text:t}),s=await ie(this.options.serviceUrl+"/autocomplete",e);return this._parseResults(s,"bbox")}async reverse(t,e){const s=tn(this.options,{api_key:this.options.apiKey,"point.lat":t.lat,"point.lon":t.lng}),r=await ie(this.options.serviceUrl+"/reverse",s);return this._parseResults(r,"bounds")}_parseResults(t,e){const s=[];return V.geoJSON(t,{pointToLayer(r,a){return V.circleMarker(a)},onEachFeature(r,a){const c={};let h,p;a.getBounds?(h=a.getBounds(),p=h.getCenter()):a.feature.bbox?(p=a.getLatLng(),h=V.latLngBounds(V.GeoJSON.coordsToLatLng(a.feature.bbox.slice(0,2)),V.GeoJSON.coordsToLatLng(a.feature.bbox.slice(2,4)))):(p=a.getLatLng(),h=V.latLngBounds(p,p)),c.name=a.feature.properties.label,c.center=p,c[e]=h,c.properties=a.feature.properties,s.push(c)}}),s}}function Uc(n){return new ko(n)}const Wb=ko,Kb=Uc,Gb=ko,Qb=Uc;class Wm extends ko{constructor(t){super(V.Util.extend({serviceUrl:"https://api.openrouteservice.org/geocode"},t))}}function Xb(n){return new Wm(n)}class Km{constructor(t){Xt(this,"options",{serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]}),V.Util.setOptions(this,t)}async geocode(t){const e=Ze(this.options,{q:t}),s=await ie(this.options.serviceUrl,e);return this._parseResults(s)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=tn(this.options,{lat:t.lat,lon:t.lng}),r=await ie(this.options.reverseUrl,s);return this._parseResults(r)}_parseResults(t){var e;const s=[];if(t&&t.features)for(let r=0;r<t.features.length;r++){const a=t.features[r],c=a.geometry.coordinates,h=V.latLng(c[1],c[0]),p=(e=a.properties)==null?void 0:e.extent,g=p?V.latLngBounds([p[1],p[0]],[p[3],p[2]]):V.latLngBounds(h,h);s.push({name:this._decodeFeatureName(a),html:this.options.htmlTemplate?this.options.htmlTemplate(a):void 0,center:h,bbox:g,properties:a.properties})}return s}_decodeFeatureName(t){return(this.options.nameProperties||[]).map(e=>{var s;return(s=t.properties)==null?void 0:s[e]}).filter(e=>!!e).join(", ")}}function Yb(n){return new Km(n)}class Gm{constructor(t){Xt(this,"options",{serviceUrl:"https://api.what3words.com/v2/"}),V.Util.setOptions(this,t)}async geocode(t){const e=await ie(this.options.serviceUrl+"forward",Ze(this.options,{key:this.options.apiKey,addr:t.split(/\s+/).join(".")})),s=[];if(e.geometry){const r=V.latLng(e.geometry.lat,e.geometry.lng),a=V.latLngBounds(r,r);s[0]={name:e.words,bbox:a,center:r}}return s}suggest(t){return this.geocode(t)}async reverse(t,e){const s=await ie(this.options.serviceUrl+"reverse",tn(this.options,{key:this.options.apiKey,coords:[t.lat,t.lng].join(",")})),r=[];if(s.status.status==200){const a=V.latLng(s.geometry.lat,s.geometry.lng),c=V.latLngBounds(a,a);r[0]={name:s.words,bbox:c,center:a}}return r}}function Jb(n){return new Gm(n)}const tI=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:Dm,AzureMaps:Vm,Bing:Om,GeocodeEarth:Wb,Google:Nm,HERE:Bm,HEREv2:Fm,LatLng:zm,MapQuest:jm,Mapbox:$m,Mapzen:Gb,Neutrino:qm,Nominatim:Fc,OpenCage:Zm,OpenLocationCode:Hm,Openrouteservice:Wm,Pelias:ko,Photon:Km,What3Words:Gm,arcgis:Ob,azure:Nb,bing:Vb,geocodeEarth:Kb,geocodingParams:Ze,google:Bb,here:Fb,latLng:Ub,mapQuest:$b,mapbox:zb,mapzen:Qb,neutrino:jb,nominatim:qb,openLocationCode:Hb,opencage:Zb,openrouteservice:Xb,parseLatLng:Um,pelias:Uc,photon:Yb,reverseParams:tn,what3words:Jb},Symbol.toStringTag,{value:"Module"}));class zc{constructor(...t){}}V.Util.extend(zc.prototype,V.Control.prototype);V.Util.extend(zc.prototype,V.Evented.prototype);class $c extends zc{constructor(t){super(t),Xt(this,"options",{showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0}),Xt(this,"_alts"),Xt(this,"_container"),Xt(this,"_errorElement"),Xt(this,"_geocodeMarker"),Xt(this,"_input"),Xt(this,"_lastGeocode"),Xt(this,"_map"),Xt(this,"_preventBlurCollapse"),Xt(this,"_requestCount",0),Xt(this,"_results"),Xt(this,"_selection"),Xt(this,"_suggestTimeout"),V.Util.setOptions(this,t),this.options.geocoder||(this.options.geocoder=new Fc)}addThrobberClass(){V.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")}removeThrobberClass(){V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")}onAdd(t){var e;const s="leaflet-control-geocoder",r=V.DomUtil.create("div",s+" leaflet-bar"),a=V.DomUtil.create("button",s+"-icon",r),c=V.DomUtil.create("div",s+"-form",r);this._map=t,this._container=r,a.innerHTML="&nbsp;",a.type="button",a.setAttribute("aria-label",this.options.iconLabel);const h=this._input=V.DomUtil.create("input","",c);return h.type="search",h.value=this.options.query,h.placeholder=this.options.placeholder,V.DomEvent.disableClickPropagation(h),this._errorElement=V.DomUtil.create("div",s+"-form-no-error",r),this._errorElement.innerHTML=this.options.errorMessage,this._alts=V.DomUtil.create("ul",s+"-alternatives leaflet-control-geocoder-alternatives-minimized",r),V.DomEvent.disableClickPropagation(this._alts),V.DomEvent.addListener(h,"keydown",this._keydown,this),(e=this.options.geocoder)!=null&&e.suggest&&V.DomEvent.addListener(h,"input",this._change,this),V.DomEvent.addListener(h,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?V.DomEvent.addListener(r,"click",p=>{p.button===0&&p.detail!==2&&this._toggle()}):this.options.expand==="touch"?V.DomEvent.addListener(r,V.Browser.touch?"touchstart mousedown":"mousedown",p=>{this._toggle(),p.preventDefault(),p.stopPropagation()},this):(V.DomEvent.addListener(r,"mouseover",this._expand,this),V.DomEvent.addListener(r,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),V.Browser.touch?V.DomEvent.addListener(r,"touchstart",()=>this._geocode()):V.DomEvent.addListener(r,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),V.DomEvent.disableClickPropagation(r),r}setQuery(t){return this._input.value=t,this}_geocodeResult(t,e){if(!e&&this.options.showUniqueResult&&t.length===1)this._geocodeResultSelected(t[0]);else if(t.length>0){this._alts.innerHTML="",this._results=t,V.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),V.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(let s=0;s<t.length;s++)this._alts.appendChild(this._createAlt(t[s],s))}else V.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),V.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")}markGeocode(t){const e=t.geocode;return this._map.fitBounds(e.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new V.Marker(e.center).bindPopup(e.html||e.name).addTo(this._map).openPopup(),this}async _geocode(t=!1){const e=this._input.value;if(!t&&e.length<this.options.queryMinLength)return;const s=++this._requestCount;this._lastGeocode=e,t||this._clearResults();const r={input:e};this.fire(t?"startsuggest":"startgeocode",r);const a=t?await this.options.geocoder.suggest(e):await this.options.geocoder.geocode(e);if(s===this._requestCount){const c={input:e,results:a};this.fire(t?"finishsuggest":"finishgeocode",c),this._geocodeResult(a,t)}}_geocodeResultSelected(t){const e={geocode:t};this.fire("markgeocode",e)}_toggle(){V.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){V.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),V.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),V.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){V.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,V.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),V.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")}_createAlt(t,e){const s=V.DomUtil.create("li",""),r=V.DomUtil.create("a","",s),a=this.options.showResultIcons&&t.icon?V.DomUtil.create("img","",r):null,c=t.html?void 0:document.createTextNode(t.name),h=p=>{this._preventBlurCollapse=!0,V.DomEvent.stop(p),this._geocodeResultSelected(t),V.DomEvent.on(s,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return a&&(a.src=t.icon),s.setAttribute("data-result-index",String(e)),t.html?r.innerHTML=r.innerHTML+t.html:c&&r.appendChild(c),V.DomEvent.addListener(s,"mousedown touchstart",h,this),s}_keydown(t){const e=s=>{this._selection&&(V.DomUtil.removeClass(this._selection,"leaflet-control-geocoder-selected"),this._selection=this._selection[s>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[s>0?"firstChild":"lastChild"]),this._selection&&V.DomUtil.addClass(this._selection,"leaflet-control-geocoder-selected")};switch(t.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:e(-1);break;case 40:e(1);break;case 13:if(this._selection){const s=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[s]),this._clearResults()}else this._geocode();break;default:return}V.DomEvent.preventDefault(t)}_change(){const t=this._input.value;t!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),t.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}}function eI(n){return new $c(n)}/* @preserve
 * Leaflet Control Geocoder
 * https://github.com/perliedman/leaflet-control-geocoder
 *
 * Copyright (c) 2012 sa3m (https://github.com/sa3m)
 * Copyright (c) 2018 Per Liedman
 * All rights reserved.
 */V.Util.extend($c,tI);V.Util.extend(V.Control,{Geocoder:$c,geocoder:eI});const Sn=n=>(pl("data-v-38aeb121"),n=n(),ml(),n),nI={class:"form-map-wrapper"},iI=["onSubmit"],sI=Sn(()=>rt("h2",null,"Ajouter une entreprise",-1)),rI={class:"form-group"},oI=Sn(()=>rt("label",{for:"speciality"},"Spcialit",-1)),aI=Sn(()=>rt("option",{disabled:"",value:""},"-- Slectionner une spcialit --",-1)),lI=Sn(()=>rt("option",{value:"Dveloppement Logiciel, Tests et Qualit"},"Dveloppement Logiciel, Tests et Qualit",-1)),uI=Sn(()=>rt("option",{value:"IA & Big Data"},"IA & Big Data",-1)),cI=[aI,lI,uI],hI={class:"form-group"},fI=Sn(()=>rt("label",{for:"name"},"Nom",-1)),dI={class:"form-group"},pI=Sn(()=>rt("label",{for:"country"},"Pays",-1)),mI={class:"form-group"},_I=Sn(()=>rt("label",{for:"address"},"Adresse",-1)),gI={class:"form-group"},vI=Sn(()=>rt("label",{for:"city"},"Ville",-1)),yI={class:"form-group"},wI=Sn(()=>rt("label",{for:"pc"},"Code Postal",-1)),TI=Sn(()=>rt("button",{type:"submit",class:"submit-button"},"Ajouter l'entreprise",-1)),EI={emits:["refresh"],setup(n,{emit:t}){const e=Te(""),s=Te(""),r=Te(""),a=Te(""),c=Te(""),h=Te(""),p=Te(""),g=Te(""),y=Te(!1);let T=null,x=null;const N=Te(null);let j=null;var H=new ri.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});gl(()=>{T=ri.map(N.value,{center:[46.656066,.364419],zoom:5,minZoom:3,maxBounds:[[-90,-180],[90,180]],worldCopyJump:!1}),ri.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(T)}),tr([r,a,c,h],([ot,lt,nt,bt])=>{clearTimeout(j),j=setTimeout(async()=>{if(![ot,lt,nt,bt].every(Mt=>Mt.trim()!=="")){console.warn("Tous les champs d'adresse doivent tre remplis avant de rechercher.");return}const qt=`${ot}, ${nt} ${lt}, ${bt}`;if(qt.trim().length>10){y.value=!0;try{const R=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(qt)}`,{headers:{Accept:"application/json","User-Agent":"VueApp/1.0 (youremail@example.com)"}})).json();if(R&&R.length>0){const{lat:E,lon:b}=R[0],S=ri.latLng(E,b);x?x.setLatLng(S):x=ri.marker(S,{icon:H}).addTo(T),T.setView(S,15),p.value=parseFloat(E),g.value=parseFloat(b)}else console.warn("Aucun rsultat pour:",qt)}catch(Mt){console.error("Erreur lors de l'appel  Nominatim:",Mt)}finally{y.value=!1}}},500)});const $=async()=>{if(!e.value||!s.value||!r.value||!a.value||!h.value||!c.value||!p.value||!g.value){alert("Tous les champs sont obligatoires !");return}try{await G0(Mc(Bc,"companies"),{speciality:e.value,name:s.value,address:r.value,city:a.value,country:h.value,pc:c.value,x:p.value,y:g.value}),e.value="",s.value="",r.value="",a.value="",h.value="",c.value="",p.value="",g.value="",t("refresh"),t("close")}catch(ot){console.error("Erreur lors de l'ajout de l'entreprise : ",ot)}};return(ot,lt)=>(Wt(),se("div",nI,[rt("form",{class:"form-container",onSubmit:Zd($,["prevent"])},[sI,rt("div",rI,[oI,ns(rt("select",{id:"speciality","onUpdate:modelValue":lt[0]||(lt[0]=nt=>e.value=nt),required:""},cI,512),[[Hd,e.value]])]),rt("div",hI,[fI,ns(rt("input",{id:"name","onUpdate:modelValue":lt[1]||(lt[1]=nt=>s.value=nt),required:""},null,512),[[Yr,s.value]])]),rt("div",dI,[pI,ns(rt("input",{id:"country","onUpdate:modelValue":lt[2]||(lt[2]=nt=>h.value=nt),required:""},null,512),[[Yr,h.value]])]),rt("div",mI,[_I,ns(rt("input",{id:"address","onUpdate:modelValue":lt[3]||(lt[3]=nt=>r.value=nt),required:""},null,512),[[Yr,r.value]])]),rt("div",gI,[vI,ns(rt("input",{id:"city","onUpdate:modelValue":lt[4]||(lt[4]=nt=>a.value=nt),required:""},null,512),[[Yr,a.value]])]),rt("div",yI,[wI,ns(rt("input",{id:"pc","onUpdate:modelValue":lt[5]||(lt[5]=nt=>c.value=nt),required:""},null,512),[[Yr,c.value]])]),TI],40,iI),rt("div",{class:"mini-map",ref_key:"mapContainer",ref:N},null,512)]))}},bI=ys(EI,[["__scopeId","data-v-38aeb121"]]),Ol=n=>(pl("data-v-1885a914"),n=n(),ml(),n),II={class:"details"},PI=Ol(()=>rt("strong",null,"Spcialit :",-1)),AI=Ol(()=>rt("strong",null,"Ville :",-1)),xI=Ol(()=>rt("strong",null,"Pays :",-1)),CI=Ol(()=>rt("strong",null,"Code Postal :",-1)),SI={props:{company:{type:Object,required:!0}},setup(n){return(t,e)=>(Wt(),se("div",II,[rt("h2",null,Fn(n.company.name),1),rt("p",null,[PI,to(" "+Fn(n.company.speciality),1)]),rt("p",null,[AI,to(" "+Fn(n.company.city),1)]),rt("p",null,[xI,to(" "+Fn(n.company.country),1)]),rt("p",null,[CI,to(" "+Fn(n.company.pc),1)])]))}},RI=ys(SI,[["__scopeId","data-v-1885a914"]]),LI=["onClick"],MI={props:{companies:{type:Array,required:!0}},setup(n){const t=n,e=Te(!1),s=Te(null),r=c=>{e.value=!0,s.value=c,t.isOpen&&emit("toggle")},a=()=>{e.value=!1};return(c,h)=>(Wt(),se(Je,null,[rt("ul",null,[(Wt(!0),se(Je,null,ov(n.companies,p=>(Wt(),se("li",{key:p.id,onClick:g=>r(p)},[Se(Tb,{speciality:p.speciality,name:p.name,city:p.city,country:p.country,pc:p.pc.toString()},null,8,["speciality","name","city","country","pc"])],8,LI))),128))]),Se(km,{isOpen:e.value,onClose:a},{default:Yu(()=>[Se(RI,{company:s.value},null,8,["company"])]),_:1},8,["isOpen"])],64))}},kI=ys(MI,[["__scopeId","data-v-c5ffedea"]]),Ui=n=>(pl("data-v-6d86780c"),n=n(),ml(),n),DI={key:0,class:"connection-action"},OI=Ui(()=>rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-user"},[rt("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),rt("circle",{cx:"12",cy:"7",r:"4"})],-1)),VI=[OI],NI={key:1,class:"list-action"},BI=sv('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list" data-v-6d86780c><line x1="8" y1="6" x2="21" y2="6" data-v-6d86780c></line><line x1="8" y1="12" x2="21" y2="12" data-v-6d86780c></line><line x1="8" y1="18" x2="21" y2="18" data-v-6d86780c></line><line x1="3" y1="6" x2="3.01" y2="6" data-v-6d86780c></line><line x1="3" y1="12" x2="3.01" y2="12" data-v-6d86780c></line><line x1="3" y1="18" x2="3.01" y2="18" data-v-6d86780c></line></svg>',1),FI=[BI],UI={key:2,class:"refresh-action"},zI={key:3,class:"add-company-action"},$I=Ui(()=>rt("hr",{class:"separator"},null,-1)),jI=Ui(()=>rt("h1",null,"Find My Company",-1)),qI=Ui(()=>rt("hr",{class:"separator"},null,-1)),HI={key:4},ZI={key:5,class:"filter-bar"},WI=Ui(()=>rt("label",{for:"speciality-select"},"Spcialit :",-1)),KI=Ui(()=>rt("option",{value:""},"Toutes",-1)),GI=Ui(()=>rt("option",{value:"Dveloppement Logiciel, Tests et Qualit"},"Dveloppement Logiciel, Tests et Qualit",-1)),QI=Ui(()=>rt("option",{value:"IA & Big Data"},"IA & Big Data",-1)),XI=[KI,GI,QI],YI={props:{isOpen:Boolean,visibleCompanies:Array},emits:["toggle","update-speciality"],setup(n,{emit:t}){const e=n,s=Te(!1),r=Te([]),a=Te(""),c=()=>{s.value=!0,e.isOpen&&t("toggle")},h=()=>{s.value=!1},p=gd(()=>{let T=e.visibleCompanies.length?e.visibleCompanies:r.value;return!a.value||a.value==="Toutes"?T:T.filter(x=>x.speciality.includes(a.value))}),g=async()=>{const T=await Mm(Mc(Bc,"companies"));r.value=T.docs.map(x=>({id:x.id,...x.data()}))};function y(){t("toggle")}return gl(g),(T,x)=>(Wt(),se("div",null,[rt("div",{class:as(["sidebar",{closed:!e.isOpen}]),style:mo({width:e.isOpen?"400px":"0"})},[e.isOpen?(Wt(),se("div",DI,[rt("button",{onClick:g,class:"refresh-button","aria-label":"Rafrachir"},VI)])):Ei("",!0),e.isOpen?(Wt(),se("div",NI,[rt("button",{onClick:g,class:"refresh-button","aria-label":"Rafrachir"},FI)])):Ei("",!0),e.isOpen?(Wt(),se("div",UI,[rt("button",{onClick:g,class:"refresh-button","aria-label":"Rafrachir"},"")])):Ei("",!0),e.isOpen?(Wt(),se("div",zI,[rt("button",{onClick:c,class:"plus-button","aria-label":"Ajouter"},"+")])):Ei("",!0),$I,jI,qI,e.isOpen?(Wt(),se("h2",HI,"Liste des entreprises")):Ei("",!0),e.isOpen?(Wt(),se("div",ZI,[WI,ns(rt("select",{id:"speciality-select","onUpdate:modelValue":x[0]||(x[0]=N=>a.value=N),onChange:x[1]||(x[1]=N=>T.$emit("update-speciality",a.value)),required:""},XI,544),[[Hd,a.value]])])):Ei("",!0),e.isOpen?(Wt(),vl(kI,{key:6,companies:md(p)},null,8,["companies"])):Ei("",!0)],6),Se(km,{isOpen:s.value,onClose:h},{default:Yu(()=>[Se(bI,{onRefresh:g})]),_:1},8,["isOpen"]),rt("button",{class:as(["toggle-button",{closed:!e.isOpen}]),onClick:y,style:mo({left:e.isOpen?"400px":"0"})},[rt("span",null,[rt("i",{class:as(["arrow",e.isOpen?"left":"right"])},null,2)])],6)]))}},JI=ys(YI,[["__scopeId","data-v-6d86780c"]]),tP={props:{isOpen:Boolean,selectedSpeciality:String},emits:["update-visible-companies"],setup(n,{emit:t}){const e=n,s=Te(null),r=Te([]);let a=null;var c=new ri.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function h(){const g=a.getBounds();t("update-visible-companies",r.value.filter(y=>y.x>=g.getSouth()&&y.x<=g.getNorth()&&y.y>=g.getWest()&&y.y<=g.getEast()))}gl(async()=>{a=ri.map(s.value,{center:[46.656066,.364419],zoom:5,minZoom:3,maxBounds:[[-90,-180],[90,180]],worldCopyJump:!1}),ri.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(a),await p(),a.on("moveend",()=>{h()}),a.on("zoomend",()=>{h()}),a.on("resize",()=>{h()})});const p=async()=>{try{const g=await Mm(Mc(Bc,"companies")),y=[];g.forEach(T=>{const x=T.data(),{x:N,y:j,name:H}=x;if(N&&j&&H){const $=ri.marker([N,j],{icon:c}).addTo(a);$.bindPopup(H),y.push({...x,marker:$})}}),r.value=y}catch(g){console.error("Erreur lors de la rcupration des entreprises:",g)}};return tr(()=>e.isOpen,()=>{setTimeout(()=>{a.invalidateSize()},400)}),tr(()=>e.selectedSpeciality,g=>{a&&(r.value.forEach(y=>{y.marker&&(!g||y.speciality===g?a.hasLayer(y.marker)||y.marker.addTo(a):a.hasLayer(y.marker)&&y.marker.remove())}),h())},{immediate:!0}),(g,y)=>(Wt(),se("div",{id:"map",ref_key:"mapContainer",ref:s,class:as(["map-container",{"sidebar-open":n.isOpen,"sidebar-closed":!n.isOpen}])},null,2))}},eP=ys(tP,[["__scopeId","data-v-c339d8d7"]]),nP={setup(n){const t=Te(!0),e=Te([]),s=Te("");return(r,a)=>(Wt(),se(Je,null,[Se(JI,{isOpen:t.value,visibleCompanies:e.value,onToggle:a[0]||(a[0]=c=>t.value=!t.value),onUpdateSpeciality:a[1]||(a[1]=c=>s.value=c)},null,8,["isOpen","visibleCompanies"]),Se(eP,{isOpen:t.value,selectedSpeciality:s.value,onUpdateVisibleCompanies:a[2]||(a[2]=c=>e.value=c)},null,8,["isOpen","selectedSpeciality"])],64))}};Kv(nP).mount("#app");
