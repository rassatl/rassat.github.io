(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function zl(n,t){const e=Object.create(null),s=n.split(",");for(let r=0;r<s.length;r++)e[s[r]]=!0;return t?r=>!!e[r.toLowerCase()]:r=>!!e[r]}const N_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",V_=zl(N_);function sd(n){return!!n||n===""}function _o(n){if(At(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],r=Me(s)?U_(s):_o(s);if(r)for(const a in r)t[a]=r[a]}return t}else{if(Me(n))return n;if(be(n))return n}}const F_=/;(?![^(]*\))/g,B_=/:(.+)/;function U_(n){const t={};return n.split(F_).forEach(e=>{if(e){const s=e.split(B_);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ls(n){let t="";if(Me(n))t=n;else if(At(n))for(let e=0;e<n.length;e++){const s=ls(n[e]);s&&(t+=s+" ")}else if(be(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}function z_(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=hu(n[s],t[s]);return e}function hu(n,t){if(n===t)return!0;let e=vh(n),s=vh(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=At(n),s=At(t),e||s)return e&&s?z_(n,t):!1;if(e=be(n),s=be(t),e||s){if(!e||!s)return!1;const r=Object.keys(n).length,a=Object.keys(t).length;if(r!==a)return!1;for(const c in n){const h=n.hasOwnProperty(c),p=t.hasOwnProperty(c);if(h&&!p||!h&&p||!hu(n[c],t[c]))return!1}}return String(n)===String(t)}function H_(n,t){return n.findIndex(e=>hu(e,t))}const Dt=n=>n==null?"":At(n)||be(n)&&(n.toString===ad||!kt(n.toString))?JSON.stringify(n,rd,2):String(n),rd=(n,t)=>t&&t.__v_isRef?rd(n,t.value):Xs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,r])=>(e[`${s} =>`]=r,e),{})}:du(t)?{[`Set(${t.size})`]:[...t.values()]}:be(t)&&!At(t)&&!ud(t)?String(t):t,re={},Js=[],zn=()=>{},G_=()=>!1,K_=/^on[^a-z]/,fu=n=>K_.test(n),Hl=n=>n.startsWith("onUpdate:"),un=Object.assign,Gl=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},$_=Object.prototype.hasOwnProperty,jt=(n,t)=>$_.call(n,t),At=Array.isArray,Xs=n=>pu(n)==="[object Map]",du=n=>pu(n)==="[object Set]",vh=n=>n instanceof Date,kt=n=>typeof n=="function",Me=n=>typeof n=="string",Kl=n=>typeof n=="symbol",be=n=>n!==null&&typeof n=="object",od=n=>be(n)&&kt(n.then)&&kt(n.catch),ad=Object.prototype.toString,pu=n=>ad.call(n),j_=n=>pu(n).slice(8,-1),ud=n=>pu(n)==="[object Object]",$l=n=>Me(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ca=zl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mu=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},q_=/-(\w)/g,rr=mu(n=>n.replace(q_,(t,e)=>e?e.toUpperCase():"")),Z_=/\B([A-Z])/g,mr=mu(n=>n.replace(Z_,"-$1").toLowerCase()),ld=mu(n=>n.charAt(0).toUpperCase()+n.slice(1)),$u=mu(n=>n?`on${ld(n)}`:""),go=(n,t)=>!Object.is(n,t),Pa=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},Va=(n,t,e)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:e})},Fa=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Eh;const W_=()=>Eh||(Eh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ns;const da=[];class Q_{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ns&&(this.parent=ns,this.index=(ns.scopes||(ns.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(da.push(this),ns=this)}off(){this.active&&(da.pop(),ns=da[da.length-1])}stop(t){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function Y_(n,t){t=t||ns,t&&t.active&&t.effects.push(n)}const jl=n=>{const t=new Set(n);return t.w=0,t.n=0,t},cd=n=>(n.w&Di)>0,hd=n=>(n.n&Di)>0,J_=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=Di},X_=n=>{const{deps:t}=n;if(t.length){let e=0;for(let s=0;s<t.length;s++){const r=t[s];cd(r)&&!hd(r)?r.delete(n):t[e++]=r,r.w&=~Di,r.n&=~Di}t.length=e}},il=new WeakMap;let eo=0,Di=1;const sl=30,Jr=[];let cs;const hs=Symbol(""),rl=Symbol("");class ql{constructor(t,e=null,s){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],Y_(this,s)}run(){if(!this.active)return this.fn();if(!Jr.includes(this))try{return Jr.push(cs=this),tg(),Di=1<<++eo,eo<=sl?J_(this):Th(this),this.fn()}finally{eo<=sl&&X_(this),Di=1<<--eo,_s(),Jr.pop();const t=Jr.length;cs=t>0?Jr[t-1]:void 0}}stop(){this.active&&(Th(this),this.onStop&&this.onStop(),this.active=!1)}}function Th(n){const{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}let or=!0;const Zl=[];function _r(){Zl.push(or),or=!1}function tg(){Zl.push(or),or=!0}function _s(){const n=Zl.pop();or=n===void 0?!0:n}function ln(n,t,e){if(!fd())return;let s=il.get(n);s||il.set(n,s=new Map);let r=s.get(e);r||s.set(e,r=jl()),dd(r)}function fd(){return or&&cs!==void 0}function dd(n,t){let e=!1;eo<=sl?hd(n)||(n.n|=Di,e=!cd(n)):e=!n.has(cs),e&&(n.add(cs),cs.deps.push(n))}function ci(n,t,e,s,r,a){const c=il.get(n);if(!c)return;let h=[];if(t==="clear")h=[...c.values()];else if(e==="length"&&At(n))c.forEach((p,g)=>{(g==="length"||g>=s)&&h.push(p)});else switch(e!==void 0&&h.push(c.get(e)),t){case"add":At(n)?$l(e)&&h.push(c.get("length")):(h.push(c.get(hs)),Xs(n)&&h.push(c.get(rl)));break;case"delete":At(n)||(h.push(c.get(hs)),Xs(n)&&h.push(c.get(rl)));break;case"set":Xs(n)&&h.push(c.get(hs));break}if(h.length===1)h[0]&&ol(h[0]);else{const p=[];for(const g of h)g&&p.push(...g);ol(jl(p))}}function ol(n,t){for(const e of At(n)?n:[...n])(e!==cs||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const eg=zl("__proto__,__v_isRef,__isVue"),pd=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(Kl)),ng=Wl(),ig=Wl(!1,!0),sg=Wl(!0),wh=rg();function rg(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const s=Qt(this);for(let a=0,c=this.length;a<c;a++)ln(s,"get",a+"");const r=s[t](...e);return r===-1||r===!1?s[t](...e.map(Qt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){_r();const s=Qt(this)[t].apply(this,e);return _s(),s}}),n}function Wl(n=!1,t=!1){return function(s,r,a){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_raw"&&a===(n?t?Tg:vd:t?yd:gd).get(s))return s;const c=At(s);if(!n&&c&&jt(wh,r))return Reflect.get(wh,r,a);const h=Reflect.get(s,r,a);return(Kl(r)?pd.has(r):eg(r))||(n||ln(s,"get",r),t)?h:Ze(h)?!c||!$l(r)?h.value:h:be(h)?n?Ed(h):gu(h):h}}const og=md(),ag=md(!0);function md(n=!1){return function(e,s,r,a){let c=e[s];if(!n&&!Xl(r)&&(r=Qt(r),c=Qt(c),!At(e)&&Ze(c)&&!Ze(r)))return c.value=r,!0;const h=At(e)&&$l(s)?Number(s)<e.length:jt(e,s),p=Reflect.set(e,s,r,a);return e===Qt(a)&&(h?go(r,c)&&ci(e,"set",s,r):ci(e,"add",s,r)),p}}function ug(n,t){const e=jt(n,t);n[t];const s=Reflect.deleteProperty(n,t);return s&&e&&ci(n,"delete",t,void 0),s}function lg(n,t){const e=Reflect.has(n,t);return(!Kl(t)||!pd.has(t))&&ln(n,"has",t),e}function cg(n){return ln(n,"iterate",At(n)?"length":hs),Reflect.ownKeys(n)}const _d={get:ng,set:og,deleteProperty:ug,has:lg,ownKeys:cg},hg={get:sg,set(n,t){return!0},deleteProperty(n,t){return!0}},fg=un({},_d,{get:ig,set:ag}),Ql=n=>n,_u=n=>Reflect.getPrototypeOf(n);function pa(n,t,e=!1,s=!1){n=n.__v_raw;const r=Qt(n),a=Qt(t);t!==a&&!e&&ln(r,"get",t),!e&&ln(r,"get",a);const{has:c}=_u(r),h=s?Ql:e?tc:yo;if(c.call(r,t))return h(n.get(t));if(c.call(r,a))return h(n.get(a));n!==r&&n.get(t)}function ma(n,t=!1){const e=this.__v_raw,s=Qt(e),r=Qt(n);return n!==r&&!t&&ln(s,"has",n),!t&&ln(s,"has",r),n===r?e.has(n):e.has(n)||e.has(r)}function _a(n,t=!1){return n=n.__v_raw,!t&&ln(Qt(n),"iterate",hs),Reflect.get(n,"size",n)}function Ih(n){n=Qt(n);const t=Qt(this);return _u(t).has.call(t,n)||(t.add(n),ci(t,"add",n,n)),this}function Ah(n,t){t=Qt(t);const e=Qt(this),{has:s,get:r}=_u(e);let a=s.call(e,n);a||(n=Qt(n),a=s.call(e,n));const c=r.call(e,n);return e.set(n,t),a?go(t,c)&&ci(e,"set",n,t):ci(e,"add",n,t),this}function bh(n){const t=Qt(this),{has:e,get:s}=_u(t);let r=e.call(t,n);r||(n=Qt(n),r=e.call(t,n)),s&&s.call(t,n);const a=t.delete(n);return r&&ci(t,"delete",n,void 0),a}function Sh(){const n=Qt(this),t=n.size!==0,e=n.clear();return t&&ci(n,"clear",void 0,void 0),e}function ga(n,t){return function(s,r){const a=this,c=a.__v_raw,h=Qt(c),p=t?Ql:n?tc:yo;return!n&&ln(h,"iterate",hs),c.forEach((g,v)=>s.call(r,p(g),p(v),a))}}function ya(n,t,e){return function(...s){const r=this.__v_raw,a=Qt(r),c=Xs(a),h=n==="entries"||n===Symbol.iterator&&c,p=n==="keys"&&c,g=r[n](...s),v=e?Ql:t?tc:yo;return!t&&ln(a,"iterate",p?rl:hs),{next(){const{value:I,done:R}=g.next();return R?{value:I,done:R}:{value:h?[v(I[0]),v(I[1])]:v(I),done:R}},[Symbol.iterator](){return this}}}}function Ai(n){return function(...t){return n==="delete"?!1:this}}function dg(){const n={get(a){return pa(this,a)},get size(){return _a(this)},has:ma,add:Ih,set:Ah,delete:bh,clear:Sh,forEach:ga(!1,!1)},t={get(a){return pa(this,a,!1,!0)},get size(){return _a(this)},has:ma,add:Ih,set:Ah,delete:bh,clear:Sh,forEach:ga(!1,!0)},e={get(a){return pa(this,a,!0)},get size(){return _a(this,!0)},has(a){return ma.call(this,a,!0)},add:Ai("add"),set:Ai("set"),delete:Ai("delete"),clear:Ai("clear"),forEach:ga(!0,!1)},s={get(a){return pa(this,a,!0,!0)},get size(){return _a(this,!0)},has(a){return ma.call(this,a,!0)},add:Ai("add"),set:Ai("set"),delete:Ai("delete"),clear:Ai("clear"),forEach:ga(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=ya(a,!1,!1),e[a]=ya(a,!0,!1),t[a]=ya(a,!1,!0),s[a]=ya(a,!0,!0)}),[n,e,t,s]}const[pg,mg,_g,gg]=dg();function Yl(n,t){const e=t?n?gg:_g:n?mg:pg;return(s,r,a)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(jt(e,r)&&r in s?e:s,r,a)}const yg={get:Yl(!1,!1)},vg={get:Yl(!1,!0)},Eg={get:Yl(!0,!1)},gd=new WeakMap,yd=new WeakMap,vd=new WeakMap,Tg=new WeakMap;function wg(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ig(n){return n.__v_skip||!Object.isExtensible(n)?0:wg(j_(n))}function gu(n){return n&&n.__v_isReadonly?n:Jl(n,!1,_d,yg,gd)}function Ag(n){return Jl(n,!1,fg,vg,yd)}function Ed(n){return Jl(n,!0,hg,Eg,vd)}function Jl(n,t,e,s,r){if(!be(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const a=r.get(n);if(a)return a;const c=Ig(n);if(c===0)return n;const h=new Proxy(n,c===2?s:e);return r.set(n,h),h}function tr(n){return Xl(n)?tr(n.__v_raw):!!(n&&n.__v_isReactive)}function Xl(n){return!!(n&&n.__v_isReadonly)}function Td(n){return tr(n)||Xl(n)}function Qt(n){const t=n&&n.__v_raw;return t?Qt(t):n}function wd(n){return Va(n,"__v_skip",!0),n}const yo=n=>be(n)?gu(n):n,tc=n=>be(n)?Ed(n):n;function Id(n){fd()&&(n=Qt(n),n.dep||(n.dep=jl()),dd(n.dep))}function Ad(n,t){n=Qt(n),n.dep&&ol(n.dep)}function Ze(n){return!!(n&&n.__v_isRef===!0)}function se(n){return bg(n,!1)}function bg(n,t){return Ze(n)?n:new Sg(n,t)}class Sg{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Qt(t),this._value=e?t:yo(t)}get value(){return Id(this),this._value}set value(t){t=this._shallow?t:Qt(t),go(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:yo(t),Ad(this))}}function ae(n){return Ze(n)?n.value:n}const Cg={get:(n,t,e)=>ae(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const r=n[t];return Ze(r)&&!Ze(e)?(r.value=e,!0):Reflect.set(n,t,e,s)}};function bd(n){return tr(n)?n:new Proxy(n,Cg)}class Pg{constructor(t,e,s){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new ql(t,()=>{this._dirty||(this._dirty=!0,Ad(this))}),this.__v_isReadonly=s}get value(){const t=Qt(this);return Id(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Sd(n,t){let e,s;const r=kt(n);return r?(e=n,s=zn):(e=n.get,s=n.set),new Pg(e,s,r||!s)}Promise.resolve();function xg(n,t,...e){const s=n.vnode.props||re;let r=e;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in s){const v=`${c==="modelValue"?"model":c}Modifiers`,{number:I,trim:R}=s[v]||re;R?r=e.map(V=>V.trim()):I&&(r=e.map(Fa))}let h,p=s[h=$u(t)]||s[h=$u(rr(t))];!p&&a&&(p=s[h=$u(mr(t))]),p&&Rn(p,n,6,r);const g=s[h+"Once"];if(g){if(!n.emitted)n.emitted={};else if(n.emitted[h])return;n.emitted[h]=!0,Rn(g,n,6,r)}}function Cd(n,t,e=!1){const s=t.emitsCache,r=s.get(n);if(r!==void 0)return r;const a=n.emits;let c={},h=!1;if(!kt(n)){const p=g=>{const v=Cd(g,t,!0);v&&(h=!0,un(c,v))};!e&&t.mixins.length&&t.mixins.forEach(p),n.extends&&p(n.extends),n.mixins&&n.mixins.forEach(p)}return!a&&!h?(s.set(n,null),null):(At(a)?a.forEach(p=>c[p]=null):un(c,a),s.set(n,c),c)}function ec(n,t){return!n||!fu(t)?!1:(t=t.slice(2).replace(/Once$/,""),jt(n,t[0].toLowerCase()+t.slice(1))||jt(n,mr(t))||jt(n,t))}let Pn=null,yu=null;function Ba(n){const t=Pn;return Pn=n,yu=n&&n.type.__scopeId||null,t}function Pd(n){yu=n}function xd(){yu=null}function nc(n,t=Pn,e){if(!t||n._n)return n;const s=(...r)=>{s._d&&Nh(-1);const a=Ba(t),c=n(...r);return Ba(a),s._d&&Nh(1),c};return s._n=!0,s._c=!0,s._d=!0,s}function Ch(n){const{type:t,vnode:e,proxy:s,withProxy:r,props:a,propsOptions:[c],slots:h,attrs:p,emit:g,render:v,renderCache:I,data:R,setupState:V,ctx:z,inheritAttrs:G}=n;let H,it;const ct=Ba(n);try{if(e.shapeFlag&4){const _t=r||s;H=Un(v.call(_t,_t,I,a,V,R,z)),it=p}else{const _t=t;H=Un(_t.length>1?_t(a,{attrs:p,slots:h,emit:g}):_t(a,null)),it=t.props?p:Rg(p)}}catch(_t){uo.length=0,Tu(_t,n,1),H=Ee(ki)}let lt=H;if(it&&G!==!1){const _t=Object.keys(it),{shapeFlag:K}=lt;_t.length&&K&7&&(c&&_t.some(Hl)&&(it=Lg(it,c)),lt=Eo(lt,it))}return e.dirs&&(lt.dirs=lt.dirs?lt.dirs.concat(e.dirs):e.dirs),e.transition&&(lt.transition=e.transition),H=lt,Ba(ct),H}const Rg=n=>{let t;for(const e in n)(e==="class"||e==="style"||fu(e))&&((t||(t={}))[e]=n[e]);return t},Lg=(n,t)=>{const e={};for(const s in n)(!Hl(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function Og(n,t,e){const{props:s,children:r,component:a}=n,{props:c,children:h,patchFlag:p}=t,g=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&p>=0){if(p&1024)return!0;if(p&16)return s?Ph(s,c,g):!!c;if(p&8){const v=t.dynamicProps;for(let I=0;I<v.length;I++){const R=v[I];if(c[R]!==s[R]&&!ec(g,R))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:s===c?!1:s?c?Ph(s,c,g):!0:!!c;return!1}function Ph(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const a=s[r];if(t[a]!==n[a]&&!ec(e,a))return!0}return!1}function Mg({vnode:n,parent:t},e){for(;t&&t.subTree===n;)(n=t.vnode).el=e,t=t.parent}const Dg=n=>n.__isSuspense;function kg(n,t){t&&t.pendingBranch?At(n)?t.effects.push(...n):t.effects.push(n):Oy(n)}function Ng(n,t){if(Ge){let e=Ge.provides;const s=Ge.parent&&Ge.parent.provides;s===e&&(e=Ge.provides=Object.create(s)),e[n]=t}}function er(n,t,e=!1){const s=Ge||Pn;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return e&&kt(t)?t.call(s.proxy):t}}const al=n=>!!n.type.__asyncLoader,Rd=n=>n.type.__isKeepAlive;function Vg(n,t){Ld(n,"a",t)}function Fg(n,t){Ld(n,"da",t)}function Ld(n,t,e=Ge){const s=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(vu(t,s,e),e){let r=e.parent;for(;r&&r.parent;)Rd(r.parent.vnode)&&Bg(s,t,e,r),r=r.parent}}function Bg(n,t,e,s){const r=vu(t,n,s,!0);Od(()=>{Gl(s[t],r)},e)}function vu(n,t,e=Ge,s=!1){if(e){const r=e[n]||(e[n]=[]),a=t.__weh||(t.__weh=(...c)=>{if(e.isUnmounted)return;_r(),ar(e);const h=Rn(t,e,n,c);return ds(),_s(),h});return s?r.unshift(a):r.push(a),a}}const pi=n=>(t,e=Ge)=>(!Ga||n==="sp")&&vu(n,t,e),Ug=pi("bm"),vo=pi("m"),zg=pi("bu"),Hg=pi("u"),Gg=pi("bum"),Od=pi("um"),Kg=pi("sp"),$g=pi("rtg"),jg=pi("rtc");function qg(n,t=Ge){vu("ec",n,t)}let ul=!0;function Zg(n){const t=Dd(n),e=n.proxy,s=n.ctx;ul=!1,t.beforeCreate&&xh(t.beforeCreate,n,"bc");const{data:r,computed:a,methods:c,watch:h,provide:p,inject:g,created:v,beforeMount:I,mounted:R,beforeUpdate:V,updated:z,activated:G,deactivated:H,beforeDestroy:it,beforeUnmount:ct,destroyed:lt,unmounted:_t,render:K,renderTracked:Y,renderTriggered:P,errorCaptured:T,serverPrefetch:w,expose:C,inheritAttrs:x,components:M,directives:A,filters:_e}=t;if(g&&Wg(g,s,null,n.appContext.config.unwrapInjectedRef),c)for(const Ut in c){const rt=c[Ut];kt(rt)&&(s[Ut]=rt.bind(e))}if(r){const Ut=r.call(e,e);be(Ut)&&(n.data=gu(Ut))}if(ul=!0,a)for(const Ut in a){const rt=a[Ut],Be=kt(rt)?rt.bind(e,e):kt(rt.get)?rt.get.bind(e,e):zn,yt=!kt(rt)&&kt(rt.set)?rt.set.bind(e):zn,qt=Sd({get:Be,set:yt});Object.defineProperty(s,Ut,{enumerable:!0,configurable:!0,get:()=>qt.value,set:Wt=>qt.value=Wt})}if(h)for(const Ut in h)Md(h[Ut],s,e,Ut);if(p){const Ut=kt(p)?p.call(e):p;Reflect.ownKeys(Ut).forEach(rt=>{Ng(rt,Ut[rt])})}v&&xh(v,n,"c");function Zt(Ut,rt){At(rt)?rt.forEach(Be=>Ut(Be.bind(e))):rt&&Ut(rt.bind(e))}if(Zt(Ug,I),Zt(vo,R),Zt(zg,V),Zt(Hg,z),Zt(Vg,G),Zt(Fg,H),Zt(qg,T),Zt(jg,Y),Zt($g,P),Zt(Gg,ct),Zt(Od,_t),Zt(Kg,w),At(C))if(C.length){const Ut=n.exposed||(n.exposed={});C.forEach(rt=>{Object.defineProperty(Ut,rt,{get:()=>e[rt],set:Be=>e[rt]=Be})})}else n.exposed||(n.exposed={});K&&n.render===zn&&(n.render=K),x!=null&&(n.inheritAttrs=x),M&&(n.components=M),A&&(n.directives=A)}function Wg(n,t,e=zn,s=!1){At(n)&&(n=ll(n));for(const r in n){const a=n[r];let c;be(a)?"default"in a?c=er(a.from||r,a.default,!0):c=er(a.from||r):c=er(a),Ze(c)&&s?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:h=>c.value=h}):t[r]=c}}function xh(n,t,e){Rn(At(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function Md(n,t,e,s){const r=s.includes(".")?np(e,s):()=>e[s];if(Me(n)){const a=t[n];kt(a)&&nr(r,a)}else if(kt(n))nr(r,n.bind(e));else if(be(n))if(At(n))n.forEach(a=>Md(a,t,e,s));else{const a=kt(n.handler)?n.handler.bind(e):t[n.handler];kt(a)&&nr(r,a,n)}}function Dd(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:c}}=n.appContext,h=a.get(t);let p;return h?p=h:!r.length&&!e&&!s?p=t:(p={},r.length&&r.forEach(g=>Ua(p,g,c,!0)),Ua(p,t,c)),a.set(t,p),p}function Ua(n,t,e,s=!1){const{mixins:r,extends:a}=t;a&&Ua(n,a,e,!0),r&&r.forEach(c=>Ua(n,c,e,!0));for(const c in t)if(!(s&&c==="expose")){const h=Qg[c]||e&&e[c];n[c]=h?h(n[c],t[c]):t[c]}return n}const Qg={data:Rh,props:is,emits:is,methods:is,computed:is,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:is,directives:is,watch:Jg,provide:Rh,inject:Yg};function Rh(n,t){return t?n?function(){return un(kt(n)?n.call(this,this):n,kt(t)?t.call(this,this):t)}:t:n}function Yg(n,t){return is(ll(n),ll(t))}function ll(n){if(At(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function qe(n,t){return n?[...new Set([].concat(n,t))]:t}function is(n,t){return n?un(un(Object.create(null),n),t):t}function Jg(n,t){if(!n)return t;if(!t)return n;const e=un(Object.create(null),n);for(const s in t)e[s]=qe(n[s],t[s]);return e}function Xg(n,t,e,s=!1){const r={},a={};Va(a,Eu,1),n.propsDefaults=Object.create(null),kd(n,t,r,a);for(const c in n.propsOptions[0])c in r||(r[c]=void 0);e?n.props=s?r:Ag(r):n.type.props?n.props=r:n.props=a,n.attrs=a}function ty(n,t,e,s){const{props:r,attrs:a,vnode:{patchFlag:c}}=n,h=Qt(r),[p]=n.propsOptions;let g=!1;if((s||c>0)&&!(c&16)){if(c&8){const v=n.vnode.dynamicProps;for(let I=0;I<v.length;I++){let R=v[I];const V=t[R];if(p)if(jt(a,R))V!==a[R]&&(a[R]=V,g=!0);else{const z=rr(R);r[z]=cl(p,h,z,V,n,!1)}else V!==a[R]&&(a[R]=V,g=!0)}}}else{kd(n,t,r,a)&&(g=!0);let v;for(const I in h)(!t||!jt(t,I)&&((v=mr(I))===I||!jt(t,v)))&&(p?e&&(e[I]!==void 0||e[v]!==void 0)&&(r[I]=cl(p,h,I,void 0,n,!0)):delete r[I]);if(a!==h)for(const I in a)(!t||!jt(t,I))&&(delete a[I],g=!0)}g&&ci(n,"set","$attrs")}function kd(n,t,e,s){const[r,a]=n.propsOptions;let c=!1,h;if(t)for(let p in t){if(Ca(p))continue;const g=t[p];let v;r&&jt(r,v=rr(p))?!a||!a.includes(v)?e[v]=g:(h||(h={}))[v]=g:ec(n.emitsOptions,p)||(!(p in s)||g!==s[p])&&(s[p]=g,c=!0)}if(a){const p=Qt(e),g=h||re;for(let v=0;v<a.length;v++){const I=a[v];e[I]=cl(r,p,I,g[I],n,!jt(g,I))}}return c}function cl(n,t,e,s,r,a){const c=n[e];if(c!=null){const h=jt(c,"default");if(h&&s===void 0){const p=c.default;if(c.type!==Function&&kt(p)){const{propsDefaults:g}=r;e in g?s=g[e]:(ar(r),s=g[e]=p.call(null,t),ds())}else s=p}c[0]&&(a&&!h?s=!1:c[1]&&(s===""||s===mr(e))&&(s=!0))}return s}function Nd(n,t,e=!1){const s=t.propsCache,r=s.get(n);if(r)return r;const a=n.props,c={},h=[];let p=!1;if(!kt(n)){const v=I=>{p=!0;const[R,V]=Nd(I,t,!0);un(c,R),V&&h.push(...V)};!e&&t.mixins.length&&t.mixins.forEach(v),n.extends&&v(n.extends),n.mixins&&n.mixins.forEach(v)}if(!a&&!p)return s.set(n,Js),Js;if(At(a))for(let v=0;v<a.length;v++){const I=rr(a[v]);Lh(I)&&(c[I]=re)}else if(a)for(const v in a){const I=rr(v);if(Lh(I)){const R=a[v],V=c[I]=At(R)||kt(R)?{type:R}:R;if(V){const z=Dh(Boolean,V.type),G=Dh(String,V.type);V[0]=z>-1,V[1]=G<0||z<G,(z>-1||jt(V,"default"))&&h.push(I)}}}const g=[c,h];return s.set(n,g),g}function Lh(n){return n[0]!=="$"}function Oh(n){const t=n&&n.toString().match(/^\s*function (\w+)/);return t?t[1]:n===null?"null":""}function Mh(n,t){return Oh(n)===Oh(t)}function Dh(n,t){return At(t)?t.findIndex(e=>Mh(e,n)):kt(t)&&Mh(t,n)?0:-1}const Vd=n=>n[0]==="_"||n==="$stable",ic=n=>At(n)?n.map(Un):[Un(n)],ey=(n,t,e)=>{const s=nc((...r)=>ic(t(...r)),e);return s._c=!1,s},Fd=(n,t,e)=>{const s=n._ctx;for(const r in n){if(Vd(r))continue;const a=n[r];if(kt(a))t[r]=ey(r,a,s);else if(a!=null){const c=ic(a);t[r]=()=>c}}},Bd=(n,t)=>{const e=ic(t);n.slots.default=()=>e},ny=(n,t)=>{if(n.vnode.shapeFlag&32){const e=t._;e?(n.slots=Qt(t),Va(t,"_",e)):Fd(t,n.slots={})}else n.slots={},t&&Bd(n,t);Va(n.slots,Eu,1)},iy=(n,t,e)=>{const{vnode:s,slots:r}=n;let a=!0,c=re;if(s.shapeFlag&32){const h=t._;h?e&&h===1?a=!1:(un(r,t),!e&&h===1&&delete r._):(a=!t.$stable,Fd(t,r)),c=t}else t&&(Bd(n,t),c={default:1});if(a)for(const h in r)!Vd(h)&&!(h in c)&&delete r[h]};function ss(n,t){const e=Pn;if(e===null)return n;const s=e.proxy,r=n.dirs||(n.dirs=[]);for(let a=0;a<t.length;a++){let[c,h,p,g=re]=t[a];kt(c)&&(c={mounted:c,updated:c}),c.deep&&as(h),r.push({dir:c,instance:s,value:h,oldValue:void 0,arg:p,modifiers:g})}return n}function ts(n,t,e,s){const r=n.dirs,a=t&&t.dirs;for(let c=0;c<r.length;c++){const h=r[c];a&&(h.oldValue=a[c].value);let p=h.dir[s];p&&(_r(),Rn(p,e,8,[n.el,h,n,t]),_s())}}function Ud(){return{app:null,config:{isNativeTag:G_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sy=0;function ry(n,t){return function(s,r=null){r!=null&&!be(r)&&(r=null);const a=Ud(),c=new Set;let h=!1;const p=a.app={_uid:sy++,_component:s,_props:r,_container:null,_context:a,_instance:null,version:Dy,get config(){return a.config},set config(g){},use(g,...v){return c.has(g)||(g&&kt(g.install)?(c.add(g),g.install(p,...v)):kt(g)&&(c.add(g),g(p,...v))),p},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),p},component(g,v){return v?(a.components[g]=v,p):a.components[g]},directive(g,v){return v?(a.directives[g]=v,p):a.directives[g]},mount(g,v,I){if(!h){const R=Ee(s,r);return R.appContext=a,n(R,g,I),h=!0,p._container=g,g.__vue_app__=p,uc(R.component)||R.component.proxy}},unmount(){h&&(n(null,p._container),delete p._container.__vue_app__)},provide(g,v){return a.provides[g]=v,p}};return p}}function hl(n,t,e,s,r=!1){if(At(n)){n.forEach((R,V)=>hl(R,t&&(At(t)?t[V]:t),e,s,r));return}if(al(s)&&!r)return;const a=s.shapeFlag&4?uc(s.component)||s.component.proxy:s.el,c=r?null:a,{i:h,r:p}=n,g=t&&t.r,v=h.refs===re?h.refs={}:h.refs,I=h.setupState;if(g!=null&&g!==p&&(Me(g)?(v[g]=null,jt(I,g)&&(I[g]=null)):Ze(g)&&(g.value=null)),kt(p))Pi(p,h,12,[c,v]);else{const R=Me(p),V=Ze(p);if(R||V){const z=()=>{if(n.f){const G=R?v[p]:p.value;r?At(G)&&Gl(G,a):At(G)?G.includes(a)||G.push(a):R?v[p]=[a]:(p.value=[a],n.k&&(v[n.k]=p.value))}else R?(v[p]=c,jt(I,p)&&(I[p]=c)):Ze(p)&&(p.value=c,n.k&&(v[n.k]=c))};c?(z.id=-1,tn(z,e)):z()}}}const tn=kg;function oy(n){return ay(n)}function ay(n,t){const e=W_();e.__VUE__=!0;const{insert:s,remove:r,patchProp:a,createElement:c,createText:h,createComment:p,setText:g,setElementText:v,parentNode:I,nextSibling:R,setScopeId:V=zn,cloneNode:z,insertStaticContent:G}=n,H=(S,O,U,j=null,q=null,X=null,st=!1,J=null,tt=!!O.dynamicChildren)=>{if(S===O)return;S&&!Xr(S,O)&&(j=Ke(S),xt(S,q,X,!0),S=null),O.patchFlag===-2&&(tt=!1,O.dynamicChildren=null);const{type:W,ref:ft,shapeFlag:ut}=O;switch(W){case rc:it(S,O,U,j);break;case ki:ct(S,O,U,j);break;case xa:S==null&&lt(O,U,j,st);break;case Oe:A(S,O,U,j,q,X,st,J,tt);break;default:ut&1?Y(S,O,U,j,q,X,st,J,tt):ut&6?_e(S,O,U,j,q,X,st,J,tt):(ut&64||ut&128)&&W.process(S,O,U,j,q,X,st,J,tt,Qe)}ft!=null&&q&&hl(ft,S&&S.ref,X,O||S,!O)},it=(S,O,U,j)=>{if(S==null)s(O.el=h(O.children),U,j);else{const q=O.el=S.el;O.children!==S.children&&g(q,O.children)}},ct=(S,O,U,j)=>{S==null?s(O.el=p(O.children||""),U,j):O.el=S.el},lt=(S,O,U,j)=>{[S.el,S.anchor]=G(S.children,O,U,j)},_t=({el:S,anchor:O},U,j)=>{let q;for(;S&&S!==O;)q=R(S),s(S,U,j),S=q;s(O,U,j)},K=({el:S,anchor:O})=>{let U;for(;S&&S!==O;)U=R(S),r(S),S=U;r(O)},Y=(S,O,U,j,q,X,st,J,tt)=>{st=st||O.type==="svg",S==null?P(O,U,j,q,X,st,J,tt):C(S,O,q,X,st,J,tt)},P=(S,O,U,j,q,X,st,J)=>{let tt,W;const{type:ft,props:ut,shapeFlag:ht,transition:vt,patchFlag:pt,dirs:Ct}=S;if(S.el&&z!==void 0&&pt===-1)tt=S.el=z(S.el);else{if(tt=S.el=c(S.type,X,ut&&ut.is,ut),ht&8?v(tt,S.children):ht&16&&w(S.children,tt,null,j,q,X&&ft!=="foreignObject",st,J),Ct&&ts(S,null,j,"created"),ut){for(const ne in ut)ne!=="value"&&!Ca(ne)&&a(tt,ne,null,ut[ne],X,S.children,j,q,le);"value"in ut&&a(tt,"value",null,ut.value),(W=ut.onVnodeBeforeMount)&&Fn(W,j,S)}T(tt,S,S.scopeId,st,j)}Ct&&ts(S,null,j,"beforeMount");const zt=(!q||q&&!q.pendingBranch)&&vt&&!vt.persisted;zt&&vt.beforeEnter(tt),s(tt,O,U),((W=ut&&ut.onVnodeMounted)||zt||Ct)&&tn(()=>{W&&Fn(W,j,S),zt&&vt.enter(tt),Ct&&ts(S,null,j,"mounted")},q)},T=(S,O,U,j,q)=>{if(U&&V(S,U),j)for(let X=0;X<j.length;X++)V(S,j[X]);if(q){let X=q.subTree;if(O===X){const st=q.vnode;T(S,st,st.scopeId,st.slotScopeIds,q.parent)}}},w=(S,O,U,j,q,X,st,J,tt=0)=>{for(let W=tt;W<S.length;W++){const ft=S[W]=J?Si(S[W]):Un(S[W]);H(null,ft,O,U,j,q,X,st,J)}},C=(S,O,U,j,q,X,st)=>{const J=O.el=S.el;let{patchFlag:tt,dynamicChildren:W,dirs:ft}=O;tt|=S.patchFlag&16;const ut=S.props||re,ht=O.props||re;let vt;U&&es(U,!1),(vt=ht.onVnodeBeforeUpdate)&&Fn(vt,U,O,S),ft&&ts(O,S,U,"beforeUpdate"),U&&es(U,!0);const pt=q&&O.type!=="foreignObject";if(W?x(S.dynamicChildren,W,J,U,j,pt,X):st||Be(S,O,J,null,U,j,pt,X,!1),tt>0){if(tt&16)M(J,O,ut,ht,U,j,q);else if(tt&2&&ut.class!==ht.class&&a(J,"class",null,ht.class,q),tt&4&&a(J,"style",ut.style,ht.style,q),tt&8){const Ct=O.dynamicProps;for(let zt=0;zt<Ct.length;zt++){const ne=Ct[zt],De=ut[ne],En=ht[ne];(En!==De||ne==="value")&&a(J,ne,De,En,q,S.children,U,j,le)}}tt&1&&S.children!==O.children&&v(J,O.children)}else!st&&W==null&&M(J,O,ut,ht,U,j,q);((vt=ht.onVnodeUpdated)||ft)&&tn(()=>{vt&&Fn(vt,U,O,S),ft&&ts(O,S,U,"updated")},j)},x=(S,O,U,j,q,X,st)=>{for(let J=0;J<O.length;J++){const tt=S[J],W=O[J],ft=tt.el&&(tt.type===Oe||!Xr(tt,W)||tt.shapeFlag&70)?I(tt.el):U;H(tt,W,ft,null,j,q,X,st,!0)}},M=(S,O,U,j,q,X,st)=>{if(U!==j){for(const J in j){if(Ca(J))continue;const tt=j[J],W=U[J];tt!==W&&J!=="value"&&a(S,J,W,tt,st,O.children,q,X,le)}if(U!==re)for(const J in U)!Ca(J)&&!(J in j)&&a(S,J,U[J],null,st,O.children,q,X,le);"value"in j&&a(S,"value",U.value,j.value)}},A=(S,O,U,j,q,X,st,J,tt)=>{const W=O.el=S?S.el:h(""),ft=O.anchor=S?S.anchor:h("");let{patchFlag:ut,dynamicChildren:ht,slotScopeIds:vt}=O;vt&&(J=J?J.concat(vt):vt),S==null?(s(W,U,j),s(ft,U,j),w(O.children,U,ft,q,X,st,J,tt)):ut>0&&ut&64&&ht&&S.dynamicChildren?(x(S.dynamicChildren,ht,U,q,X,st,J),(O.key!=null||q&&O===q.subTree)&&sc(S,O,!0)):Be(S,O,U,ft,q,X,st,J,tt)},_e=(S,O,U,j,q,X,st,J,tt)=>{O.slotScopeIds=J,S==null?O.shapeFlag&512?q.ctx.activate(O,U,j,st,tt):vn(O,U,j,q,X,st,tt):Zt(S,O,tt)},vn=(S,O,U,j,q,X,st)=>{const J=S.component=Ty(S,j,q);if(Rd(S)&&(J.ctx.renderer=Qe),wy(J),J.asyncDep){if(q&&q.registerDep(J,Ut),!S.el){const tt=J.subTree=Ee(ki);ct(null,tt,O,U)}return}Ut(J,S,O,U,q,X,st)},Zt=(S,O,U)=>{const j=O.component=S.component;if(Og(S,O,U))if(j.asyncDep&&!j.asyncResolved){rt(j,O,U);return}else j.next=O,Ry(j.update),j.update();else O.component=S.component,O.el=S.el,j.vnode=O},Ut=(S,O,U,j,q,X,st)=>{const J=()=>{if(S.isMounted){let{next:ft,bu:ut,u:ht,parent:vt,vnode:pt}=S,Ct=ft,zt;es(S,!1),ft?(ft.el=pt.el,rt(S,ft,st)):ft=pt,ut&&Pa(ut),(zt=ft.props&&ft.props.onVnodeBeforeUpdate)&&Fn(zt,vt,ft,pt),es(S,!0);const ne=Ch(S),De=S.subTree;S.subTree=ne,H(De,ne,I(De.el),Ke(De),S,q,X),ft.el=ne.el,Ct===null&&Mg(S,ne.el),ht&&tn(ht,q),(zt=ft.props&&ft.props.onVnodeUpdated)&&tn(()=>Fn(zt,vt,ft,pt),q)}else{let ft;const{el:ut,props:ht}=O,{bm:vt,m:pt,parent:Ct}=S,zt=al(O);es(S,!1),vt&&Pa(vt),!zt&&(ft=ht&&ht.onVnodeBeforeMount)&&Fn(ft,Ct,O),es(S,!0);{const ne=S.subTree=Ch(S);H(null,ne,U,j,S,q,X),O.el=ne.el}if(pt&&tn(pt,q),!zt&&(ft=ht&&ht.onVnodeMounted)){const ne=O;tn(()=>Fn(ft,Ct,ne),q)}O.shapeFlag&256&&S.a&&tn(S.a,q),S.isMounted=!0,O=U=j=null}},tt=S.effect=new ql(J,()=>Qd(S.update),S.scope),W=S.update=tt.run.bind(tt);W.id=S.uid,es(S,!0),W()},rt=(S,O,U)=>{O.component=S;const j=S.vnode.props;S.vnode=O,S.next=null,ty(S,O.props,j,U),iy(S,O.children,U),_r(),cc(void 0,S.update),_s()},Be=(S,O,U,j,q,X,st,J,tt=!1)=>{const W=S&&S.children,ft=S?S.shapeFlag:0,ut=O.children,{patchFlag:ht,shapeFlag:vt}=O;if(ht>0){if(ht&128){qt(W,ut,U,j,q,X,st,J,tt);return}else if(ht&256){yt(W,ut,U,j,q,X,st,J,tt);return}}vt&8?(ft&16&&le(W,q,X),ut!==W&&v(U,ut)):ft&16?vt&16?qt(W,ut,U,j,q,X,st,J,tt):le(W,q,X,!0):(ft&8&&v(U,""),vt&16&&w(ut,U,j,q,X,st,J,tt))},yt=(S,O,U,j,q,X,st,J,tt)=>{S=S||Js,O=O||Js;const W=S.length,ft=O.length,ut=Math.min(W,ft);let ht;for(ht=0;ht<ut;ht++){const vt=O[ht]=tt?Si(O[ht]):Un(O[ht]);H(S[ht],vt,U,null,q,X,st,J,tt)}W>ft?le(S,q,X,!0,!1,ut):w(O,U,j,q,X,st,J,tt,ut)},qt=(S,O,U,j,q,X,st,J,tt)=>{let W=0;const ft=O.length;let ut=S.length-1,ht=ft-1;for(;W<=ut&&W<=ht;){const vt=S[W],pt=O[W]=tt?Si(O[W]):Un(O[W]);if(Xr(vt,pt))H(vt,pt,U,null,q,X,st,J,tt);else break;W++}for(;W<=ut&&W<=ht;){const vt=S[ut],pt=O[ht]=tt?Si(O[ht]):Un(O[ht]);if(Xr(vt,pt))H(vt,pt,U,null,q,X,st,J,tt);else break;ut--,ht--}if(W>ut){if(W<=ht){const vt=ht+1,pt=vt<ft?O[vt].el:j;for(;W<=ht;)H(null,O[W]=tt?Si(O[W]):Un(O[W]),U,pt,q,X,st,J,tt),W++}}else if(W>ht)for(;W<=ut;)xt(S[W],q,X,!0),W++;else{const vt=W,pt=W,Ct=new Map;for(W=pt;W<=ht;W++){const Te=O[W]=tt?Si(O[W]):Un(O[W]);Te.key!=null&&Ct.set(Te.key,W)}let zt,ne=0;const De=ht-pt+1;let En=!1,On=0;const Tn=new Array(De);for(W=0;W<De;W++)Tn[W]=0;for(W=vt;W<=ut;W++){const Te=S[W];if(ne>=De){xt(Te,q,X,!0);continue}let Ye;if(Te.key!=null)Ye=Ct.get(Te.key);else for(zt=pt;zt<=ht;zt++)if(Tn[zt-pt]===0&&Xr(Te,O[zt])){Ye=zt;break}Ye===void 0?xt(Te,q,X,!0):(Tn[Ye-pt]=W+1,Ye>=On?On=Ye:En=!0,H(Te,O[Ye],U,null,q,X,st,J,tt),ne++)}const Zn=En?uy(Tn):Js;for(zt=Zn.length-1,W=De-1;W>=0;W--){const Te=pt+W,Ye=O[Te],Mn=Te+1<ft?O[Te+1].el:j;Tn[W]===0?H(null,Ye,U,Mn,q,X,st,J,tt):En&&(zt<0||W!==Zn[zt]?Wt(Ye,U,Mn,2):zt--)}}},Wt=(S,O,U,j,q=null)=>{const{el:X,type:st,transition:J,children:tt,shapeFlag:W}=S;if(W&6){Wt(S.component.subTree,O,U,j);return}if(W&128){S.suspense.move(O,U,j);return}if(W&64){st.move(S,O,U,Qe);return}if(st===Oe){s(X,O,U);for(let ut=0;ut<tt.length;ut++)Wt(tt[ut],O,U,j);s(S.anchor,O,U);return}if(st===xa){_t(S,O,U);return}if(j!==2&&W&1&&J)if(j===0)J.beforeEnter(X),s(X,O,U),tn(()=>J.enter(X),q);else{const{leave:ut,delayLeave:ht,afterLeave:vt}=J,pt=()=>s(X,O,U),Ct=()=>{ut(X,()=>{pt(),vt&&vt()})};ht?ht(X,pt,Ct):Ct()}else s(X,O,U)},xt=(S,O,U,j=!1,q=!1)=>{const{type:X,props:st,ref:J,children:tt,dynamicChildren:W,shapeFlag:ft,patchFlag:ut,dirs:ht}=S;if(J!=null&&hl(J,null,U,S,!0),ft&256){O.ctx.deactivate(S);return}const vt=ft&1&&ht,pt=!al(S);let Ct;if(pt&&(Ct=st&&st.onVnodeBeforeUnmount)&&Fn(Ct,O,S),ft&6)Ot(S.component,U,j);else{if(ft&128){S.suspense.unmount(U,j);return}vt&&ts(S,null,O,"beforeUnmount"),ft&64?S.type.remove(S,O,U,q,Qe,j):W&&(X!==Oe||ut>0&&ut&64)?le(W,O,U,!1,!0):(X===Oe&&ut&384||!q&&ft&16)&&le(tt,O,U),j&&ue(S)}(pt&&(Ct=st&&st.onVnodeUnmounted)||vt)&&tn(()=>{Ct&&Fn(Ct,O,S),vt&&ts(S,null,O,"unmounted")},U)},ue=S=>{const{type:O,el:U,anchor:j,transition:q}=S;if(O===Oe){Vt(U,j);return}if(O===xa){K(S);return}const X=()=>{r(U),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(S.shapeFlag&1&&q&&!q.persisted){const{leave:st,delayLeave:J}=q,tt=()=>st(U,X);J?J(S.el,X,tt):tt()}else X()},Vt=(S,O)=>{let U;for(;S!==O;)U=R(S),r(S),S=U;r(O)},Ot=(S,O,U)=>{const{bum:j,scope:q,update:X,subTree:st,um:J}=S;j&&Pa(j),q.stop(),X&&(X.active=!1,xt(st,S,O,U)),J&&tn(J,O),tn(()=>{S.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},le=(S,O,U,j=!1,q=!1,X=0)=>{for(let st=X;st<S.length;st++)xt(S[st],O,U,j,q)},Ke=S=>S.shapeFlag&6?Ke(S.component.subTree):S.shapeFlag&128?S.suspense.next():R(S.anchor||S.el),Gi=(S,O,U)=>{S==null?O._vnode&&xt(O._vnode,null,null,!0):H(O._vnode||null,S,O,null,null,null,U),Xd(),O._vnode=S},Qe={p:H,um:xt,m:Wt,r:ue,mt:vn,mc:w,pc:Be,pbc:x,n:Ke,o:n};return{render:Gi,hydrate:void 0,createApp:ry(Gi)}}function es({effect:n,update:t},e){n.allowRecurse=t.allowRecurse=e}function sc(n,t,e=!1){const s=n.children,r=t.children;if(At(s)&&At(r))for(let a=0;a<s.length;a++){const c=s[a];let h=r[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[a]=Si(r[a]),h.el=c.el),e||sc(c,h))}}function uy(n){const t=n.slice(),e=[0];let s,r,a,c,h;const p=n.length;for(s=0;s<p;s++){const g=n[s];if(g!==0){if(r=e[e.length-1],n[r]<g){t[s]=r,e.push(s);continue}for(a=0,c=e.length-1;a<c;)h=a+c>>1,n[e[h]]<g?a=h+1:c=h;g<n[e[a]]&&(a>0&&(t[s]=e[a-1]),e[a]=s)}}for(a=e.length,c=e[a-1];a-- >0;)e[a]=c,c=t[c];return e}const ly=n=>n.__isTeleport,ao=n=>n&&(n.disabled||n.disabled===""),kh=n=>typeof SVGElement<"u"&&n instanceof SVGElement,fl=(n,t)=>{const e=n&&n.to;return Me(e)?t?t(e):null:e},cy={__isTeleport:!0,process(n,t,e,s,r,a,c,h,p,g){const{mc:v,pc:I,pbc:R,o:{insert:V,querySelector:z,createText:G,createComment:H}}=g,it=ao(t.props);let{shapeFlag:ct,children:lt,dynamicChildren:_t}=t;if(n==null){const K=t.el=G(""),Y=t.anchor=G("");V(K,e,s),V(Y,e,s);const P=t.target=fl(t.props,z),T=t.targetAnchor=G("");P&&(V(T,P),c=c||kh(P));const w=(C,x)=>{ct&16&&v(lt,C,x,r,a,c,h,p)};it?w(e,Y):P&&w(P,T)}else{t.el=n.el;const K=t.anchor=n.anchor,Y=t.target=n.target,P=t.targetAnchor=n.targetAnchor,T=ao(n.props),w=T?e:Y,C=T?K:P;if(c=c||kh(Y),_t?(R(n.dynamicChildren,_t,w,r,a,c,h),sc(n,t,!0)):p||I(n,t,w,C,r,a,c,h,!1),it)T||va(t,e,K,g,1);else if((t.props&&t.props.to)!==(n.props&&n.props.to)){const x=t.target=fl(t.props,z);x&&va(t,x,null,g,0)}else T&&va(t,Y,P,g,1)}},remove(n,t,e,s,{um:r,o:{remove:a}},c){const{shapeFlag:h,children:p,anchor:g,targetAnchor:v,target:I,props:R}=n;if(I&&a(v),(c||!ao(R))&&(a(g),h&16))for(let V=0;V<p.length;V++){const z=p[V];r(z,t,e,!0,!!z.dynamicChildren)}},move:va,hydrate:hy};function va(n,t,e,{o:{insert:s},m:r},a=2){a===0&&s(n.targetAnchor,t,e);const{el:c,anchor:h,shapeFlag:p,children:g,props:v}=n,I=a===2;if(I&&s(c,t,e),(!I||ao(v))&&p&16)for(let R=0;R<g.length;R++)r(g[R],t,e,2);I&&s(h,t,e)}function hy(n,t,e,s,r,a,{o:{nextSibling:c,parentNode:h,querySelector:p}},g){const v=t.target=fl(t.props,p);if(v){const I=v._lpa||v.firstChild;t.shapeFlag&16&&(ao(t.props)?(t.anchor=g(c(n),t,h(n),e,s,r,a),t.targetAnchor=I):(t.anchor=c(n),t.targetAnchor=g(I,t,v,e,s,r,a)),v._lpa=t.targetAnchor&&c(t.targetAnchor))}return t.anchor&&c(t.anchor)}const zd=cy,fy=Symbol(),Oe=Symbol(void 0),rc=Symbol(void 0),ki=Symbol(void 0),xa=Symbol(void 0),uo=[];let fs=null;function Rt(n=!1){uo.push(fs=n?null:[])}function dy(){uo.pop(),fs=uo[uo.length-1]||null}let za=1;function Nh(n){za+=n}function Hd(n){return n.dynamicChildren=za>0?fs||Js:null,dy(),za>0&&fs&&fs.push(n),n}function Kt(n,t,e,s,r,a){return Hd(nt(n,t,e,s,r,a,!0))}function Lo(n,t,e,s,r){return Hd(Ee(n,t,e,s,r,!0))}function Gd(n){return n?n.__v_isVNode===!0:!1}function Xr(n,t){return n.type===t.type&&n.key===t.key}const Eu="__vInternal",Kd=({key:n})=>n??null,Ra=({ref:n,ref_key:t,ref_for:e})=>n!=null?Me(n)||Ze(n)||kt(n)?{i:Pn,r:n,k:t,f:!!e}:n:null;function nt(n,t=null,e=null,s=0,r=null,a=n===Oe?0:1,c=!1,h=!1){const p={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Kd(t),ref:t&&Ra(t),scopeId:yu,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return h?(oc(p,e),a&128&&n.normalize(p)):e&&(p.shapeFlag|=Me(e)?8:16),za>0&&!c&&fs&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&fs.push(p),p}const Ee=py;function py(n,t=null,e=null,s=0,r=null,a=!1){if((!n||n===fy)&&(n=ki),Gd(n)){const h=Eo(n,t,!0);return e&&oc(h,e),h}if(Sy(n)&&(n=n.__vccOpts),t){t=my(t);let{class:h,style:p}=t;h&&!Me(h)&&(t.class=ls(h)),be(p)&&(Td(p)&&!At(p)&&(p=un({},p)),t.style=_o(p))}const c=Me(n)?1:Dg(n)?128:ly(n)?64:be(n)?4:kt(n)?2:0;return nt(n,t,e,s,r,c,a,!0)}function my(n){return n?Td(n)||Eu in n?un({},n):n:null}function Eo(n,t,e=!1){const{props:s,ref:r,patchFlag:a,children:c}=n,h=t?gy(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Kd(h),ref:t&&t.ref?e&&r?At(r)?r.concat(Ra(t)):[r,Ra(t)]:Ra(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Oe?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Eo(n.ssContent),ssFallback:n.ssFallback&&Eo(n.ssFallback),el:n.el,anchor:n.anchor}}function oi(n=" ",t=0){return Ee(rc,null,n,t)}function _y(n,t){const e=Ee(xa,null,n);return e.staticCount=t,e}function Cn(n="",t=!1){return t?(Rt(),Lo(ki,null,n)):Ee(ki,null,n)}function Un(n){return n==null||typeof n=="boolean"?Ee(ki):At(n)?Ee(Oe,null,n.slice()):typeof n=="object"?Si(n):Ee(rc,null,String(n))}function Si(n){return n.el===null||n.memo?n:Eo(n)}function oc(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(At(t))e=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),oc(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!(Eu in t)?t._ctx=Pn:r===3&&Pn&&(Pn.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else kt(t)?(t={default:t,_ctx:Pn},e=32):(t=String(t),s&64?(e=16,t=[oi(t)]):e=8);n.children=t,n.shapeFlag|=e}function gy(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=ls([t.class,s.class]));else if(r==="style")t.style=_o([t.style,s.style]);else if(fu(r)){const a=t[r],c=s[r];a!==c&&!(At(a)&&a.includes(c))&&(t[r]=a?[].concat(a,c):c)}else r!==""&&(t[r]=s[r])}return t}function Fn(n,t,e,s=null){Rn(n,t,7,[e,s])}function ac(n,t,e,s){let r;const a=e;if(At(n)||Me(n)){r=new Array(n.length);for(let c=0,h=n.length;c<h;c++)r[c]=t(n[c],c,void 0,a)}else if(typeof n=="number"){r=new Array(n);for(let c=0;c<n;c++)r[c]=t(c+1,c,void 0,a)}else if(be(n))if(n[Symbol.iterator])r=Array.from(n,(c,h)=>t(c,h,void 0,a));else{const c=Object.keys(n);r=new Array(c.length);for(let h=0,p=c.length;h<p;h++){const g=c[h];r[h]=t(n[g],g,h,a)}}else r=[];return r}function $d(n,t,e={},s,r){if(Pn.isCE)return Ee("slot",null,s);let a=n[t];a&&a._c&&(a._d=!1),Rt();const c=a&&jd(a(e)),h=Lo(Oe,{key:e.key||`_${t}`},c||[],c&&n._===1?64:-2);return a&&a._c&&(a._d=!0),h}function jd(n){return n.some(t=>Gd(t)?!(t.type===ki||t.type===Oe&&!jd(t.children)):!0)?n:null}const dl=n=>n?qd(n)?uc(n)||n.proxy:dl(n.parent):null,Ha=un(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>dl(n.parent),$root:n=>dl(n.root),$emit:n=>n.emit,$options:n=>Dd(n),$forceUpdate:n=>()=>Qd(n.update),$nextTick:n=>Py.bind(n.proxy),$watch:n=>My.bind(n)}),yy={get({_:n},t){const{ctx:e,setupState:s,data:r,props:a,accessCache:c,type:h,appContext:p}=n;let g;if(t[0]!=="$"){const V=c[t];if(V!==void 0)switch(V){case 1:return s[t];case 2:return r[t];case 4:return e[t];case 3:return a[t]}else{if(s!==re&&jt(s,t))return c[t]=1,s[t];if(r!==re&&jt(r,t))return c[t]=2,r[t];if((g=n.propsOptions[0])&&jt(g,t))return c[t]=3,a[t];if(e!==re&&jt(e,t))return c[t]=4,e[t];ul&&(c[t]=0)}}const v=Ha[t];let I,R;if(v)return t==="$attrs"&&ln(n,"get",t),v(n);if((I=h.__cssModules)&&(I=I[t]))return I;if(e!==re&&jt(e,t))return c[t]=4,e[t];if(R=p.config.globalProperties,jt(R,t))return R[t]},set({_:n},t,e){const{data:s,setupState:r,ctx:a}=n;if(r!==re&&jt(r,t))r[t]=e;else if(s!==re&&jt(s,t))s[t]=e;else if(jt(n.props,t))return!1;return t[0]==="$"&&t.slice(1)in n?!1:(a[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:r,propsOptions:a}},c){let h;return!!e[c]||n!==re&&jt(n,c)||t!==re&&jt(t,c)||(h=a[0])&&jt(h,c)||jt(s,c)||jt(Ha,c)||jt(r.config.globalProperties,c)}},vy=Ud();let Ey=0;function Ty(n,t,e){const s=n.type,r=(t?t.appContext:n.appContext)||vy,a={uid:Ey++,vnode:n,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Q_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nd(s,r),emitsOptions:Cd(s,r),emit:null,emitted:null,propsDefaults:re,inheritAttrs:s.inheritAttrs,ctx:re,data:re,props:re,attrs:re,slots:re,refs:re,setupState:re,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=xg.bind(null,a),n.ce&&n.ce(a),a}let Ge=null;const ar=n=>{Ge=n,n.scope.on()},ds=()=>{Ge&&Ge.scope.off(),Ge=null};function qd(n){return n.vnode.shapeFlag&4}let Ga=!1;function wy(n,t=!1){Ga=t;const{props:e,children:s}=n.vnode,r=qd(n);Xg(n,e,r,t),ny(n,s);const a=r?Iy(n,t):void 0;return Ga=!1,a}function Iy(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=wd(new Proxy(n.ctx,yy));const{setup:s}=e;if(s){const r=n.setupContext=s.length>1?by(n):null;ar(n),_r();const a=Pi(s,n,0,[n.props,r]);if(_s(),ds(),od(a)){if(a.then(ds,ds),t)return a.then(c=>{Vh(n,c)}).catch(c=>{Tu(c,n,0)});n.asyncDep=a}else Vh(n,a)}else Zd(n)}function Vh(n,t,e){kt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:be(t)&&(n.setupState=bd(t)),Zd(n)}function Zd(n,t,e){const s=n.type;n.render||(n.render=s.render||zn),ar(n),_r(),Zg(n),_s(),ds()}function Ay(n){return new Proxy(n.attrs,{get(t,e){return ln(n,"get","$attrs"),t[e]}})}function by(n){const t=s=>{n.exposed=s||{}};let e;return{get attrs(){return e||(e=Ay(n))},slots:n.slots,emit:n.emit,expose:t}}function uc(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(bd(wd(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ha)return Ha[e](n)}}))}function Sy(n){return kt(n)&&"__vccOpts"in n}function Pi(n,t,e,s){let r;try{r=s?n(...s):n()}catch(a){Tu(a,t,e)}return r}function Rn(n,t,e,s){if(kt(n)){const a=Pi(n,t,e,s);return a&&od(a)&&a.catch(c=>{Tu(c,t,e)}),a}const r=[];for(let a=0;a<n.length;a++)r.push(Rn(n[a],t,e,s));return r}function Tu(n,t,e,s=!0){const r=t?t.vnode:null;if(t){let a=t.parent;const c=t.proxy,h=e;for(;a;){const g=a.ec;if(g){for(let v=0;v<g.length;v++)if(g[v](n,c,h)===!1)return}a=a.parent}const p=t.appContext.config.errorHandler;if(p){Pi(p,null,10,[n,c,h]);return}}Cy(n,e,r,s)}function Cy(n,t,e,s=!0){console.error(n)}let Ka=!1,pl=!1;const an=[];let ai=0;const lo=[];let no=null,js=0;const co=[];let bi=null,qs=0;const Wd=Promise.resolve();let lc=null,ml=null;function Py(n){const t=lc||Wd;return n?t.then(this?n.bind(this):n):t}function xy(n){let t=ai+1,e=an.length;for(;t<e;){const s=t+e>>>1;To(an[s])<n?t=s+1:e=s}return t}function Qd(n){(!an.length||!an.includes(n,Ka&&n.allowRecurse?ai+1:ai))&&n!==ml&&(n.id==null?an.push(n):an.splice(xy(n.id),0,n),Yd())}function Yd(){!Ka&&!pl&&(pl=!0,lc=Wd.then(tp))}function Ry(n){const t=an.indexOf(n);t>ai&&an.splice(t,1)}function Jd(n,t,e,s){At(n)?e.push(...n):(!t||!t.includes(n,n.allowRecurse?s+1:s))&&e.push(n),Yd()}function Ly(n){Jd(n,no,lo,js)}function Oy(n){Jd(n,bi,co,qs)}function cc(n,t=null){if(lo.length){for(ml=t,no=[...new Set(lo)],lo.length=0,js=0;js<no.length;js++)no[js]();no=null,js=0,ml=null,cc(n,t)}}function Xd(n){if(co.length){const t=[...new Set(co)];if(co.length=0,bi){bi.push(...t);return}for(bi=t,bi.sort((e,s)=>To(e)-To(s)),qs=0;qs<bi.length;qs++)bi[qs]();bi=null,qs=0}}const To=n=>n.id==null?1/0:n.id;function tp(n){pl=!1,Ka=!0,cc(n),an.sort((t,e)=>To(t)-To(e));try{for(ai=0;ai<an.length;ai++){const t=an[ai];t&&t.active!==!1&&Pi(t,null,14)}}finally{ai=0,an.length=0,Xd(),Ka=!1,lc=null,(an.length||lo.length||co.length)&&tp(n)}}const Fh={};function nr(n,t,e){return ep(n,t,e)}function ep(n,t,{immediate:e,deep:s,flush:r,onTrack:a,onTrigger:c}=re){const h=Ge;let p,g=!1,v=!1;if(Ze(n)?(p=()=>n.value,g=!!n._shallow):tr(n)?(p=()=>n,s=!0):At(n)?(v=!0,g=n.some(tr),p=()=>n.map(it=>{if(Ze(it))return it.value;if(tr(it))return as(it);if(kt(it))return Pi(it,h,2)})):kt(n)?t?p=()=>Pi(n,h,2):p=()=>{if(!(h&&h.isUnmounted))return I&&I(),Rn(n,h,3,[R])}:p=zn,t&&s){const it=p;p=()=>as(it())}let I,R=it=>{I=H.onStop=()=>{Pi(it,h,4)}};if(Ga)return R=zn,t?e&&Rn(t,h,3,[p(),v?[]:void 0,R]):p(),zn;let V=v?[]:Fh;const z=()=>{if(H.active)if(t){const it=H.run();(s||g||(v?it.some((ct,lt)=>go(ct,V[lt])):go(it,V)))&&(I&&I(),Rn(t,h,3,[it,V===Fh?void 0:V,R]),V=it)}else H.run()};z.allowRecurse=!!t;let G;r==="sync"?G=z:r==="post"?G=()=>tn(z,h&&h.suspense):G=()=>{!h||h.isMounted?Ly(z):z()};const H=new ql(p,G);return t?e?z():V=H.run():r==="post"?tn(H.run.bind(H),h&&h.suspense):H.run(),()=>{H.stop(),h&&h.scope&&Gl(h.scope.effects,H)}}function My(n,t,e){const s=this.proxy,r=Me(n)?n.includes(".")?np(s,n):()=>s[n]:n.bind(s,s);let a;kt(t)?a=t:(a=t.handler,e=t);const c=Ge;ar(this);const h=ep(r,a.bind(s),e);return c?ar(c):ds(),h}function np(n,t){const e=t.split(".");return()=>{let s=n;for(let r=0;r<e.length&&s;r++)s=s[e[r]];return s}}function as(n,t){if(!be(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),Ze(n))as(n.value,t);else if(At(n))for(let e=0;e<n.length;e++)as(n[e],t);else if(du(n)||Xs(n))n.forEach(e=>{as(e,t)});else if(ud(n))for(const e in n)as(n[e],t);return n}const Dy="3.2.26",ky="http://www.w3.org/2000/svg",$s=typeof document<"u"?document:null,Bh=new Map,Ny={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const r=t?$s.createElementNS(ky,n):$s.createElement(n,e?{is:e}:void 0);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>$s.createTextNode(n),createComment:n=>$s.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>$s.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},cloneNode(n){const t=n.cloneNode(!0);return"_value"in n&&(t._value=n._value),t},insertStaticContent(n,t,e,s){const r=e?e.previousSibling:t.lastChild;let a=Bh.get(n);if(!a){const c=$s.createElement("template");if(c.innerHTML=s?`<svg>${n}</svg>`:n,a=c.content,s){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}Bh.set(n,a)}return t.insertBefore(a.cloneNode(!0),e),[r?r.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function Vy(n,t,e){const s=n._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}function Fy(n,t,e){const s=n.style,r=Me(e);if(e&&!r){for(const a in e)_l(s,a,e[a]);if(t&&!Me(t))for(const a in t)e[a]==null&&_l(s,a,"")}else{const a=s.display;r?t!==e&&(s.cssText=e):t&&n.removeAttribute("style"),"_vod"in n&&(s.display=a)}}const Uh=/\s*!important$/;function _l(n,t,e){if(At(e))e.forEach(s=>_l(n,t,s));else if(t.startsWith("--"))n.setProperty(t,e);else{const s=By(n,t);Uh.test(e)?n.setProperty(mr(s),e.replace(Uh,""),"important"):n[s]=e}}const zh=["Webkit","Moz","ms"],ju={};function By(n,t){const e=ju[t];if(e)return e;let s=rr(t);if(s!=="filter"&&s in n)return ju[t]=s;s=ld(s);for(let r=0;r<zh.length;r++){const a=zh[r]+s;if(a in n)return ju[t]=a}return t}const Hh="http://www.w3.org/1999/xlink";function Uy(n,t,e,s,r){if(s&&t.startsWith("xlink:"))e==null?n.removeAttributeNS(Hh,t.slice(6,t.length)):n.setAttributeNS(Hh,t,e);else{const a=V_(t);e==null||a&&!sd(e)?n.removeAttribute(t):n.setAttribute(t,a?"":e)}}function zy(n,t,e,s,r,a,c){if(t==="innerHTML"||t==="textContent"){s&&c(s,r,a),n[t]=e??"";return}if(t==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=e;const h=e??"";(n.value!==h||n.tagName==="OPTION")&&(n.value=h),e==null&&n.removeAttribute(t);return}if(e===""||e==null){const h=typeof n[t];if(h==="boolean"){n[t]=sd(e);return}else if(e==null&&h==="string"){n[t]="",n.removeAttribute(t);return}else if(h==="number"){try{n[t]=0}catch{}n.removeAttribute(t);return}}try{n[t]=e}catch{}}let $a=Date.now,ip=!1;if(typeof window<"u"){$a()>document.createEvent("Event").timeStamp&&($a=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);ip=!!(n&&Number(n[1])<=53)}let gl=0;const Hy=Promise.resolve(),Gy=()=>{gl=0},Ky=()=>gl||(Hy.then(Gy),gl=$a());function os(n,t,e,s){n.addEventListener(t,e,s)}function $y(n,t,e,s){n.removeEventListener(t,e,s)}function jy(n,t,e,s,r=null){const a=n._vei||(n._vei={}),c=a[t];if(s&&c)c.value=s;else{const[h,p]=qy(t);if(s){const g=a[t]=Zy(s,r);os(n,h,g,p)}else c&&($y(n,h,c,p),a[t]=void 0)}}const Gh=/(?:Once|Passive|Capture)$/;function qy(n){let t;if(Gh.test(n)){t={};let e;for(;e=n.match(Gh);)n=n.slice(0,n.length-e[0].length),t[e[0].toLowerCase()]=!0}return[mr(n.slice(2)),t]}function Zy(n,t){const e=s=>{const r=s.timeStamp||$a();(ip||r>=e.attached-1)&&Rn(Wy(s,e.value),t,5,[s])};return e.value=n,e.attached=Ky(),e}function Wy(n,t){if(At(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>r=>!r._stopped&&s(r))}else return t}const Kh=/^on[a-z]/,Qy=(n,t,e,s,r=!1,a,c,h,p)=>{t==="class"?Vy(n,s,r):t==="style"?Fy(n,e,s):fu(t)?Hl(t)||jy(n,t,e,s,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Yy(n,t,s,r))?zy(n,t,s,a,c,h,p):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),Uy(n,t,s,r))};function Yy(n,t,e,s){return s?!!(t==="innerHTML"||t==="textContent"||t in n&&Kh.test(t)&&kt(e)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA"||Kh.test(t)&&Me(e)?!1:t in n}const ja=n=>{const t=n.props["onUpdate:modelValue"];return At(t)?e=>Pa(t,e):t};function Jy(n){n.target.composing=!0}function $h(n){const t=n.target;t.composing&&(t.composing=!1,Xy(t,"input"))}function Xy(n,t){const e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),n.dispatchEvent(e)}const Ea={created(n,{modifiers:{lazy:t,trim:e,number:s}},r){n._assign=ja(r);const a=s||r.props&&r.props.type==="number";os(n,t?"change":"input",c=>{if(c.target.composing)return;let h=n.value;e?h=h.trim():a&&(h=Fa(h)),n._assign(h)}),e&&os(n,"change",()=>{n.value=n.value.trim()}),t||(os(n,"compositionstart",Jy),os(n,"compositionend",$h),os(n,"change",$h))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,modifiers:{lazy:e,trim:s,number:r}},a){if(n._assign=ja(a),n.composing||document.activeElement===n&&(e||s&&n.value.trim()===t||(r||n.type==="number")&&Fa(n.value)===t))return;const c=t??"";n.value!==c&&(n.value=c)}},yl={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const r=du(t);os(n,"change",()=>{const a=Array.prototype.filter.call(n.options,c=>c.selected).map(c=>e?Fa(qa(c)):qa(c));n._assign(n.multiple?r?new Set(a):a:a[0])}),n._assign=ja(s)},mounted(n,{value:t}){jh(n,t)},beforeUpdate(n,t,e){n._assign=ja(e)},updated(n,{value:t}){jh(n,t)}};function jh(n,t){const e=n.multiple;if(!(e&&!At(t)&&!du(t))){for(let s=0,r=n.options.length;s<r;s++){const a=n.options[s],c=qa(a);if(e)At(t)?a.selected=H_(t,c)>-1:a.selected=t.has(c);else if(hu(qa(a),t)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function qa(n){return"_value"in n?n._value:n.value}const tv=["ctrl","shift","alt","meta"],ev={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>tv.some(e=>n[`${e}Key`]&&!t.includes(e))},hc=(n,t)=>(e,...s)=>{for(let r=0;r<t.length;r++){const a=ev[t[r]];if(a&&a(e,t))return}return n(e,...s)},nv=un({patchProp:Qy},Ny);let qh;function iv(){return qh||(qh=oy(nv))}const sv=(...n)=>{const t=iv().createApp(...n),{mount:e}=t;return t.mount=s=>{const r=rv(s);if(!r)return;const a=t._component;!kt(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.innerHTML="";const c=e(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),c},t};function rv(n){return Me(n)?document.querySelector(n):n}const ov=()=>{};var Zh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},av=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const r=n[e++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[e++];t[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[e++],c=n[e++],h=n[e++],p=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const a=n[e++],c=n[e++];t[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return t.join("")},rp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const a=n[r],c=r+1<n.length,h=c?n[r+1]:0,p=r+2<n.length,g=p?n[r+2]:0,v=a>>2,I=(a&3)<<4|h>>4;let R=(h&15)<<2|g>>6,V=g&63;p||(V=64,c||(R=64)),s.push(e[v],e[I],e[R],e[V])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(sp(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):av(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const a=e[n.charAt(r++)],h=r<n.length?e[n.charAt(r)]:0;++r;const g=r<n.length?e[n.charAt(r)]:64;++r;const I=r<n.length?e[n.charAt(r)]:64;if(++r,a==null||h==null||g==null||I==null)throw new uv;const R=a<<2|h>>4;if(s.push(R),g!==64){const V=h<<4&240|g>>2;if(s.push(V),I!==64){const z=g<<6&192|I;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lv=function(n){const t=sp(n);return rp.encodeByteArray(t,!0)},Za=function(n){return lv(n).replace(/\./g,"")},cv=function(n){try{return rp.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=()=>hv().__FIREBASE_DEFAULTS__,dv=()=>{if(typeof process>"u"||typeof Zh>"u")return;const n=Zh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&cv(n[1]);return t&&JSON.parse(t)},fc=()=>{try{return ov()||fv()||dv()||pv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mv=n=>{var t,e;return(e=(t=fc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},_v=n=>{const t=mv(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},op=()=>{var n;return(n=fc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Za(JSON.stringify(e)),Za(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ev(){var n;const t=(n=fc())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tv(){return!Ev()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wv(){try{return typeof indexedDB=="object"}catch{return!1}}function Iv(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var a;t(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="FirebaseError";class gr extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=Av,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ap.prototype.create)}}class ap{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},r=`${this.service}/${t}`,a=this.errors[t],c=a?bv(a,s):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new gr(r,h,s)}}function bv(n,t){return n.replace(Sv,(e,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const Sv=/\{\$([^}]+)}/g;function Wa(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const r of e){if(!s.includes(r))return!1;const a=n[r],c=t[r];if(Wh(a)&&Wh(c)){if(!Wa(a,c))return!1}else if(a!==c)return!1}for(const r of s)if(!e.includes(r))return!1;return!0}function Wh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(n){return n&&n._delegate?n._delegate:n}class Io{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new gv;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xv(t))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(t=rs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=rs){return this.instances.has(t)}getOptions(t=rs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(r)}return r}onInit(t,e){var s;const r=this.normalizeInstanceIdentifier(e),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&t(c,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const r of s)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Pv(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=rs){return this.component?this.component.multipleInstances?t:rs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pv(n){return n===rs?void 0:n}function xv(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Cv(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($t||($t={}));const Lv={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},Ov=$t.INFO,Mv={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},Dv=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),r=Mv[t];if(r)console[r](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class up{constructor(t){this.name=t,this._logLevel=Ov,this._logHandler=Dv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Lv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const kv=(n,t)=>t.some(e=>n instanceof e);let Qh,Yh;function Nv(){return Qh||(Qh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vv(){return Yh||(Yh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lp=new WeakMap,vl=new WeakMap,cp=new WeakMap,qu=new WeakMap,dc=new WeakMap;function Fv(n){const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{e(xi(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&lp.set(e,n)}).catch(()=>{}),dc.set(t,n),t}function Bv(n){if(vl.has(n))return;const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{e(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});vl.set(n,t)}let El={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return vl.get(n);if(t==="objectStoreNames")return n.objectStoreNames||cp.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return xi(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Uv(n){El=n(El)}function zv(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(Zu(this),t,...e);return cp.set(s,t.sort?t.sort():[t]),xi(s)}:Vv().includes(n)?function(...t){return n.apply(Zu(this),t),xi(lp.get(this))}:function(...t){return xi(n.apply(Zu(this),t))}}function Hv(n){return typeof n=="function"?zv(n):(n instanceof IDBTransaction&&Bv(n),kv(n,Nv())?new Proxy(n,El):n)}function xi(n){if(n instanceof IDBRequest)return Fv(n);if(qu.has(n))return qu.get(n);const t=Hv(n);return t!==n&&(qu.set(n,t),dc.set(t,n)),t}const Zu=n=>dc.get(n);function Gv(n,t,{blocked:e,upgrade:s,blocking:r,terminated:a}={}){const c=indexedDB.open(n,t),h=xi(c);return s&&c.addEventListener("upgradeneeded",p=>{s(xi(c.result),p.oldVersion,p.newVersion,xi(c.transaction),p)}),e&&c.addEventListener("blocked",p=>e(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),r&&p.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const Kv=["get","getKey","getAll","getAllKeys","count"],$v=["put","add","delete","clear"],Wu=new Map;function Jh(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Wu.get(t))return Wu.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,r=$v.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Kv.includes(e)))return;const a=async function(c,...h){const p=this.transaction(c,r?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),r&&p.done]))[0]};return Wu.set(t,a),a}Uv(n=>({...n,get:(t,e,s)=>Jh(t,e)||n.get(t,e,s),has:(t,e)=>!!Jh(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(qv(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function qv(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Tl="@firebase/app",Xh="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new up("@firebase/app"),Zv="@firebase/app-compat",Wv="@firebase/analytics-compat",Qv="@firebase/analytics",Yv="@firebase/app-check-compat",Jv="@firebase/app-check",Xv="@firebase/auth",tE="@firebase/auth-compat",eE="@firebase/database",nE="@firebase/data-connect",iE="@firebase/database-compat",sE="@firebase/functions",rE="@firebase/functions-compat",oE="@firebase/installations",aE="@firebase/installations-compat",uE="@firebase/messaging",lE="@firebase/messaging-compat",cE="@firebase/performance",hE="@firebase/performance-compat",fE="@firebase/remote-config",dE="@firebase/remote-config-compat",pE="@firebase/storage",mE="@firebase/storage-compat",_E="@firebase/firestore",gE="@firebase/vertexai",yE="@firebase/firestore-compat",vE="firebase",EE="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="[DEFAULT]",TE={[Tl]:"fire-core",[Zv]:"fire-core-compat",[Qv]:"fire-analytics",[Wv]:"fire-analytics-compat",[Jv]:"fire-app-check",[Yv]:"fire-app-check-compat",[Xv]:"fire-auth",[tE]:"fire-auth-compat",[eE]:"fire-rtdb",[nE]:"fire-data-connect",[iE]:"fire-rtdb-compat",[sE]:"fire-fn",[rE]:"fire-fn-compat",[oE]:"fire-iid",[aE]:"fire-iid-compat",[uE]:"fire-fcm",[lE]:"fire-fcm-compat",[cE]:"fire-perf",[hE]:"fire-perf-compat",[fE]:"fire-rc",[dE]:"fire-rc-compat",[pE]:"fire-gcs",[mE]:"fire-gcs-compat",[_E]:"fire-fst",[yE]:"fire-fst-compat",[gE]:"fire-vertex","fire-js":"fire-js",[vE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new Map,wE=new Map,Il=new Map;function tf(n,t){try{n.container.addComponent(t)}catch(e){hi.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ya(n){const t=n.name;if(Il.has(t))return hi.debug(`There were multiple attempts to register component ${t}.`),!1;Il.set(t,n);for(const e of Qa.values())tf(e,n);for(const e of wE.values())tf(e,n);return!0}function IE(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function AE(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new ap("app","Firebase",bE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(t,e,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=EE;function hp(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:wl,automaticDataCollectionEnabled:!1},t),r=s.name;if(typeof r!="string"||!r)throw Ri.create("bad-app-name",{appName:String(r)});if(e||(e=op()),!e)throw Ri.create("no-options");const a=Qa.get(r);if(a){if(Wa(e,a.options)&&Wa(s,a.config))return a;throw Ri.create("duplicate-app",{appName:r})}const c=new Rv(r);for(const p of Il.values())c.addComponent(p);const h=new SE(e,s,c);return Qa.set(r,h),h}function PE(n=wl){const t=Qa.get(n);if(!t&&n===wl&&op())return hp();if(!t)throw Ri.create("no-app",{appName:n});return t}function ir(n,t,e){var s;let r=(s=TE[n])!==null&&s!==void 0?s:n;e&&(r+=`-${e}`);const a=r.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${t}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),hi.warn(h.join(" "));return}Ya(new Io(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firebase-heartbeat-database",RE=1,Ao="firebase-heartbeat-store";let Qu=null;function fp(){return Qu||(Qu=Gv(xE,RE,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ao)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ri.create("idb-open",{originalErrorMessage:n.message})})),Qu}async function LE(n){try{const e=(await fp()).transaction(Ao),s=await e.objectStore(Ao).get(dp(n));return await e.done,s}catch(t){if(t instanceof gr)hi.warn(t.message);else{const e=Ri.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});hi.warn(e.message)}}}async function ef(n,t){try{const s=(await fp()).transaction(Ao,"readwrite");await s.objectStore(Ao).put(t,dp(n)),await s.done}catch(e){if(e instanceof gr)hi.warn(e.message);else{const s=Ri.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});hi.warn(s.message)}}}function dp(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=1024,ME=30;class DE{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new NE(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=nf();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>ME){const c=VE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){hi.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=nf(),{heartbeatsToSend:s,unsentEntries:r}=kE(this._heartbeatsCache.heartbeats),a=Za(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return hi.warn(e),""}}}function nf(){return new Date().toISOString().substring(0,10)}function kE(n,t=OE){const e=[];let s=n.slice();for(const r of n){const a=e.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),sf(e)>t){a.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),sf(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class NE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wv()?Iv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await LE(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return ef(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return ef(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function sf(n){return Za(JSON.stringify({version:2,heartbeats:n})).length}function VE(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n){Ya(new Io("platform-logger",t=>new jv(t),"PRIVATE")),Ya(new Io("heartbeat",t=>new DE(t),"PRIVATE")),ir(Tl,Xh,n),ir(Tl,Xh,"esm2017"),ir("fire-js","")}FE("");var BE="firebase",UE="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(BE,UE,"app");var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,pp;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(P,T){function w(){}w.prototype=T.prototype,P.D=T.prototype,P.prototype=new w,P.prototype.constructor=P,P.C=function(C,x,M){for(var A=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)A[_e-2]=arguments[_e];return T.prototype[x].apply(C,A)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,e),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(P,T,w){w||(w=0);var C=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)C[x]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(x=0;16>x;++x)C[x]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=P.g[0],w=P.g[1],x=P.g[2];var M=P.g[3],A=T+(M^w&(x^M))+C[0]+3614090360&4294967295;T=w+(A<<7&4294967295|A>>>25),A=M+(x^T&(w^x))+C[1]+3905402710&4294967295,M=T+(A<<12&4294967295|A>>>20),A=x+(w^M&(T^w))+C[2]+606105819&4294967295,x=M+(A<<17&4294967295|A>>>15),A=w+(T^x&(M^T))+C[3]+3250441966&4294967295,w=x+(A<<22&4294967295|A>>>10),A=T+(M^w&(x^M))+C[4]+4118548399&4294967295,T=w+(A<<7&4294967295|A>>>25),A=M+(x^T&(w^x))+C[5]+1200080426&4294967295,M=T+(A<<12&4294967295|A>>>20),A=x+(w^M&(T^w))+C[6]+2821735955&4294967295,x=M+(A<<17&4294967295|A>>>15),A=w+(T^x&(M^T))+C[7]+4249261313&4294967295,w=x+(A<<22&4294967295|A>>>10),A=T+(M^w&(x^M))+C[8]+1770035416&4294967295,T=w+(A<<7&4294967295|A>>>25),A=M+(x^T&(w^x))+C[9]+2336552879&4294967295,M=T+(A<<12&4294967295|A>>>20),A=x+(w^M&(T^w))+C[10]+4294925233&4294967295,x=M+(A<<17&4294967295|A>>>15),A=w+(T^x&(M^T))+C[11]+2304563134&4294967295,w=x+(A<<22&4294967295|A>>>10),A=T+(M^w&(x^M))+C[12]+1804603682&4294967295,T=w+(A<<7&4294967295|A>>>25),A=M+(x^T&(w^x))+C[13]+4254626195&4294967295,M=T+(A<<12&4294967295|A>>>20),A=x+(w^M&(T^w))+C[14]+2792965006&4294967295,x=M+(A<<17&4294967295|A>>>15),A=w+(T^x&(M^T))+C[15]+1236535329&4294967295,w=x+(A<<22&4294967295|A>>>10),A=T+(x^M&(w^x))+C[1]+4129170786&4294967295,T=w+(A<<5&4294967295|A>>>27),A=M+(w^x&(T^w))+C[6]+3225465664&4294967295,M=T+(A<<9&4294967295|A>>>23),A=x+(T^w&(M^T))+C[11]+643717713&4294967295,x=M+(A<<14&4294967295|A>>>18),A=w+(M^T&(x^M))+C[0]+3921069994&4294967295,w=x+(A<<20&4294967295|A>>>12),A=T+(x^M&(w^x))+C[5]+3593408605&4294967295,T=w+(A<<5&4294967295|A>>>27),A=M+(w^x&(T^w))+C[10]+38016083&4294967295,M=T+(A<<9&4294967295|A>>>23),A=x+(T^w&(M^T))+C[15]+3634488961&4294967295,x=M+(A<<14&4294967295|A>>>18),A=w+(M^T&(x^M))+C[4]+3889429448&4294967295,w=x+(A<<20&4294967295|A>>>12),A=T+(x^M&(w^x))+C[9]+568446438&4294967295,T=w+(A<<5&4294967295|A>>>27),A=M+(w^x&(T^w))+C[14]+3275163606&4294967295,M=T+(A<<9&4294967295|A>>>23),A=x+(T^w&(M^T))+C[3]+4107603335&4294967295,x=M+(A<<14&4294967295|A>>>18),A=w+(M^T&(x^M))+C[8]+1163531501&4294967295,w=x+(A<<20&4294967295|A>>>12),A=T+(x^M&(w^x))+C[13]+2850285829&4294967295,T=w+(A<<5&4294967295|A>>>27),A=M+(w^x&(T^w))+C[2]+4243563512&4294967295,M=T+(A<<9&4294967295|A>>>23),A=x+(T^w&(M^T))+C[7]+1735328473&4294967295,x=M+(A<<14&4294967295|A>>>18),A=w+(M^T&(x^M))+C[12]+2368359562&4294967295,w=x+(A<<20&4294967295|A>>>12),A=T+(w^x^M)+C[5]+4294588738&4294967295,T=w+(A<<4&4294967295|A>>>28),A=M+(T^w^x)+C[8]+2272392833&4294967295,M=T+(A<<11&4294967295|A>>>21),A=x+(M^T^w)+C[11]+1839030562&4294967295,x=M+(A<<16&4294967295|A>>>16),A=w+(x^M^T)+C[14]+4259657740&4294967295,w=x+(A<<23&4294967295|A>>>9),A=T+(w^x^M)+C[1]+2763975236&4294967295,T=w+(A<<4&4294967295|A>>>28),A=M+(T^w^x)+C[4]+1272893353&4294967295,M=T+(A<<11&4294967295|A>>>21),A=x+(M^T^w)+C[7]+4139469664&4294967295,x=M+(A<<16&4294967295|A>>>16),A=w+(x^M^T)+C[10]+3200236656&4294967295,w=x+(A<<23&4294967295|A>>>9),A=T+(w^x^M)+C[13]+681279174&4294967295,T=w+(A<<4&4294967295|A>>>28),A=M+(T^w^x)+C[0]+3936430074&4294967295,M=T+(A<<11&4294967295|A>>>21),A=x+(M^T^w)+C[3]+3572445317&4294967295,x=M+(A<<16&4294967295|A>>>16),A=w+(x^M^T)+C[6]+76029189&4294967295,w=x+(A<<23&4294967295|A>>>9),A=T+(w^x^M)+C[9]+3654602809&4294967295,T=w+(A<<4&4294967295|A>>>28),A=M+(T^w^x)+C[12]+3873151461&4294967295,M=T+(A<<11&4294967295|A>>>21),A=x+(M^T^w)+C[15]+530742520&4294967295,x=M+(A<<16&4294967295|A>>>16),A=w+(x^M^T)+C[2]+3299628645&4294967295,w=x+(A<<23&4294967295|A>>>9),A=T+(x^(w|~M))+C[0]+4096336452&4294967295,T=w+(A<<6&4294967295|A>>>26),A=M+(w^(T|~x))+C[7]+1126891415&4294967295,M=T+(A<<10&4294967295|A>>>22),A=x+(T^(M|~w))+C[14]+2878612391&4294967295,x=M+(A<<15&4294967295|A>>>17),A=w+(M^(x|~T))+C[5]+4237533241&4294967295,w=x+(A<<21&4294967295|A>>>11),A=T+(x^(w|~M))+C[12]+1700485571&4294967295,T=w+(A<<6&4294967295|A>>>26),A=M+(w^(T|~x))+C[3]+2399980690&4294967295,M=T+(A<<10&4294967295|A>>>22),A=x+(T^(M|~w))+C[10]+4293915773&4294967295,x=M+(A<<15&4294967295|A>>>17),A=w+(M^(x|~T))+C[1]+2240044497&4294967295,w=x+(A<<21&4294967295|A>>>11),A=T+(x^(w|~M))+C[8]+1873313359&4294967295,T=w+(A<<6&4294967295|A>>>26),A=M+(w^(T|~x))+C[15]+4264355552&4294967295,M=T+(A<<10&4294967295|A>>>22),A=x+(T^(M|~w))+C[6]+2734768916&4294967295,x=M+(A<<15&4294967295|A>>>17),A=w+(M^(x|~T))+C[13]+1309151649&4294967295,w=x+(A<<21&4294967295|A>>>11),A=T+(x^(w|~M))+C[4]+4149444226&4294967295,T=w+(A<<6&4294967295|A>>>26),A=M+(w^(T|~x))+C[11]+3174756917&4294967295,M=T+(A<<10&4294967295|A>>>22),A=x+(T^(M|~w))+C[2]+718787259&4294967295,x=M+(A<<15&4294967295|A>>>17),A=w+(M^(x|~T))+C[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(x+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+M&4294967295}s.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var w=T-this.blockSize,C=this.B,x=this.h,M=0;M<T;){if(x==0)for(;M<=w;)r(this,P,M),M+=this.blockSize;if(typeof P=="string"){for(;M<T;)if(C[x++]=P.charCodeAt(M++),x==this.blockSize){r(this,C),x=0;break}}else for(;M<T;)if(C[x++]=P[M++],x==this.blockSize){r(this,C),x=0;break}}this.h=x,this.o+=T},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var w=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=w&255,w/=256;for(this.u(P),P=Array(16),T=w=0;4>T;++T)for(var C=0;32>C;C+=8)P[w++]=this.g[T]>>>C&255;return P};function a(P,T){var w=h;return Object.prototype.hasOwnProperty.call(w,P)?w[P]:w[P]=T(P)}function c(P,T){this.h=T;for(var w=[],C=!0,x=P.length-1;0<=x;x--){var M=P[x]|0;C&&M==T||(w[x]=M,C=!1)}this.g=w}var h={};function p(P){return-128<=P&&128>P?a(P,function(T){return new c([T|0],0>T?-1:0)}):new c([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return I;if(0>P)return H(g(-P));for(var T=[],w=1,C=0;P>=w;C++)T[C]=P/w|0,w*=4294967296;return new c(T,0)}function v(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return H(v(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=g(Math.pow(T,8)),C=I,x=0;x<P.length;x+=8){var M=Math.min(8,P.length-x),A=parseInt(P.substring(x,x+M),T);8>M?(M=g(Math.pow(T,M)),C=C.j(M).add(g(A))):(C=C.j(w),C=C.add(g(A)))}return C}var I=p(0),R=p(1),V=p(16777216);n=c.prototype,n.m=function(){if(G(this))return-H(this).m();for(var P=0,T=1,w=0;w<this.g.length;w++){var C=this.i(w);P+=(0<=C?C:4294967296+C)*T,T*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(z(this))return"0";if(G(this))return"-"+H(this).toString(P);for(var T=g(Math.pow(P,6)),w=this,C="";;){var x=_t(w,T).g;w=it(w,x.j(T));var M=((0<w.g.length?w.g[0]:w.h)>>>0).toString(P);if(w=x,z(w))return M+C;for(;6>M.length;)M="0"+M;C=M+C}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function z(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function G(P){return P.h==-1}n.l=function(P){return P=it(this,P),G(P)?-1:z(P)?0:1};function H(P){for(var T=P.g.length,w=[],C=0;C<T;C++)w[C]=~P.g[C];return new c(w,~P.h).add(R)}n.abs=function(){return G(this)?H(this):this},n.add=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],C=0,x=0;x<=T;x++){var M=C+(this.i(x)&65535)+(P.i(x)&65535),A=(M>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);C=A>>>16,M&=65535,A&=65535,w[x]=A<<16|M}return new c(w,w[w.length-1]&-2147483648?-1:0)};function it(P,T){return P.add(H(T))}n.j=function(P){if(z(this)||z(P))return I;if(G(this))return G(P)?H(this).j(H(P)):H(H(this).j(P));if(G(P))return H(this.j(H(P)));if(0>this.l(V)&&0>P.l(V))return g(this.m()*P.m());for(var T=this.g.length+P.g.length,w=[],C=0;C<2*T;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<P.g.length;x++){var M=this.i(C)>>>16,A=this.i(C)&65535,_e=P.i(x)>>>16,vn=P.i(x)&65535;w[2*C+2*x]+=A*vn,ct(w,2*C+2*x),w[2*C+2*x+1]+=M*vn,ct(w,2*C+2*x+1),w[2*C+2*x+1]+=A*_e,ct(w,2*C+2*x+1),w[2*C+2*x+2]+=M*_e,ct(w,2*C+2*x+2)}for(C=0;C<T;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=T;C<2*T;C++)w[C]=0;return new c(w,0)};function ct(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function lt(P,T){this.g=P,this.h=T}function _t(P,T){if(z(T))throw Error("division by zero");if(z(P))return new lt(I,I);if(G(P))return T=_t(H(P),T),new lt(H(T.g),H(T.h));if(G(T))return T=_t(P,H(T)),new lt(H(T.g),T.h);if(30<P.g.length){if(G(P)||G(T))throw Error("slowDivide_ only works with positive integers.");for(var w=R,C=T;0>=C.l(P);)w=K(w),C=K(C);var x=Y(w,1),M=Y(C,1);for(C=Y(C,2),w=Y(w,2);!z(C);){var A=M.add(C);0>=A.l(P)&&(x=x.add(w),M=A),C=Y(C,1),w=Y(w,1)}return T=it(P,x.j(T)),new lt(x,T)}for(x=I;0<=P.l(T);){for(w=Math.max(1,Math.floor(P.m()/T.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),M=g(w),A=M.j(T);G(A)||0<A.l(P);)w-=C,M=g(w),A=M.j(T);z(M)&&(M=R),x=x.add(M),P=it(P,A)}return new lt(x,P)}n.A=function(P){return _t(this,P).h},n.and=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],C=0;C<T;C++)w[C]=this.i(C)&P.i(C);return new c(w,this.h&P.h)},n.or=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],C=0;C<T;C++)w[C]=this.i(C)|P.i(C);return new c(w,this.h|P.h)},n.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],C=0;C<T;C++)w[C]=this.i(C)^P.i(C);return new c(w,this.h^P.h)};function K(P){for(var T=P.g.length+1,w=[],C=0;C<T;C++)w[C]=P.i(C)<<1|P.i(C-1)>>>31;return new c(w,P.h)}function Y(P,T){var w=T>>5;T%=32;for(var C=P.g.length-w,x=[],M=0;M<C;M++)x[M]=0<T?P.i(M+w)>>>T|P.i(M+w+1)<<32-T:P.i(M+w);return new c(x,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pp=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Li=c}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});var Ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mp,io,_p,La,Al,gp,yp,vp;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,_){return u==Array.prototype||u==Object.prototype||(u[d]=_.value),u};function e(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ta=="object"&&Ta];for(var d=0;d<u.length;++d){var _=u[d];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=e(this);function r(u,d){if(d)t:{var _=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var D=u[E];if(!(D in _))break t;_=_[D]}u=u[u.length-1],E=_[u],d=d(E),d!=E&&d!=null&&t(_,u,{configurable:!0,writable:!0,value:d})}}function a(u,d){u instanceof String&&(u+="");var _=0,E=!1,D={next:function(){if(!E&&_<u.length){var B=_++;return{value:d(B,u[B]),done:!1}}return E=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(u){return u||function(){return a(this,function(d,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function g(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function v(u,d,_){return u.call.apply(u.bind,arguments)}function I(u,d,_){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,E),u.apply(d,D)}}return function(){return u.apply(d,arguments)}}function R(u,d,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:I,R.apply(null,arguments)}function V(u,d){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function z(u,d){function _(){}_.prototype=d.prototype,u.aa=d.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(E,D,B){for(var et=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)et[Jt-2]=arguments[Jt];return d.prototype[D].apply(E,et)}}function G(u){const d=u.length;if(0<d){const _=Array(d);for(let E=0;E<d;E++)_[E]=u[E];return _}return[]}function H(u,d){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(p(E)){const D=u.length||0,B=E.length||0;u.length=D+B;for(let et=0;et<B;et++)u[D+et]=E[et]}else u.push(E)}}class it{constructor(d,_){this.i=d,this.j=_,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ct(u){return/^[\s\xa0]*$/.test(u)}function lt(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function _t(u){return _t[" "](u),u}_t[" "]=function(){};var K=lt().indexOf("Gecko")!=-1&&!(lt().toLowerCase().indexOf("webkit")!=-1&&lt().indexOf("Edge")==-1)&&!(lt().indexOf("Trident")!=-1||lt().indexOf("MSIE")!=-1)&&lt().indexOf("Edge")==-1;function Y(u,d,_){for(const E in u)d.call(_,u[E],E,u)}function P(u,d){for(const _ in u)d.call(void 0,u[_],_,u)}function T(u){const d={};for(const _ in u)d[_]=u[_];return d}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,d){let _,E;for(let D=1;D<arguments.length;D++){E=arguments[D];for(_ in E)u[_]=E[_];for(let B=0;B<w.length;B++)_=w[B],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function x(u){var d=1;u=u.split(":");const _=[];for(;0<d&&u.length;)_.push(u.shift()),d--;return u.length&&_.push(u.join(":")),_}function M(u){h.setTimeout(()=>{throw u},0)}function A(){var u=Be;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class _e{constructor(){this.h=this.g=null}add(d,_){const E=vn.get();E.set(d,_),this.h?this.h.next=E:this.g=E,this.h=E}}var vn=new it(()=>new Zt,u=>u.reset());class Zt{constructor(){this.next=this.g=this.h=null}set(d,_){this.h=d,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ut,rt=!1,Be=new _e,yt=()=>{const u=h.Promise.resolve(void 0);Ut=()=>{u.then(qt)}};var qt=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){M(_)}var d=vn;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}rt=!1};function Wt(){this.s=this.s,this.C=this.C}Wt.prototype.s=!1,Wt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,d),h.removeEventListener("test",_,d)}catch{}return u}();function Vt(u,d){if(xt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(K){t:{try{_t(d.nodeName);var D=!0;break t}catch{}D=!1}D||(d=null)}}else _=="mouseover"?d=u.fromElement:_=="mouseout"&&(d=u.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ot[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Vt.aa.h.call(this)}}z(Vt,xt);var Ot={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Gi(u,d,_,E,D){this.listener=u,this.proxy=null,this.src=d,this.type=_,this.capture=!!E,this.ha=D,this.key=++Ke,this.da=this.fa=!1}function Qe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qn(u){this.src=u,this.g={},this.h=0}qn.prototype.add=function(u,d,_,E,D){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var et=O(u,d,E,D);return-1<et?(d=u[et],_||(d.fa=!1)):(d=new Gi(d,this.src,B,!!E,D),d.fa=_,u.push(d)),d};function S(u,d){var _=d.type;if(_ in u.g){var E=u.g[_],D=Array.prototype.indexOf.call(E,d,void 0),B;(B=0<=D)&&Array.prototype.splice.call(E,D,1),B&&(Qe(d),u.g[_].length==0&&(delete u.g[_],u.h--))}}function O(u,d,_,E){for(var D=0;D<u.length;++D){var B=u[D];if(!B.da&&B.listener==d&&B.capture==!!_&&B.ha==E)return D}return-1}var U="closure_lm_"+(1e6*Math.random()|0),j={};function q(u,d,_,E,D){if(Array.isArray(d)){for(var B=0;B<d.length;B++)q(u,d[B],_,E,D);return null}return _=vt(_),u&&u[le]?u.K(d,_,g(E)?!!E.capture:!1,D):X(u,d,_,!1,E,D)}function X(u,d,_,E,D,B){if(!d)throw Error("Invalid event type");var et=g(D)?!!D.capture:!!D,Jt=ut(u);if(Jt||(u[U]=Jt=new qn(u)),_=Jt.add(d,_,E,et,B),_.proxy)return _;if(E=st(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)ue||(D=et),D===void 0&&(D=!1),u.addEventListener(d.toString(),E,D);else if(u.attachEvent)u.attachEvent(W(d.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function st(){function u(_){return d.call(u.src,u.listener,_)}const d=ft;return u}function J(u,d,_,E,D){if(Array.isArray(d))for(var B=0;B<d.length;B++)J(u,d[B],_,E,D);else E=g(E)?!!E.capture:!!E,_=vt(_),u&&u[le]?(u=u.i,d=String(d).toString(),d in u.g&&(B=u.g[d],_=O(B,_,E,D),-1<_&&(Qe(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete u.g[d],u.h--)))):u&&(u=ut(u))&&(d=u.g[d.toString()],u=-1,d&&(u=O(d,_,E,D)),(_=-1<u?d[u]:null)&&tt(_))}function tt(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[le])S(d.i,u);else{var _=u.type,E=u.proxy;d.removeEventListener?d.removeEventListener(_,E,u.capture):d.detachEvent?d.detachEvent(W(_),E):d.addListener&&d.removeListener&&d.removeListener(E),(_=ut(d))?(S(_,u),_.h==0&&(_.src=null,d[U]=null)):Qe(u)}}}function W(u){return u in j?j[u]:j[u]="on"+u}function ft(u,d){if(u.da)u=!0;else{d=new Vt(d,this);var _=u.listener,E=u.ha||u.src;u.fa&&tt(u),u=_.call(E,d)}return u}function ut(u){return u=u[U],u instanceof qn?u:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(u){return typeof u=="function"?u:(u[ht]||(u[ht]=function(d){return u.handleEvent(d)}),u[ht])}function pt(){Wt.call(this),this.i=new qn(this),this.M=this,this.F=null}z(pt,Wt),pt.prototype[le]=!0,pt.prototype.removeEventListener=function(u,d,_,E){J(this,u,d,_,E)};function Ct(u,d){var _,E=u.F;if(E)for(_=[];E;E=E.F)_.push(E);if(u=u.M,E=d.type||d,typeof d=="string")d=new xt(d,u);else if(d instanceof xt)d.target=d.target||u;else{var D=d;d=new xt(E,u),C(d,D)}if(D=!0,_)for(var B=_.length-1;0<=B;B--){var et=d.g=_[B];D=zt(et,E,!0,d)&&D}if(et=d.g=u,D=zt(et,E,!0,d)&&D,D=zt(et,E,!1,d)&&D,_)for(B=0;B<_.length;B++)et=d.g=_[B],D=zt(et,E,!1,d)&&D}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var _=u.g[d],E=0;E<_.length;E++)Qe(_[E]);delete u.g[d],u.h--}}this.F=null},pt.prototype.K=function(u,d,_,E){return this.i.add(String(u),d,!1,_,E)},pt.prototype.L=function(u,d,_,E){return this.i.add(String(u),d,!0,_,E)};function zt(u,d,_,E){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,B=0;B<d.length;++B){var et=d[B];if(et&&!et.da&&et.capture==_){var Jt=et.listener,we=et.ha||et.src;et.fa&&S(u.i,et),D=Jt.call(we,E)!==!1&&D}}return D&&!E.defaultPrevented}function ne(u,d,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:h.setTimeout(u,d||0)}function De(u){u.g=ne(()=>{u.g=null,u.i&&(u.i=!1,De(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class En extends Wt{constructor(d,_){super(),this.m=d,this.l=_,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:De(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function On(u){Wt.call(this),this.h=u,this.g={}}z(On,Wt);var Tn=[];function Zn(u){Y(u.g,function(d,_){this.g.hasOwnProperty(_)&&tt(d)},u),u.g={}}On.prototype.N=function(){On.aa.N.call(this),Zn(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Te=h.JSON.stringify,Ye=h.JSON.parse,Mn=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function wr(){}wr.prototype.h=null;function Vo(u){return u.h||(u.h=u.i())}function Ir(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ts(){xt.call(this,"d")}z(Ts,xt);function Ar(){xt.call(this,"c")}z(Ar,xt);var Wn={},Fo=null;function ws(){return Fo=Fo||new pt}Wn.La="serverreachability";function Bo(u){xt.call(this,Wn.La,u)}z(Bo,xt);function Ki(u){const d=ws();Ct(d,new Bo(d))}Wn.STAT_EVENT="statevent";function Is(u,d){xt.call(this,Wn.STAT_EVENT,u),this.stat=d}z(Is,xt);function ke(u){const d=ws();Ct(d,new Is(d,u))}Wn.Ma="timingevent";function Uo(u,d){xt.call(this,Wn.Ma,u),this.size=d}z(Uo,xt);function $i(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},d)}function ji(){this.g=!0}ji.prototype.xa=function(){this.g=!1};function cn(u,d,_,E,D,B){u.info(function(){if(u.g)if(B)for(var et="",Jt=B.split("&"),we=0;we<Jt.length;we++){var Ht=Jt[we].split("=");if(1<Ht.length){var ee=Ht[0];Ht=Ht[1];var pe=ee.split("_");et=2<=pe.length&&pe[1]=="type"?et+(ee+"="+Ht+"&"):et+(ee+"=redacted&")}}else et=null;else et=B;return"XMLHTTP REQ ("+E+") [attempt "+D+"]: "+d+`
`+_+`
`+et})}function dt(u,d,_,E,D,B,et){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+D+"]: "+d+`
`+_+`
`+B+" "+et})}function Qn(u,d,_,E){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ho(u,_)+(E?" "+E:"")})}function zo(u,d){u.info(function(){return"TIMEOUT: "+d})}ji.prototype.info=function(){};function Ho(u,d){if(!u.g)return d;if(!d)return null;try{var _=JSON.parse(d);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var E=_[u];if(!(2>E.length)){var D=E[1];if(Array.isArray(D)&&!(1>D.length)){var B=D[0];if(B!="noop"&&B!="stop"&&B!="close")for(var et=1;et<D.length;et++)D[et]=""}}}}return Te(_)}catch{return d}}var qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},As={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function wn(){}z(wn,wr),wn.prototype.g=function(){return new XMLHttpRequest},wn.prototype.i=function(){return{}},bs=new wn;function In(u,d,_,E){this.j=u,this.i=d,this.l=_,this.R=E||1,this.U=new On(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Go}function Go(){this.i=null,this.g="",this.h=!1}var Ko={},br={};function Sr(u,d,_){u.L=1,u.v=fn(ge(d)),u.m=_,u.P=!0,Cr(u,null)}function Cr(u,d){u.F=Date.now(),Cs(u),u.A=ge(u.v);var _=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),qo(_.i,"t",E),u.C=0,_=u.j.J,u.h=new Go,u.g=ta(u.j,_?d:null,!u.m),0<u.O&&(u.M=new En(R(u.Y,u,u.g),u.O)),d=u.U,_=u.g,E=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(Tn[0]=D.toString()),D=Tn);for(var B=0;B<D.length;B++){var et=q(_,D[B],E||d.handleEvent,!1,d.h||d);if(!et)break;d.g[et.key]=et}d=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Ki(),cn(u.i,u.u,u.A,u.l,u.R,u.m)}In.prototype.ca=function(u){u=u.target;const d=this.M;d&&$e(u)==3?d.j():this.Y(u)},In.prototype.Y=function(u){try{if(u==this.g)t:{const pe=$e(this.g);var d=this.g.Ba();const wi=this.g.Z();if(!(3>pe)&&(pe!=3||this.g&&(this.h.h||this.g.oa()||Gr(this.g)))){this.J||pe!=4||d==7||(d==8||0>=wi?Ki(3):Ki(2)),Pr(this);var _=this.g.Z();this.X=_;e:if($o(this)){var E=Gr(this.g);u="";var D=E.length,B=$e(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),Zi(this);var et="";break e}this.h.i=new h.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,u+=this.h.i.decode(E[d],{stream:!(B&&d==D-1)});E.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=_==200,dt(this.i,this.u,this.A,this.l,this.R,pe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Jt,we=this.g;if((Jt=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ct(Jt)){var Ht=Jt;break e}}Ht=null}if(_=Ht)Qn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wi(this,_);else{this.o=!1,this.s=3,ke(12),Yn(this),Zi(this);break t}}if(this.P){_=!0;let ye;for(;!this.J&&this.C<et.length;)if(ye=Ss(this,et),ye==br){pe==4&&(this.s=4,ke(14),_=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(ye==Ko){this.s=4,ke(15),Qn(this.i,this.l,et,"[Invalid Chunk]"),_=!1;break}else Qn(this.i,this.l,ye,null),Wi(this,ye);if($o(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||et.length!=0||this.h.h||(this.s=1,ke(16),_=!1),this.o=this.o&&_,!_)Qn(this.i,this.l,et,"[Invalid Chunked Response]"),Yn(this),Zi(this);else if(0<et.length&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.ba&&!ee.M&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),Ns(ee),ee.M=!0,ke(11))}}else Qn(this.i,this.l,et,null),Wi(this,et);pe==4&&Yn(this),this.o&&!this.J&&(pe==4?$r(this.j,this):(this.o=!1,Cs(this)))}else Fu(this.g),_==400&&0<et.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Yn(this),Zi(this)}}}catch{}finally{}};function $o(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ss(u,d){var _=u.C,E=d.indexOf(`
`,_);return E==-1?br:(_=Number(d.substring(_,E)),isNaN(_)?Ko:(E+=1,E+_>d.length?br:(d=d.slice(E,E+_),u.C=E+_,d)))}In.prototype.cancel=function(){this.J=!0,Yn(this)};function Cs(u){u.S=Date.now()+u.I,jo(u,u.I)}function jo(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=$i(R(u.ba,u),d)}function Pr(u){u.B&&(h.clearTimeout(u.B),u.B=null)}In.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(zo(this.i,this.A),this.L!=2&&(Ki(),ke(17)),Yn(this),this.s=2,Zi(this)):jo(this,this.S-u)};function Zi(u){u.j.G==0||u.J||$r(u.j,u)}function Yn(u){Pr(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Zn(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Wi(u,d){try{var _=u.j;if(_.G!=0&&(_.g==u||Ft(_.h,u))){if(!u.K&&Ft(_.h,u)&&_.G==3){try{var E=_.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var D=E;if(D[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Fs(_),Ds(_);else break t;ks(_),ke(18)}}else _.za=D[1],0<_.za-_.T&&37500>D[2]&&_.F&&_.v==0&&!_.C&&(_.C=$i(R(_.Za,_),6e3));if(1>=_i(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ni(_,11)}else if((u.K||_.g==u)&&Fs(_),!ct(d))for(D=_.Da.g.parse(d),d=0;d<D.length;d++){let Ht=D[d];if(_.T=Ht[0],Ht=Ht[1],_.G==2)if(Ht[0]=="c"){_.K=Ht[1],_.ia=Ht[2];const ee=Ht[3];ee!=null&&(_.la=ee,_.j.info("VER="+_.la));const pe=Ht[4];pe!=null&&(_.Aa=pe,_.j.info("SVER="+_.Aa));const wi=Ht[5];wi!=null&&typeof wi=="number"&&0<wi&&(E=1.5*wi,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const ye=u.g;if(ye){const Us=ye.g?ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Us){var B=E.h;B.g||Us.indexOf("spdy")==-1&&Us.indexOf("quic")==-1&&Us.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(ie(B,B.h),B.h=null))}if(E.D){const Nn=ye.g?ye.g.getResponseHeader("X-HTTP-Session-Id"):null;Nn&&(E.ya=Nn,It(E.I,E.D,Nn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var et=u;if(E.qa=Bs(E,E.J?E.ia:null,E.W),et.K){Yi(E.h,et);var Jt=et,we=E.L;we&&(Jt.I=we),Jt.B&&(Pr(Jt),Cs(Jt)),E.g=et}else Sn(E);0<_.i.length&&Ti(_)}else Ht[0]!="stop"&&Ht[0]!="close"||ni(_,7);else _.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?ni(_,7):Ms(_):Ht[0]!="noop"&&_.l&&_.l.ta(Ht),_.v=0)}}Ki(4)}catch{}}var Qi=class{constructor(u,d){this.g=u,this.map=d}};function xr(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _i(u){return u.h?1:u.g?u.g.size:0}function Ft(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function ie(u,d){u.g?u.g.add(d):u.h=d}function Yi(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}xr.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jn(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const _ of u.g.values())d=d.concat(_.D);return d}return G(u.i)}function gi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var d=[],_=u.length,E=0;E<_;E++)d.push(u[E]);return d}d=[],_=0;for(E in u)d[_++]=u[E];return d}function Lr(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var d=[];u=u.length;for(var _=0;_<u;_++)d.push(_);return d}d=[],_=0;for(const E in u)d[_++]=E;return d}}}function Pt(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var _=Lr(u),E=gi(u),D=E.length,B=0;B<D;B++)d.call(void 0,E[B],_&&_[B],u)}var ce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Or(u,d){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var E=u[_].indexOf("="),D=null;if(0<=E){var B=u[_].substring(0,E);D=u[_].substring(E+1)}else B=u[_];d(B,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function hn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hn){this.h=u.h,Ps(this,u.j),this.o=u.o,this.g=u.g,Xn(this,u.s),this.l=u.l;var d=u.i,_=new ti;_.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),Dn(this,_),this.m=u.m}else u&&(d=String(u).match(ce))?(this.h=!1,Ps(this,d[1]||"",!0),this.o=An(d[2]||""),this.g=An(d[3]||"",!0),Xn(this,d[4]),this.l=An(d[5]||"",!0),Dn(this,d[6]||"",!0),this.m=An(d[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}hn.prototype.toString=function(){var u=[],d=this.j;d&&u.push(bn(d,yi,!0),":");var _=this.g;return(_||d=="file")&&(u.push("//"),(d=this.o)&&u.push(bn(d,yi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(bn(_,_.charAt(0)=="/"?kr:Dr,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",bn(_,Nr)),u.join("")};function ge(u){return new hn(u)}function Ps(u,d,_){u.j=_?An(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Xn(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Dn(u,d,_){d instanceof ti?(u.i=d,dn(u.i,u.h)):(_||(d=bn(d,xs)),u.i=new ti(d,u.h))}function It(u,d,_){u.i.set(d,_)}function fn(u){return It(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function An(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bn(u,d,_){return typeof u=="string"?(u=encodeURI(u).replace(d,Mr),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Mr(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var yi=/[#\/\?@]/g,Dr=/[#\?:]/g,kr=/[#\?]/g,xs=/[#\?@]/g,Nr=/#/g;function ti(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function sn(u){u.g||(u.g=new Map,u.h=0,u.i&&Or(u.i,function(d,_){u.add(decodeURIComponent(d.replace(/\+/g," ")),_)}))}n=ti.prototype,n.add=function(u,d){sn(this),this.i=null,u=Et(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(d),this.h+=1,this};function Vr(u,d){sn(u),d=Et(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Rs(u,d){return sn(u),d=Et(u,d),u.g.has(d)}n.forEach=function(u,d){sn(this),this.g.forEach(function(_,E){_.forEach(function(D){u.call(d,D,E,this)},this)},this)},n.na=function(){sn(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),_=[];for(let E=0;E<d.length;E++){const D=u[E];for(let B=0;B<D.length;B++)_.push(d[E])}return _},n.V=function(u){sn(this);let d=[];if(typeof u=="string")Rs(this,u)&&(d=d.concat(this.g.get(Et(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)d=d.concat(u[_])}return d},n.set=function(u,d){return sn(this),this.i=null,u=Et(this,u),Rs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function qo(u,d,_){Vr(u,d),0<_.length&&(u.i=null,u.g.set(Et(u,d),G(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var _=0;_<d.length;_++){var E=d[_];const B=encodeURIComponent(String(E)),et=this.V(E);for(E=0;E<et.length;E++){var D=B;et[E]!==""&&(D+="="+encodeURIComponent(String(et[E]))),u.push(D)}}return this.i=u.join("&")};function Et(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function dn(u,d){d&&!u.j&&(sn(u),u.i=null,u.g.forEach(function(_,E){var D=E.toLowerCase();E!=D&&(Vr(this,E),qo(this,D,_))},u)),u.j=d}function te(u,d){const _=new ji;if(h.Image){const E=new Image;E.onload=V(pn,_,"TestLoadImage: loaded",!0,d,E),E.onerror=V(pn,_,"TestLoadImage: error",!1,d,E),E.onabort=V(pn,_,"TestLoadImage: abort",!1,d,E),E.ontimeout=V(pn,_,"TestLoadImage: timeout",!1,d,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else d(!1)}function Zo(u,d){const _=new ji,E=new AbortController,D=setTimeout(()=>{E.abort(),pn(_,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:E.signal}).then(B=>{clearTimeout(D),B.ok?pn(_,"TestPingServer: ok",!0,d):pn(_,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),pn(_,"TestPingServer: error",!1,d)})}function pn(u,d,_,E,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),E(_)}catch{}}function Fr(){this.g=new Mn}function Br(u,d,_){const E=_||"";try{Pt(u,function(D,B){let et=D;g(D)&&(et=Te(D)),d.push(E+B+"="+encodeURIComponent(et))})}catch(D){throw d.push(E+"type="+encodeURIComponent("_badmap")),D}}function mn(u){this.l=u.Ub||null,this.j=u.eb||!1}z(mn,wr),mn.prototype.g=function(){return new vi(this.l,this.j)},mn.prototype.i=function(u){return function(){return u}}({});function vi(u,d){pt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(vi,pt),n=vi.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,rn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||h).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,de(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ei(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ei(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?de(this):rn(this),this.readyState==3&&Ei(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,de(this))},n.Qa=function(u){this.g&&(this.response=u,de(this))},n.ga=function(){this.g&&de(this)};function de(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rn(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var _=d.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=d.next();return u.join(`\r
`)};function rn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ur(u){let d="";return Y(u,function(_,E){d+=E,d+=":",d+=_,d+=`\r
`}),d}function Ls(u,d,_){t:{for(E in _){var E=!1;break t}E=!0}E||(_=Ur(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):It(u,d,_))}function he(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(he,pt);var Wo=/^https?$/i,zr=["POST","PUT"];n=he.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?Vo(this.o):Vo(bs),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(B){Qo(this,B);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var D in E)_.set(D,E[D]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const B of E.keys())_.set(B,E.get(B));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),D=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(zr,d,void 0))||E||D||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,et]of _)this.g.setRequestHeader(B,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Je(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){Qo(this,B)}};function Qo(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Hr(u),Os(u)}function Hr(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ct(this,"complete"),Ct(this,"abort"),Os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Os(this,!0)),he.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nt(this):this.bb())},n.bb=function(){Nt(this)};function Nt(u){if(u.h&&typeof c<"u"&&(!u.v[1]||$e(u)!=4||u.Z()!=2)){if(u.u&&$e(u)==4)ne(u.Ea,0,u);else if(Ct(u,"readystatechange"),$e(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break t;default:d=!1}var _;if(!(_=d)){var E;if(E=et===0){var D=String(u.D).match(ce)[1]||null;!D&&h.self&&h.self.location&&(D=h.self.location.protocol.slice(0,-1)),E=!Wo.test(D?D.toLowerCase():"")}_=E}if(_)Ct(u,"complete"),Ct(u,"success");else{u.m=6;try{var B=2<$e(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Hr(u)}}finally{Os(u)}}}}function Os(u,d){if(u.g){Je(u);const _=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Ct(u,"ready");try{_.onreadystatechange=E}catch{}}}function Je(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function $e(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<$e(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Ye(d)}};function Gr(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fu(u){const d={};u=(u.g&&2<=$e(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(ct(u[E]))continue;var _=x(u[E]);const D=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=d[D]||[];d[D]=B,B.push(_)}P(d,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(u,d,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||d}function Yo(u){this.Aa=0,this.i=[],this.j=new ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,u),this.cb=ei("retryDelaySeedMs",1e4,u),this.Wa=ei("forwardChannelMaxRetries",2,u),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xr(u&&u.concurrentRequestLimit),this.Da=new Fr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Yo.prototype,n.la=8,n.G=1,n.connect=function(u,d,_,E){ke(0),this.W=u,this.H=d||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=Bs(this,null,this.W),Ti(this)};function Ms(u){if(Jo(u),u.G==3){var d=u.U++,_=ge(u.I);if(It(_,"SID",u.K),It(_,"RID",d),It(_,"TYPE","terminate"),Ji(u,_),d=new In(u,u.j,d),d.L=2,d.v=fn(ge(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(d.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=d.v,_=!0),_||(d.g=ta(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Cs(d)}Xo(u)}function Ds(u){u.g&&(Ns(u),u.g.cancel(),u.g=null)}function Jo(u){Ds(u),u.u&&(h.clearTimeout(u.u),u.u=null),Fs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Ti(u){if(!Rr(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ut||yt(),rt||(Ut(),rt=!0),Be.add(d,u),u.B=0}}function Bu(u,d){return _i(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=$i(R(u.Ga,u,d),jr(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new In(this,this.j,u);let B=this.o;if(this.S&&(B?(B=T(B),C(B,this.S)):B=this.S),this.m!==null||this.O||(D.H=B,B=null),this.P)t:{for(var d=0,_=0;_<this.i.length;_++){e:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break e}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=_;break t}if(d===4096||_===this.i.length-1){d=_+1;break t}}d=1e3}else d=1e3;d=Kr(this,D,d),_=ge(this.I),It(_,"RID",u),It(_,"CVER",22),this.D&&It(_,"X-HTTP-Session-Id",this.D),Ji(this,_),B&&(this.O?d="headers="+encodeURIComponent(String(Ur(B)))+"&"+d:this.m&&Ls(_,this.m,B)),ie(this.h,D),this.Ua&&It(_,"TYPE","init"),this.P?(It(_,"$req",d),It(_,"SID","null"),D.T=!0,Sr(D,_,null)):Sr(D,_,d),this.G=2}}else this.G==3&&(u?on(this,u):this.i.length==0||Rr(this.h)||on(this))};function on(u,d){var _;d?_=d.l:_=u.U++;const E=ge(u.I);It(E,"SID",u.K),It(E,"RID",_),It(E,"AID",u.T),Ji(u,E),u.m&&u.o&&Ls(E,u.m,u.o),_=new In(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Kr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ie(u.h,_),Sr(_,E,d)}function Ji(u,d){u.H&&Y(u.H,function(_,E){It(d,E,_)}),u.l&&Pt({},function(_,E){It(d,E,_)})}function Kr(u,d,_){_=Math.min(u.i.length,_);var E=u.l?R(u.l.Na,u.l,u):null;t:{var D=u.i;let B=-1;for(;;){const et=["count="+_];B==-1?0<_?(B=D[0].g,et.push("ofs="+B)):B=0:et.push("ofs="+B);let Jt=!0;for(let we=0;we<_;we++){let Ht=D[we].g;const ee=D[we].map;if(Ht-=B,0>Ht)B=Math.max(0,D[we].g-100),Jt=!1;else try{Br(ee,et,"req"+Ht+"_")}catch{E&&E(ee)}}if(Jt){E=et.join("&");break t}}}return u=u.i.splice(0,_),d.D=u,E}function Sn(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ut||yt(),rt||(Ut(),rt=!0),Be.add(d,u),u.v=0}}function ks(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=$i(R(u.Fa,u),jr(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Vs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=$i(R(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Ds(this),Vs(this))};function Ns(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Vs(u){u.g=new In(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=ge(u.qa);It(d,"RID","rpc"),It(d,"SID",u.K),It(d,"AID",u.T),It(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&It(d,"TO",u.ja),It(d,"TYPE","xmlhttp"),Ji(u,d),u.m&&u.o&&Ls(d,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=fn(ge(d)),_.m=null,_.P=!0,Cr(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Ds(this),ks(this),ke(19))};function Fs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function $r(u,d){var _=null;if(u.g==d){Fs(u),Ns(u),u.g=null;var E=2}else if(Ft(u.h,d))_=d.D,Yi(u.h,d),E=1;else return;if(u.G!=0){if(d.o)if(E==1){_=d.m?d.m.length:0,d=Date.now()-d.F;var D=u.B;E=ws(),Ct(E,new Uo(E,_)),Ti(u)}else Sn(u);else if(D=d.s,D==3||D==0&&0<d.X||!(E==1&&Bu(u,d)||E==2&&ks(u)))switch(_&&0<_.length&&(d=u.h,d.i=d.i.concat(_)),D){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function jr(u,d){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*d}function ni(u,d){if(u.j.info("Error code "+d),d==2){var _=R(u.fb,u),E=u.Xa;const D=!E;E=new hn(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ps(E,"https"),fn(E),D?te(E.toString(),_):Zo(E.toString(),_)}else ke(2);u.G=0,u.l&&u.l.sa(d),Xo(u),Jo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function Xo(u){if(u.G=0,u.ka=[],u.l){const d=Jn(u.h);(d.length!=0||u.i.length!=0)&&(H(u.ka,d),H(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function Bs(u,d,_){var E=_ instanceof hn?ge(_):new hn(_);if(E.g!="")d&&(E.g=d+"."+E.g),Xn(E,E.s);else{var D=h.location;E=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var B=new hn(null);E&&Ps(B,E),d&&(B.g=d),D&&Xn(B,D),_&&(B.l=_),E=B}return _=u.D,d=u.ya,_&&d&&It(E,_,d),It(E,"VER",u.la),Ji(u,E),E}function ta(u,d,_){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new he(new mn({eb:_})):new he(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qr(){}n=qr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xi(){}Xi.prototype.g=function(u,d){return new xe(u,d)};function xe(u,d){pt.call(this),this.g=new Yo(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!ct(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ct(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new _n(this)}z(xe,pt),xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xe.prototype.close=function(){Ms(this.g)},xe.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Te(u),u=_);d.i.push(new Qi(d.Ya++,u)),d.G==3&&Ti(d)},xe.prototype.N=function(){this.g.l=null,delete this.j,Ms(this.g),delete this.g,xe.aa.N.call(this)};function kn(u){Ts.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){t:{for(const _ in d){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}z(kn,Ts);function ea(){Ar.call(this),this.status=1}z(ea,Ar);function _n(u){this.g=u}z(_n,qr),_n.prototype.ua=function(){Ct(this.g,"a")},_n.prototype.ta=function(u){Ct(this.g,new kn(u))},_n.prototype.sa=function(u){Ct(this.g,new ea)},_n.prototype.ra=function(){Ct(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,xe.prototype.send=xe.prototype.o,xe.prototype.open=xe.prototype.m,xe.prototype.close=xe.prototype.close,vp=function(){return new Xi},yp=function(){return ws()},gp=Wn,Al={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,La=qi,As.COMPLETE="complete",_p=As,Ir.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",pt.prototype.listen=pt.prototype.K,io=Ir,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,mp=he}).apply(typeof Ta<"u"?Ta:typeof self<"u"?self:typeof window<"u"?window:{});const of="@firebase/firestore",af="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yr="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new up("@firebase/firestore");function Zs(){return ps.logLevel}function at(n,...t){if(ps.logLevel<=$t.DEBUG){const e=t.map(pc);ps.debug(`Firestore (${yr}): ${n}`,...e)}}function fi(n,...t){if(ps.logLevel<=$t.ERROR){const e=t.map(pc);ps.error(`Firestore (${yr}): ${n}`,...e)}}function ur(n,...t){if(ps.logLevel<=$t.WARN){const e=t.map(pc);ps.warn(`Firestore (${yr}): ${n}`,...e)}}function pc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n="Unexpected state"){const t=`FIRESTORE (${yr}) INTERNAL ASSERTION FAILED: `+n;throw fi(t),new Error(t)}function Yt(n,t){n||wt()}function St(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends gr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ze.UNAUTHENTICATED))}shutdown(){}}class HE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class GE{constructor(t){this.t=t,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Yt(this.o===void 0);let s=this.i;const r=p=>this.i!==s?(s=this.i,e(p)):Promise.resolve();let a=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Oi,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const p=a;t.enqueueRetryable(async()=>{await p.promise,await r(this.currentUser)})},h=p=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Oi)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(s=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Yt(typeof s.accessToken=="string"),new Ep(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string"),new ze(t)}}class KE{constructor(t,e,s){this.l=t,this.h=e,this.P=s,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class $E{constructor(t,e,s){this.l=t,this.h=e,this.P=s}getToken(){return Promise.resolve(new KE(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uf{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jE{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,AE(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){Yt(this.o===void 0);const s=a=>{a.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,at("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>s(a))};const r=a=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new uf(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Yt(typeof e.token=="string"),this.R=e.token,new uf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=qE(40);for(let a=0;a<r.length;++a)s.length<20&&r[a]<e&&(s+=t.charAt(r[a]%62))}return s}}function Lt(n,t){return n<t?-1:n>t?1:0}function bl(n,t){let e=0;for(;e<n.length&&e<t.length;){const s=n.codePointAt(e),r=t.codePointAt(e);if(s!==r){if(s<128&&r<128)return Lt(s,r);{const a=Tp(),c=ZE(a.encode(lf(n,e)),a.encode(lf(t,e)));return c!==0?c:Lt(s,r)}}e+=s>65535?2:1}return Lt(n.length,t.length)}function lf(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function ZE(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Lt(n[e],t[e]);return Lt(n.length,t.length)}function lr(n,t,e){return n.length===t.length&&n.every((s,r)=>e(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=-62135596800,hf=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(t){return Ce.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*hf);return new Ce(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<cf)throw new mt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hf}_compareTo(t){return this.seconds===t.seconds?Lt(this.nanoseconds,t.nanoseconds):Lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-cf;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new Ce(0,0))}static max(){return new bt(new Ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="__name__";class Bn{constructor(t,e,s){e===void 0?e=0:e>t.length&&wt(),s===void 0?s=t.length-e:s>t.length-e&&wt(),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Bn.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Bn?t.forEach(s=>{e.push(s)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let r=0;r<s;r++){const a=Bn.compareSegments(t.get(r),e.get(r));if(a!==0)return a}return Lt(t.length,e.length)}static compareSegments(t,e){const s=Bn.isNumericId(t),r=Bn.isNumericId(e);return s&&!r?-1:!s&&r?1:s&&r?Bn.extractNumericId(t).compare(Bn.extractNumericId(e)):bl(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Li.fromString(t.substring(4,t.length-2))}}class fe extends Bn{construct(t,e,s){return new fe(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new mt(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(r=>r.length>0))}return new fe(e)}static emptyPath(){return new fe([])}}const WE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ve extends Bn{construct(t,e,s){return new Ve(t,e,s)}static isValidIdentifier(t){return WE.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ve.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ff}static keyField(){return new Ve([ff])}static fromServerFormat(t){const e=[];let s="",r=0;const a=()=>{if(s.length===0)throw new mt(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new mt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new mt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(s+=h,r++):(a(),r++)}if(a(),c)throw new mt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ve(e)}static emptyPath(){return new Ve([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.path=t}static fromPath(t){return new gt(fe.fromString(t))}static fromName(t){return new gt(fe.fromString(t).popFirst(5))}static empty(){return new gt(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return fe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gt(new fe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=-1;function QE(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=bt.fromTimestamp(s===1e9?new Ce(e+1,0):new Ce(e,s));return new Ni(r,gt.empty(),t)}function YE(n){return new Ni(n.readTime,n.key,bo)}class Ni{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new Ni(bt.min(),gt.empty(),bo)}static max(){return new Ni(bt.max(),gt.empty(),bo)}}function JE(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=gt.comparator(n.documentKey,t.documentKey),e!==0?e:Lt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vr(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==XE)throw n;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $((s,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(s,r)},this.catchCallback=a=>{this.wrapFailure(e,a).next(s,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof $?e:$.resolve(e)}catch(e){return $.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):$.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):$.reject(e)}static resolve(t){return new $((e,s)=>{e(t)})}static reject(t){return new $((e,s)=>{s(t)})}static waitFor(t){return new $((e,s)=>{let r=0,a=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++a,c&&a===r&&e()},p=>s(p))}),c=!0,a===r&&e()})}static or(t){let e=$.resolve(!1);for(const s of t)e=e.next(r=>r?$.resolve(r):s());return e}static forEach(t,e){const s=[];return t.forEach((r,a)=>{s.push(e.call(this,r,a))}),this.waitFor(s)}static mapArray(t,e){return new $((s,r)=>{const a=t.length,c=new Array(a);let h=0;for(let p=0;p<a;p++){const g=p;e(t[g]).next(v=>{c[g]=v,++h,h===a&&s(c)},v=>r(v))}})}static doWhile(t,e){return new $((s,r)=>{const a=()=>{t()===!0?e().next(()=>{a()},r):s()};a()})}}function e0(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Er(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.oe(s),this._e=s=>e.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}wu.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function Iu(n){return n==null}function Ja(n){return n===0&&1/n==-1/0}function n0(n){return typeof n=="number"&&Number.isInteger(n)&&!Ja(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="";function i0(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=df(t)),t=s0(n.get(e),t);return df(t)}function s0(n,t){let e=t;const s=n.length;for(let r=0;r<s;r++){const a=n.charAt(r);switch(a){case"\0":e+="";break;case Ip:e+="";break;default:e+=a}}return e}function df(n){return n+Ip+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function gs(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Ap(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,e){this.comparator=t,this.root=e||Ne.EMPTY}insert(t,e){return new me(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ne.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ne.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return e+s.left.size;r<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,s)=>(t(e,s),!1))}toString(){const t=[];return this.inorderTraversal((e,s)=>(t.push(`${e}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wa(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wa(this.root,t,this.comparator,!1)}getReverseIterator(){return new wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wa(this.root,t,this.comparator,!0)}}class wa{constructor(t,e,s,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?s(t.key,e):1,e&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ne{constructor(t,e,s,r,a){this.key=t,this.value=e,this.color=s??Ne.RED,this.left=r??Ne.EMPTY,this.right=a??Ne.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,r,a){return new Ne(t??this.key,e??this.value,s??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let r=this;const a=s(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,e,s),null):a===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ne.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Ne.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ne.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ne.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const t=this.left.check();if(t!==this.right.check())throw wt();return t+(this.isRed()?0:1)}}Ne.EMPTY=null,Ne.RED=!0,Ne.BLACK=!1;Ne.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(t,e,s,r,a){return this}insert(t,e,s){return new Ne(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,s)=>(t(e),!1))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new mf(this.data.getIterator())}getIteratorFrom(t){return new mf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(s=>{e=e.add(s)}),e}isEqual(t){if(!(t instanceof Pe)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=s.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Pe(this.comparator);return e.data=t,e}}class mf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.fields=t,t.sort(Ve.comparator)}static empty(){return new xn([])}unionWith(t){let e=new Pe(Ve.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new xn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return lr(this.fields,t.fields,(e,s)=>e.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new bp("Invalid base64 string: "+a):a}}(t);return new Fe(e)}static fromUint8Array(t){const e=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(t);return new Fe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const r0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(n){if(Yt(!!n),typeof n=="string"){let t=0;const e=r0.exec(n);if(Yt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fi(n){return typeof n=="string"?Fe.fromBase64String(n):Fe.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="server_timestamp",Cp="__type__",Pp="__previous_value__",xp="__local_write_time__";function _c(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Cp])===null||e===void 0?void 0:e.stringValue)===Sp}function Au(n){const t=n.mapValue.fields[Pp];return _c(t)?Au(t):t}function So(n){const t=Vi(n.mapValue.fields[xp].timestampValue);return new Ce(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(t,e,s,r,a,c,h,p,g){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g}}const Xa="(default)";class Co{constructor(t,e){this.projectId=t,this.database=e||Xa}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===Xa}isEqual(t){return t instanceof Co&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="__type__",a0="__max__",Ia={mapValue:{}},Lp="__vector__",tu="value";function Bi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_c(n)?4:l0(n)?9007199254740991:u0(n)?10:11:wt()}function Kn(n,t){if(n===t)return!0;const e=Bi(n);if(e!==Bi(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return So(n).isEqual(So(t));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Vi(r.timestampValue),h=Vi(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,a){return Fi(r.bytesValue).isEqual(Fi(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,a){return ve(r.geoPointValue.latitude)===ve(a.geoPointValue.latitude)&&ve(r.geoPointValue.longitude)===ve(a.geoPointValue.longitude)}(n,t);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ve(r.integerValue)===ve(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=ve(r.doubleValue),h=ve(a.doubleValue);return c===h?Ja(c)===Ja(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return lr(n.arrayValue.values||[],t.arrayValue.values||[],Kn);case 10:case 11:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(pf(c)!==pf(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!Kn(c[p],h[p])))return!1;return!0}(n,t);default:return wt()}}function Po(n,t){return(n.values||[]).find(e=>Kn(e,t))!==void 0}function cr(n,t){if(n===t)return 0;const e=Bi(n),s=Bi(t);if(e!==s)return Lt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,t.booleanValue);case 2:return function(a,c){const h=ve(a.integerValue||a.doubleValue),p=ve(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,t);case 3:return _f(n.timestampValue,t.timestampValue);case 4:return _f(So(n),So(t));case 5:return bl(n.stringValue,t.stringValue);case 6:return function(a,c){const h=Fi(a),p=Fi(c);return h.compareTo(p)}(n.bytesValue,t.bytesValue);case 7:return function(a,c){const h=a.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const v=Lt(h[g],p[g]);if(v!==0)return v}return Lt(h.length,p.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,c){const h=Lt(ve(a.latitude),ve(c.latitude));return h!==0?h:Lt(ve(a.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return gf(n.arrayValue,t.arrayValue);case 10:return function(a,c){var h,p,g,v;const I=a.fields||{},R=c.fields||{},V=(h=I[tu])===null||h===void 0?void 0:h.arrayValue,z=(p=R[tu])===null||p===void 0?void 0:p.arrayValue,G=Lt(((g=V==null?void 0:V.values)===null||g===void 0?void 0:g.length)||0,((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0);return G!==0?G:gf(V,z)}(n.mapValue,t.mapValue);case 11:return function(a,c){if(a===Ia.mapValue&&c===Ia.mapValue)return 0;if(a===Ia.mapValue)return 1;if(c===Ia.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let I=0;I<p.length&&I<v.length;++I){const R=bl(p[I],v[I]);if(R!==0)return R;const V=cr(h[p[I]],g[v[I]]);if(V!==0)return V}return Lt(p.length,v.length)}(n.mapValue,t.mapValue);default:throw wt()}}function _f(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Lt(n,t);const e=Vi(n),s=Vi(t),r=Lt(e.seconds,s.seconds);return r!==0?r:Lt(e.nanos,s.nanos)}function gf(n,t){const e=n.values||[],s=t.values||[];for(let r=0;r<e.length&&r<s.length;++r){const a=cr(e[r],s[r]);if(a)return a}return Lt(e.length,s.length)}function hr(n){return Sl(n)}function Sl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const s=Vi(e);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Fi(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return gt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let s="[",r=!0;for(const a of e.values||[])r?r=!1:s+=",",s+=Sl(a);return s+"]"}(n.arrayValue):"mapValue"in n?function(e){const s=Object.keys(e.fields||{}).sort();let r="{",a=!0;for(const c of s)a?a=!1:r+=",",r+=`${c}:${Sl(e.fields[c])}`;return r+"}"}(n.mapValue):wt()}function Oa(n){switch(Bi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Au(n);return t?16+Oa(t):16;case 5:return 2*n.stringValue.length;case 6:return Fi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,a)=>r+Oa(a),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return gs(s.fields,(a,c)=>{r+=a.length+Oa(c)}),r}(n.mapValue);default:throw wt()}}function Cl(n){return!!n&&"integerValue"in n}function gc(n){return!!n&&"arrayValue"in n}function yf(n){return!!n&&"nullValue"in n}function vf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ma(n){return!!n&&"mapValue"in n}function u0(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Rp])===null||e===void 0?void 0:e.stringValue)===Lp}function ho(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return gs(n.mapValue.fields,(e,s)=>t.mapValue.fields[e]=ho(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ho(n.arrayValue.values[e]);return t}return Object.assign({},n)}function l0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===a0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.value=t}static empty(){return new yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!Ma(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ho(e)}setAll(t){let e=Ve.emptyPath(),s={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,s,r),s={},r=[],e=h.popLast()}c?s[h.lastSegment()]=ho(c):r.push(h.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,s,r)}delete(t){const e=this.field(t.popLast());Ma(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Kn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=e.mapValue.fields[t.get(s)];Ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,s){gs(e,(r,a)=>t[r]=a);for(const r of s)delete t[r]}clone(){return new yn(ho(this.value))}}function Op(n){const t=[];return gs(n.fields,(e,s)=>{const r=new Ve([e]);if(Ma(s)){const a=Op(s.mapValue).fields;if(a.length===0)t.push(r);else for(const c of a)t.push(r.child(c))}else t.push(r)}),new xn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t,e,s,r,a,c,h){this.key=t,this.documentType=e,this.version=s,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(t){return new He(t,0,bt.min(),bt.min(),bt.min(),yn.empty(),0)}static newFoundDocument(t,e,s,r){return new He(t,1,e,bt.min(),s,r,0)}static newNoDocument(t,e){return new He(t,2,e,bt.min(),bt.min(),yn.empty(),0)}static newUnknownDocument(t,e){return new He(t,3,e,bt.min(),bt.min(),yn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof He&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new He(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t,e){this.position=t,this.inclusive=e}}function Ef(n,t,e){let s=0;for(let r=0;r<n.position.length;r++){const a=t[r],c=n.position[r];if(a.field.isKeyField()?s=gt.comparator(gt.fromName(c.referenceValue),e.key):s=cr(c,e.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function Tf(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Kn(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,e="asc"){this.field=t,this.dir=e}}function c0(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{}class Se extends Mp{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new f0(t,e,s):e==="array-contains"?new m0(t,s):e==="in"?new _0(t,s):e==="not-in"?new g0(t,s):e==="array-contains-any"?new y0(t,s):new Se(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new d0(t,s):new p0(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(cr(e,this.value)):e!==null&&Bi(this.value)===Bi(e)&&this.matchesComparison(cr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends Mp{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new $n(t,e)}matches(t){return Dp(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Dp(n){return n.op==="and"}function kp(n){return h0(n)&&Dp(n)}function h0(n){for(const t of n.filters)if(t instanceof $n)return!1;return!0}function Pl(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+hr(n.value);if(kp(n))return n.filters.map(t=>Pl(t)).join(",");{const t=n.filters.map(e=>Pl(e)).join(",");return`${n.op}(${t})`}}function Np(n,t){return n instanceof Se?function(s,r){return r instanceof Se&&s.op===r.op&&s.field.isEqual(r.field)&&Kn(s.value,r.value)}(n,t):n instanceof $n?function(s,r){return r instanceof $n&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((a,c,h)=>a&&Np(c,r.filters[h]),!0):!1}(n,t):void wt()}function Vp(n){return n instanceof Se?function(e){return`${e.field.canonicalString()} ${e.op} ${hr(e.value)}`}(n):n instanceof $n?function(e){return e.op.toString()+" {"+e.getFilters().map(Vp).join(" ,")+"}"}(n):"Filter"}class f0 extends Se{constructor(t,e,s){super(t,e,s),this.key=gt.fromName(s.referenceValue)}matches(t){const e=gt.comparator(t.key,this.key);return this.matchesComparison(e)}}class d0 extends Se{constructor(t,e){super(t,"in",e),this.keys=Fp("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class p0 extends Se{constructor(t,e){super(t,"not-in",e),this.keys=Fp("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Fp(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(s=>gt.fromName(s.referenceValue))}class m0 extends Se{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return gc(e)&&Po(e.arrayValue,this.value)}}class _0 extends Se{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Po(this.value.arrayValue,e)}}class g0 extends Se{constructor(t,e){super(t,"not-in",e)}matches(t){if(Po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Po(this.value.arrayValue,e)}}class y0 extends Se{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!gc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(s=>Po(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,e=null,s=[],r=[],a=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.le=null}}function wf(n,t=null,e=[],s=[],r=null,a=null,c=null){return new v0(n,t,e,s,r,a,c)}function yc(n){const t=St(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(s=>Pl(s)).join(","),e+="|ob:",e+=t.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),Iu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(s=>hr(s)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(s=>hr(s)).join(",")),t.le=e}return t.le}function vc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!c0(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Np(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Tf(n.startAt,t.startAt)&&Tf(n.endAt,t.endAt)}function xl(n){return gt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,e=null,s=[],r=[],a=null,c="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function E0(n,t,e,s,r,a,c,h){return new bu(n,t,e,s,r,a,c,h)}function Bp(n){return new bu(n)}function If(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function T0(n){return n.collectionGroup!==null}function fo(n){const t=St(n);if(t.he===null){t.he=[];const e=new Set;for(const a of t.explicitOrderBy)t.he.push(a),e.add(a.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Pe(Ve.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.he.push(new nu(a,s))}),e.has(Ve.keyField().canonicalString())||t.he.push(new nu(Ve.keyField(),s))}return t.he}function Hn(n){const t=St(n);return t.Pe||(t.Pe=w0(t,fo(n))),t.Pe}function w0(n,t){if(n.limitType==="F")return wf(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new nu(r.field,a)});const e=n.endAt?new eu(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new eu(n.startAt.position,n.startAt.inclusive):null;return wf(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function Rl(n,t,e){return new bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Su(n,t){return vc(Hn(n),Hn(t))&&n.limitType===t.limitType}function Up(n){return`${yc(Hn(n))}|lt:${n.limitType}`}function Ws(n){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(r=>Vp(r)).join(", ")}]`),Iu(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>hr(r)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>hr(r)).join(",")),`Target(${s})`}(Hn(n))}; limitType=${n.limitType})`}function Cu(n,t){return t.isFoundDocument()&&function(s,r){const a=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):gt.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(n,t)&&function(s,r){for(const a of fo(s))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(n,t)&&function(s,r){for(const a of s.filters)if(!a.matches(r))return!1;return!0}(n,t)&&function(s,r){return!(s.startAt&&!function(c,h,p){const g=Ef(c,h,p);return c.inclusive?g<=0:g<0}(s.startAt,fo(s),r)||s.endAt&&!function(c,h,p){const g=Ef(c,h,p);return c.inclusive?g>=0:g>0}(s.endAt,fo(s),r))}(n,t)}function I0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zp(n){return(t,e)=>{let s=!1;for(const r of fo(n)){const a=A0(r,t,e);if(a!==0)return a;s=s||r.field.isKeyField()}return 0}}function A0(n,t,e){const s=n.field.isKeyField()?gt.comparator(t.key,e.key):function(a,c,h){const p=c.data.field(a),g=h.data.field(a);return p!==null&&g!==null?cr(p,g):wt()}(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[r,a]of s)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[e]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){gs(this.inner,(e,s)=>{for(const[r,a]of s)t(r,a)})}isEmpty(){return Ap(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new me(gt.comparator);function di(){return b0}const Hp=new me(gt.comparator);function so(...n){let t=Hp;for(const e of n)t=t.insert(e.key,e);return t}function Gp(n){let t=Hp;return n.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function us(){return po()}function Kp(){return po()}function po(){return new ys(n=>n.toString(),(n,t)=>n.isEqual(t))}const S0=new me(gt.comparator),C0=new Pe(gt.comparator);function Bt(...n){let t=C0;for(const e of n)t=t.add(e);return t}const P0=new Pe(Lt);function x0(){return P0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ja(t)?"-0":t}}function $p(n){return{integerValue:""+n}}function R0(n,t){return n0(t)?$p(t):Ec(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this._=void 0}}function L0(n,t,e){return n instanceof iu?function(r,a){const c={fields:{[Cp]:{stringValue:Sp},[xp]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&_c(a)&&(a=Au(a)),a&&(c.fields[Pp]=a),{mapValue:c}}(e,t):n instanceof xo?qp(n,t):n instanceof Ro?Zp(n,t):function(r,a){const c=jp(r,a),h=Af(c)+Af(r.Ie);return Cl(c)&&Cl(r.Ie)?$p(h):Ec(r.serializer,h)}(n,t)}function O0(n,t,e){return n instanceof xo?qp(n,t):n instanceof Ro?Zp(n,t):e}function jp(n,t){return n instanceof su?function(s){return Cl(s)||function(a){return!!a&&"doubleValue"in a}(s)}(t)?t:{integerValue:0}:null}class iu extends Pu{}class xo extends Pu{constructor(t){super(),this.elements=t}}function qp(n,t){const e=Wp(t);for(const s of n.elements)e.some(r=>Kn(r,s))||e.push(s);return{arrayValue:{values:e}}}class Ro extends Pu{constructor(t){super(),this.elements=t}}function Zp(n,t){let e=Wp(t);for(const s of n.elements)e=e.filter(r=>!Kn(r,s));return{arrayValue:{values:e}}}class su extends Pu{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Af(n){return ve(n.integerValue||n.doubleValue)}function Wp(n){return gc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function M0(n,t){return n.field.isEqual(t.field)&&function(s,r){return s instanceof xo&&r instanceof xo||s instanceof Ro&&r instanceof Ro?lr(s.elements,r.elements,Kn):s instanceof su&&r instanceof su?Kn(s.Ie,r.Ie):s instanceof iu&&r instanceof iu}(n.transform,t.transform)}class D0{constructor(t,e){this.version=t,this.transformResults=e}}class li{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new li}static exists(t){return new li(void 0,t)}static updateTime(t){return new li(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Da(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class xu{}function Qp(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Jp(n.key,li.none()):new Oo(n.key,n.data,li.none());{const e=n.data,s=yn.empty();let r=new Pe(Ve.comparator);for(let a of t.fields)if(!r.has(a)){let c=e.field(a);c===null&&a.length>1&&(a=a.popLast(),c=e.field(a)),c===null?s.delete(a):s.set(a,c),r=r.add(a)}return new vs(n.key,s,new xn(r.toArray()),li.none())}}function k0(n,t,e){n instanceof Oo?function(r,a,c){const h=r.value.clone(),p=Sf(r.fieldTransforms,a,c.transformResults);h.setAll(p),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof vs?function(r,a,c){if(!Da(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=Sf(r.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(Yp(r)),p.setAll(h),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,t,e):function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function mo(n,t,e,s){return n instanceof Oo?function(a,c,h,p){if(!Da(a.precondition,c))return h;const g=a.value.clone(),v=Cf(a.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,t,e,s):n instanceof vs?function(a,c,h,p){if(!Da(a.precondition,c))return h;const g=Cf(a.fieldTransforms,p,c),v=c.data;return v.setAll(Yp(a)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(I=>I.field))}(n,t,e,s):function(a,c,h){return Da(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function N0(n,t){let e=null;for(const s of n.fieldTransforms){const r=t.data.field(s.field),a=jp(s.transform,r||null);a!=null&&(e===null&&(e=yn.empty()),e.set(s.field,a))}return e||null}function bf(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&lr(s,r,(a,c)=>M0(a,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Oo extends xu{constructor(t,e,s,r=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class vs extends xu{constructor(t,e,s,r,a=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Yp(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}}),t}function Sf(n,t,e){const s=new Map;Yt(n.length===e.length);for(let r=0;r<e.length;r++){const a=n[r],c=a.transform,h=t.data.field(a.field);s.set(a.field,O0(c,h,e[r]))}return s}function Cf(n,t,e){const s=new Map;for(const r of n){const a=r.transform,c=e.data.field(r.field);s.set(r.field,L0(a,c,t))}return s}class Jp extends xu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V0 extends xu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t,e,s,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&k0(a,t,s[r])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=mo(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=mo(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=Kp();return this.mutations.forEach(r=>{const a=t.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=e.has(r.key)?null:h;const p=Qp(c,h);p!==null&&s.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(bt.min())}),s}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Bt())}isEqual(t){return this.batchId===t.batchId&&lr(this.mutations,t.mutations,(e,s)=>bf(e,s))&&lr(this.baseMutations,t.baseMutations,(e,s)=>bf(e,s))}}class Tc{constructor(t,e,s,r){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=r}static from(t,e,s){Yt(t.mutations.length===s.length);let r=function(){return S0}();const a=t.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,s[c].version);return new Tc(t,e,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,Gt;function z0(n){switch(n){case Q.OK:return wt();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return wt()}}function Xp(n){if(n===void 0)return fi("GRPC error has no .code"),Q.UNKNOWN;switch(n){case Ae.OK:return Q.OK;case Ae.CANCELLED:return Q.CANCELLED;case Ae.UNKNOWN:return Q.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return Q.INTERNAL;case Ae.UNAVAILABLE:return Q.UNAVAILABLE;case Ae.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ae.NOT_FOUND:return Q.NOT_FOUND;case Ae.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ae.ABORTED:return Q.ABORTED;case Ae.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ae.DATA_LOSS:return Q.DATA_LOSS;default:return wt()}}(Gt=Ae||(Ae={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Li([4294967295,4294967295],0);function Pf(n){const t=Tp().encode(n),e=new pp;return e.update(t),new Uint8Array(e.digest())}function xf(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Li([e,s],0),new Li([r,a],0)]}class wc{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new ro(`Invalid padding: ${e}`);if(s<0)throw new ro(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new ro(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Li.fromNumber(this.Ee)}Ae(t,e,s){let r=t.add(e.multiply(Li.fromNumber(s)));return r.compare(H0)===1&&(r=new Li([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=Pf(t),[s,r]=xf(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(s,r,a);if(!this.Re(c))return!1}return!0}static create(t,e,s){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),c=new wc(a,r,e);return s.forEach(h=>c.insert(h)),c}insert(t){if(this.Ee===0)return;const e=Pf(t),[s,r]=xf(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(s,r,a);this.Ve(c)}}Ve(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,e,s,r,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const r=new Map;return r.set(t,Mo.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new Ru(bt.min(),r,new me(Lt),di(),Bt())}}class Mo{constructor(t,e,s,r,a){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new Mo(s,e,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,e,s,r){this.me=t,this.removedTargetIds=e,this.key=s,this.fe=r}}class tm{constructor(t,e){this.targetId=t,this.ge=e}}class em{constructor(t,e,s=Fe.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=r}}class Rf{constructor(){this.pe=0,this.ye=Lf(),this.we=Fe.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Bt(),e=Bt(),s=Bt();return this.ye.forEach((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:s=s.add(r);break;default:wt()}}),new Mo(this.we,this.Se,t,e,s)}Me(){this.be=!1,this.ye=Lf()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Yt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class G0{constructor(t){this.ke=t,this.qe=new Map,this.Qe=di(),this.$e=Aa(),this.Ue=Aa(),this.Ke=new me(Lt)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const s=this.He(e);switch(t.state){case 0:this.Je(e)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(e);break;case 3:this.Je(e)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),s.Ce(t.resumeToken));break;default:wt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((s,r)=>{this.Je(r)&&e(r)})}Ze(t){const e=t.targetId,s=t.ge.count,r=this.Xe(e);if(r){const a=r.target;if(xl(a))if(s===0){const c=new gt(a.path);this.ze(e,c,He.newNoDocument(c,bt.min()))}else Yt(s===1);else{const c=this.et(e);if(c!==s){const h=this.tt(t),p=h?this.nt(h,t,c):1;if(p!==0){this.Ye(e);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,g)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:a=0}=e;let c,h;try{c=Fi(s).toUint8Array()}catch(p){if(p instanceof bp)return ur("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new wc(c,r,a)}catch(p){return ur(p instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(t,e,s){return e.ge.count===s-this.st(t,e.targetId)?0:2}st(t,e){const s=this.ke.getRemoteKeysForTarget(e);let r=0;return s.forEach(a=>{const c=this.ke.it(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.ze(e,a,null),r++)}),r}ot(t){const e=new Map;this.qe.forEach((a,c)=>{const h=this.Xe(c);if(h){if(a.current&&xl(h.target)){const p=new gt(h.target.path);this._t(p).has(c)||this.ut(c,p)||this.ze(c,p,He.newNoDocument(p,t))}a.ve&&(e.set(c,a.Fe()),a.Me())}});let s=Bt();this.Ue.forEach((a,c)=>{let h=!0;c.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(s=s.add(a))}),this.Qe.forEach((a,c)=>c.setReadTime(t));const r=new Ru(t,e,this.Ke,this.Qe,s);return this.Qe=di(),this.$e=Aa(),this.Ue=Aa(),this.Ke=new me(Lt),r}Ge(t,e){if(!this.Je(t))return;const s=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,s),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,s){if(!this.Je(t))return;const r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),s&&(this.Qe=this.Qe.insert(e,s))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Rf,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Pe(Lt),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Pe(Lt),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||at("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Rf),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function Aa(){return new me(gt.comparator)}function Lf(){return new me(gt.comparator)}const K0={asc:"ASCENDING",desc:"DESCENDING"},$0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j0={and:"AND",or:"OR"};class q0{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ll(n,t){return n.useProto3Json||Iu(t)?t:{value:t}}function ru(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function nm(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Z0(n,t){return ru(n,t.toTimestamp())}function Gn(n){return Yt(!!n),bt.fromTimestamp(function(e){const s=Vi(e);return new Ce(s.seconds,s.nanos)}(n))}function Ic(n,t){return Ol(n,t).canonicalString()}function Ol(n,t){const e=function(r){return new fe(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function im(n){const t=fe.fromString(n);return Yt(um(t)),t}function Ml(n,t){return Ic(n.databaseId,t.path)}function Yu(n,t){const e=im(t);if(e.get(1)!==n.databaseId.projectId)throw new mt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new mt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new gt(rm(e))}function sm(n,t){return Ic(n.databaseId,t)}function W0(n){const t=im(n);return t.length===4?fe.emptyPath():rm(t)}function Dl(n){return new fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rm(n){return Yt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Of(n,t,e){return{name:Ml(n,t),fields:e.value.mapValue.fields}}function Q0(n,t){let e;if("targetChange"in t){t.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:wt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(Yt(v===void 0||typeof v=="string"),Fe.fromBase64String(v||"")):(Yt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Fe.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(g){const v=g.code===void 0?Q.UNKNOWN:Xp(g.code);return new mt(v,g.message||"")}(c);e=new em(s,r,a,h||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=Yu(n,s.document.name),a=Gn(s.document.updateTime),c=s.document.createTime?Gn(s.document.createTime):bt.min(),h=new yn({mapValue:{fields:s.document.fields}}),p=He.newFoundDocument(r,a,c,h),g=s.targetIds||[],v=s.removedTargetIds||[];e=new ka(g,v,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=Yu(n,s.document),a=s.readTime?Gn(s.readTime):bt.min(),c=He.newNoDocument(r,a),h=s.removedTargetIds||[];e=new ka([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=Yu(n,s.document),a=s.removedTargetIds||[];e=new ka([],a,r,null)}else{if(!("filter"in t))return wt();{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:a}=s,c=new U0(r,a),h=s.targetId;e=new tm(h,c)}}return e}function Y0(n,t){let e;if(t instanceof Oo)e={update:Of(n,t.key,t.value)};else if(t instanceof Jp)e={delete:Ml(n,t.key)};else if(t instanceof vs)e={update:Of(n,t.key,t.data),updateMask:oT(t.fieldMask)};else{if(!(t instanceof V0))return wt();e={verify:Ml(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(s=>function(a,c){const h=c.transform;if(h instanceof iu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof xo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ro)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof su)return{fieldPath:c.field.canonicalString(),increment:h.Ie};throw wt()}(0,s))),t.precondition.isNone||(e.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:Z0(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:wt()}(n,t.precondition)),e}function J0(n,t){return n&&n.length>0?(Yt(t!==void 0),n.map(e=>function(r,a){let c=r.updateTime?Gn(r.updateTime):Gn(a);return c.isEqual(bt.min())&&(c=Gn(a)),new D0(c,r.transformResults||[])}(e,t))):[]}function X0(n,t){return{documents:[sm(n,t.path)]}}function tT(n,t){const e={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=sm(n,r);const a=function(g){if(g.length!==0)return am($n.create(g,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const c=function(g){if(g.length!==0)return g.map(v=>function(R){return{field:Qs(R.field),direction:iT(R.dir)}}(v))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=Ll(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{ht:e,parent:r}}function eT(n){let t=W0(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let r=null;if(s>0){Yt(s===1);const v=e.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let a=[];e.where&&(a=function(I){const R=om(I);return R instanceof $n&&kp(R)?R.getFilters():[R]}(e.where));let c=[];e.orderBy&&(c=function(I){return I.map(R=>function(z){return new nu(Ys(z.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(R))}(e.orderBy));let h=null;e.limit&&(h=function(I){let R;return R=typeof I=="object"?I.value:I,Iu(R)?null:R}(e.limit));let p=null;e.startAt&&(p=function(I){const R=!!I.before,V=I.values||[];return new eu(V,R)}(e.startAt));let g=null;return e.endAt&&(g=function(I){const R=!I.before,V=I.values||[];return new eu(V,R)}(e.endAt)),E0(t,r,c,a,h,"F",p,g)}function nT(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function om(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=Ys(e.unaryFilter.field);return Se.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Ys(e.unaryFilter.field);return Se.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ys(e.unaryFilter.field);return Se.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ys(e.unaryFilter.field);return Se.create(c,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(n):n.fieldFilter!==void 0?function(e){return Se.create(Ys(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return $n.create(e.compositeFilter.filters.map(s=>om(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return wt()}}(e.compositeFilter.op))}(n):wt()}function iT(n){return K0[n]}function sT(n){return $0[n]}function rT(n){return j0[n]}function Qs(n){return{fieldPath:n.canonicalString()}}function Ys(n){return Ve.fromServerFormat(n.fieldPath)}function am(n){return n instanceof Se?function(e){if(e.op==="=="){if(vf(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NAN"}};if(yf(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(vf(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NOT_NAN"}};if(yf(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(e.field),op:sT(e.op),value:e.value}}}(n):n instanceof $n?function(e){const s=e.getFilters().map(r=>am(r));return s.length===1?s[0]:{compositeFilter:{op:rT(e.op),filters:s}}}(n):wt()}function oT(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function um(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,e,s,r,a=bt.min(),c=bt.min(),h=Fe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(t){return new Ci(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t){this.Tt=t}}function uT(n){const t=eT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rl(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.Tn=new cT}addToCollectionParentIndex(t,e){return this.Tn.add(e),$.resolve()}getCollectionParents(t,e){return $.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return $.resolve()}deleteFieldIndex(t,e){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,e){return $.resolve()}getDocumentsMatchingTarget(t,e){return $.resolve(null)}getIndexType(t,e){return $.resolve(0)}getFieldIndexes(t,e){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,e){return $.resolve(Ni.min())}getMinOffsetFromCollectionGroup(t,e){return $.resolve(Ni.min())}updateCollectionGroup(t,e,s){return $.resolve()}updateIndexEntries(t,e){return $.resolve()}}class cT{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e]||new Pe(fe.comparator),a=!r.has(s);return this.index[e]=r.add(s),a}has(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e];return r&&r.has(s)}getEntries(t){return(this.index[t]||new Pe(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lm=41943040;class en{static withCacheSize(t){return new en(t,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(lm,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new fr(0)}static Kn(){return new fr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="LruGarbageCollector",hT=1048576;function kf([n,t],[e,s]){const r=Lt(n,e);return r===0?Lt(t,s):r}class fT{constructor(t){this.Hn=t,this.buffer=new Pe(kf),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();kf(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class dT{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){at(Df,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Er(e)?at(Df,"Ignoring IndexedDB error during garbage collection: ",e):await vr(e)}await this.er(3e5)})}}class pT{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(s=>Math.floor(e/100*s))}nthSequenceNumber(t,e){if(e===0)return $.resolve(wu.ae);const s=new fT(e);return this.tr.forEachTarget(t,r=>s.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>s.Zn(r))).next(()=>s.maxValue)}removeTargets(t,e,s){return this.tr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Mf)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mf):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let s,r,a,c,h,p,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,c=Date.now(),this.nthSequenceNumber(t,r))).next(I=>(s=I,h=Date.now(),this.removeTargets(t,s,e))).next(I=>(a=I,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(I=>(g=Date.now(),Zs()<=$t.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${I} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:I})))}}function mT(n,t){return new pT(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.changes=new ys(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,He.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?$.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,e,s,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(s!==null&&mo(s.mutation,r,xn.empty(),Ce.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.getLocalViewOfDocuments(t,s,Bt()).next(()=>s))}getLocalViewOfDocuments(t,e,s=Bt()){const r=us();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,s).next(a=>{let c=so();return a.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const s=us();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,Bt()))}populateOverlays(t,e,s){const r=[];return s.forEach(a=>{e.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(t,r).next(a=>{a.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,s,r){let a=di();const c=po(),h=function(){return po()}();return e.forEach((p,g)=>{const v=s.get(g.key);r.has(g.key)&&(v===void 0||v.mutation instanceof vs)?a=a.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),mo(v.mutation,g,v.mutation.getFieldMask(),Ce.now())):c.set(g.key,xn.empty())}),this.recalculateAndSaveOverlays(t,a).next(p=>(p.forEach((g,v)=>c.set(g,v)),e.forEach((g,v)=>{var I;return h.set(g,new gT(v,(I=c.get(g))!==null&&I!==void 0?I:null))}),h))}recalculateAndSaveOverlays(t,e){const s=po();let r=new me((c,h)=>c-h),a=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(p=>{const g=e.get(p);if(g===null)return;let v=s.get(p)||xn.empty();v=h.applyToLocalView(g,v),s.set(p,v);const I=(r.get(h.batchId)||Bt()).add(p);r=r.insert(h.batchId,I)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,v=p.value,I=Kp();v.forEach(R=>{if(!a.has(R)){const V=Qp(e.get(R),s.get(R));V!==null&&I.set(R,V),a=a.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,I))}return $.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,e,s,r){return function(c){return gt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):T0(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,r):this.getDocumentsMatchingCollectionQuery(t,e,s,r)}getNextDocuments(t,e,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,r).next(a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,r-a.size):$.resolve(us());let h=bo,p=a;return c.next(g=>$.forEach(g,(v,I)=>(h<I.largestBatchId&&(h=I.largestBatchId),a.get(v)?$.resolve():this.remoteDocumentCache.getEntry(t,v).next(R=>{p=p.insert(v,R)}))).next(()=>this.populateOverlays(t,g,a)).next(()=>this.computeViews(t,p,g,Bt())).next(v=>({batchId:h,changes:Gp(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new gt(e)).next(s=>{let r=so();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,s,r){const a=e.collectionGroup;let c=so();return this.indexManager.getCollectionParents(t,a).next(h=>$.forEach(h,p=>{const g=function(I,R){return new bu(R,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(e,p.child(a));return this.getDocumentsMatchingCollectionQuery(t,g,s,r).next(v=>{v.forEach((I,R)=>{c=c.insert(I,R)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,s,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,a,r))).next(c=>{a.forEach((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,He.newInvalidDocument(v)))});let h=so();return c.forEach((p,g)=>{const v=a.get(p);v!==void 0&&mo(v.mutation,g,xn.empty(),Ce.now()),Cu(e,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return $.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Gn(r.createTime)}}(e)),$.resolve()}getNamedQuery(t,e){return $.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:uT(r.bundledQuery),readTime:Gn(r.readTime)}}(e)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.overlays=new me(gt.comparator),this.Rr=new Map}getOverlay(t,e){return $.resolve(this.overlays.get(e))}getOverlays(t,e){const s=us();return $.forEach(e,r=>this.getOverlay(t,r).next(a=>{a!==null&&s.set(r,a)})).next(()=>s)}saveOverlays(t,e,s){return s.forEach((r,a)=>{this.Et(t,e,a)}),$.resolve()}removeOverlaysForBatchId(t,e,s){const r=this.Rr.get(s);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(s)),$.resolve()}getOverlaysForCollection(t,e,s){const r=us(),a=e.length+1,c=new gt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>s&&r.set(p.getKey(),p)}return $.resolve(r)}getOverlaysForCollectionGroup(t,e,s,r){let a=new me((g,v)=>g-v);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>s){let v=a.get(g.largestBatchId);v===null&&(v=us(),a=a.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=us(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,v)=>h.set(g,v)),!(h.size()>=r)););return $.resolve(h)}Et(t,e,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.Rr.get(r.largestBatchId).delete(s.key);this.Rr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new B0(e,s));let a=this.Rr.get(e);a===void 0&&(a=Bt(),this.Rr.set(e,a)),this.Rr.set(e,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(){this.Vr=new Pe(Le.mr),this.gr=new Pe(Le.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const s=new Le(t,e);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,e){t.forEach(s=>this.addReference(s,e))}removeReference(t,e){this.wr(new Le(t,e))}Sr(t,e){t.forEach(s=>this.removeReference(s,e))}br(t){const e=new gt(new fe([])),s=new Le(e,t),r=new Le(e,t+1),a=[];return this.gr.forEachInRange([s,r],c=>{this.wr(c),a.push(c.key)}),a}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new gt(new fe([])),s=new Le(e,t),r=new Le(e,t+1);let a=Bt();return this.gr.forEachInRange([s,r],c=>{a=a.add(c.key)}),a}containsKey(t){const e=new Le(t,0),s=this.Vr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class Le{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return gt.comparator(t.key,e.key)||Lt(t.Cr,e.Cr)}static pr(t,e){return Lt(t.Cr,e.Cr)||gt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Pe(Le.mr)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,r){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new F0(a,e,s,r);this.mutationQueue.push(c);for(const h of r)this.Mr=this.Mr.add(new Le(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return $.resolve(c)}lookupMutationBatch(t,e){return $.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,r=this.Nr(s),a=r<0?0:r;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?mc:this.Fr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new Le(e,0),r=new Le(e,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([s,r],c=>{const h=this.Or(c.Cr);a.push(h)}),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new Pe(Lt);return e.forEach(r=>{const a=new Le(r,0),c=new Le(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,c],h=>{s=s.add(h.Cr)})}),$.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,r=s.length+1;let a=s;gt.isDocumentKey(a)||(a=a.child(""));const c=new Le(new gt(a),0);let h=new Pe(Lt);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===r&&(h=h.add(p.Cr)),!0)},c),$.resolve(this.Br(h))}Br(t){const e=[];return t.forEach(s=>{const r=this.Or(s);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Yt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return $.forEach(e.mutations,r=>{const a=new Le(r.key,e.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,e){const s=new Le(e,0),r=this.Mr.firstAfterOrEqual(s);return $.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.kr=t,this.docs=function(){return new me(gt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,r=this.docs.get(s),a=r?r.size:0,c=this.kr(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return $.resolve(s?s.document.mutableCopy():He.newInvalidDocument(e))}getEntries(t,e){let s=di();return e.forEach(r=>{const a=this.docs.get(r);s=s.insert(r,a?a.document.mutableCopy():He.newInvalidDocument(r))}),$.resolve(s)}getDocumentsMatchingQuery(t,e,s,r){let a=di();const c=e.path,h=new gt(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||JE(YE(v),s)<=0||(r.has(v.key)||Cu(e,v))&&(a=a.insert(v.key,v.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(t,e,s,r){wt()}qr(t,e){return $.forEach(this.docs,s=>e(s))}newChangeBuffer(t){return new AT(this)}getSize(t){return $.resolve(this.size)}}class AT extends _T{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(s)}),$.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t){this.persistence=t,this.Qr=new ys(e=>yc(e),vc),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ac,this.targetCount=0,this.Kr=fr.Un()}forEachTarget(t,e){return this.Qr.forEach((s,r)=>e(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.$r&&(this.$r=e),$.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new fr(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,$.resolve()}updateTargetData(t,e){return this.zn(e),$.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,e,s){let r=0;const a=[];return this.Qr.forEach((c,h)=>{h.sequenceNumber<=e&&s.get(h.targetId)===null&&(this.Qr.delete(c),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),$.waitFor(a).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,e){const s=this.Qr.get(e)||null;return $.resolve(s)}addMatchingKeys(t,e,s){return this.Ur.yr(e,s),$.resolve()}removeMatchingKeys(t,e,s){this.Ur.Sr(e,s);const r=this.persistence.referenceDelegate,a=[];return r&&e.forEach(c=>{a.push(r.markPotentiallyOrphaned(t,c))}),$.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),$.resolve()}getMatchingKeysForTargetId(t,e){const s=this.Ur.vr(e);return $.resolve(s)}containsKey(t,e){return $.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new wu(0),this.zr=!1,this.zr=!0,this.jr=new TT,this.referenceDelegate=t(this),this.Hr=new bT(this),this.indexManager=new lT,this.remoteDocumentCache=function(r){return new IT(r)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new aT(e),this.Yr=new vT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ET,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.Wr[t.toKey()];return s||(s=new wT(e,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,s){at("MemoryPersistence","Starting transaction:",t);const r=new ST(this.Gr.next());return this.referenceDelegate.Zr(),s(r).next(a=>this.referenceDelegate.Xr(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}ei(t,e){return $.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,e)))}}class ST extends t0{constructor(t){super(),this.currentSequenceNumber=t}}class bc{constructor(t){this.persistence=t,this.ti=new Ac,this.ni=null}static ri(t){return new bc(t)}get ii(){if(this.ni)return this.ni;throw wt()}addReference(t,e,s){return this.ti.addReference(s,e),this.ii.delete(s.toString()),$.resolve()}removeReference(t,e,s){return this.ti.removeReference(s,e),this.ii.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),$.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(r=>this.ii.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(a=>this.ii.add(a.toString()))}).next(()=>s.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ii,s=>{const r=gt.fromPath(s);return this.si(t,r).next(a=>{a||e.removeEntry(r,bt.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(s=>{s?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return $.or([()=>$.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class ou{constructor(t,e){this.persistence=t,this.oi=new ys(s=>i0(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=mT(this,e)}static ri(t,e){return new ou(t,e)}Zr(){}Xr(t){return $.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>e.next(r=>s+r))}sr(t){let e=0;return this.rr(t,s=>{e++}).next(()=>e)}rr(t,e){return $.forEach(this.oi,(s,r)=>this.ar(t,s,r).next(a=>a?$.resolve():e(r)))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.qr(t,c=>this.ar(t,c,e).next(h=>{h||(s++,a.removeEntry(c,bt.min()))})).next(()=>a.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),$.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),$.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Oa(t.data.value)),e}ar(t,e,s){return $.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.oi.get(e);return $.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,e,s,r){this.targetId=t,this.fromCache=e,this.Hi=s,this.Ji=r}static Yi(t,e){let s=Bt(),r=Bt();for(const a of e.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Sc(t,e.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Tv()?8:e0(vv())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,s,r){const a={result:null};return this.rs(t,e).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ss(t,e,r,s).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new CT;return this._s(t,e,c).next(h=>{if(a.result=h,this.Xi)return this.us(t,e,c,h.size)})}).next(()=>a.result)}us(t,e,s,r){return s.documentReadCount<this.es?(Zs()<=$t.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Ws(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),$.resolve()):(Zs()<=$t.DEBUG&&at("QueryEngine","Query:",Ws(e),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ts*r?(Zs()<=$t.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Ws(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Hn(e))):$.resolve())}rs(t,e){if(If(e))return $.resolve(null);let s=Hn(e);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Rl(e,null,"F"),s=Hn(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next(a=>{const c=Bt(...a);return this.ns.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,s).next(p=>{const g=this.cs(e,h);return this.ls(e,g,c,p.readTime)?this.rs(t,Rl(e,null,"F")):this.hs(t,g,e,p)}))})))}ss(t,e,s,r){return If(e)||r.isEqual(bt.min())?$.resolve(null):this.ns.getDocuments(t,s).next(a=>{const c=this.cs(e,a);return this.ls(e,c,s,r)?$.resolve(null):(Zs()<=$t.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ws(e)),this.hs(t,c,e,QE(r,bo)).next(h=>h))})}cs(t,e){let s=new Pe(zp(t));return e.forEach((r,a)=>{Cu(t,a)&&(s=s.add(a))}),s}ls(t,e,s,r){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}_s(t,e,s){return Zs()<=$t.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Ws(e)),this.ns.getDocumentsMatchingQuery(t,e,Ni.min(),s)}hs(t,e,s,r){return this.ns.getDocumentsMatchingQuery(t,s,r).next(a=>(e.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="LocalStore",xT=3e8;class RT{constructor(t,e,s,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new me(Lt),this.Is=new ys(a=>yc(a),vc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yT(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function LT(n,t,e,s){return new RT(n,t,e,s)}async function hm(n,t){const e=St(n);return await e.persistence.runTransaction("Handle user change","readonly",s=>{let r;return e.mutationQueue.getAllMutationBatches(s).next(a=>(r=a,e.As(t),e.mutationQueue.getAllMutationBatches(s))).next(a=>{const c=[],h=[];let p=Bt();for(const g of r){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of a){h.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return e.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:c,addedBatchIds:h}))})})}function OT(n,t){const e=St(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),a=e.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,g,v){const I=g.batch,R=I.keys();let V=$.resolve();return R.forEach(z=>{V=V.next(()=>v.getEntry(p,z)).next(G=>{const H=g.docVersions.get(z);Yt(H!==null),G.version.compareTo(H)<0&&(I.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))})}),V.next(()=>h.mutationQueue.removeMutationBatch(p,I))}(e,s,t,a).next(()=>a.apply(s)).next(()=>e.mutationQueue.performConsistencyCheck(s)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(h){let p=Bt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(t))).next(()=>e.localDocuments.getDocuments(s,r))})}function fm(n){const t=St(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function MT(n,t){const e=St(n),s=t.snapshotVersion;let r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;const h=[];t.targetChanges.forEach((v,I)=>{const R=r.get(I);if(!R)return;h.push(e.Hr.removeMatchingKeys(a,v.removedDocuments,I).next(()=>e.Hr.addMatchingKeys(a,v.addedDocuments,I)));let V=R.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(I)!==null?V=V.withResumeToken(Fe.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):v.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(v.resumeToken,s)),r=r.insert(I,V),function(G,H,it){return G.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=xT?!0:it.addedDocuments.size+it.modifiedDocuments.size+it.removedDocuments.size>0}(R,V,v)&&h.push(e.Hr.updateTargetData(a,V))});let p=di(),g=Bt();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(DT(a,c,t.documentUpdates).next(v=>{p=v.Vs,g=v.fs})),!s.isEqual(bt.min())){const v=e.Hr.getLastRemoteSnapshotVersion(a).next(I=>e.Hr.setTargetsMetadata(a,a.currentSequenceNumber,s));h.push(v)}return $.waitFor(h).next(()=>c.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,p,g)).next(()=>p)}).then(a=>(e.Ts=r,a))}function DT(n,t,e){let s=Bt(),r=Bt();return e.forEach(a=>s=s.add(a)),t.getEntries(n,s).next(a=>{let c=di();return e.forEach((h,p)=>{const g=a.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(bt.min())?(t.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),c=c.insert(h,p)):at(Cc,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{Vs:c,fs:r}})}function kT(n,t){const e=St(n);return e.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=mc),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function NT(n,t){const e=St(n);return e.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return e.Hr.getTargetData(s,t).next(a=>a?(r=a,$.resolve(r)):e.Hr.allocateTargetId(s).next(c=>(r=new Ci(t,c,"TargetPurposeListen",s.currentSequenceNumber),e.Hr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=e.Ts.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(s.targetId,s),e.Is.set(t,s.targetId)),s})}async function kl(n,t,e){const s=St(n),r=s.Ts.get(t),a=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",a,c=>s.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!Er(c))throw c;at(Cc,`Failed to update sequence numbers for target ${t}: ${c}`)}s.Ts=s.Ts.remove(t),s.Is.delete(r.target)}function Nf(n,t,e){const s=St(n);let r=bt.min(),a=Bt();return s.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,v){const I=St(p),R=I.Is.get(v);return R!==void 0?$.resolve(I.Ts.get(R)):I.Hr.getTargetData(g,v)}(s,c,Hn(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{a=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(c,t,e?r:bt.min(),e?a:Bt())).next(h=>(VT(s,I0(t),h),{documents:h,gs:a})))}function VT(n,t,e){let s=n.Es.get(t)||bt.min();e.forEach((r,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),n.Es.set(t,s)}class Vf{constructor(){this.activeTargetIds=x0()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class FT{constructor(){this.ho=new Vf,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,s){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Vf,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="ConnectivityMonitor";class Bf{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){at(Ff,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){at(Ff,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba=null;function Nl(){return ba===null?ba=function(){return 268435456+Math.round(2147483648*Math.random())}():ba++,"0x"+ba.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="RestConnection",UT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zT{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${s}/databases/${r}`,this.wo=this.databaseId.database===Xa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}So(t,e,s,r,a){const c=Nl(),h=this.bo(t,e.toUriEncodedString());at(Ju,`Sending RPC '${t}' ${c}:`,h,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,r,a),this.vo(t,h,p,s).then(g=>(at(Ju,`Received RPC '${t}' ${c}: `,g),g),g=>{throw ur(Ju,`RPC '${t}' ${c} failed with error: `,g,"url: ",h,"request:",s),g})}Co(t,e,s,r,a,c){return this.So(t,e,s,r,a)}Do(t,e,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,a)=>t[a]=r),s&&s.headers.forEach((r,a)=>t[a]=r)}bo(t,e){const s=UT[t];return`${this.po}/v1/${e}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue="WebChannelConnection";class GT extends zT{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,s,r){const a=Nl();return new Promise((c,h)=>{const p=new mp;p.setWithCredentials(!0),p.listenOnce(_p.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case La.NO_ERROR:const v=p.getResponseJson();at(Ue,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(v)),c(v);break;case La.TIMEOUT:at(Ue,`RPC '${t}' ${a} timed out`),h(new mt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case La.HTTP_ERROR:const I=p.getStatus();if(at(Ue,`RPC '${t}' ${a} failed with status:`,I,"response text:",p.getResponseText()),I>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const z=function(H){const it=H.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(it)>=0?it:Q.UNKNOWN}(V.status);h(new mt(z,V.message))}else h(new mt(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new mt(Q.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{at(Ue,`RPC '${t}' ${a} completed.`)}});const g=JSON.stringify(r);at(Ue,`RPC '${t}' ${a} sending request:`,r),p.send(e,"POST",g,s,15)})}Wo(t,e,s){const r=Nl(),a=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=vp(),h=yp(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,e,s),p.encodeInitMessageHeaders=!0;const v=a.join("");at(Ue,`Creating RPC '${t}' stream ${r}: ${v}`,p);const I=c.createWebChannel(v,p);let R=!1,V=!1;const z=new HT({Fo:H=>{V?at(Ue,`Not sending because RPC '${t}' stream ${r} is closed:`,H):(R||(at(Ue,`Opening RPC '${t}' stream ${r} transport.`),I.open(),R=!0),at(Ue,`RPC '${t}' stream ${r} sending:`,H),I.send(H))},Mo:()=>I.close()}),G=(H,it,ct)=>{H.listen(it,lt=>{try{ct(lt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return G(I,io.EventType.OPEN,()=>{V||(at(Ue,`RPC '${t}' stream ${r} transport opened.`),z.Qo())}),G(I,io.EventType.CLOSE,()=>{V||(V=!0,at(Ue,`RPC '${t}' stream ${r} transport closed`),z.Uo())}),G(I,io.EventType.ERROR,H=>{V||(V=!0,ur(Ue,`RPC '${t}' stream ${r} transport errored:`,H),z.Uo(new mt(Q.UNAVAILABLE,"The operation could not be completed")))}),G(I,io.EventType.MESSAGE,H=>{var it;if(!V){const ct=H.data[0];Yt(!!ct);const lt=ct,_t=(lt==null?void 0:lt.error)||((it=lt[0])===null||it===void 0?void 0:it.error);if(_t){at(Ue,`RPC '${t}' stream ${r} received error:`,_t);const K=_t.status;let Y=function(w){const C=Ae[w];if(C!==void 0)return Xp(C)}(K),P=_t.message;Y===void 0&&(Y=Q.INTERNAL,P="Unknown error status: "+K+" with message "+_t.message),V=!0,z.Uo(new mt(Y,P)),I.close()}else at(Ue,`RPC '${t}' stream ${r} received:`,ct),z.Ko(ct)}}),G(h,gp.STAT_EVENT,H=>{H.stat===Al.PROXY?at(Ue,`RPC '${t}' stream ${r} detected buffering proxy`):H.stat===Al.NOPROXY&&at(Ue,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{z.$o()},0),z}}function Xu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(n){return new q0(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t,e,s=1e3,r=1.5,a=6e4){this.Ti=t,this.timerId=e,this.Go=s,this.zo=r,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-s);r>0&&at("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="PersistentStream";class pm{constructor(t,e,s,r,a,c,h,p){this.Ti=t,this.n_=s,this.r_=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new dm(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===Q.RESOURCE_EXHAUSTED?(fi(e.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.i_===e&&this.V_(s,r)},s=>{t(()=>{const r=new mt(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(r)})})}V_(t,e){const s=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{s(()=>this.m_(r))}),this.stream.onMessage(r=>{s(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return at(Uf,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(at(Uf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KT extends pm{constructor(t,e,s,r,a,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,r,c),this.serializer=a}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=Q0(this.serializer,t),s=function(a){if(!("targetChange"in a))return bt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?bt.min():c.readTime?Gn(c.readTime):bt.min()}(t);return this.listener.p_(e,s)}y_(t){const e={};e.database=Dl(this.serializer),e.addTarget=function(a,c){let h;const p=c.target;if(h=xl(p)?{documents:X0(a,p)}:{query:tT(a,p).ht},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=nm(a,c.resumeToken);const g=Ll(a,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(bt.min())>0){h.readTime=ru(a,c.snapshotVersion.toTimestamp());const g=Ll(a,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,t);const s=nT(this.serializer,t);s&&(e.labels=s),this.I_(e)}w_(t){const e={};e.database=Dl(this.serializer),e.removeTarget=t,this.I_(e)}}class $T extends pm{constructor(t,e,s,r,a,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,r,c),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return Yt(!!t.streamToken),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=J0(t.writeResults,t.commitTime),s=Gn(t.commitTime);return this.listener.v_(s,e)}C_(){const t={};t.database=Dl(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(s=>Y0(this.serializer,s))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{}class qT extends jT{constructor(t,e,s,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new mt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.So(t,Ol(e,s),r,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new mt(Q.UNKNOWN,a.toString())})}Co(t,e,s,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Co(t,Ol(e,s),r,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new mt(Q.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class ZT{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fi(e),this.N_=!1):at("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="RemoteStore";class WT{constructor(t,e,s,r,a){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(c=>{s.enqueueAndForget(async()=>{Es(this)&&(at(ms,"Restarting streams for network reachability change."),await async function(p){const g=St(p);g.W_.add(4),await Do(g),g.j_.set("Unknown"),g.W_.delete(4),await Ou(g)}(this))})}),this.j_=new ZT(s,r)}}async function Ou(n){if(Es(n))for(const t of n.G_)await t(!0)}async function Do(n){for(const t of n.G_)await t(!1)}function mm(n,t){const e=St(n);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),Lc(e)?Rc(e):Tr(e).c_()&&xc(e,t))}function Pc(n,t){const e=St(n),s=Tr(e);e.K_.delete(t),s.c_()&&_m(e,t),e.K_.size===0&&(s.c_()?s.P_():Es(e)&&e.j_.set("Unknown"))}function xc(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Tr(n).y_(t)}function _m(n,t){n.H_.Ne(t),Tr(n).w_(t)}function Rc(n){n.H_=new G0({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.K_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),Tr(n).start(),n.j_.B_()}function Lc(n){return Es(n)&&!Tr(n).u_()&&n.K_.size>0}function Es(n){return St(n).W_.size===0}function gm(n){n.H_=void 0}async function QT(n){n.j_.set("Online")}async function YT(n){n.K_.forEach((t,e)=>{xc(n,t)})}async function JT(n,t){gm(n),Lc(n)?(n.j_.q_(t),Rc(n)):n.j_.set("Unknown")}async function XT(n,t,e){if(n.j_.set("Online"),t instanceof em&&t.state===2&&t.cause)try{await async function(r,a){const c=a.cause;for(const h of a.targetIds)r.K_.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.K_.delete(h),r.H_.removeTarget(h))}(n,t)}catch(s){at(ms,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await au(n,s)}else if(t instanceof ka?n.H_.We(t):t instanceof tm?n.H_.Ze(t):n.H_.je(t),!e.isEqual(bt.min()))try{const s=await fm(n.localStore);e.compareTo(s)>=0&&await function(a,c){const h=a.H_.ot(c);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.K_.get(g);v&&a.K_.set(g,v.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,g)=>{const v=a.K_.get(p);if(!v)return;a.K_.set(p,v.withResumeToken(Fe.EMPTY_BYTE_STRING,v.snapshotVersion)),_m(a,p);const I=new Ci(v.target,p,g,v.sequenceNumber);xc(a,I)}),a.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(s){at(ms,"Failed to raise snapshot:",s),await au(n,s)}}async function au(n,t,e){if(!Er(t))throw t;n.W_.add(1),await Do(n),n.j_.set("Offline"),e||(e=()=>fm(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{at(ms,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await Ou(n)})}function ym(n,t){return t().catch(e=>au(n,e,t))}async function Mu(n){const t=St(n),e=Ui(t);let s=t.U_.length>0?t.U_[t.U_.length-1].batchId:mc;for(;tw(t);)try{const r=await kT(t.localStore,s);if(r===null){t.U_.length===0&&e.P_();break}s=r.batchId,ew(t,r)}catch(r){await au(t,r)}vm(t)&&Em(t)}function tw(n){return Es(n)&&n.U_.length<10}function ew(n,t){n.U_.push(t);const e=Ui(n);e.c_()&&e.S_&&e.b_(t.mutations)}function vm(n){return Es(n)&&!Ui(n).u_()&&n.U_.length>0}function Em(n){Ui(n).start()}async function nw(n){Ui(n).C_()}async function iw(n){const t=Ui(n);for(const e of n.U_)t.b_(e.mutations)}async function sw(n,t,e){const s=n.U_.shift(),r=Tc.from(s,t,e);await ym(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Mu(n)}async function rw(n,t){t&&Ui(n).S_&&await async function(s,r){if(function(c){return z0(c)&&c!==Q.ABORTED}(r.code)){const a=s.U_.shift();Ui(s).h_(),await ym(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,r)),await Mu(s)}}(n,t),vm(n)&&Em(n)}async function zf(n,t){const e=St(n);e.asyncQueue.verifyOperationInProgress(),at(ms,"RemoteStore received new credentials");const s=Es(e);e.W_.add(3),await Do(e),s&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Ou(e)}async function ow(n,t){const e=St(n);t?(e.W_.delete(2),await Ou(e)):t||(e.W_.add(2),await Do(e),e.j_.set("Unknown"))}function Tr(n){return n.J_||(n.J_=function(e,s,r){const a=St(e);return a.M_(),new KT(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{xo:QT.bind(null,n),No:YT.bind(null,n),Lo:JT.bind(null,n),p_:XT.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),Lc(n)?Rc(n):n.j_.set("Unknown")):(await n.J_.stop(),gm(n))})),n.J_}function Ui(n){return n.Y_||(n.Y_=function(e,s,r){const a=St(e);return a.M_(),new $T(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:nw.bind(null,n),Lo:rw.bind(null,n),D_:iw.bind(null,n),v_:sw.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await Mu(n)):(await n.Y_.stop(),n.U_.length>0&&(at(ms,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,e,s,r,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=r,this.removalCallback=a,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,r,a){const c=Date.now()+s,h=new Oc(t,e,c,r,a);return h.start(s),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mc(n,t){if(fi("AsyncQueue",`${t}: ${n}`),Er(n))return new mt(Q.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{static emptySet(t){return new sr(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||gt.comparator(e.key,s.key):(e,s)=>gt.comparator(e.key,s.key),this.keyedMap=so(),this.sortedSet=new me(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,s)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof sr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=s.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new sr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this.Z_=new me(gt.comparator)}track(t){const e=t.doc.key,s=this.Z_.get(e);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(e):t.type===1&&s.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):wt():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,s)=>{t.push(s)}),t}}class dr{constructor(t,e,s,r,a,c,h,p,g){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,e,s,r,a){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new dr(t,e,sr.emptySet(e),c,s,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Su(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==s[r].type||!e[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class uw{constructor(){this.queries=Gf(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,s){const r=St(e),a=r.queries;r.queries=Gf(),a.forEach((c,h)=>{for(const p of h.ta)p.onError(s)})})(this,new mt(Q.ABORTED,"Firestore shutting down"))}}function Gf(){return new ys(n=>Up(n),Su)}async function lw(n,t){const e=St(n);let s=3;const r=t.query;let a=e.queries.get(r);a?!a.na()&&t.ra()&&(s=2):(a=new aw,s=t.ra()?0:1);try{switch(s){case 0:a.ea=await e.onListen(r,!0);break;case 1:a.ea=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const h=Mc(c,`Initialization of query '${Ws(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,a),a.ta.push(t),t.sa(e.onlineState),a.ea&&t.oa(a.ea)&&Dc(e)}async function cw(n,t){const e=St(n),s=t.query;let r=3;const a=e.queries.get(s);if(a){const c=a.ta.indexOf(t);c>=0&&(a.ta.splice(c,1),a.ta.length===0?r=t.ra()?0:1:!a.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function hw(n,t){const e=St(n);let s=!1;for(const r of t){const a=r.query,c=e.queries.get(a);if(c){for(const h of c.ta)h.oa(r)&&(s=!0);c.ea=r}}s&&Dc(e)}function fw(n,t,e){const s=St(n),r=s.queries.get(t);if(r)for(const a of r.ta)a.onError(e);s.queries.delete(t)}function Dc(n){n.ia.forEach(t=>{t.next()})}var Vl,Kf;(Kf=Vl||(Vl={}))._a="default",Kf.Cache="cache";class dw{constructor(t,e,s){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new dr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const s=e!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=dr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Vl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(t){this.key=t}}class wm{constructor(t){this.key=t}}class pw{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Bt(),this.mutatedKeys=Bt(),this.ya=zp(t),this.wa=new sr(this.ya)}get Sa(){return this.fa}ba(t,e){const s=e?e.Da:new Hf,r=e?e.wa:this.wa;let a=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const p=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((v,I)=>{const R=r.get(v),V=Cu(this.query,I)?I:null,z=!!R&&this.mutatedKeys.has(R.key),G=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let H=!1;R&&V?R.data.isEqual(V.data)?z!==G&&(s.track({type:3,doc:V}),H=!0):this.va(R,V)||(s.track({type:2,doc:V}),H=!0,(p&&this.ya(V,p)>0||g&&this.ya(V,g)<0)&&(h=!0)):!R&&V?(s.track({type:0,doc:V}),H=!0):R&&!V&&(s.track({type:1,doc:R}),H=!0,(p||g)&&(h=!0)),H&&(V?(c=c.add(V),a=G?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),s.track({type:1,doc:v})}return{wa:c,Da:s,ls:h,mutatedKeys:a}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,r){const a=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const c=t.Da.X_();c.sort((v,I)=>function(V,z){const G=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return G(V)-G(z)}(v.type,I.type)||this.ya(v.doc,I.doc)),this.Ca(s),r=r!=null&&r;const h=e&&!r?this.Fa():[],p=this.pa.size===0&&this.current&&!r?1:0,g=p!==this.ga;return this.ga=p,c.length!==0||g?{snapshot:new dr(this.query,t.wa,a,c,t.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Hf,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Bt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const e=[];return t.forEach(s=>{this.pa.has(s)||e.push(new wm(s))}),this.pa.forEach(s=>{t.has(s)||e.push(new Tm(s))}),e}Oa(t){this.fa=t.gs,this.pa=Bt();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return dr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const kc="SyncEngine";class mw{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class _w{constructor(t){this.key=t,this.Ba=!1}}class gw{constructor(t,e,s,r,a,c){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new ys(h=>Up(h),Su),this.qa=new Map,this.Qa=new Set,this.$a=new me(gt.comparator),this.Ua=new Map,this.Ka=new Ac,this.Wa={},this.Ga=new Map,this.za=fr.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function yw(n,t,e=!0){const s=Pm(n);let r;const a=s.ka.get(t);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Na()):r=await Im(s,t,e,!0),r}async function vw(n,t){const e=Pm(n);await Im(e,t,!0,!1)}async function Im(n,t,e,s){const r=await NT(n.localStore,Hn(t)),a=r.targetId,c=n.sharedClientState.addLocalQueryTarget(a,e);let h;return s&&(h=await Ew(n,t,a,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&mm(n.remoteStore,r),h}async function Ew(n,t,e,s,r){n.Ha=(I,R,V)=>async function(G,H,it,ct){let lt=H.view.ba(it);lt.ls&&(lt=await Nf(G.localStore,H.query,!1).then(({documents:P})=>H.view.ba(P,lt)));const _t=ct&&ct.targetChanges.get(H.targetId),K=ct&&ct.targetMismatches.get(H.targetId)!=null,Y=H.view.applyChanges(lt,G.isPrimaryClient,_t,K);return jf(G,H.targetId,Y.Ma),Y.snapshot}(n,I,R,V);const a=await Nf(n.localStore,t,!0),c=new pw(t,a.gs),h=c.ba(a.documents),p=Mo.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",r),g=c.applyChanges(h,n.isPrimaryClient,p);jf(n,e,g.Ma);const v=new mw(t,e,c);return n.ka.set(t,v),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),g.snapshot}async function Tw(n,t,e){const s=St(n),r=s.ka.get(t),a=s.qa.get(r.targetId);if(a.length>1)return s.qa.set(r.targetId,a.filter(c=>!Su(c,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await kl(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),e&&Pc(s.remoteStore,r.targetId),Fl(s,r.targetId)}).catch(vr)):(Fl(s,r.targetId),await kl(s.localStore,r.targetId,!0))}async function ww(n,t){const e=St(n),s=e.ka.get(t),r=e.qa.get(s.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),Pc(e.remoteStore,s.targetId))}async function Iw(n,t,e){const s=Rw(n);try{const r=await function(c,h){const p=St(c),g=Ce.now(),v=h.reduce((V,z)=>V.add(z.key),Bt());let I,R;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let z=di(),G=Bt();return p.ds.getEntries(V,v).next(H=>{z=H,z.forEach((it,ct)=>{ct.isValidDocument()||(G=G.add(it))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,z)).next(H=>{I=H;const it=[];for(const ct of h){const lt=N0(ct,I.get(ct.key).overlayedDocument);lt!=null&&it.push(new vs(ct.key,lt,Op(lt.value.mapValue),li.exists(!0)))}return p.mutationQueue.addMutationBatch(V,g,it,h)}).next(H=>{R=H;const it=H.applyToLocalDocumentSet(I,G);return p.documentOverlayCache.saveOverlays(V,H.batchId,it)})}).then(()=>({batchId:R.batchId,changes:Gp(I)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(c,h,p){let g=c.Wa[c.currentUser.toKey()];g||(g=new me(Lt)),g=g.insert(h,p),c.Wa[c.currentUser.toKey()]=g}(s,r.batchId,e),await ko(s,r.changes),await Mu(s.remoteStore)}catch(r){const a=Mc(r,"Failed to persist write");e.reject(a)}}async function Am(n,t){const e=St(n);try{const s=await MT(e.localStore,t);t.targetChanges.forEach((r,a)=>{const c=e.Ua.get(a);c&&(Yt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Ba=!0:r.modifiedDocuments.size>0?Yt(c.Ba):r.removedDocuments.size>0&&(Yt(c.Ba),c.Ba=!1))}),await ko(e,s,t)}catch(s){await vr(s)}}function $f(n,t,e){const s=St(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const r=[];s.ka.forEach((a,c)=>{const h=c.view.sa(t);h.snapshot&&r.push(h.snapshot)}),function(c,h){const p=St(c);p.onlineState=h;let g=!1;p.queries.forEach((v,I)=>{for(const R of I.ta)R.sa(h)&&(g=!0)}),g&&Dc(p)}(s.eventManager,t),r.length&&s.La.p_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function Aw(n,t,e){const s=St(n);s.sharedClientState.updateQueryState(t,"rejected",e);const r=s.Ua.get(t),a=r&&r.key;if(a){let c=new me(gt.comparator);c=c.insert(a,He.newNoDocument(a,bt.min()));const h=Bt().add(a),p=new Ru(bt.min(),new Map,new me(Lt),c,h);await Am(s,p),s.$a=s.$a.remove(a),s.Ua.delete(t),Nc(s)}else await kl(s.localStore,t,!1).then(()=>Fl(s,t,e)).catch(vr)}async function bw(n,t){const e=St(n),s=t.batch.batchId;try{const r=await OT(e.localStore,t);Sm(e,s,null),bm(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await ko(e,r)}catch(r){await vr(r)}}async function Sw(n,t,e){const s=St(n);try{const r=await function(c,h){const p=St(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return p.mutationQueue.lookupMutationBatch(g,h).next(I=>(Yt(I!==null),v=I.keys(),p.mutationQueue.removeMutationBatch(g,I))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>p.localDocuments.getDocuments(g,v))})}(s.localStore,t);Sm(s,t,e),bm(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await ko(s,r)}catch(r){await vr(r)}}function bm(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function Sm(n,t,e){const s=St(n);let r=s.Wa[s.currentUser.toKey()];if(r){const a=r.get(t);a&&(e?a.reject(e):a.resolve(),r=r.remove(t)),s.Wa[s.currentUser.toKey()]=r}}function Fl(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.qa.get(t))n.ka.delete(s),e&&n.La.Ja(s,e);n.qa.delete(t),n.isPrimaryClient&&n.Ka.br(t).forEach(s=>{n.Ka.containsKey(s)||Cm(n,s)})}function Cm(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(Pc(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ua.delete(e),Nc(n))}function jf(n,t,e){for(const s of e)s instanceof Tm?(n.Ka.addReference(s.key,t),Cw(n,s)):s instanceof wm?(at(kc,"Document no longer in limbo: "+s.key),n.Ka.removeReference(s.key,t),n.Ka.containsKey(s.key)||Cm(n,s.key)):wt()}function Cw(n,t){const e=t.key,s=e.path.canonicalString();n.$a.get(e)||n.Qa.has(s)||(at(kc,"New document in limbo: "+e),n.Qa.add(s),Nc(n))}function Nc(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new gt(fe.fromString(t)),s=n.za.next();n.Ua.set(s,new _w(e)),n.$a=n.$a.insert(e,s),mm(n.remoteStore,new Ci(Hn(Bp(e.path)),s,"TargetPurposeLimboResolution",wu.ae))}}async function ko(n,t,e){const s=St(n),r=[],a=[],c=[];s.ka.isEmpty()||(s.ka.forEach((h,p)=>{c.push(s.Ha(p,t,e).then(g=>{var v;if((g||e)&&s.isPrimaryClient){const I=g?!g.fromCache:(v=e==null?void 0:e.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(g){r.push(g);const I=Sc.Yi(p.targetId,g);a.push(I)}}))}),await Promise.all(c),s.La.p_(r),await async function(p,g){const v=St(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>$.forEach(g,R=>$.forEach(R.Hi,V=>v.persistence.referenceDelegate.addReference(I,R.targetId,V)).next(()=>$.forEach(R.Ji,V=>v.persistence.referenceDelegate.removeReference(I,R.targetId,V)))))}catch(I){if(!Er(I))throw I;at(Cc,"Failed to update sequence numbers: "+I)}for(const I of g){const R=I.targetId;if(!I.fromCache){const V=v.Ts.get(R),z=V.snapshotVersion,G=V.withLastLimboFreeSnapshotVersion(z);v.Ts=v.Ts.insert(R,G)}}}(s.localStore,a))}async function Pw(n,t){const e=St(n);if(!e.currentUser.isEqual(t)){at(kc,"User change. New user:",t.toKey());const s=await hm(e.localStore,t);e.currentUser=t,function(a,c){a.Ga.forEach(h=>{h.forEach(p=>{p.reject(new mt(Q.CANCELLED,c))})}),a.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await ko(e,s.Rs)}}function xw(n,t){const e=St(n),s=e.Ua.get(t);if(s&&s.Ba)return Bt().add(s.key);{let r=Bt();const a=e.qa.get(t);if(!a)return r;for(const c of a){const h=e.ka.get(c);r=r.unionWith(h.view.Sa)}return r}}function Pm(n){const t=St(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Am.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Aw.bind(null,t),t.La.p_=hw.bind(null,t.eventManager),t.La.Ja=fw.bind(null,t.eventManager),t}function Rw(n){const t=St(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sw.bind(null,t),t}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Lu(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return LT(this.persistence,new PT,t.initialUser,this.serializer)}Xa(t){return new cm(bc.ri,this.serializer)}Za(t){return new FT}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class Lw extends uu{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){Yt(this.persistence.referenceDelegate instanceof ou);const s=this.persistence.referenceDelegate.garbageCollector;return new dT(s,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new cm(s=>ou.ri(s,e),this.serializer)}}class Bl{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>$f(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pw.bind(null,this.syncEngine),await ow(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new uw}()}createDatastore(t){const e=Lu(t.databaseInfo.databaseId),s=function(a){return new GT(a)}(t.databaseInfo);return function(a,c,h,p){return new qT(a,c,h,p)}(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return function(s,r,a,c,h){return new WT(s,r,a,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>$f(this.syncEngine,e,0),function(){return Bf.D()?new Bf:new BT}())}createSyncEngine(t,e){return function(r,a,c,h,p,g,v){const I=new gw(r,a,c,h,p,g);return v&&(I.ja=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const a=St(r);at(ms,"RemoteStore shutting down."),a.W_.add(5),await Do(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Bl.provider={build:()=>new Bl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):fi("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="FirestoreClient";class Mw{constructor(t,e,s,r,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=r,this.user=ze.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async c=>{at(zi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(at(zi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=Mc(e,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function tl(n,t){n.asyncQueue.verifyOperationInProgress(),at(zi,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await hm(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function qf(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Dw(n);at(zi,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(s=>zf(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>zf(t.remoteStore,r)),n._onlineComponents=t}async function Dw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){at(zi,"Using user provided OfflineComponentProvider");try{await tl(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;ur("Error using user provided cache. Falling back to memory cache: "+e),await tl(n,new uu)}}else at(zi,"Using default OfflineComponentProvider"),await tl(n,new Lw(void 0));return n._offlineComponents}async function xm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(at(zi,"Using user provided OnlineComponentProvider"),await qf(n,n._uninitializedComponentsProvider._online)):(at(zi,"Using default OnlineComponentProvider"),await qf(n,new Bl))),n._onlineComponents}function kw(n){return xm(n).then(t=>t.syncEngine)}async function Nw(n){const t=await xm(n),e=t.eventManager;return e.onListen=yw.bind(null,t.syncEngine),e.onUnlisten=Tw.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=vw.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=ww.bind(null,t.syncEngine),e}function Vw(n,t,e={}){const s=new Oi;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,h,p,g){const v=new Ow({next:R=>{v.su(),c.enqueueAndForget(()=>cw(a,I)),R.fromCache&&p.source==="server"?g.reject(new mt(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),I=new dw(h,v,{includeMetadataChanges:!0,Ta:!0});return lw(a,I)}(await Nw(n),n.asyncQueue,t,e,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(n,t,e){if(!e)throw new mt(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Fw(n,t,e,s){if(t===!0&&s===!0)throw new mt(Q.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Wf(n){if(!gt.isDocumentKey(n))throw new mt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Qf(n){if(gt.isDocumentKey(n))throw new mt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":wt()}function lu(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new mt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Vc(n);throw new mt(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="firestore.googleapis.com",Yf=!0;class Jf{constructor(t){var e,s;if(t.host===void 0){if(t.ssl!==void 0)throw new mt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Om,this.ssl=Yf}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Yf;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=lm;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<hT)throw new mt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Fw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rm((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new mt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new mt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new mt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Du{constructor(t,e,s,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new zE;switch(s.type){case"firstParty":return new $E(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new mt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=Zf.get(e);s&&(at("ComponentProvider","Removing Datastore"),Zf.delete(e),s.terminate())}(this),Promise.resolve()}}function Bw(n,t,e,s={}){var r;const a=(n=lu(n,Du))._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),h=`${t}:${e}`;a.host!==Om&&a.host!==h&&ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},a),{host:h,ssl:!1,emulatorOptions:s});if(!Wa(p,c)&&(n._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=ze.MOCK_USER;else{g=yv(s.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new mt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ze(I)}n._authCredentials=new HE(new Ep(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ku(this.firestore,t,this._query)}}class Ln{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ln(this.firestore,t,this._key)}}class Mi extends ku{constructor(t,e,s){super(t,e,Bp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ln(this.firestore,null,new gt(t))}withConverter(t){return new Mi(this.firestore,t,this._path)}}function Fc(n,t,...e){if(n=wo(n),Lm("collection","path",t),n instanceof Du){const s=fe.fromString(t,...e);return Qf(s),new Mi(n,null,s)}{if(!(n instanceof Ln||n instanceof Mi))throw new mt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(fe.fromString(t,...e));return Qf(s),new Mi(n.firestore,null,s)}}function Uw(n,t,...e){if(n=wo(n),arguments.length===1&&(t=wp.newId()),Lm("doc","path",t),n instanceof Du){const s=fe.fromString(t,...e);return Wf(s),new Ln(n,null,new gt(s))}{if(!(n instanceof Ln||n instanceof Mi))throw new mt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(fe.fromString(t,...e));return Wf(s),new Ln(n.firestore,n instanceof Mi?n.converter:null,new gt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="AsyncQueue";class td{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new dm(this,"async_queue_retry"),this.Su=()=>{const s=Xu();s&&at(Xf,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=t;const e=Xu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Xu();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Oi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Er(t))throw t;at(Xf,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const r=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(s);throw fi("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.pu=!1,s))));return this.bu=e,e}enqueueAfterDelay(t,e,s){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const r=Oc.createAndSchedule(this,t,e,s,a=>this.Fu(a));return this.fu.push(r),r}Du(){this.gu&&wt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,s)=>e.targetTimeMs-s.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class Bc extends Du{constructor(t,e,s,r){super(t,e,s,r),this.type="firestore",this._queue=new td,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new td(t),this._firestoreClient=void 0,await t}}}function zw(n,t){const e=typeof n=="object"?n:PE(),s=typeof n=="string"?n:Xa,r=IE(e,"firestore").getImmediate({identifier:s});if(!r._initialized){const a=_v("firestore");a&&Bw(r,...a)}return r}function Mm(n){if(n._terminated)throw new mt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Hw(n),n._firestoreClient}function Hw(n){var t,e,s;const r=n._freezeSettings(),a=function(h,p,g,v){return new o0(h,p,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Rm(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Mw(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new pr(Fe.fromBase64String(t))}catch(e){throw new mt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new pr(Fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new mt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new mt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Lt(this._lat,t._lat)||Lt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==r[a])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=/^__.*__$/;class Kw{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new vs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Oo(t,this.data,e,this.fieldTransforms)}}function km(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class Gc{constructor(t,e,s,r,a,c){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=r,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Gc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.$u(t),r}Uu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.Bu(),r}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return cu(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(km(this.Lu)&&Gw.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class $w{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Lu(t)}ju(t,e,s,r=!1){return new Gc({Lu:t,methodName:e,zu:s,path:Ve.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jw(n){const t=n._freezeSettings(),e=Lu(n._databaseId);return new $w(n._databaseId,!!t.ignoreUndefinedProperties,e)}function qw(n,t,e,s,r,a={}){const c=n.ju(a.merge||a.mergeFields?2:0,t,e,r);Bm("Data must be an object, but it was:",c,s);const h=Vm(s,c);let p,g;if(a.merge)p=new xn(c.fieldMask),g=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const I of a.mergeFields){const R=Zw(t,I,e);if(!c.contains(R))throw new mt(Q.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Qw(v,R)||v.push(R)}p=new xn(v),g=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,g=c.fieldTransforms;return new Kw(new yn(h),p,g)}function Nm(n,t){if(Fm(n=wo(n)))return Bm("Unsupported field value:",t,n),Vm(n,t);if(n instanceof Dm)return function(s,r){if(!km(r.Lu))throw r.Wu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,r){const a=[];let c=0;for(const h of s){let p=Nm(h,r.Ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,t)}return function(s,r){if((s=wo(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return R0(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Ce.fromDate(s);return{timestampValue:ru(r.serializer,a)}}if(s instanceof Ce){const a=new Ce(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ru(r.serializer,a)}}if(s instanceof zc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof pr)return{bytesValue:nm(r.serializer,s._byteString)};if(s instanceof Ln){const a=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(a))throw r.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ic(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Hc)return function(c,h){return{mapValue:{fields:{[Rp]:{stringValue:Lp},[tu]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Wu("VectorValues must only contain numeric values.");return Ec(h.serializer,g)})}}}}}}(s,r);throw r.Wu(`Unsupported field value: ${Vc(s)}`)}(n,t)}function Vm(n,t){const e={};return Ap(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gs(n,(s,r)=>{const a=Nm(r,t.qu(s));a!=null&&(e[s]=a)}),{mapValue:{fields:e}}}function Fm(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ce||n instanceof zc||n instanceof pr||n instanceof Ln||n instanceof Dm||n instanceof Hc)}function Bm(n,t,e){if(!Fm(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const s=Vc(e);throw s==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+s)}}function Zw(n,t,e){if((t=wo(t))instanceof Uc)return t._internalPath;if(typeof t=="string")return Um(n,t);throw cu("Field path arguments must be of type string or ",n,!1,void 0,e)}const Ww=new RegExp("[~\\*/\\[\\]]");function Um(n,t,e){if(t.search(Ww)>=0)throw cu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Uc(...t.split("."))._internalPath}catch{throw cu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function cu(n,t,e,s,r){const a=s&&!s.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${s}`),c&&(p+=` in document ${r}`),p+=")"),new mt(Q.INVALID_ARGUMENT,h+n+p)}function Qw(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,e,s,r,a){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Yw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Hm("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Yw extends zm{data(){return super.data()}}function Hm(n,t){return typeof t=="string"?Um(n,t):t instanceof Uc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new mt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xw{convertValue(t,e="none"){switch(Bi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Fi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw wt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return gs(t,(r,a)=>{s[r]=this.convertValue(a,e)}),s}convertVectorValue(t){var e,s,r;const a=(r=(s=(e=t.fields)===null||e===void 0?void 0:e[tu].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(c=>ve(c.doubleValue));return new Hc(a)}convertGeoPoint(t){return new zc(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(s=>this.convertValue(s,e))}convertServerTimestamp(t,e){switch(e){case"previous":const s=Au(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(So(t));default:return null}}convertTimestamp(t){const e=Vi(t);return new Ce(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=fe.fromString(t);Yt(um(s));const r=new Co(s.get(1),s.get(3)),a=new gt(s.popFirst(5));return r.isEqual(e)||fi(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(n,t,e){let s;return s=n?n.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class e1 extends zm{constructor(t,e,s,r,a,c){super(t,e,s,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Hm("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}}class Na extends e1{data(t={}){return super.data(t)}}class n1{constructor(t,e,s,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Sa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(s=>{t.call(e,new Na(this._firestore,this._userDataWriter,s.key,s,new Sa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const p=new Na(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Sa(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const p=new Na(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Sa(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:i1(h.type),doc:p,oldIndex:g,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function i1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}class s1 extends Xw{constructor(t){super(),this.firestore=t}convertBytes(t){return new pr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ln(this.firestore,null,e)}}function Gm(n){n=lu(n,ku);const t=lu(n.firestore,Bc),e=Mm(t),s=new s1(t);return Jw(n._query),Vw(e,n._query).then(r=>new n1(t,s,n,r))}function r1(n,t){const e=lu(n.firestore,Bc),s=Uw(n),r=t1(n.converter,t);return o1(e,[qw(jw(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,li.exists(!1))]).then(()=>s)}function o1(n,t){return function(s,r){const a=new Oi;return s.asyncQueue.enqueueAndForget(async()=>Iw(await kw(s),r,a)),a.promise}(Mm(n),t)}(function(t,e=!0){(function(r){yr=r})(CE),Ya(new Io("firestore",(s,{instanceIdentifier:r,options:a})=>{const c=s.getProvider("app").getImmediate(),h=new Bc(new GE(s.getProvider("auth-internal")),new jE(c,s.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new mt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(g.options.projectId,v)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),ir(of,af,t),ir(of,af,"esm2017")})();const a1={apiKey:void 0,authDomain:"find-my-company-30652.firebaseapp.com",projectId:"find-my-company-30652",storageBucket:"find-my-company-30652.firebasestorage.app",messagingSenderId:"563118719650",appId:"1:563118719650:web:ebaaf3d949d66323168dfb",measurementId:"G-LYWPQXCMYB"},u1=hp(a1),Kc=zw(u1),jn=(n,t)=>{const e=n.__vccOpts||n;for(const[s,r]of t)e[s]=r;return e},l1={class:"modal-content"},c1={props:{isOpen:Boolean},emits:["close"],setup(n,{emit:t}){return(e,s)=>(Rt(),Lo(zd,{to:"body"},[n.isOpen?(Rt(),Kt("div",{key:0,class:"modal-overlay",onClick:s[1]||(s[1]=hc(r=>t("close"),["self"]))},[nt("div",l1,[nt("button",{class:"modal-close",onClick:s[0]||(s[0]=r=>t("close"))},"×"),$d(e.$slots,"default",{},void 0)])])):Cn("",!0)]))}},h1=jn(c1,[["__scopeId","data-v-e7136a1e"]]);function Km(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var oo={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var f1=oo.exports,ed;function d1(){return ed||(ed=1,function(n,t){(function(e,s){s(t)})(f1,function(e){var s="1.9.4";function r(i){var o,l,f,m;for(l=1,f=arguments.length;l<f;l++){m=arguments[l];for(o in m)i[o]=m[o]}return i}var a=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function c(i,o){var l=Array.prototype.slice;if(i.bind)return i.bind.apply(i,l.call(arguments,1));var f=l.call(arguments,2);return function(){return i.apply(o,f.length?f.concat(l.call(arguments)):arguments)}}var h=0;function p(i){return"_leaflet_id"in i||(i._leaflet_id=++h),i._leaflet_id}function g(i,o,l){var f,m,y,b;return b=function(){f=!1,m&&(y.apply(l,m),m=!1)},y=function(){f?m=arguments:(i.apply(l,arguments),setTimeout(b,o),f=!0)},y}function v(i,o,l){var f=o[1],m=o[0],y=f-m;return i===f&&l?i:((i-m)%y+y)%y+m}function I(){return!1}function R(i,o){if(o===!1)return i;var l=Math.pow(10,o===void 0?6:o);return Math.round(i*l)/l}function V(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function z(i){return V(i).split(/\s+/)}function G(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var l in o)i.options[l]=o[l];return i.options}function H(i,o,l){var f=[];for(var m in i)f.push(encodeURIComponent(l?m.toUpperCase():m)+"="+encodeURIComponent(i[m]));return(!o||o.indexOf("?")===-1?"?":"&")+f.join("&")}var it=/\{ *([\w_ -]+) *\}/g;function ct(i,o){return i.replace(it,function(l,f){var m=o[f];if(m===void 0)throw new Error("No value provided for variable "+l);return typeof m=="function"&&(m=m(o)),m})}var lt=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function _t(i,o){for(var l=0;l<i.length;l++)if(i[l]===o)return l;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var P=0;function T(i){var o=+new Date,l=Math.max(0,16-(o-P));return P=o+l,window.setTimeout(i,l)}var w=window.requestAnimationFrame||Y("RequestAnimationFrame")||T,C=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function x(i,o,l){if(l&&w===T)i.call(o);else return w.call(window,c(i,o))}function M(i){i&&C.call(window,i)}var A={__proto__:null,extend:r,create:a,bind:c,get lastId(){return h},stamp:p,throttle:g,wrapNum:v,falseFn:I,formatNum:R,trim:V,splitWords:z,setOptions:G,getParamString:H,template:ct,isArray:lt,indexOf:_t,emptyImageUrl:K,requestFn:w,cancelFn:C,requestAnimFrame:x,cancelAnimFrame:M};function _e(){}_e.extend=function(i){var o=function(){G(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=o.__super__=this.prototype,f=a(l);f.constructor=o,o.prototype=f;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return i.statics&&r(o,i.statics),i.includes&&(vn(i.includes),r.apply(null,[f].concat(i.includes))),r(f,i),delete f.statics,delete f.includes,f.options&&(f.options=l.options?a(l.options):{},r(f.options,i.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,b=f._initHooks.length;y<b;y++)f._initHooks[y].call(this)}},o},_e.include=function(i){var o=this.prototype.options;return r(this.prototype,i),i.options&&(this.prototype.options=o,this.mergeOptions(i.options)),this},_e.mergeOptions=function(i){return r(this.prototype.options,i),this},_e.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),l=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function vn(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=lt(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Zt={on:function(i,o,l){if(typeof i=="object")for(var f in i)this._on(f,i[f],o);else{i=z(i);for(var m=0,y=i.length;m<y;m++)this._on(i[m],o,l)}return this},off:function(i,o,l){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var f in i)this._off(f,i[f],o);else{i=z(i);for(var m=arguments.length===1,y=0,b=i.length;y<b;y++)m?this._off(i[y]):this._off(i[y],o,l)}return this},_on:function(i,o,l,f){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(i,o,l)===!1){l===this&&(l=void 0);var m={fn:o,ctx:l};f&&(m.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(m)}},_off:function(i,o,l){var f,m,y;if(this._events&&(f=this._events[i],!!f)){if(arguments.length===1){if(this._firingCount)for(m=0,y=f.length;m<y;m++)f[m].fn=I;delete this._events[i];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var b=this._listens(i,o,l);if(b!==!1){var k=f[b];this._firingCount&&(k.fn=I,this._events[i]=f=f.slice()),f.splice(b,1)}}},fire:function(i,o,l){if(!this.listens(i,l))return this;var f=r({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[i];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,b=m.length;y<b;y++){var k=m[y],F=k.fn;k.once&&this.off(i,F,k.ctx),F.call(k.ctx||this,f)}this._firingCount--}}return l&&this._propagateEvent(f),this},listens:function(i,o,l,f){typeof i!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(f=!!o,m=void 0,l=void 0);var y=this._events&&this._events[i];if(y&&y.length&&this._listens(i,m,l)!==!1)return!0;if(f){for(var b in this._eventParents)if(this._eventParents[b].listens(i,o,l,f))return!0}return!1},_listens:function(i,o,l){if(!this._events)return!1;var f=this._events[i]||[];if(!o)return!!f.length;l===this&&(l=void 0);for(var m=0,y=f.length;m<y;m++)if(f[m].fn===o&&f[m].ctx===l)return m;return!1},once:function(i,o,l){if(typeof i=="object")for(var f in i)this._on(f,i[f],o,!0);else{i=z(i);for(var m=0,y=i.length;m<y;m++)this._on(i[m],o,l,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[p(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[p(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,r({layer:i.target,propagatedFrom:i.target},i),!0)}};Zt.addEventListener=Zt.on,Zt.removeEventListener=Zt.clearAllEventListeners=Zt.off,Zt.addOneTimeEventListener=Zt.once,Zt.fireEvent=Zt.fire,Zt.hasEventListeners=Zt.listens;var Ut=_e.extend(Zt);function rt(i,o,l){this.x=l?Math.round(i):i,this.y=l?Math.round(o):o}var Be=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};rt.prototype={clone:function(){return new rt(this.x,this.y)},add:function(i){return this.clone()._add(yt(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(yt(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new rt(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new rt(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Be(this.x),this.y=Be(this.y),this},distanceTo:function(i){i=yt(i);var o=i.x-this.x,l=i.y-this.y;return Math.sqrt(o*o+l*l)},equals:function(i){return i=yt(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=yt(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function yt(i,o,l){return i instanceof rt?i:lt(i)?new rt(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new rt(i.x,i.y):new rt(i,o,l)}function qt(i,o){if(i)for(var l=o?[i,o]:i,f=0,m=l.length;f<m;f++)this.extend(l[f])}qt.prototype={extend:function(i){var o,l;if(!i)return this;if(i instanceof rt||typeof i[0]=="number"||"x"in i)o=l=yt(i);else if(i=Wt(i),o=i.min,l=i.max,!o||!l)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=l.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(i){return yt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return yt(this.min.x,this.max.y)},getTopRight:function(){return yt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,l;return typeof i[0]=="number"||i instanceof rt?i=yt(i):i=Wt(i),i instanceof qt?(o=i.min,l=i.max):o=l=i,o.x>=this.min.x&&l.x<=this.max.x&&o.y>=this.min.y&&l.y<=this.max.y},intersects:function(i){i=Wt(i);var o=this.min,l=this.max,f=i.min,m=i.max,y=m.x>=o.x&&f.x<=l.x,b=m.y>=o.y&&f.y<=l.y;return y&&b},overlaps:function(i){i=Wt(i);var o=this.min,l=this.max,f=i.min,m=i.max,y=m.x>o.x&&f.x<l.x,b=m.y>o.y&&f.y<l.y;return y&&b},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var o=this.min,l=this.max,f=Math.abs(o.x-l.x)*i,m=Math.abs(o.y-l.y)*i;return Wt(yt(o.x-f,o.y-m),yt(l.x+f,l.y+m))},equals:function(i){return i?(i=Wt(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Wt(i,o){return!i||i instanceof qt?i:new qt(i,o)}function xt(i,o){if(i)for(var l=o?[i,o]:i,f=0,m=l.length;f<m;f++)this.extend(l[f])}xt.prototype={extend:function(i){var o=this._southWest,l=this._northEast,f,m;if(i instanceof Vt)f=i,m=i;else if(i instanceof xt){if(f=i._southWest,m=i._northEast,!f||!m)return this}else return i?this.extend(Ot(i)||ue(i)):this;return!o&&!l?(this._southWest=new Vt(f.lat,f.lng),this._northEast=new Vt(m.lat,m.lng)):(o.lat=Math.min(f.lat,o.lat),o.lng=Math.min(f.lng,o.lng),l.lat=Math.max(m.lat,l.lat),l.lng=Math.max(m.lng,l.lng)),this},pad:function(i){var o=this._southWest,l=this._northEast,f=Math.abs(o.lat-l.lat)*i,m=Math.abs(o.lng-l.lng)*i;return new xt(new Vt(o.lat-f,o.lng-m),new Vt(l.lat+f,l.lng+m))},getCenter:function(){return new Vt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Vt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Vt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Vt||"lat"in i?i=Ot(i):i=ue(i);var o=this._southWest,l=this._northEast,f,m;return i instanceof xt?(f=i.getSouthWest(),m=i.getNorthEast()):f=m=i,f.lat>=o.lat&&m.lat<=l.lat&&f.lng>=o.lng&&m.lng<=l.lng},intersects:function(i){i=ue(i);var o=this._southWest,l=this._northEast,f=i.getSouthWest(),m=i.getNorthEast(),y=m.lat>=o.lat&&f.lat<=l.lat,b=m.lng>=o.lng&&f.lng<=l.lng;return y&&b},overlaps:function(i){i=ue(i);var o=this._southWest,l=this._northEast,f=i.getSouthWest(),m=i.getNorthEast(),y=m.lat>o.lat&&f.lat<l.lat,b=m.lng>o.lng&&f.lng<l.lng;return y&&b},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=ue(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(i,o){return i instanceof xt?i:new xt(i,o)}function Vt(i,o,l){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,l!==void 0&&(this.alt=+l)}Vt.prototype={equals:function(i,o){if(!i)return!1;i=Ot(i);var l=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return l<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+R(this.lat,i)+", "+R(this.lng,i)+")"},distanceTo:function(i){return Ke.distance(this,Ot(i))},wrap:function(){return Ke.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,l=o/Math.cos(Math.PI/180*this.lat);return ue([this.lat-o,this.lng-l],[this.lat+o,this.lng+l])},clone:function(){return new Vt(this.lat,this.lng,this.alt)}};function Ot(i,o,l){return i instanceof Vt?i:lt(i)&&typeof i[0]!="object"?i.length===3?new Vt(i[0],i[1],i[2]):i.length===2?new Vt(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Vt(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new Vt(i,o,l)}var le={latLngToPoint:function(i,o){var l=this.projection.project(i),f=this.scale(o);return this.transformation._transform(l,f)},pointToLatLng:function(i,o){var l=this.scale(o),f=this.transformation.untransform(i,l);return this.projection.unproject(f)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,l=this.scale(i),f=this.transformation.transform(o.min,l),m=this.transformation.transform(o.max,l);return new qt(f,m)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?v(i.lng,this.wrapLng,!0):i.lng,l=this.wrapLat?v(i.lat,this.wrapLat,!0):i.lat,f=i.alt;return new Vt(l,o,f)},wrapLatLngBounds:function(i){var o=i.getCenter(),l=this.wrapLatLng(o),f=o.lat-l.lat,m=o.lng-l.lng;if(f===0&&m===0)return i;var y=i.getSouthWest(),b=i.getNorthEast(),k=new Vt(y.lat-f,y.lng-m),F=new Vt(b.lat-f,b.lng-m);return new xt(k,F)}},Ke=r({},le,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var l=Math.PI/180,f=i.lat*l,m=o.lat*l,y=Math.sin((o.lat-i.lat)*l/2),b=Math.sin((o.lng-i.lng)*l/2),k=y*y+Math.cos(f)*Math.cos(m)*b*b,F=2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k));return this.R*F}}),Gi=6378137,Qe={R:Gi,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,l=this.MAX_LATITUDE,f=Math.max(Math.min(l,i.lat),-l),m=Math.sin(f*o);return new rt(this.R*i.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(i){var o=180/Math.PI;return new Vt((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=Gi*Math.PI;return new qt([-i,-i],[i,i])}()};function qn(i,o,l,f){if(lt(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=l,this._d=f}qn.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new rt((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function S(i,o,l,f){return new qn(i,o,l,f)}var O=r({},Ke,{code:"EPSG:3857",projection:Qe,transformation:function(){var i=.5/(Math.PI*Qe.R);return S(i,.5,-i,.5)}()}),U=r({},O,{code:"EPSG:900913"});function j(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function q(i,o){var l="",f,m,y,b,k,F;for(f=0,y=i.length;f<y;f++){for(k=i[f],m=0,b=k.length;m<b;m++)F=k[m],l+=(m?"L":"M")+F.x+" "+F.y;l+=o?dt.svg?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,st="ActiveXObject"in window,J=st&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),W=cn("webkit"),ft=cn("android"),ut=cn("android 2")||cn("android 3"),ht=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vt=ft&&cn("Google")&&ht<537&&!("AudioNode"in window),pt=!!window.opera,Ct=!tt&&cn("chrome"),zt=cn("gecko")&&!W&&!pt&&!st,ne=!Ct&&cn("safari"),De=cn("phantom"),En="OTransition"in X,On=navigator.platform.indexOf("Win")===0,Tn=st&&"transition"in X,Zn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ut,Te="MozPerspective"in X,Ye=!window.L_DISABLE_3D&&(Tn||Zn||Te)&&!En&&!De,Mn=typeof orientation<"u"||cn("mobile"),wr=Mn&&W,Vo=Mn&&Zn,Ir=!window.PointerEvent&&window.MSPointerEvent,mi=!!(window.PointerEvent||Ir),Ts="ontouchstart"in window||!!window.TouchEvent,Ar=!window.L_NO_TOUCH&&(Ts||mi),Wn=Mn&&pt,Fo=Mn&&zt,ws=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Bo=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",I,o),window.removeEventListener("testPassiveEventSupport",I,o)}catch{}return i}(),Ki=function(){return!!document.createElement("canvas").getContext}(),Is=!!(document.createElementNS&&j("svg").createSVGRect),ke=!!Is&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Uo=!Is&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),$i=navigator.platform.indexOf("Mac")===0,ji=navigator.platform.indexOf("Linux")===0;function cn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var dt={ie:st,ielt9:J,edge:tt,webkit:W,android:ft,android23:ut,androidStock:vt,opera:pt,chrome:Ct,gecko:zt,safari:ne,phantom:De,opera12:En,win:On,ie3d:Tn,webkit3d:Zn,gecko3d:Te,any3d:Ye,mobile:Mn,mobileWebkit:wr,mobileWebkit3d:Vo,msPointer:Ir,pointer:mi,touch:Ar,touchNative:Ts,mobileOpera:Wn,mobileGecko:Fo,retina:ws,passiveEvents:Bo,canvas:Ki,svg:Is,vml:Uo,inlineSvg:ke,mac:$i,linux:ji},Qn=dt.msPointer?"MSPointerDown":"pointerdown",zo=dt.msPointer?"MSPointerMove":"pointermove",Ho=dt.msPointer?"MSPointerUp":"pointerup",qi=dt.msPointer?"MSPointerCancel":"pointercancel",As={touchstart:Qn,touchmove:zo,touchend:Ho,touchcancel:qi},bs={touchstart:Cs,touchmove:Ss,touchend:Ss,touchcancel:Ss},wn={},In=!1;function Go(i,o,l){return o==="touchstart"&&$o(),bs[o]?(l=bs[o].bind(this,l),i.addEventListener(As[o],l,!1),l):(console.warn("wrong event specified:",o),I)}function Ko(i,o,l){if(!As[o]){console.warn("wrong event specified:",o);return}i.removeEventListener(As[o],l,!1)}function br(i){wn[i.pointerId]=i}function Sr(i){wn[i.pointerId]&&(wn[i.pointerId]=i)}function Cr(i){delete wn[i.pointerId]}function $o(){In||(document.addEventListener(Qn,br,!0),document.addEventListener(zo,Sr,!0),document.addEventListener(Ho,Cr,!0),document.addEventListener(qi,Cr,!0),In=!0)}function Ss(i,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var l in wn)o.touches.push(wn[l]);o.changedTouches=[o],i(o)}}function Cs(i,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&de(o),Ss(i,o)}function jo(i){var o={},l,f;for(f in i)l=i[f],o[f]=l&&l.bind?l.bind(i):l;return i=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Pr=200;function Zi(i,o){i.addEventListener("dblclick",o);var l=0,f;function m(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var b=Ur(y);if(!(b.some(function(F){return F instanceof HTMLLabelElement&&F.attributes.for})&&!b.some(function(F){return F instanceof HTMLInputElement||F instanceof HTMLSelectElement}))){var k=Date.now();k-l<=Pr?(f++,f===2&&o(jo(y))):f=1,l=k}}}return i.addEventListener("click",m),{dblclick:o,simDblclick:m}}function Yn(i,o){i.removeEventListener("dblclick",o.dblclick),i.removeEventListener("click",o.simDblclick)}var Wi=Xn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qi=Xn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xr=Qi==="webkitTransition"||Qi==="OTransition"?Qi+"End":"transitionend";function Rr(i){return typeof i=="string"?document.getElementById(i):i}function _i(i,o){var l=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!l||l==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(i,null);l=f?f[o]:null}return l==="auto"?null:l}function Ft(i,o,l){var f=document.createElement(i);return f.className=o||"",l&&l.appendChild(f),f}function ie(i){var o=i.parentNode;o&&o.removeChild(i)}function Yi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Jn(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function gi(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function Lr(i,o){if(i.classList!==void 0)return i.classList.contains(o);var l=hn(i);return l.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(l)}function Pt(i,o){if(i.classList!==void 0)for(var l=z(o),f=0,m=l.length;f<m;f++)i.classList.add(l[f]);else if(!Lr(i,o)){var y=hn(i);Or(i,(y?y+" ":"")+o)}}function ce(i,o){i.classList!==void 0?i.classList.remove(o):Or(i,V((" "+hn(i)+" ").replace(" "+o+" "," ")))}function Or(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function hn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function ge(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&Ps(i,o)}function Ps(i,o){var l=!1,f="DXImageTransform.Microsoft.Alpha";try{l=i.filters.item(f)}catch{if(o===1)return}o=Math.round(o*100),l?(l.Enabled=o!==100,l.Opacity=o):i.style.filter+=" progid:"+f+"(opacity="+o+")"}function Xn(i){for(var o=document.documentElement.style,l=0;l<i.length;l++)if(i[l]in o)return i[l];return!1}function Dn(i,o,l){var f=o||new rt(0,0);i.style[Wi]=(dt.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(l?" scale("+l+")":"")}function It(i,o){i._leaflet_pos=o,dt.any3d?Dn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function fn(i){return i._leaflet_pos||new rt(0,0)}var An,bn,Mr;if("onselectstart"in document)An=function(){Et(window,"selectstart",de)},bn=function(){te(window,"selectstart",de)};else{var yi=Xn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);An=function(){if(yi){var i=document.documentElement.style;Mr=i[yi],i[yi]="none"}},bn=function(){yi&&(document.documentElement.style[yi]=Mr,Mr=void 0)}}function Dr(){Et(window,"dragstart",de)}function kr(){te(window,"dragstart",de)}var xs,Nr;function ti(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(sn(),xs=i,Nr=i.style.outlineStyle,i.style.outlineStyle="none",Et(window,"keydown",sn))}function sn(){xs&&(xs.style.outlineStyle=Nr,xs=void 0,Nr=void 0,te(window,"keydown",sn))}function Vr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Rs(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var qo={__proto__:null,TRANSFORM:Wi,TRANSITION:Qi,TRANSITION_END:xr,get:Rr,getStyle:_i,create:Ft,remove:ie,empty:Yi,toFront:Jn,toBack:gi,hasClass:Lr,addClass:Pt,removeClass:ce,setClass:Or,getClass:hn,setOpacity:ge,testProp:Xn,setTransform:Dn,setPosition:It,getPosition:fn,get disableTextSelection(){return An},get enableTextSelection(){return bn},disableImageDrag:Dr,enableImageDrag:kr,preventOutline:ti,restoreOutline:sn,getSizedParentNode:Vr,getScale:Rs};function Et(i,o,l,f){if(o&&typeof o=="object")for(var m in o)Fr(i,m,o[m],l);else{o=z(o);for(var y=0,b=o.length;y<b;y++)Fr(i,o[y],l,f)}return this}var dn="_leaflet_events";function te(i,o,l,f){if(arguments.length===1)Zo(i),delete i[dn];else if(o&&typeof o=="object")for(var m in o)Br(i,m,o[m],l);else if(o=z(o),arguments.length===2)Zo(i,function(k){return _t(o,k)!==-1});else for(var y=0,b=o.length;y<b;y++)Br(i,o[y],l,f);return this}function Zo(i,o){for(var l in i[dn]){var f=l.split(/\d/)[0];(!o||o(f))&&Br(i,f,null,null,l)}}var pn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fr(i,o,l,f){var m=o+p(l)+(f?"_"+p(f):"");if(i[dn]&&i[dn][m])return this;var y=function(k){return l.call(f||i,k||window.event)},b=y;!dt.touchNative&&dt.pointer&&o.indexOf("touch")===0?y=Go(i,o,y):dt.touch&&o==="dblclick"?y=Zi(i,y):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(pn[o]||o,y,dt.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(k){k=k||window.event,zr(i,k)&&b(k)},i.addEventListener(pn[o],y,!1)):i.addEventListener(o,b,!1):i.attachEvent("on"+o,y),i[dn]=i[dn]||{},i[dn][m]=y}function Br(i,o,l,f,m){m=m||o+p(l)+(f?"_"+p(f):"");var y=i[dn]&&i[dn][m];if(!y)return this;!dt.touchNative&&dt.pointer&&o.indexOf("touch")===0?Ko(i,o,y):dt.touch&&o==="dblclick"?Yn(i,y):"removeEventListener"in i?i.removeEventListener(pn[o]||o,y,!1):i.detachEvent("on"+o,y),i[dn][m]=null}function mn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function vi(i){return Fr(i,"wheel",mn),this}function Ei(i){return Et(i,"mousedown touchstart dblclick contextmenu",mn),i._leaflet_disable_click=!0,this}function de(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function rn(i){return de(i),mn(i),this}function Ur(i){if(i.composedPath)return i.composedPath();for(var o=[],l=i.target;l;)o.push(l),l=l.parentNode;return o}function Ls(i,o){if(!o)return new rt(i.clientX,i.clientY);var l=Rs(o),f=l.boundingClientRect;return new rt((i.clientX-f.left)/l.x-o.clientLeft,(i.clientY-f.top)/l.y-o.clientTop)}var he=dt.linux&&dt.chrome?window.devicePixelRatio:dt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wo(i){return dt.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/he:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function zr(i,o){var l=o.relatedTarget;if(!l)return!0;try{for(;l&&l!==i;)l=l.parentNode}catch{return!1}return l!==i}var Qo={__proto__:null,on:Et,off:te,stopPropagation:mn,disableScrollPropagation:vi,disableClickPropagation:Ei,preventDefault:de,stop:rn,getPropagationPath:Ur,getMousePosition:Ls,getWheelDelta:Wo,isExternalTarget:zr,addListener:Et,removeListener:te},Hr=Ut.extend({run:function(i,o,l,f){this.stop(),this._el=i,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=fn(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,l=this._duration*1e3;o<l?this._runFrame(this._easeOut(o/l),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var l=this._startPos.add(this._offset.multiplyBy(i));o&&l._round(),It(this._el,l),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Nt=Ut.extend({options:{crs:O,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=G(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Ot(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qi&&dt.any3d&&!dt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Et(this._proxy,xr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,l){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(Ot(i),o,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=r({animate:l.animate},l.zoom),l.pan=r({animate:l.animate,duration:l.duration},l.pan));var f=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,l.zoom):this._tryAnimatedPan(i,l.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o,l.pan&&l.pan.noMoveStart),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,l){var f=this.getZoomScale(o),m=this.getSize().divideBy(2),y=i instanceof rt?i:this.latLngToContainerPoint(i),b=y.subtract(m).multiplyBy(1-1/f),k=this.containerPointToLatLng(m.add(b));return this.setView(k,o,{zoom:l})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():ue(i);var l=yt(o.paddingTopLeft||o.padding||[0,0]),f=yt(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(i,!1,l.add(f));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:i.getCenter(),zoom:m};var y=f.subtract(l).divideBy(2),b=this.project(i.getSouthWest(),m),k=this.project(i.getNorthEast(),m),F=this.unproject(b.add(k).divideBy(2).add(y),m);return{center:F,zoom:m}},fitBounds:function(i,o){if(i=ue(i),!i.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(i,o);return this.setView(l.center,l.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=yt(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Hr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Pt(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,l,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,l){if(l=l||{},l.animate===!1||!dt.any3d)return this.setView(i,o,l);this._stop();var f=this.project(this.getCenter()),m=this.project(i),y=this.getSize(),b=this._zoom;i=Ot(i),o=o===void 0?b:o;var k=Math.max(y.x,y.y),F=k*this.getZoomScale(b,o),Z=m.distanceTo(f)||1,ot=1.42,Tt=ot*ot;function Mt(Ie){var fa=Ie?-1:1,O_=Ie?F:k,M_=F*F-k*k+fa*Tt*Tt*Z*Z,D_=2*O_*Tt*Z,Ku=M_/D_,yh=Math.sqrt(Ku*Ku+1)-Ku,k_=yh<1e-9?-18:Math.log(yh);return k_}function je(Ie){return(Math.exp(Ie)-Math.exp(-Ie))/2}function Re(Ie){return(Math.exp(Ie)+Math.exp(-Ie))/2}function gn(Ie){return je(Ie)/Re(Ie)}var Xe=Mt(0);function Ks(Ie){return k*(Re(Xe)/Re(Xe+ot*Ie))}function P_(Ie){return k*(Re(Xe)*gn(Xe+ot*Ie)-je(Xe))/Tt}function x_(Ie){return 1-Math.pow(1-Ie,1.5)}var R_=Date.now(),_h=(Mt(1)-Xe)/ot,L_=l.duration?1e3*l.duration:1e3*_h*.8;function gh(){var Ie=(Date.now()-R_)/L_,fa=x_(Ie)*_h;Ie<=1?(this._flyToFrame=x(gh,this),this._move(this.unproject(f.add(m.subtract(f).multiplyBy(P_(fa)/Z)),b),this.getScaleZoom(k/Ks(fa),b),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),gh.call(this),this},flyToBounds:function(i,o){var l=this._getBoundsCenterZoom(i,o);return this.flyTo(l.center,l.zoom,o)},setMaxBounds:function(i){return i=ue(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var l=this.getCenter(),f=this._limitCenter(l,this._zoom,ue(i));return l.equals(f)||this.panTo(f,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var l=yt(o.paddingTopLeft||o.padding||[0,0]),f=yt(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(i),b=this.getPixelBounds(),k=Wt([b.min.add(l),b.max.subtract(f)]),F=k.getSize();if(!k.contains(y)){this._enforcingBounds=!0;var Z=y.subtract(k.getCenter()),ot=k.extend(y).getSize().subtract(F);m.x+=Z.x<0?-ot.x:ot.x,m.y+=Z.y<0?-ot.y:ot.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=r({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),f=o.divideBy(2).round(),m=l.divideBy(2).round(),y=f.subtract(m);return!y.x&&!y.y?this:(i.animate&&i.pan?this.panBy(y):(i.pan&&this._rawPanBy(y),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=r({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),l=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,l,i):navigator.geolocation.getCurrentPosition(o,l,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var o=i.code,l=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var o=i.coords.latitude,l=i.coords.longitude,f=new Vt(o,l),m=f.toBounds(i.coords.accuracy*2),y=this._locateOptions;if(y.setView){var b=this.getBoundsZoom(m);this.setView(f,y.maxZoom?Math.min(b,y.maxZoom):b)}var k={latlng:f,bounds:m,timestamp:i.timestamp};for(var F in i.coords)typeof i.coords[F]=="number"&&(k[F]=i.coords[F]);this.fire("locationfound",k)}},addHandler:function(i,o){if(!o)return this;var l=this[i]=new o(this);return this._handlers.push(l),this.options[i]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ie(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var l="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),f=Ft("div",l,o||this._mapPane);return i&&(this._panes[i]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),l=this.unproject(i.getTopRight());return new xt(o,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,l){i=ue(i),l=yt(l||[0,0]);var f=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),b=i.getNorthWest(),k=i.getSouthEast(),F=this.getSize().subtract(l),Z=Wt(this.project(k,f),this.project(b,f)).getSize(),ot=dt.any3d?this.options.zoomSnap:1,Tt=F.x/Z.x,Mt=F.y/Z.y,je=o?Math.max(Tt,Mt):Math.min(Tt,Mt);return f=this.getScaleZoom(je,f),ot&&(f=Math.round(f/(ot/100))*(ot/100),f=o?Math.ceil(f/ot)*ot:Math.floor(f/ot)*ot),Math.max(m,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new rt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var l=this._getTopLeftPoint(i,o);return new qt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var l=this.options.crs;return o=o===void 0?this._zoom:o,l.scale(i)/l.scale(o)},getScaleZoom:function(i,o){var l=this.options.crs;o=o===void 0?this._zoom:o;var f=l.zoom(i*l.scale(o));return isNaN(f)?1/0:f},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Ot(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(yt(i),o)},layerPointToLatLng:function(i){var o=yt(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(Ot(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Ot(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ue(i))},distance:function(i,o){return this.options.crs.distance(Ot(i),Ot(o))},containerPointToLayerPoint:function(i){return yt(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return yt(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint(yt(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ot(i)))},mouseEventToContainerPoint:function(i){return Ls(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=Rr(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Et(o,"scroll",this._onScroll,this),this._containerId=p(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&dt.any3d,Pt(i,"leaflet-container"+(dt.touch?" leaflet-touch":"")+(dt.retina?" leaflet-retina":"")+(dt.ielt9?" leaflet-oldie":"")+(dt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=_i(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new rt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pt(i.markerPane,"leaflet-zoom-hide"),Pt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o,l){It(this._mapPane,new rt(0,0));var f=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,l)._move(i,o)._moveEnd(m),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,l,f){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),f?l&&l.pinch&&this.fire("zoom",l):((m||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){It(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[p(this._container)]=this;var o=i?te:Et;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),dt.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var l=[],f,m=o==="mouseout"||o==="mouseover",y=i.target||i.srcElement,b=!1;y;){if(f=this._targets[p(y)],f&&(o==="click"||o==="preclick")&&this._draggableMoved(f)){b=!0;break}if(f&&f.listens(o,!0)&&(m&&!zr(y,i)||(l.push(f),m))||y===this._container)break;y=y.parentNode}return!l.length&&!b&&!m&&this.listens(o,!0)&&(l=[this]),l},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var o=i.target||i.srcElement;if(!(!this._loaded||o._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(o))){var l=i.type;l==="mousedown"&&ti(o),this._fireDOMEvent(i,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,l){if(i.type==="click"){var f=r({},i);f.type="preclick",this._fireDOMEvent(f,f.type,l)}var m=this._findEventTargets(i,o);if(l){for(var y=[],b=0;b<l.length;b++)l[b].listens(o,!0)&&y.push(l[b]);m=y.concat(m)}if(m.length){o==="contextmenu"&&de(i);var k=m[0],F={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Z=k.getLatLng&&(!k._radius||k._radius<=10);F.containerPoint=Z?this.latLngToContainerPoint(k.getLatLng()):this.mouseEventToContainerPoint(i),F.layerPoint=this.containerPointToLayerPoint(F.containerPoint),F.latlng=Z?k.getLatLng():this.layerPointToLatLng(F.layerPoint)}for(b=0;b<m.length;b++)if(m[b].fire(o,F,!0),F.originalEvent._stopped||m[b].options.bubblingMouseEvents===!1&&_t(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return fn(this._mapPane)||new rt(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var l=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var l=this.getSize()._divideBy(2);return this.project(i,o)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,l){var f=this._getNewPixelOrigin(l,o);return this.project(i,o)._subtract(f)},_latLngBoundsToNewLayerBounds:function(i,o,l){var f=this._getNewPixelOrigin(l,o);return Wt([this.project(i.getSouthWest(),o)._subtract(f),this.project(i.getNorthWest(),o)._subtract(f),this.project(i.getSouthEast(),o)._subtract(f),this.project(i.getNorthEast(),o)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,l){if(!l)return i;var f=this.project(i,o),m=this.getSize().divideBy(2),y=new qt(f.subtract(m),f.add(m)),b=this._getBoundsOffset(y,l,o);return Math.abs(b.x)<=1&&Math.abs(b.y)<=1?i:this.unproject(f.add(b),o)},_limitOffset:function(i,o){if(!o)return i;var l=this.getPixelBounds(),f=new qt(l.min.add(i),l.max.add(i));return i.add(this._getBoundsOffset(f,o))},_getBoundsOffset:function(i,o,l){var f=Wt(this.project(o.getNorthEast(),l),this.project(o.getSouthWest(),l)),m=f.min.subtract(i.min),y=f.max.subtract(i.max),b=this._rebound(m.x,-y.x),k=this._rebound(m.y,-y.y);return new rt(b,k)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),l=this.getMaxZoom(),f=dt.any3d?this.options.zoomSnap:1;return f&&(i=Math.round(i/f)*f),Math.max(o,Math.min(l,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var l=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,o),!0)},_createAnimProxy:function(){var i=this._proxy=Ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var l=Wi,f=this._proxy.style[l];Dn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),f===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();Dn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(o),m=this._getCenterOffset(i)._divideBy(1-1/f);return l.animate!==!0&&!this.getSize().contains(m)?!1:(x(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,l,f){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,Pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Os(i,o){return new Nt(i,o)}var Je=_e.extend({options:{position:"topright"},initialize:function(i){G(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),l=this.getPosition(),f=i._controlCorners[l];return Pt(o,"leaflet-control"),l.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),$e=function(i){return new Je(i)};Nt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",l=this._controlContainer=Ft("div",o+"control-container",this._container);function f(m,y){var b=o+m+" "+o+y;i[m+y]=Ft("div",b,l)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ie(this._controlCorners[i]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Gr=Je.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,l,f){return l<f?-1:f<l?1:0}},initialize:function(i,o,l){G(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in i)this._addLayer(i[f],f);for(f in o)this._addLayer(o[f],f,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Je.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(p(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=Ft("div",i),l=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Ei(o),vi(o);var f=this._section=Ft("section",i+"-list");l&&(this._map.on("click",this.collapse,this),Et(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Ft("a",i+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),Et(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){de(y),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=Ft("div",i+"-base",f),this._separator=Ft("div",i+"-separator",f),this._overlaysList=Ft("div",i+"-overlays",f),o.appendChild(f)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&p(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,l){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:l}),this.options.sortLayers&&this._layers.sort(c(function(f,m){return this.options.sortFunction(f.layer,m.layer,f.name,m.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yi(this._baseLayersList),Yi(this._overlaysList),this._layerControlInputs=[];var i,o,l,f,m=0;for(l=0;l<this._layers.length;l++)f=this._layers[l],this._addItem(f),o=o||f.overlay,i=i||!f.overlay,m+=f.overlay?0:1;return this.options.hideSingleBase&&(i=i&&m>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(p(i.target)),l=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;l&&this._map.fire(l,o)},_createRadioElement:function(i,o){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=l,f.firstChild},_addItem:function(i){var o=document.createElement("label"),l=this._map.hasLayer(i.layer),f;i.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=l):f=this._createRadioElement("leaflet-base-layers_"+p(this),l),this._layerControlInputs.push(f),f.layerId=p(i.layer),Et(f,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+i.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(f),y.appendChild(m);var b=i.overlay?this._overlaysList:this._baseLayersList;return b.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,o,l,f=[],m=[];this._handlingClick=!0;for(var y=i.length-1;y>=0;y--)o=i[y],l=this._getLayer(o.layerId).layer,o.checked?f.push(l):o.checked||m.push(l);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,l,f=this._map.getZoom(),m=i.length-1;m>=0;m--)o=i[m],l=this._getLayer(o.layerId).layer,o.disabled=l.options.minZoom!==void 0&&f<l.options.minZoom||l.options.maxZoom!==void 0&&f>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Et(i,"click",de),this.expand();var o=this;setTimeout(function(){te(i,"click",de),o._preventClick=!1})}}),Fu=function(i,o,l){return new Gr(i,o,l)},ei=Je.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",l=Ft("div",o+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,o+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,o+"-out",l,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,l,f,m){var y=Ft("a",l,f);return y.innerHTML=i,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),Ei(y),Et(y,"click",rn),Et(y,"click",m,this),Et(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";ce(this._zoomInButton,o),ce(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Pt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Pt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nt.mergeOptions({zoomControl:!0}),Nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ei,this.addControl(this.zoomControl))});var Yo=function(i){return new ei(i)},Ms=Je.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",l=Ft("div",o),f=this.options;return this._addScales(f,o+"-line",l),i.on(f.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),l},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,l){i.metric&&(this._mScale=Ft("div",o,l)),i.imperial&&(this._iScale=Ft("div",o,l))},_update:function(){var i=this._map,o=i.getSize().y/2,l=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(l)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),l=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,l,o/i)},_updateImperial:function(i){var o=i*3.2808399,l,f,m;o>5280?(l=o/5280,f=this._getRoundNum(l),this._updateScale(this._iScale,f+" mi",f/l)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(i,o,l){i.style.width=Math.round(this.options.maxWidth*l)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),l=i/o;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,o*l}}),Ds=function(i){return new Ms(i)},Jo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ti=Je.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(dt.inlineSvg?Jo+" ":"")+"Leaflet</a>"},initialize:function(i){G(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ft("div","leaflet-control-attribution"),Ei(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var l=[];this.options.prefix&&l.push(this.options.prefix),i.length&&l.push(i.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Nt.mergeOptions({attributionControl:!0}),Nt.addInitHook(function(){this.options.attributionControl&&new Ti().addTo(this)});var Bu=function(i){return new Ti(i)};Je.Layers=Gr,Je.Zoom=ei,Je.Scale=Ms,Je.Attribution=Ti,$e.layers=Fu,$e.zoom=Yo,$e.scale=Ds,$e.attribution=Bu;var on=_e.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});on.addTo=function(i,o){return i.addHandler(o,this),this};var Ji={Events:Zt},Kr=dt.touch?"touchstart mousedown":"mousedown",Sn=Ut.extend({options:{clickTolerance:3},initialize:function(i,o,l,f){G(this,f),this._element=i,this._dragStartTarget=o||i,this._preventOutline=l},enable:function(){this._enabled||(Et(this._dragStartTarget,Kr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Sn._dragging===this&&this.finishDrag(!0),te(this._dragStartTarget,Kr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Lr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Sn._dragging===this&&this.finishDrag();return}if(!(Sn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Sn._dragging=this,this._preventOutline&&ti(this._element),Dr(),An(),!this._moving)){this.fire("down");var o=i.touches?i.touches[0]:i,l=Vr(this._element);this._startPoint=new rt(o.clientX,o.clientY),this._startPos=fn(this._element),this._parentScale=Rs(l);var f=i.type==="mousedown";Et(document,f?"mousemove":"touchmove",this._onMove,this),Et(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,l=new rt(o.clientX,o.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,de(i),this._moved||(this.fire("dragstart"),this._moved=!0,Pt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),It(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ce(document.body,"leaflet-dragging"),this._lastTarget&&(ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),te(document,"mousemove touchmove",this._onMove,this),te(document,"mouseup touchend touchcancel",this._onUp,this),kr(),bn();var o=this._moved&&this._moving;this._moving=!1,Sn._dragging=!1,o&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function ks(i,o,l){var f,m=[1,4,2,8],y,b,k,F,Z,ot,Tt,Mt;for(y=0,ot=i.length;y<ot;y++)i[y]._code=kn(i[y],o);for(k=0;k<4;k++){for(Tt=m[k],f=[],y=0,ot=i.length,b=ot-1;y<ot;b=y++)F=i[y],Z=i[b],F._code&Tt?Z._code&Tt||(Mt=xe(Z,F,Tt,o,l),Mt._code=kn(Mt,o),f.push(Mt)):(Z._code&Tt&&(Mt=xe(Z,F,Tt,o,l),Mt._code=kn(Mt,o),f.push(Mt)),f.push(F));i=f}return i}function Ns(i,o){var l,f,m,y,b,k,F,Z,ot;if(!i||i.length===0)throw new Error("latlngs not passed");u(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Tt=Ot([0,0]),Mt=ue(i),je=Mt.getNorthWest().distanceTo(Mt.getSouthWest())*Mt.getNorthEast().distanceTo(Mt.getNorthWest());je<1700&&(Tt=Vs(i));var Re=i.length,gn=[];for(l=0;l<Re;l++){var Xe=Ot(i[l]);gn.push(o.project(Ot([Xe.lat-Tt.lat,Xe.lng-Tt.lng])))}for(k=F=Z=0,l=0,f=Re-1;l<Re;f=l++)m=gn[l],y=gn[f],b=m.y*y.x-y.y*m.x,F+=(m.x+y.x)*b,Z+=(m.y+y.y)*b,k+=b*3;k===0?ot=gn[0]:ot=[F/k,Z/k];var Ks=o.unproject(yt(ot));return Ot([Ks.lat+Tt.lat,Ks.lng+Tt.lng])}function Vs(i){for(var o=0,l=0,f=0,m=0;m<i.length;m++){var y=Ot(i[m]);o+=y.lat,l+=y.lng,f++}return Ot([o/f,l/f])}var Fs={__proto__:null,clipPolygon:ks,polygonCenter:Ns,centroid:Vs};function $r(i,o){if(!o||!i.length)return i.slice();var l=o*o;return i=ta(i,l),i=Xo(i,l),i}function jr(i,o,l){return Math.sqrt(_n(i,o,l,!0))}function ni(i,o,l){return _n(i,o,l)}function Xo(i,o){var l=i.length,f=typeof Uint8Array<"u"?Uint8Array:Array,m=new f(l);m[0]=m[l-1]=1,Bs(i,m,o,0,l-1);var y,b=[];for(y=0;y<l;y++)m[y]&&b.push(i[y]);return b}function Bs(i,o,l,f,m){var y=0,b,k,F;for(k=f+1;k<=m-1;k++)F=_n(i[k],i[f],i[m],!0),F>y&&(b=k,y=F);y>l&&(o[b]=1,Bs(i,o,l,f,b),Bs(i,o,l,b,m))}function ta(i,o){for(var l=[i[0]],f=1,m=0,y=i.length;f<y;f++)ea(i[f],i[m])>o&&(l.push(i[f]),m=f);return m<y-1&&l.push(i[y-1]),l}var qr;function Xi(i,o,l,f,m){var y=f?qr:kn(i,l),b=kn(o,l),k,F,Z;for(qr=b;;){if(!(y|b))return[i,o];if(y&b)return!1;k=y||b,F=xe(i,o,k,l,m),Z=kn(F,l),k===y?(i=F,y=Z):(o=F,b=Z)}}function xe(i,o,l,f,m){var y=o.x-i.x,b=o.y-i.y,k=f.min,F=f.max,Z,ot;return l&8?(Z=i.x+y*(F.y-i.y)/b,ot=F.y):l&4?(Z=i.x+y*(k.y-i.y)/b,ot=k.y):l&2?(Z=F.x,ot=i.y+b*(F.x-i.x)/y):l&1&&(Z=k.x,ot=i.y+b*(k.x-i.x)/y),new rt(Z,ot,m)}function kn(i,o){var l=0;return i.x<o.min.x?l|=1:i.x>o.max.x&&(l|=2),i.y<o.min.y?l|=4:i.y>o.max.y&&(l|=8),l}function ea(i,o){var l=o.x-i.x,f=o.y-i.y;return l*l+f*f}function _n(i,o,l,f){var m=o.x,y=o.y,b=l.x-m,k=l.y-y,F=b*b+k*k,Z;return F>0&&(Z=((i.x-m)*b+(i.y-y)*k)/F,Z>1?(m=l.x,y=l.y):Z>0&&(m+=b*Z,y+=k*Z)),b=i.x-m,k=i.y-y,f?b*b+k*k:new rt(m,y)}function u(i){return!lt(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function d(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(i)}function _(i,o){var l,f,m,y,b,k,F,Z;if(!i||i.length===0)throw new Error("latlngs not passed");u(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ot=Ot([0,0]),Tt=ue(i),Mt=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());Mt<1700&&(ot=Vs(i));var je=i.length,Re=[];for(l=0;l<je;l++){var gn=Ot(i[l]);Re.push(o.project(Ot([gn.lat-ot.lat,gn.lng-ot.lng])))}for(l=0,f=0;l<je-1;l++)f+=Re[l].distanceTo(Re[l+1])/2;if(f===0)Z=Re[0];else for(l=0,y=0;l<je-1;l++)if(b=Re[l],k=Re[l+1],m=b.distanceTo(k),y+=m,y>f){F=(y-f)/m,Z=[k.x-F*(k.x-b.x),k.y-F*(k.y-b.y)];break}var Xe=o.unproject(yt(Z));return Ot([Xe.lat+ot.lat,Xe.lng+ot.lng])}var E={__proto__:null,simplify:$r,pointToSegmentDistance:jr,closestPointOnSegment:ni,clipSegment:Xi,_getEdgeIntersection:xe,_getBitCode:kn,_sqClosestPointOnSegment:_n,isFlat:u,_flat:d,polylineCenter:_},D={project:function(i){return new rt(i.lng,i.lat)},unproject:function(i){return new Vt(i.y,i.x)},bounds:new qt([-180,-90],[180,90])},B={R:6378137,R_MINOR:6356752314245179e-9,bounds:new qt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,l=this.R,f=i.lat*o,m=this.R_MINOR/l,y=Math.sqrt(1-m*m),b=y*Math.sin(f),k=Math.tan(Math.PI/4-f/2)/Math.pow((1-b)/(1+b),y/2);return f=-l*Math.log(Math.max(k,1e-10)),new rt(i.lng*o*l,f)},unproject:function(i){for(var o=180/Math.PI,l=this.R,f=this.R_MINOR/l,m=Math.sqrt(1-f*f),y=Math.exp(-i.y/l),b=Math.PI/2-2*Math.atan(y),k=0,F=.1,Z;k<15&&Math.abs(F)>1e-7;k++)Z=m*Math.sin(b),Z=Math.pow((1-Z)/(1+Z),m/2),F=Math.PI/2-2*Math.atan(y*Z)-b,b+=F;return new Vt(b*o,i.x*o/l)}},et={__proto__:null,LonLat:D,Mercator:B,SphericalMercator:Qe},Jt=r({},Ke,{code:"EPSG:3395",projection:B,transformation:function(){var i=.5/(Math.PI*B.R);return S(i,.5,-i,.5)}()}),we=r({},Ke,{code:"EPSG:4326",projection:D,transformation:S(1/180,1,-1/180,.5)}),Ht=r({},le,{projection:D,transformation:S(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var l=o.lng-i.lng,f=o.lat-i.lat;return Math.sqrt(l*l+f*f)},infinite:!0});le.Earth=Ke,le.EPSG3395=Jt,le.EPSG3857=O,le.EPSG900913=U,le.EPSG4326=we,le.Simple=Ht;var ee=Ut.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[p(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[p(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var l=this.getEvents();o.on(l,this),this.once("remove",function(){o.off(l,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Nt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=p(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=p(i);return this._layers[o]?(this._loaded&&i.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return p(i)in this._layers},eachLayer:function(i,o){for(var l in this._layers)i.call(o,this._layers[l]);return this},_addLayers:function(i){i=i?lt(i)?i:[i]:[];for(var o=0,l=i.length;o<l;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[p(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=p(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,l=this._getZoomSpan();for(var f in this._zoomBoundLayers){var m=this._zoomBoundLayers[f].options;i=m.minZoom===void 0?i:Math.min(i,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pe=ee.extend({initialize:function(i,o){G(this,o),this._layers={};var l,f;if(i)for(l=0,f=i.length;l<f;l++)this.addLayer(i[l])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),l,f;for(l in this._layers)f=this._layers[l],f[i]&&f[i].apply(f,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var l in this._layers)i.call(o,this._layers[l]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return p(i)}}),wi=function(i,o){return new pe(i,o)},ye=pe.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),pe.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),pe.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new xt;for(var o in this._layers){var l=this._layers[o];i.extend(l.getBounds?l.getBounds():l.getLatLng())}return i}}),Us=function(i,o){return new ye(i,o)},Nn=_e.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){G(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var l=this._getIconUrl(i);if(!l){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(l,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(f,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(i,o){var l=this.options,f=l[o+"Size"];typeof f=="number"&&(f=[f,f]);var m=yt(f),y=yt(o==="shadow"&&l.shadowAnchor||l.iconAnchor||m&&m.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(l.className||""),y&&(i.style.marginLeft=-y.x+"px",i.style.marginTop=-y.y+"px"),m&&(i.style.width=m.x+"px",i.style.height=m.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return dt.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function l_(i){return new Nn(i)}var Zr=Nn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Zr.imagePath!="string"&&(Zr.imagePath=this._detectIconPath()),(this.options.imagePath||Zr.imagePath)+Nn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var o=function(l,f,m){var y=f.exec(l);return y&&y[m]};return i=o(i,/^url\((['"])?(.+)\1\)$/,2),i&&o(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ft("div","leaflet-default-icon-path",document.body),o=_i(i,"background-image")||_i(i,"backgroundImage");if(document.body.removeChild(i),o=this._stripUrl(o),o)return o;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),Yc=on.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Sn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,l=o._map,f=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=fn(o._icon),b=l.getPixelBounds(),k=l.getPixelOrigin(),F=Wt(b.min._subtract(k).add(m),b.max._subtract(k).subtract(m));if(!F.contains(y)){var Z=yt((Math.max(F.max.x,y.x)-F.max.x)/(b.max.x-F.max.x)-(Math.min(F.min.x,y.x)-F.min.x)/(b.min.x-F.min.x),(Math.max(F.max.y,y.y)-F.max.y)/(b.max.y-F.max.y)-(Math.min(F.min.y,y.y)-F.min.y)/(b.min.y-F.min.y)).multiplyBy(f);l.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),It(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=x(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,l=o._shadow,f=fn(o._icon),m=o._map.layerPointToLatLng(f);l&&It(l,f),o._latlng=m,i.latlng=m,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),na=ee.extend({options:{icon:new Zr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){G(this,o),this._latlng=Ot(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=Ot(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=i.icon.createIcon(this._icon),f=!1;l!==this._icon&&(this._icon&&this._removeIcon(),f=!0,i.title&&(l.title=i.title),l.tagName==="IMG"&&(l.alt=i.alt||"")),Pt(l,o),i.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Et(l,"focus",this._panOnFocus,this);var m=i.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(Pt(m,o),m.alt=""),this._shadow=m,i.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&te(this._icon,"focus",this._panOnFocus,this),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&It(this._icon,i),this._shadow&&It(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yc)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yc(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&ge(this._icon,i),this._shadow&&ge(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var o=this.options.icon.options,l=o.iconSize?yt(o.iconSize):yt(0,0),f=o.iconAnchor?yt(o.iconAnchor):yt(0,0);i.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:l.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function c_(i,o){return new na(i,o)}var Ii=ee.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return G(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ia=Ii.extend({options:{fill:!0,radius:10},initialize:function(i,o){G(this,o),this._latlng=Ot(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=Ot(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return Ii.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,l=this._clickTolerance(),f=[i+l,o+l];this._pxBounds=new qt(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function h_(i,o){return new ia(i,o)}var Uu=ia.extend({initialize:function(i,o,l){if(typeof o=="number"&&(o=r({},l,{radius:o})),G(this,o),this._latlng=Ot(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new xt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Ii.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,l=this._map,f=l.options.crs;if(f.distance===Ke.distance){var m=Math.PI/180,y=this._mRadius/Ke.R/m,b=l.project([o+y,i]),k=l.project([o-y,i]),F=b.add(k).divideBy(2),Z=l.unproject(F).lat,ot=Math.acos((Math.cos(y*m)-Math.sin(o*m)*Math.sin(Z*m))/(Math.cos(o*m)*Math.cos(Z*m)))/m;(isNaN(ot)||ot===0)&&(ot=y/Math.cos(Math.PI/180*o)),this._point=F.subtract(l.getPixelOrigin()),this._radius=isNaN(ot)?0:F.x-l.project([Z,i-ot]).x,this._radiusY=F.y-b.y}else{var Tt=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(Tt).x}this._updateBounds()}});function f_(i,o,l){return new Uu(i,o,l)}var ii=Ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){G(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,l=null,f=_n,m,y,b=0,k=this._parts.length;b<k;b++)for(var F=this._parts[b],Z=1,ot=F.length;Z<ot;Z++){m=F[Z-1],y=F[Z];var Tt=f(i,m,y,!0);Tt<o&&(o=Tt,l=f(i,m,y))}return l&&(l.distance=Math.sqrt(o)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=Ot(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new xt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],l=u(i),f=0,m=i.length;f<m;f++)l?(o[f]=Ot(i[f]),this._bounds.extend(o[f])):o[f]=this._convertLatLngs(i[f]);return o},_project:function(){var i=new qt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new rt(i,i);this._rawPxBounds&&(this._pxBounds=new qt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(i,o,l){var f=i[0]instanceof Vt,m=i.length,y,b;if(f){for(b=[],y=0;y<m;y++)b[y]=this._map.latLngToLayerPoint(i[y]),l.extend(b[y]);o.push(b)}else for(y=0;y<m;y++)this._projectLatlngs(i[y],o,l)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,l,f,m,y,b,k,F;for(l=0,m=0,y=this._rings.length;l<y;l++)for(F=this._rings[l],f=0,b=F.length;f<b-1;f++)k=Xi(F[f],F[f+1],i,f,!0),k&&(o[m]=o[m]||[],o[m].push(k[0]),(k[1]!==F[f+1]||f===b-2)&&(o[m].push(k[1]),m++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,l=0,f=i.length;l<f;l++)i[l]=$r(i[l],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var l,f,m,y,b,k,F=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(l=0,y=this._parts.length;l<y;l++)for(k=this._parts[l],f=0,b=k.length,m=b-1;f<b;m=f++)if(!(!o&&f===0)&&jr(i,k[m],k[f])<=F)return!0;return!1}});function d_(i,o){return new ii(i,o)}ii._flat=d;var zs=ii.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ns(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var o=ii.prototype._convertLatLngs.call(this,i),l=o.length;return l>=2&&o[0]instanceof Vt&&o[0].equals(o[l-1])&&o.pop(),o},_setLatLngs:function(i){ii.prototype._setLatLngs.call(this,i),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,l=new rt(o,o);if(i=new qt(i.min.subtract(l),i.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,m=this._rings.length,y;f<m;f++)y=ks(this._rings[f],i,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,l,f,m,y,b,k,F,Z;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(y=0,F=this._parts.length;y<F;y++)for(l=this._parts[y],b=0,Z=l.length,k=Z-1;b<Z;k=b++)f=l[b],m=l[k],f.y>i.y!=m.y>i.y&&i.x<(m.x-f.x)*(i.y-f.y)/(m.y-f.y)+f.x&&(o=!o);return o||ii.prototype._containsPoint.call(this,i,!0)}});function p_(i,o){return new zs(i,o)}var si=ye.extend({initialize:function(i,o){G(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=lt(i)?i:i.features,l,f,m;if(o){for(l=0,f=o.length;l<f;l++)m=o[l],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(i))return this;var b=sa(i,y);return b?(b.feature=aa(i),b.defaultOptions=b.options,this.resetStyle(b),y.onEachFeature&&y.onEachFeature(i,b),this.addLayer(b)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=r({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function sa(i,o){var l=i.type==="Feature"?i.geometry:i,f=l?l.coordinates:null,m=[],y=o&&o.pointToLayer,b=o&&o.coordsToLatLng||zu,k,F,Z,ot;if(!f&&!l)return null;switch(l.type){case"Point":return k=b(f),Jc(y,i,k,o);case"MultiPoint":for(Z=0,ot=f.length;Z<ot;Z++)k=b(f[Z]),m.push(Jc(y,i,k,o));return new ye(m);case"LineString":case"MultiLineString":return F=ra(f,l.type==="LineString"?0:1,b),new ii(F,o);case"Polygon":case"MultiPolygon":return F=ra(f,l.type==="Polygon"?1:2,b),new zs(F,o);case"GeometryCollection":for(Z=0,ot=l.geometries.length;Z<ot;Z++){var Tt=sa({geometry:l.geometries[Z],type:"Feature",properties:i.properties},o);Tt&&m.push(Tt)}return new ye(m);case"FeatureCollection":for(Z=0,ot=l.features.length;Z<ot;Z++){var Mt=sa(l.features[Z],o);Mt&&m.push(Mt)}return new ye(m);default:throw new Error("Invalid GeoJSON object.")}}function Jc(i,o,l,f){return i?i(o,l):new na(l,f&&f.markersInheritOptions&&f)}function zu(i){return new Vt(i[1],i[0],i[2])}function ra(i,o,l){for(var f=[],m=0,y=i.length,b;m<y;m++)b=o?ra(i[m],o-1,l):(l||zu)(i[m]),f.push(b);return f}function Hu(i,o){return i=Ot(i),i.alt!==void 0?[R(i.lng,o),R(i.lat,o),R(i.alt,o)]:[R(i.lng,o),R(i.lat,o)]}function oa(i,o,l,f){for(var m=[],y=0,b=i.length;y<b;y++)m.push(o?oa(i[y],u(i[y])?0:o-1,l,f):Hu(i[y],f));return!o&&l&&m.length>0&&m.push(m[0].slice()),m}function Hs(i,o){return i.feature?r({},i.feature,{geometry:o}):aa(o)}function aa(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Gu={toGeoJSON:function(i){return Hs(this,{type:"Point",coordinates:Hu(this.getLatLng(),i)})}};na.include(Gu),Uu.include(Gu),ia.include(Gu),ii.include({toGeoJSON:function(i){var o=!u(this._latlngs),l=oa(this._latlngs,o?1:0,!1,i);return Hs(this,{type:(o?"Multi":"")+"LineString",coordinates:l})}}),zs.include({toGeoJSON:function(i){var o=!u(this._latlngs),l=o&&!u(this._latlngs[0]),f=oa(this._latlngs,l?2:o?1:0,!0,i);return o||(f=[f]),Hs(this,{type:(l?"Multi":"")+"Polygon",coordinates:f})}}),pe.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(l){o.push(l.toGeoJSON(i).geometry.coordinates)}),Hs(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var l=o==="GeometryCollection",f=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(i);if(l)f.push(y.geometry);else{var b=aa(y);b.type==="FeatureCollection"?f.push.apply(f,b.features):f.push(b)}}}),l?Hs(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Xc(i,o){return new si(i,o)}var m_=Xc,ua=ee.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,l){this._url=i,this._bounds=ue(o),G(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Jn(this._image),this},bringToBack:function(){return this._map&&gi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ue(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:Ft("img");if(Pt(o,"leaflet-image-layer"),this._zoomAnimated&&Pt(o,"leaflet-zoom-animated"),this.options.className&&Pt(o,this.options.className),o.onselectstart=I,o.onmousemove=I,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Dn(this._image,l,o)},_reset:function(){var i=this._image,o=new qt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=o.getSize();It(i,o.min),i.style.width=l.x+"px",i.style.height=l.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),__=function(i,o,l){return new ua(i,o,l)},th=ua.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:Ft("video");if(Pt(o,"leaflet-image-layer"),this._zoomAnimated&&Pt(o,"leaflet-zoom-animated"),this.options.className&&Pt(o,this.options.className),o.onselectstart=I,o.onmousemove=I,o.onloadeddata=c(this.fire,this,"load"),i){for(var l=o.getElementsByTagName("source"),f=[],m=0;m<l.length;m++)f.push(l[m].src);this._url=l.length>0?f:[o.src];return}lt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var b=Ft("source");b.src=this._url[y],o.appendChild(b)}}});function g_(i,o,l){return new th(i,o,l)}var eh=ua.extend({_initImage:function(){var i=this._image=this._url;Pt(i,"leaflet-image-layer"),this._zoomAnimated&&Pt(i,"leaflet-zoom-animated"),this.options.className&&Pt(i,this.options.className),i.onselectstart=I,i.onmousemove=I}});function y_(i,o,l){return new eh(i,o,l)}var Vn=ee.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,o){i&&(i instanceof Vt||lt(i))?(this._latlng=Ot(i),G(this,o)):(G(this,i),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&ge(this._container,1),this.bringToFront(),this.options.interactive&&(Pt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(c(ie,void 0,this._container),200)):ie(this._container),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Ot(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Jn(this._container),this},bringToBack:function(){return this._map&&gi(this._container),this},_prepareOpen:function(i){var o=this._source;if(!o._map)return!1;if(o instanceof ye){o=null;var l=this._source._layers;for(var f in l)if(l[f]._map){o=l[f];break}if(!o)return!1;this._source=o}if(!i)if(o.getCenter)i=o.getCenter();else if(o.getLatLng)i=o.getLatLng();else if(o.getBounds)i=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=yt(this.options.offset),l=this._getAnchor();this._zoomAnimated?It(this._container,i.add(l)):o=o.add(i).add(l);var f=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=f+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Nt.include({_initOverlay:function(i,o,l,f){var m=o;return m instanceof i||(m=new i(f).setContent(o)),l&&m.setLatLng(l),m}}),ee.include({_initOverlay:function(i,o,l,f){var m=l;return m instanceof i?(G(m,f),m._source=this):(m=o&&!f?o:new i(f,this),m.setContent(l)),m}});var la=Vn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Vn.prototype.openOn.call(this,i)},onAdd:function(i){Vn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ii||this._source.on("preclick",mn))},onRemove:function(i){Vn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ii||this._source.off("preclick",mn))},getEvents:function(){var i=Vn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",o=this._container=Ft("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=Ft("div",i+"-content-wrapper",o);if(this._contentNode=Ft("div",i+"-content",l),Ei(o),vi(this._contentNode),Et(o,"contextmenu",mn),this._tipContainer=Ft("div",i+"-tip-container",o),this._tip=Ft("div",i+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ft("a",i+"-close-button",o);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',Et(f,"click",function(m){de(m),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var l=i.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),o.width=l+1+"px",o.whiteSpace="",o.height="";var f=i.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&f>m?(o.height=m+"px",Pt(i,y)):ce(i,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),l=this._getAnchor();It(this._container,o.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,o=parseInt(_i(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+o,f=this._containerWidth,m=new rt(this._containerLeft,-l-this._containerBottom);m._add(fn(this._container));var y=i.layerPointToContainerPoint(m),b=yt(this.options.autoPanPadding),k=yt(this.options.autoPanPaddingTopLeft||b),F=yt(this.options.autoPanPaddingBottomRight||b),Z=i.getSize(),ot=0,Tt=0;y.x+f+F.x>Z.x&&(ot=y.x+f-Z.x+F.x),y.x-ot-k.x<0&&(ot=y.x-k.x),y.y+l+F.y>Z.y&&(Tt=y.y+l-Z.y+F.y),y.y-Tt-k.y<0&&(Tt=y.y-k.y),(ot||Tt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ot,Tt]))}},_getAnchor:function(){return yt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),v_=function(i,o){return new la(i,o)};Nt.mergeOptions({closePopupOnClick:!0}),Nt.include({openPopup:function(i,o,l){return this._initOverlay(la,i,o,l).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),ee.include({bindPopup:function(i,o){return this._popup=this._initOverlay(la,this._popup,i,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ye||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){rn(i);var o=i.layer||i.target;if(this._popup._source===o&&!(o instanceof Ii)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=o,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ca=Vn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Vn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Vn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Vn.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ft("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,l,f=this._map,m=this._container,y=f.latLngToContainerPoint(f.getCenter()),b=f.layerPointToContainerPoint(i),k=this.options.direction,F=m.offsetWidth,Z=m.offsetHeight,ot=yt(this.options.offset),Tt=this._getAnchor();k==="top"?(o=F/2,l=Z):k==="bottom"?(o=F/2,l=0):k==="center"?(o=F/2,l=Z/2):k==="right"?(o=0,l=Z/2):k==="left"?(o=F,l=Z/2):b.x<y.x?(k="right",o=0,l=Z/2):(k="left",o=F+(ot.x+Tt.x)*2,l=Z/2),i=i.subtract(yt(o,l,!0)).add(ot).add(Tt),ce(m,"leaflet-tooltip-right"),ce(m,"leaflet-tooltip-left"),ce(m,"leaflet-tooltip-top"),ce(m,"leaflet-tooltip-bottom"),Pt(m,"leaflet-tooltip-"+k),It(m,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&ge(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return yt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),E_=function(i,o){return new ca(i,o)};Nt.include({openTooltip:function(i,o,l){return this._initOverlay(ca,i,o,l).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),ee.include({bindTooltip:function(i,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ca,this._tooltip,i,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[o](l),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ye||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&(Et(o,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Et(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var o=i.latlng,l,f;this._tooltip.options.sticky&&i.originalEvent&&(l=this._map.mouseEventToContainerPoint(i.originalEvent),f=this._map.containerPointToLayerPoint(l),o=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(o)}});var nh=Nn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),l=this.options;if(l.html instanceof Element?(Yi(o),o.appendChild(l.html)):o.innerHTML=l.html!==!1?l.html:"",l.bgPos){var f=yt(l.bgPos);o.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function T_(i){return new nh(i)}Nn.Default=Zr;var Wr=ee.extend({options:{tileSize:256,opacity:1,updateWhenIdle:dt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){G(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ie(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof rt?i:new rt(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,l=-i(-1/0,1/0),f=0,m=o.length,y;f<m;f++)y=o[f].style.zIndex,o[f]!==this._container&&y&&(l=i(l,+y));isFinite(l)&&(this.options.zIndex=l+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!dt.ielt9){ge(this._container,this.options.opacity);var i=+new Date,o=!1,l=!1;for(var f in this._tiles){var m=this._tiles[f];if(!(!m.current||!m.loaded)){var y=Math.min(1,(i-m.loaded)/200);ge(m.el,y),y<1?o=!0:(m.active?l=!0:this._onOpaqueTile(m),m.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),o&&(M(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=Ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===i?(this._levels[l].el.style.zIndex=o-Math.abs(i-l),this._onUpdateLevel(l)):(ie(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var f=this._levels[i],m=this._map;return f||(f=this._levels[i]={},f.el=Ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=o,f.origin=m.project(m.unproject(m.getPixelOrigin()),i).round(),f.zoom=i,this._setZoomTransform(f,m.getCenter(),m.getZoom()),I(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var i,o,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var f=o.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ie(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,l,f){var m=Math.floor(i/2),y=Math.floor(o/2),b=l-1,k=new rt(+m,+y);k.z=+b;var F=this._tileCoordsToKey(k),Z=this._tiles[F];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),b>f?this._retainParent(m,y,b,f):!1)},_retainChildren:function(i,o,l,f){for(var m=2*i;m<2*i+2;m++)for(var y=2*o;y<2*o+2;y++){var b=new rt(m,y);b.z=l+1;var k=this._tileCoordsToKey(b),F=this._tiles[k];if(F&&F.active){F.retain=!0;continue}else F&&F.loaded&&(F.retain=!0);l+1<f&&this._retainChildren(m,y,l+1,f)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,l,f){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!f||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(i),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var l in this._levels)this._setZoomTransform(this._levels[l],i,o)},_setZoomTransform:function(i,o,l){var f=this._map.getZoomScale(l,i.zoom),m=i.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(o,l)).round();dt.any3d?Dn(i.el,m,f):It(i.el,m)},_resetGrid:function(){var i=this._map,o=i.options.crs,l=this._tileSize=this.getTileSize(),f=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],f).x/l.x),Math.ceil(i.project([0,o.wrapLng[1]],f).x/l.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],f).y/l.x),Math.ceil(i.project([o.wrapLat[1],0],f).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,l=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),f=o.getZoomScale(l,this._tileZoom),m=o.project(i,this._tileZoom).floor(),y=o.getSize().divideBy(f*2);return new qt(m.subtract(y),m.add(y))},_update:function(i){var o=this._map;if(o){var l=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(i),m=this._pxBoundsToTileRange(f),y=m.getCenter(),b=[],k=this.options.keepBuffer,F=new qt(m.getBottomLeft().subtract([k,-k]),m.getTopRight().add([k,-k]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var ot=this._tiles[Z].coords;(ot.z!==this._tileZoom||!F.contains(new rt(ot.x,ot.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(i,l);return}for(var Tt=m.min.y;Tt<=m.max.y;Tt++)for(var Mt=m.min.x;Mt<=m.max.x;Mt++){var je=new rt(Mt,Tt);if(je.z=this._tileZoom,!!this._isValidTile(je)){var Re=this._tiles[this._tileCoordsToKey(je)];Re?Re.current=!0:b.push(je)}}if(b.sort(function(Xe,Ks){return Xe.distanceTo(y)-Ks.distanceTo(y)}),b.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gn=document.createDocumentFragment();for(Mt=0;Mt<b.length;Mt++)this._addTile(b[Mt],gn);this._level.el.appendChild(gn)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var l=this._globalTileRange;if(!o.wrapLng&&(i.x<l.min.x||i.x>l.max.x)||!o.wrapLat&&(i.y<l.min.y||i.y>l.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(i);return ue(this.options.bounds).overlaps(f)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,l=this.getTileSize(),f=i.scaleBy(l),m=f.add(l),y=o.unproject(f,i.z),b=o.unproject(m,i.z);return[y,b]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),l=new xt(o[0],o[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),l=new rt(+o[0],+o[1]);return l.z=+o[2],l},_removeTile:function(i){var o=this._tiles[i];o&&(ie(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Pt(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=I,i.onmousemove=I,dt.ielt9&&this.options.opacity<1&&ge(i,this.options.opacity)},_addTile:function(i,o){var l=this._getTilePos(i),f=this._tileCoordsToKey(i),m=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(m),this.createTile.length<2&&x(c(this._tileReady,this,i,null,m)),It(m,l),this._tiles[f]={el:m,coords:i,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:i})},_tileReady:function(i,o,l){o&&this.fire("tileerror",{error:o,tile:l,coords:i});var f=this._tileCoordsToKey(i);l=this._tiles[f],l&&(l.loaded=+new Date,this._map._fadeAnimated?(ge(l.el,0),M(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),o||(Pt(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),dt.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new rt(this._wrapX?v(i.x,this._wrapX):i.x,this._wrapY?v(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new qt(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function w_(i){return new Wr(i)}var Gs=Wr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,o){this._url=i,o=G(this,o),o.detectRetina&&dt.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var l=document.createElement("img");return Et(l,"load",c(this._tileOnLoad,this,o,l)),Et(l,"error",c(this._tileOnError,this,o,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(i),l},getTileUrl:function(i){var o={r:dt.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=l),o["-y"]=l}return ct(this._url,r(o,this.options))},_tileOnLoad:function(i,o){dt.ielt9?setTimeout(c(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,l){var f=this.options.errorTileUrl;f&&o.getAttribute("src")!==f&&(o.src=f),i(l,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,l=this.options.zoomReverse,f=this.options.zoomOffset;return l&&(i=o-i),i+f},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=I,o.onerror=I,!o.complete)){o.src=K;var l=this._tiles[i].coords;ie(o),delete this._tiles[i],this.fire("tileabort",{tile:o,coords:l})}},_removeTile:function(i){var o=this._tiles[i];if(o)return o.el.setAttribute("src",K),Wr.prototype._removeTile.call(this,i)},_tileReady:function(i,o,l){if(!(!this._map||l&&l.getAttribute("src")===K))return Wr.prototype._tileReady.call(this,i,o,l)}});function ih(i,o){return new Gs(i,o)}var sh=Gs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var l=r({},this.defaultWmsParams);for(var f in o)f in this.options||(l[f]=o[f]);o=G(this,o);var m=o.detectRetina&&dt.retina?2:1,y=this.getTileSize();l.width=y.x*m,l.height=y.y*m,this.wmsParams=l},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Gs.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),l=this._crs,f=Wt(l.project(o[0]),l.project(o[1])),m=f.min,y=f.max,b=(this._wmsVersion>=1.3&&this._crs===we?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),k=Gs.prototype.getTileUrl.call(this,i);return k+H(this.wmsParams,k,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+b},setParams:function(i,o){return r(this.wmsParams,i),o||this.redraw(),this}});function I_(i,o){return new sh(i,o)}Gs.WMS=sh,ih.wms=I_;var ri=ee.extend({options:{padding:.1},initialize:function(i){G(this,i),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var l=this._map.getZoomScale(o,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),y=f.multiplyBy(-l).add(m).subtract(this._map._getNewPixelOrigin(i,o));dt.any3d?Dn(this._container,y,l):It(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),l=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new qt(l,l.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rh=ri.extend({options:{tolerance:0},getEvents:function(){var i=ri.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Et(i,"mousemove",this._onMouseMove,this),Et(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Et(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,ie(this._container),te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var i=this._bounds,o=this._container,l=i.getSize(),f=dt.retina?2:1;It(o,i.min),o.width=f*l.x,o.height=f*l.y,o.style.width=l.x+"px",o.style.height=l.y+"px",dt.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[p(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,l=o.next,f=o.prev;l?l.prev=f:this._drawLast=f,f?f.next=l:this._drawFirst=l,delete i._order,delete this._layers[p(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),l=[],f,m;for(m=0;m<o.length;m++){if(f=Number(o[m]),isNaN(f))return;l.push(f)}i.options._dashArray=l}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new qt,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var l=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)i=f.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(this._drawing){var l,f,m,y,b=i._parts,k=b.length,F=this._ctx;if(k){for(F.beginPath(),l=0;l<k;l++){for(f=0,m=b[l].length;f<m;f++)y=b[l][f],F[f?"lineTo":"moveTo"](y.x,y.y);o&&F.closePath()}this._fillStroke(F,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,l=this._ctx,f=Math.max(Math.round(i._radius),1),m=(Math.max(Math.round(i._radiusY),1)||f)/f;m!==1&&(l.save(),l.scale(1,m)),l.beginPath(),l.arc(o.x,o.y/m,f,0,Math.PI*2,!1),m!==1&&l.restore(),this._fillStroke(l,i)}},_fillStroke:function(i,o){var l=o.options;l.fill&&(i.globalAlpha=l.fillOpacity,i.fillStyle=l.fillColor||l.color,i.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=l.opacity,i.lineWidth=l.weight,i.strokeStyle=l.color,i.lineCap=l.lineCap,i.lineJoin=l.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),l,f,m=this._drawFirst;m;m=m.next)l=m.layer,l.options.interactive&&l._containsPoint(o)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(l))&&(f=l);this._fireEvent(f?[f]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(ce(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var l,f,m=this._drawFirst;m;m=m.next)l=m.layer,l.options.interactive&&l._containsPoint(o)&&(f=l);f!==this._hoveredLayer&&(this._handleMouseOut(i),f&&(Pt(this._container,"leaflet-interactive"),this._fireEvent([f],i,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,l){this._map._fireDOMEvent(o,l||o.type,i)},_bringToFront:function(i){var o=i._order;if(o){var l=o.next,f=o.prev;if(l)l.prev=f;else return;f?f.next=l:l&&(this._drawFirst=l),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(o){var l=o.next,f=o.prev;if(f)f.next=l;else return;l?l.prev=f:f&&(this._drawLast=f),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function oh(i){return dt.canvas?new rh(i):null}var Qr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),A_={_initContainer:function(){this._container=Ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ri.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=Qr("shape");Pt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=Qr("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;ie(o),i.removeInteractiveTarget(o),delete this._layers[p(i)]},_updateStyle:function(i){var o=i._stroke,l=i._fill,f=i.options,m=i._container;m.stroked=!!f.stroke,m.filled=!!f.fill,f.stroke?(o||(o=i._stroke=Qr("stroke")),m.appendChild(o),o.weight=f.weight+"px",o.color=f.color,o.opacity=f.opacity,f.dashArray?o.dashStyle=lt(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=f.lineCap.replace("butt","flat"),o.joinstyle=f.lineJoin):o&&(m.removeChild(o),i._stroke=null),f.fill?(l||(l=i._fill=Qr("fill")),m.appendChild(l),l.color=f.fillColor||f.color,l.opacity=f.fillOpacity):l&&(m.removeChild(l),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),l=Math.round(i._radius),f=Math.round(i._radiusY||l);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+l+","+f+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){Jn(i._container)},_bringToBack:function(i){gi(i._container)}},ha=dt.vml?Qr:j,Yr=ri.extend({_initContainer:function(){this._container=ha("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ha("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var i=this._bounds,o=i.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,l.setAttribute("width",o.x),l.setAttribute("height",o.y)),It(l,i.min),l.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=ha("path");i.options.className&&Pt(o,i.options.className),i.options.interactive&&Pt(o,"leaflet-interactive"),this._updateStyle(i),this._layers[p(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ie(i._path),i.removeInteractiveTarget(i._path),delete this._layers[p(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,l=i.options;o&&(l.stroke?(o.setAttribute("stroke",l.color),o.setAttribute("stroke-opacity",l.opacity),o.setAttribute("stroke-width",l.weight),o.setAttribute("stroke-linecap",l.lineCap),o.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?o.setAttribute("stroke-dasharray",l.dashArray):o.removeAttribute("stroke-dasharray"),l.dashOffset?o.setAttribute("stroke-dashoffset",l.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),l.fill?(o.setAttribute("fill",l.fillColor||l.color),o.setAttribute("fill-opacity",l.fillOpacity),o.setAttribute("fill-rule",l.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,q(i._parts,o))},_updateCircle:function(i){var o=i._point,l=Math.max(Math.round(i._radius),1),f=Math.max(Math.round(i._radiusY),1)||l,m="a"+l+","+f+" 0 1,0 ",y=i._empty()?"M0 0":"M"+(o.x-l)+","+o.y+m+l*2+",0 "+m+-l*2+",0 ";this._setPath(i,y)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){Jn(i._path)},_bringToBack:function(i){gi(i._path)}});dt.vml&&Yr.include(A_);function ah(i){return dt.svg||dt.vml?new Yr(i):null}Nt.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&oh(i)||ah(i)}});var uh=zs.extend({initialize:function(i,o){zs.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ue(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function b_(i,o){return new uh(i,o)}Yr.create=ha,Yr.pointsToPath=q,si.geometryToLayer=sa,si.coordsToLatLng=zu,si.coordsToLatLngs=ra,si.latLngToCoords=Hu,si.latLngsToCoords=oa,si.getFeature=Hs,si.asFeature=aa,Nt.mergeOptions({boxZoom:!0});var lh=on.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),An(),Dr(),this._startPoint=this._map.mouseEventToContainerPoint(i),Et(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ft("div","leaflet-zoom-box",this._container),Pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new qt(this._point,this._startPoint),l=o.getSize();It(this._box,o.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(ie(this._box),ce(this._container,"leaflet-crosshair")),bn(),kr(),te(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new xt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nt.addInitHook("addHandler","boxZoom",lh),Nt.mergeOptions({doubleClickZoom:!0});var ch=on.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,l=o.getZoom(),f=o.options.zoomDelta,m=i.originalEvent.shiftKey?l-f:l+f;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(i.containerPoint,m)}});Nt.addInitHook("addHandler","doubleClickZoom",ch),Nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hh=on.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Sn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ce(this._map._container,"leaflet-grab"),ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ue(this._map.options.maxBounds);this._offsetLimit=Wt(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),l=this._initialWorldOffset,f=this._draggable._newPos.x,m=(f-o+l)%i+o-l,y=(f+o+l)%i-o-l,b=Math.abs(m+l)<Math.abs(y+l)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=b},_onDragEnd:function(i){var o=this._map,l=o.options,f=!l.inertia||i.noInertia||this._times.length<2;if(o.fire("dragend",i),f)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,b=l.easeLinearity,k=m.multiplyBy(b/y),F=k.distanceTo([0,0]),Z=Math.min(l.inertiaMaxSpeed,F),ot=k.multiplyBy(Z/F),Tt=Z/(l.inertiaDeceleration*b),Mt=ot.multiplyBy(-Tt/2).round();!Mt.x&&!Mt.y?o.fire("moveend"):(Mt=o._limitOffset(Mt,o.options.maxBounds),x(function(){o.panBy(Mt,{duration:Tt,easeLinearity:b,noMoveStart:!0,animate:!0})}))}}});Nt.addInitHook("addHandler","dragging",hh),Nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fh=on.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Et(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,l=i.scrollTop||o.scrollTop,f=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(f,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},l=this.keyCodes,f,m;for(f=0,m=l.left.length;f<m;f++)o[l.left[f]]=[-1*i,0];for(f=0,m=l.right.length;f<m;f++)o[l.right[f]]=[i,0];for(f=0,m=l.down.length;f<m;f++)o[l.down[f]]=[0,i];for(f=0,m=l.up.length;f<m;f++)o[l.up[f]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},l=this.keyCodes,f,m;for(f=0,m=l.zoomIn.length;f<m;f++)o[l.zoomIn[f]]=i;for(f=0,m=l.zoomOut.length;f<m;f++)o[l.zoomOut[f]]=-i},_addHooks:function(){Et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,l=this._map,f;if(o in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(f=this._panKeys[o],i.shiftKey&&(f=yt(f).multiplyBy(3)),l.options.maxBounds&&(f=l._limitOffset(yt(f),l.options.maxBounds)),l.options.worldCopyJump){var m=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(f)));l.panTo(m)}else l.panBy(f)}else if(o in this._zoomKeys)l.setZoom(l.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;rn(i)}}});Nt.addInitHook("addHandler","keyboard",fh),Nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dh=on.extend({addHooks:function(){Et(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){te(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=Wo(i),l=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var f=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),f),rn(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),l=this._map.options.zoomSnap||0;i._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=l?Math.ceil(m/l)*l:m,b=i._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,b&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+b):i.setZoomAround(this._lastMousePos,o+b))}});Nt.addInitHook("addHandler","scrollWheelZoom",dh);var S_=600;Nt.mergeOptions({tapHold:dt.touchNative&&dt.safari&&dt.mobile,tapTolerance:15});var ph=on.extend({addHooks:function(){Et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var o=i.touches[0];this._startPos=this._newPos=new rt(o.clientX,o.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Et(document,"touchend",de),Et(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),S_),Et(document,"touchend touchcancel contextmenu",this._cancel,this),Et(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){te(document,"touchend",de),te(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),te(document,"touchend touchcancel contextmenu",this._cancel,this),te(document,"touchmove",this._onMove,this)},_onMove:function(i){var o=i.touches[0];this._newPos=new rt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,o){var l=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});l._simulated=!0,o.target.dispatchEvent(l)}});Nt.addInitHook("addHandler","tapHold",ph),Nt.mergeOptions({touchZoom:dt.touch,bounceAtZoomLimits:!0});var mh=on.extend({addHooks:function(){Pt(this._map._container,"leaflet-touch-zoom"),Et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var l=o.mouseEventToContainerPoint(i.touches[0]),f=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(l.add(f)._divideBy(2))),this._startDist=l.distanceTo(f),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),Et(document,"touchmove",this._onTouchMove,this),Et(document,"touchend touchcancel",this._onTouchEnd,this),de(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,l=o.mouseEventToContainerPoint(i.touches[0]),f=o.mouseEventToContainerPoint(i.touches[1]),m=l.distanceTo(f)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=l._add(f)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var b=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x(b,this,!0),de(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),te(document,"touchmove",this._onTouchMove,this),te(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nt.addInitHook("addHandler","touchZoom",mh),Nt.BoxZoom=lh,Nt.DoubleClickZoom=ch,Nt.Drag=hh,Nt.Keyboard=fh,Nt.ScrollWheelZoom=dh,Nt.TapHold=ph,Nt.TouchZoom=mh,e.Bounds=qt,e.Browser=dt,e.CRS=le,e.Canvas=rh,e.Circle=Uu,e.CircleMarker=ia,e.Class=_e,e.Control=Je,e.DivIcon=nh,e.DivOverlay=Vn,e.DomEvent=Qo,e.DomUtil=qo,e.Draggable=Sn,e.Evented=Ut,e.FeatureGroup=ye,e.GeoJSON=si,e.GridLayer=Wr,e.Handler=on,e.Icon=Nn,e.ImageOverlay=ua,e.LatLng=Vt,e.LatLngBounds=xt,e.Layer=ee,e.LayerGroup=pe,e.LineUtil=E,e.Map=Nt,e.Marker=na,e.Mixin=Ji,e.Path=Ii,e.Point=rt,e.PolyUtil=Fs,e.Polygon=zs,e.Polyline=ii,e.Popup=la,e.PosAnimation=Hr,e.Projection=et,e.Rectangle=uh,e.Renderer=ri,e.SVG=Yr,e.SVGOverlay=eh,e.TileLayer=Gs,e.Tooltip=ca,e.Transformation=qn,e.Util=A,e.VideoOverlay=th,e.bind=c,e.bounds=Wt,e.canvas=oh,e.circle=f_,e.circleMarker=h_,e.control=$e,e.divIcon=T_,e.extend=r,e.featureGroup=Us,e.geoJSON=Xc,e.geoJson=m_,e.gridLayer=w_,e.icon=l_,e.imageOverlay=__,e.latLng=Ot,e.latLngBounds=ue,e.layerGroup=wi,e.map=Os,e.marker=c_,e.point=yt,e.polygon=p_,e.polyline=d_,e.popup=v_,e.rectangle=b_,e.setOptions=G,e.stamp=p,e.svg=ah,e.svgOverlay=y_,e.tileLayer=ih,e.tooltip=E_,e.transformation=S,e.version=s,e.videoOverlay=g_;var C_=window.L;e.noConflict=function(){return window.L=C_,this},window.L=e})}(oo,oo.exports)),oo.exports}var N=d1();const ui=Km(N);var p1=Object.defineProperty,m1=(n,t,e)=>t in n?p1(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Xt=(n,t,e)=>m1(n,typeof t!="symbol"?t+"":t,e);function We(n,t){return N.Util.extend(t,n.geocodingQueryParams)}function nn(n,t){return N.Util.extend(t,n.reverseQueryParams)}const _1=/[&<>"'`]/g,g1=/[&<>"'`]/,y1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function v1(n){return y1[n]}function E1(n){return n==null?"":n?(n=""+n,g1.test(n)?n.replace(_1,v1):n):n+""}function oe(n,t){const e={Accept:"application/json"},s=new URL(n);return Object.entries(t).forEach(([r,a])=>{(Array.isArray(a)?a:[a]).forEach(c=>{s.searchParams.append(r,c)})}),fetch(s.toString(),{headers:e}).then(r=>r.json())}function T1(n,t){return n.replace(/\{ *([\w_]+) *\}/g,(e,s)=>{let r=t[s];return r===void 0?r="":typeof r=="function"&&(r=r(t)),E1(r)})}let $m=class{constructor(t){Xt(this,"options",{serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""}),N.Util.setOptions(this,t)}async geocode(t){const e=We(this.options,{token:this.options.apiKey,SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"}),s=await oe(this.options.serviceUrl+"/findAddressCandidates",e),r=[];if(s.candidates&&s.candidates.length)for(let a=0;a<=s.candidates.length-1;a++){const c=s.candidates[a],h=N.latLng(c.location.y,c.location.x),p=N.latLngBounds(N.latLng(c.extent.ymax,c.extent.xmax),N.latLng(c.extent.ymin,c.extent.xmin));r[a]={name:c.address,bbox:p,center:h}}return r}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{location:t.lng+","+t.lat,distance:100,f:"json"}),r=await oe(this.options.serviceUrl+"/reverseGeocode",s),a=[];if(r&&!r.error){const c=N.latLng(r.location.y,r.location.x),h=N.latLngBounds(c,c);a.push({name:r.address.Match_addr,center:c,bbox:h})}return a}};function w1(n){return new $m(n)}class jm{constructor(t){Xt(this,"options",{serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"}),N.Util.setOptions(this,t)}async geocode(t){const e=We(this.options,{query:t,key:this.options.apiKey}),s=await oe(this.options.serviceUrl,e),r=[];if(s.resourceSets.length>0)for(let a=s.resourceSets[0].resources.length-1;a>=0;a--){const c=s.resourceSets[0].resources[a],h=c.bbox;r[a]={name:c.name,bbox:N.latLngBounds([h[0],h[1]],[h[2],h[3]]),center:N.latLng(c.point.coordinates)}}return r}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey}),r=await oe(this.options.serviceUrl+t.lat+","+t.lng,s),a=[];for(let c=r.resourceSets[0].resources.length-1;c>=0;c--){const h=r.resourceSets[0].resources[c],p=h.bbox;a[c]={name:h.name,bbox:N.latLngBounds([p[0],p[1]],[p[2],p[3]]),center:N.latLng(h.point.coordinates)}}return a}}function I1(n){return new jm(n)}class qm{constructor(t){if(Xt(this,"options",{apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"}),N.Util.setOptions(this,t),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}async geocode(t){const e={"api-version":"1.0",query:t,"subscription-key":this.options.apiKey},s=this.options.serviceUrl+"/address/json",r=await oe(s,e),a=[];if(r.results&&r.results.length>0)for(const c of r.results)a.push({name:c.address.freeformAddress,bbox:N.latLngBounds([c.viewport.topLeftPoint.lat,c.viewport.topLeftPoint.lon],[c.viewport.btmRightPoint.lat,c.viewport.btmRightPoint.lon]),center:N.latLng(c.position.lat,c.position.lon)});return a}async reverse(t,e){const s={"api-version":"1.0",query:t.lat+","+t.lng,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+"/address/reverse/json",a=await oe(r,s),c=[];if(a.addresses&&a.addresses.length>0)for(const h of a.addresses)c.push({name:h.address.freeformAddress,bbox:N.latLngBounds([h.viewport.topLeftPoint.lat,h.viewport.topLeftPoint.lon],[h.viewport.btmRightPoint.lat,h.viewport.btmRightPoint.lon]),center:N.latLng(t.lat,t.lng)});return c}}function A1(n){return new qm(n)}class Zm{constructor(t){Xt(this,"options",{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"}),N.Util.setOptions(this,t)}async geocode(t){const e=We(this.options,{key:this.options.apiKey,address:t}),s=await oe(this.options.serviceUrl,e),r=[];if(s.results&&s.results.length)for(let a=0;a<=s.results.length-1;a++){const c=s.results[a],h=N.latLng(c.geometry.location),p=N.latLngBounds(N.latLng(c.geometry.viewport.northeast),N.latLng(c.geometry.viewport.southwest));r[a]={name:c.formatted_address,bbox:p,center:h,properties:c.address_components}}return r}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey,latlng:t.lat+","+t.lng}),r=await oe(this.options.serviceUrl,s),a=[];if(r.results&&r.results.length)for(let c=0;c<=r.results.length-1;c++){const h=r.results[c],p=N.latLng(h.geometry.location),g=N.latLngBounds(N.latLng(h.geometry.viewport.northeast),N.latLng(h.geometry.viewport.southwest));a[c]={name:h.formatted_address,bbox:g,center:p,properties:h.address_components}}return a}}function b1(n){return new Zm(n)}class Wm{constructor(t){if(Xt(this,"options",{serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5}),N.Util.setOptions(this,t),t!=null&&t.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(t){const e=We(this.options,{searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",e)}reverse(t,e){let s=t.lat+","+t.lng;this.options.reverseGeocodeProxRadius&&(s+=","+this.options.reverseGeocodeProxRadius);const r=nn(this.options,{prox:s,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",r)}async getJSON(t,e){const s=await oe(t,e),r=[];if(s.response.view&&s.response.view.length)for(let a=0;a<=s.response.view[0].result.length-1;a++){const c=s.response.view[0].result[a].location,h=N.latLng(c.displayPosition.latitude,c.displayPosition.longitude),p=N.latLngBounds(N.latLng(c.mapView.topLeft.latitude,c.mapView.topLeft.longitude),N.latLng(c.mapView.bottomRight.latitude,c.mapView.bottomRight.longitude));r[a]={name:c.address.label,properties:c.address,bbox:p,center:h}}return r}}class Qm{constructor(t){Xt(this,"options",{serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10}),N.Util.setOptions(this,t)}geocode(t){const e=We(this.options,{q:t,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!e.at&&!e.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",e)}reverse(t,e){const s=nn(this.options,{at:t.lat+","+t.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",s)}async getJSON(t,e){const s=await oe(t,e),r=[];if(s.items&&s.items.length)for(let a=0;a<=s.items.length-1;a++){const c=s.items[a],h=N.latLng(c.position.lat,c.position.lng);let p;c.mapView?p=N.latLngBounds(N.latLng(c.mapView.south,c.mapView.west),N.latLng(c.mapView.north,c.mapView.east)):p=N.latLngBounds(N.latLng(c.position.lat,c.position.lng),N.latLng(c.position.lat,c.position.lng)),r[a]={name:c.address.label,properties:c.address,bbox:p,center:h}}return r}}function S1(n){return n!=null&&n.apiKey?new Qm(n):new Wm(n)}function Ym(n){let t;if(t=n.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return N.latLng((/N/i.test(t[1])?1:-1)*+t[2],(/E/i.test(t[3])?1:-1)*+t[4]);if(t=n.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return N.latLng((/N/i.test(t[2])?1:-1)*+t[1],(/E/i.test(t[4])?1:-1)*+t[3]);if(t=n.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?$/))return N.latLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60),(/E/i.test(t[4])?1:-1)*(+t[5]+ +t[6]/60));if(t=n.match(/^(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([NS])\W*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([EW])$/))return N.latLng((/N/i.test(t[3])?1:-1)*(+t[1]+ +t[2]/60),(/E/i.test(t[6])?1:-1)*(+t[4]+ +t[5]/60));if(t=n.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?$/))return N.latLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60+ +t[4]/3600),(/E/i.test(t[5])?1:-1)*(+t[6]+ +t[7]/60+ +t[8]/3600));if(t=n.match(/^(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]\s*([NS])\W*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\s*([EW])$/))return N.latLng((/N/i.test(t[4])?1:-1)*(+t[1]+ +t[2]/60+ +t[3]/3600),(/E/i.test(t[8])?1:-1)*(+t[5]+ +t[6]/60+ +t[7]/3600));if(t=n.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return N.latLng(+t[1],+t[2])}class Jm{constructor(t){Xt(this,"options",{next:void 0,sizeInMeters:1e4}),N.Util.setOptions(this,t)}async geocode(t){const e=Ym(t);return e?[{name:t,center:e,bbox:e.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(t):[]}}function C1(n){return new Jm(n)}class Xm{constructor(t){Xt(this,"options",{serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"}),N.Util.setOptions(this,t)}_getProperties(t){const e={text:t.text,address:t.address};for(let s=0;s<(t.context||[]).length;s++){const r=t.context[s].id.split(".")[0];e[r]=t.context[s].text,t.context[s].short_code&&(e.countryShortCode=t.context[s].short_code)}return e}async geocode(t){const e=this.options.serviceUrl+encodeURIComponent(t)+".json",s=We(this.options,{access_token:this.options.apiKey});s.proximity!==void 0&&s.proximity.lat!==void 0&&s.proximity.lng!==void 0&&(s.proximity=s.proximity.lng+","+s.proximity.lat);const r=await oe(e,s);return this._parseResults(r)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=this.options.serviceUrl+t.lng+","+t.lat+".json",r=nn(this.options,{access_token:this.options.apiKey}),a=await oe(s,r);return this._parseResults(a)}_parseResults(t){var e;if(!((e=t.features)!=null&&e.length))return[];const s=[];for(let r=0;r<=t.features.length-1;r++){const a=t.features[r],c=N.latLng(a.center.reverse());let h;a.bbox?h=N.latLngBounds(N.latLng(a.bbox.slice(0,2).reverse()),N.latLng(a.bbox.slice(2,4).reverse())):h=N.latLngBounds(c,c),s[r]={name:a.place_name,bbox:h,center:c,properties:this._getProperties(a)}}return s}}function P1(n){return new Xm(n)}class t_{constructor(t){Xt(this,"options",{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"}),N.Util.setOptions(this,t),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...t){return t.filter(e=>!!e).join(", ")}async geocode(t){const e=We(this.options,{key:this.options.apiKey,location:t,limit:5,outFormat:"json"}),s=await oe(this.options.serviceUrl+"/address",e);return this._parseResults(s)}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey,location:t.lat+","+t.lng,outputFormat:"json"}),r=await oe(this.options.serviceUrl+"/reverse",s);return this._parseResults(r)}_parseResults(t){const e=[];if(t.results&&t.results[0].locations)for(let s=t.results[0].locations.length-1;s>=0;s--){const r=t.results[0].locations[s],a=N.latLng(r.latLng);e[s]={name:this._formatName(r.street,r.adminArea4,r.adminArea3,r.adminArea1),bbox:N.latLngBounds(a,a),center:a}}return e}}function x1(n){return new t_(n)}class e_{constructor(t){Xt(this,"options",{userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"}),N.Util.setOptions(this,t)}async geocode(t){const e=We(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:t.split(/\s+/).join(".")}),s=await oe(this.options.serviceUrl+"geocode-address",e),r=[];if(s.locations){s.geometry=s.locations[0];const a=N.latLng(s.geometry.latitude,s.geometry.longitude),c=N.latLngBounds(a,a);r[0]={name:s.geometry.address,bbox:c,center:a}}return r}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:t.lat,longitude:t.lng}),r=await oe(this.options.serviceUrl+"geocode-reverse",s),a=[];if(r.status.status==200&&r.found){const c=N.latLng(t.lat,t.lng),h=N.latLngBounds(c,c);a[0]={name:r.address,bbox:h,center:c}}return a}}function R1(n){return new e_(n)}class $c{constructor(t){Xt(this,"options",{serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(e){const s=e.address;let r;const a=[];return(s.road||s.building)&&a.push("{building} {road} {house_number}"),(s.city||s.town||s.village||s.hamlet)&&(r=a.length>0?"leaflet-control-geocoder-address-detail":"",a.push('<span class="'+r+'">{postcode} {city} {town} {village} {hamlet}</span>')),(s.state||s.country)&&(r=a.length>0?"leaflet-control-geocoder-address-context":"",a.push('<span class="'+r+'">{state} {country}</span>')),T1(a.join("<br/>"),s)}}),N.Util.setOptions(this,t||{})}async geocode(t){const e=We(this.options,{q:t,limit:5,format:"json",addressdetails:1}),s=await oe(this.options.serviceUrl+"search",e),r=[];for(let a=s.length-1;a>=0;a--){const c=s[a].boundingbox;r[a]={icon:s[a].icon,name:s[a].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(s[a]):void 0,bbox:N.latLngBounds([+c[0],+c[2]],[+c[1],+c[3]]),center:N.latLng(+s[a].lat,+s[a].lon),properties:s[a]}}return r}async reverse(t,e){const s=nn(this.options,{lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(e/256)/Math.log(2)),addressdetails:1,format:"json"}),r=await oe(this.options.serviceUrl+"reverse",s),a=[];if(r&&r.lat&&r.lon){const c=N.latLng(+r.lat,+r.lon),h=N.latLngBounds(c,c);a.push({name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,center:c,bbox:h,properties:r})}return a}}function L1(n){return new $c(n)}class n_{constructor(t){Xt(this,"options",{}),N.Util.setOptions(this,t)}async geocode(t){try{const e=this.options.OpenLocationCode.decode(t);return[{name:t,center:N.latLng(e.latitudeCenter,e.longitudeCenter),bbox:N.latLngBounds(N.latLng(e.latitudeLo,e.longitudeLo),N.latLng(e.latitudeHi,e.longitudeHi))}]}catch(e){return console.warn(e),[]}}async reverse(t,e){try{return[{name:this.options.OpenLocationCode.encode(t.lat,t.lng,this.options.codeLength),center:N.latLng(t.lat,t.lng),bbox:N.latLngBounds(N.latLng(t.lat,t.lng),N.latLng(t.lat,t.lng))}]}catch(s){return console.warn(s),[]}}}function O1(n){return new n_(n)}class i_{constructor(t){Xt(this,"options",{serviceUrl:"https://api.opencagedata.com/geocode/v1/json"}),N.Util.setOptions(this,t)}async geocode(t){const e=We(this.options,{key:this.options.apiKey,q:t}),s=await oe(this.options.serviceUrl,e);return this._parseResults(s)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{key:this.options.apiKey,q:[t.lat,t.lng].join(",")}),r=await oe(this.options.serviceUrl,s);return this._parseResults(r)}_parseResults(t){const e=[];if(t.results&&t.results.length)for(let s=0;s<t.results.length;s++){const r=t.results[s],a=N.latLng(r.geometry);let c;r.annotations&&r.annotations.bounds?c=N.latLngBounds(N.latLng(r.annotations.bounds.northeast),N.latLng(r.annotations.bounds.southwest)):c=N.latLngBounds(a,a),e.push({name:r.formatted,bbox:c,center:a})}return e}}function M1(n){return new i_(n)}class No{constructor(t){Xt(this,"options",{serviceUrl:"https://api.geocode.earth/v1"}),N.Util.setOptions(this,t)}async geocode(t){const e=We(this.options,{api_key:this.options.apiKey,text:t}),s=await oe(this.options.serviceUrl+"/search",e);return this._parseResults(s,"bbox")}async suggest(t){const e=We(this.options,{api_key:this.options.apiKey,text:t}),s=await oe(this.options.serviceUrl+"/autocomplete",e);return this._parseResults(s,"bbox")}async reverse(t,e){const s=nn(this.options,{api_key:this.options.apiKey,"point.lat":t.lat,"point.lon":t.lng}),r=await oe(this.options.serviceUrl+"/reverse",s);return this._parseResults(r,"bounds")}_parseResults(t,e){const s=[];return N.geoJSON(t,{pointToLayer(r,a){return N.circleMarker(a)},onEachFeature(r,a){const c={};let h,p;a.getBounds?(h=a.getBounds(),p=h.getCenter()):a.feature.bbox?(p=a.getLatLng(),h=N.latLngBounds(N.GeoJSON.coordsToLatLng(a.feature.bbox.slice(0,2)),N.GeoJSON.coordsToLatLng(a.feature.bbox.slice(2,4)))):(p=a.getLatLng(),h=N.latLngBounds(p,p)),c.name=a.feature.properties.label,c.center=p,c[e]=h,c.properties=a.feature.properties,s.push(c)}}),s}}function jc(n){return new No(n)}const D1=No,k1=jc,N1=No,V1=jc;class s_ extends No{constructor(t){super(N.Util.extend({serviceUrl:"https://api.openrouteservice.org/geocode"},t))}}function F1(n){return new s_(n)}class r_{constructor(t){Xt(this,"options",{serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]}),N.Util.setOptions(this,t)}async geocode(t){const e=We(this.options,{q:t}),s=await oe(this.options.serviceUrl,e);return this._parseResults(s)}suggest(t){return this.geocode(t)}async reverse(t,e){const s=nn(this.options,{lat:t.lat,lon:t.lng}),r=await oe(this.options.reverseUrl,s);return this._parseResults(r)}_parseResults(t){var e;const s=[];if(t&&t.features)for(let r=0;r<t.features.length;r++){const a=t.features[r],c=a.geometry.coordinates,h=N.latLng(c[1],c[0]),p=(e=a.properties)==null?void 0:e.extent,g=p?N.latLngBounds([p[1],p[0]],[p[3],p[2]]):N.latLngBounds(h,h);s.push({name:this._decodeFeatureName(a),html:this.options.htmlTemplate?this.options.htmlTemplate(a):void 0,center:h,bbox:g,properties:a.properties})}return s}_decodeFeatureName(t){return(this.options.nameProperties||[]).map(e=>{var s;return(s=t.properties)==null?void 0:s[e]}).filter(e=>!!e).join(", ")}}function B1(n){return new r_(n)}class o_{constructor(t){Xt(this,"options",{serviceUrl:"https://api.what3words.com/v2/"}),N.Util.setOptions(this,t)}async geocode(t){const e=await oe(this.options.serviceUrl+"forward",We(this.options,{key:this.options.apiKey,addr:t.split(/\s+/).join(".")})),s=[];if(e.geometry){const r=N.latLng(e.geometry.lat,e.geometry.lng),a=N.latLngBounds(r,r);s[0]={name:e.words,bbox:a,center:r}}return s}suggest(t){return this.geocode(t)}async reverse(t,e){const s=await oe(this.options.serviceUrl+"reverse",nn(this.options,{key:this.options.apiKey,coords:[t.lat,t.lng].join(",")})),r=[];if(s.status.status==200){const a=N.latLng(s.geometry.lat,s.geometry.lng),c=N.latLngBounds(a,a);r[0]={name:s.words,bbox:c,center:a}}return r}}function U1(n){return new o_(n)}const z1=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:$m,AzureMaps:qm,Bing:jm,GeocodeEarth:D1,Google:Zm,HERE:Wm,HEREv2:Qm,LatLng:Jm,MapQuest:t_,Mapbox:Xm,Mapzen:N1,Neutrino:e_,Nominatim:$c,OpenCage:i_,OpenLocationCode:n_,Openrouteservice:s_,Pelias:No,Photon:r_,What3Words:o_,arcgis:w1,azure:A1,bing:I1,geocodeEarth:k1,geocodingParams:We,google:b1,here:S1,latLng:C1,mapQuest:x1,mapbox:P1,mapzen:V1,neutrino:R1,nominatim:L1,openLocationCode:O1,opencage:M1,openrouteservice:F1,parseLatLng:Ym,pelias:jc,photon:B1,reverseParams:nn,what3words:U1},Symbol.toStringTag,{value:"Module"}));class qc{constructor(...t){}}N.Util.extend(qc.prototype,N.Control.prototype);N.Util.extend(qc.prototype,N.Evented.prototype);class Zc extends qc{constructor(t){super(t),Xt(this,"options",{showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0}),Xt(this,"_alts"),Xt(this,"_container"),Xt(this,"_errorElement"),Xt(this,"_geocodeMarker"),Xt(this,"_input"),Xt(this,"_lastGeocode"),Xt(this,"_map"),Xt(this,"_preventBlurCollapse"),Xt(this,"_requestCount",0),Xt(this,"_results"),Xt(this,"_selection"),Xt(this,"_suggestTimeout"),N.Util.setOptions(this,t),this.options.geocoder||(this.options.geocoder=new $c)}addThrobberClass(){N.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")}removeThrobberClass(){N.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")}onAdd(t){var e;const s="leaflet-control-geocoder",r=N.DomUtil.create("div",s+" leaflet-bar"),a=N.DomUtil.create("button",s+"-icon",r),c=N.DomUtil.create("div",s+"-form",r);this._map=t,this._container=r,a.innerHTML="&nbsp;",a.type="button",a.setAttribute("aria-label",this.options.iconLabel);const h=this._input=N.DomUtil.create("input","",c);return h.type="search",h.value=this.options.query,h.placeholder=this.options.placeholder,N.DomEvent.disableClickPropagation(h),this._errorElement=N.DomUtil.create("div",s+"-form-no-error",r),this._errorElement.innerHTML=this.options.errorMessage,this._alts=N.DomUtil.create("ul",s+"-alternatives leaflet-control-geocoder-alternatives-minimized",r),N.DomEvent.disableClickPropagation(this._alts),N.DomEvent.addListener(h,"keydown",this._keydown,this),(e=this.options.geocoder)!=null&&e.suggest&&N.DomEvent.addListener(h,"input",this._change,this),N.DomEvent.addListener(h,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?N.DomEvent.addListener(r,"click",p=>{p.button===0&&p.detail!==2&&this._toggle()}):this.options.expand==="touch"?N.DomEvent.addListener(r,N.Browser.touch?"touchstart mousedown":"mousedown",p=>{this._toggle(),p.preventDefault(),p.stopPropagation()},this):(N.DomEvent.addListener(r,"mouseover",this._expand,this),N.DomEvent.addListener(r,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),N.Browser.touch?N.DomEvent.addListener(r,"touchstart",()=>this._geocode()):N.DomEvent.addListener(r,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),N.DomEvent.disableClickPropagation(r),r}setQuery(t){return this._input.value=t,this}_geocodeResult(t,e){if(!e&&this.options.showUniqueResult&&t.length===1)this._geocodeResultSelected(t[0]);else if(t.length>0){this._alts.innerHTML="",this._results=t,N.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),N.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(let s=0;s<t.length;s++)this._alts.appendChild(this._createAlt(t[s],s))}else N.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),N.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")}markGeocode(t){const e=t.geocode;return this._map.fitBounds(e.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new N.Marker(e.center).bindPopup(e.html||e.name).addTo(this._map).openPopup(),this}async _geocode(t=!1){const e=this._input.value;if(!t&&e.length<this.options.queryMinLength)return;const s=++this._requestCount;this._lastGeocode=e,t||this._clearResults();const r={input:e};this.fire(t?"startsuggest":"startgeocode",r);const a=t?await this.options.geocoder.suggest(e):await this.options.geocoder.geocode(e);if(s===this._requestCount){const c={input:e,results:a};this.fire(t?"finishsuggest":"finishgeocode",c),this._geocodeResult(a,t)}}_geocodeResultSelected(t){const e={geocode:t};this.fire("markgeocode",e)}_toggle(){N.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){N.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){N.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),N.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),N.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),N.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),N.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){N.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,N.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),N.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),N.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")}_createAlt(t,e){const s=N.DomUtil.create("li",""),r=N.DomUtil.create("a","",s),a=this.options.showResultIcons&&t.icon?N.DomUtil.create("img","",r):null,c=t.html?void 0:document.createTextNode(t.name),h=p=>{this._preventBlurCollapse=!0,N.DomEvent.stop(p),this._geocodeResultSelected(t),N.DomEvent.on(s,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return a&&(a.src=t.icon),s.setAttribute("data-result-index",String(e)),t.html?r.innerHTML=r.innerHTML+t.html:c&&r.appendChild(c),N.DomEvent.addListener(s,"mousedown touchstart",h,this),s}_keydown(t){const e=s=>{this._selection&&(N.DomUtil.removeClass(this._selection,"leaflet-control-geocoder-selected"),this._selection=this._selection[s>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[s>0?"firstChild":"lastChild"]),this._selection&&N.DomUtil.addClass(this._selection,"leaflet-control-geocoder-selected")};switch(t.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:e(-1);break;case 40:e(1);break;case 13:if(this._selection){const s=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[s]),this._clearResults()}else this._geocode();break;default:return}N.DomEvent.preventDefault(t)}_change(){const t=this._input.value;t!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),t.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}}function H1(n){return new Zc(n)}/* @preserve
 * Leaflet Control Geocoder
 * https://github.com/perliedman/leaflet-control-geocoder
 *
 * Copyright (c) 2012 sa3m (https://github.com/sa3m)
 * Copyright (c) 2018 Per Liedman
 * All rights reserved.
 */N.Util.extend(Zc,z1);N.Util.extend(N.Control,{Geocoder:Zc,geocoder:H1});var el={};const G1=JSON.parse('[["AF","AFG","004","ISO 3166-2:AF"],["AL","ALB","008","ISO 3166-2:AL"],["DZ","DZA","012","ISO 3166-2:DZ"],["AS","ASM","016","ISO 3166-2:AS"],["AD","AND","020","ISO 3166-2:AD"],["AO","AGO","024","ISO 3166-2:AO"],["AI","AIA","660","ISO 3166-2:AI"],["AQ","ATA","010","ISO 3166-2:AQ"],["AG","ATG","028","ISO 3166-2:AG"],["AR","ARG","032","ISO 3166-2:AR"],["AM","ARM","051","ISO 3166-2:AM"],["AW","ABW","533","ISO 3166-2:AW"],["AU","AUS","036","ISO 3166-2:AU"],["AT","AUT","040","ISO 3166-2:AT"],["AZ","AZE","031","ISO 3166-2:AZ"],["BS","BHS","044","ISO 3166-2:BS"],["BH","BHR","048","ISO 3166-2:BH"],["BD","BGD","050","ISO 3166-2:BD"],["BB","BRB","052","ISO 3166-2:BB"],["BY","BLR","112","ISO 3166-2:BY"],["BE","BEL","056","ISO 3166-2:BE"],["BZ","BLZ","084","ISO 3166-2:BZ"],["BJ","BEN","204","ISO 3166-2:BJ"],["BM","BMU","060","ISO 3166-2:BM"],["BT","BTN","064","ISO 3166-2:BT"],["BO","BOL","068","ISO 3166-2:BO"],["BA","BIH","070","ISO 3166-2:BA"],["BW","BWA","072","ISO 3166-2:BW"],["BV","BVT","074","ISO 3166-2:BV"],["BR","BRA","076","ISO 3166-2:BR"],["IO","IOT","086","ISO 3166-2:IO"],["BN","BRN","096","ISO 3166-2:BN"],["BG","BGR","100","ISO 3166-2:BG"],["BF","BFA","854","ISO 3166-2:BF"],["BI","BDI","108","ISO 3166-2:BI"],["KH","KHM","116","ISO 3166-2:KH"],["CM","CMR","120","ISO 3166-2:CM"],["CA","CAN","124","ISO 3166-2:CA"],["CV","CPV","132","ISO 3166-2:CV"],["KY","CYM","136","ISO 3166-2:KY"],["CF","CAF","140","ISO 3166-2:CF"],["TD","TCD","148","ISO 3166-2:TD"],["CL","CHL","152","ISO 3166-2:CL"],["CN","CHN","156","ISO 3166-2:CN"],["CX","CXR","162","ISO 3166-2:CX"],["CC","CCK","166","ISO 3166-2:CC"],["CO","COL","170","ISO 3166-2:CO"],["KM","COM","174","ISO 3166-2:KM"],["CG","COG","178","ISO 3166-2:CG"],["CD","COD","180","ISO 3166-2:CD"],["CK","COK","184","ISO 3166-2:CK"],["CR","CRI","188","ISO 3166-2:CR"],["CI","CIV","384","ISO 3166-2:CI"],["HR","HRV","191","ISO 3166-2:HR"],["CU","CUB","192","ISO 3166-2:CU"],["CY","CYP","196","ISO 3166-2:CY"],["CZ","CZE","203","ISO 3166-2:CZ"],["DK","DNK","208","ISO 3166-2:DK"],["DJ","DJI","262","ISO 3166-2:DJ"],["DM","DMA","212","ISO 3166-2:DM"],["DO","DOM","214","ISO 3166-2:DO"],["EC","ECU","218","ISO 3166-2:EC"],["EG","EGY","818","ISO 3166-2:EG"],["SV","SLV","222","ISO 3166-2:SV"],["GQ","GNQ","226","ISO 3166-2:GQ"],["ER","ERI","232","ISO 3166-2:ER"],["EE","EST","233","ISO 3166-2:EE"],["ET","ETH","231","ISO 3166-2:ET"],["FK","FLK","238","ISO 3166-2:FK"],["FO","FRO","234","ISO 3166-2:FO"],["FJ","FJI","242","ISO 3166-2:FJ"],["FI","FIN","246","ISO 3166-2:FI"],["FR","FRA","250","ISO 3166-2:FR"],["GF","GUF","254","ISO 3166-2:GF"],["PF","PYF","258","ISO 3166-2:PF"],["TF","ATF","260","ISO 3166-2:TF"],["GA","GAB","266","ISO 3166-2:GA"],["GM","GMB","270","ISO 3166-2:GM"],["GE","GEO","268","ISO 3166-2:GE"],["DE","DEU","276","ISO 3166-2:DE"],["GH","GHA","288","ISO 3166-2:GH"],["GI","GIB","292","ISO 3166-2:GI"],["GR","GRC","300","ISO 3166-2:GR"],["GL","GRL","304","ISO 3166-2:GL"],["GD","GRD","308","ISO 3166-2:GD"],["GP","GLP","312","ISO 3166-2:GP"],["GU","GUM","316","ISO 3166-2:GU"],["GT","GTM","320","ISO 3166-2:GT"],["GN","GIN","324","ISO 3166-2:GN"],["GW","GNB","624","ISO 3166-2:GW"],["GY","GUY","328","ISO 3166-2:GY"],["HT","HTI","332","ISO 3166-2:HT"],["HM","HMD","334","ISO 3166-2:HM"],["VA","VAT","336","ISO 3166-2:VA"],["HN","HND","340","ISO 3166-2:HN"],["HK","HKG","344","ISO 3166-2:HK"],["HU","HUN","348","ISO 3166-2:HU"],["IS","ISL","352","ISO 3166-2:IS"],["IN","IND","356","ISO 3166-2:IN"],["ID","IDN","360","ISO 3166-2:ID"],["IR","IRN","364","ISO 3166-2:IR"],["IQ","IRQ","368","ISO 3166-2:IQ"],["IE","IRL","372","ISO 3166-2:IE"],["IL","ISR","376","ISO 3166-2:IL"],["IT","ITA","380","ISO 3166-2:IT"],["JM","JAM","388","ISO 3166-2:JM"],["JP","JPN","392","ISO 3166-2:JP"],["JO","JOR","400","ISO 3166-2:JO"],["KZ","KAZ","398","ISO 3166-2:KZ"],["KE","KEN","404","ISO 3166-2:KE"],["KI","KIR","296","ISO 3166-2:KI"],["KP","PRK","408","ISO 3166-2:KP"],["KR","KOR","410","ISO 3166-2:KR"],["KW","KWT","414","ISO 3166-2:KW"],["KG","KGZ","417","ISO 3166-2:KG"],["LA","LAO","418","ISO 3166-2:LA"],["LV","LVA","428","ISO 3166-2:LV"],["LB","LBN","422","ISO 3166-2:LB"],["LS","LSO","426","ISO 3166-2:LS"],["LR","LBR","430","ISO 3166-2:LR"],["LY","LBY","434","ISO 3166-2:LY"],["LI","LIE","438","ISO 3166-2:LI"],["LT","LTU","440","ISO 3166-2:LT"],["LU","LUX","442","ISO 3166-2:LU"],["MO","MAC","446","ISO 3166-2:MO"],["MG","MDG","450","ISO 3166-2:MG"],["MW","MWI","454","ISO 3166-2:MW"],["MY","MYS","458","ISO 3166-2:MY"],["MV","MDV","462","ISO 3166-2:MV"],["ML","MLI","466","ISO 3166-2:ML"],["MT","MLT","470","ISO 3166-2:MT"],["MH","MHL","584","ISO 3166-2:MH"],["MQ","MTQ","474","ISO 3166-2:MQ"],["MR","MRT","478","ISO 3166-2:MR"],["MU","MUS","480","ISO 3166-2:MU"],["YT","MYT","175","ISO 3166-2:YT"],["MX","MEX","484","ISO 3166-2:MX"],["FM","FSM","583","ISO 3166-2:FM"],["MD","MDA","498","ISO 3166-2:MD"],["MC","MCO","492","ISO 3166-2:MC"],["MN","MNG","496","ISO 3166-2:MN"],["MS","MSR","500","ISO 3166-2:MS"],["MA","MAR","504","ISO 3166-2:MA"],["MZ","MOZ","508","ISO 3166-2:MZ"],["MM","MMR","104","ISO 3166-2:MM"],["NA","NAM","516","ISO 3166-2:NA"],["NR","NRU","520","ISO 3166-2:NR"],["NP","NPL","524","ISO 3166-2:NP"],["NL","NLD","528","ISO 3166-2:NL"],["NC","NCL","540","ISO 3166-2:NC"],["NZ","NZL","554","ISO 3166-2:NZ"],["NI","NIC","558","ISO 3166-2:NI"],["NE","NER","562","ISO 3166-2:NE"],["NG","NGA","566","ISO 3166-2:NG"],["NU","NIU","570","ISO 3166-2:NU"],["NF","NFK","574","ISO 3166-2:NF"],["MP","MNP","580","ISO 3166-2:MP"],["MK","MKD","807","ISO 3166-2:MK"],["NO","NOR","578","ISO 3166-2:NO"],["OM","OMN","512","ISO 3166-2:OM"],["PK","PAK","586","ISO 3166-2:PK"],["PW","PLW","585","ISO 3166-2:PW"],["PS","PSE","275","ISO 3166-2:PS"],["PA","PAN","591","ISO 3166-2:PA"],["PG","PNG","598","ISO 3166-2:PG"],["PY","PRY","600","ISO 3166-2:PY"],["PE","PER","604","ISO 3166-2:PE"],["PH","PHL","608","ISO 3166-2:PH"],["PN","PCN","612","ISO 3166-2:PN"],["PL","POL","616","ISO 3166-2:PL"],["PT","PRT","620","ISO 3166-2:PT"],["PR","PRI","630","ISO 3166-2:PR"],["QA","QAT","634","ISO 3166-2:QA"],["RE","REU","638","ISO 3166-2:RE"],["RO","ROU","642","ISO 3166-2:RO"],["RU","RUS","643","ISO 3166-2:RU"],["RW","RWA","646","ISO 3166-2:RW"],["SH","SHN","654","ISO 3166-2:SH"],["KN","KNA","659","ISO 3166-2:KN"],["LC","LCA","662","ISO 3166-2:LC"],["PM","SPM","666","ISO 3166-2:PM"],["VC","VCT","670","ISO 3166-2:VC"],["WS","WSM","882","ISO 3166-2:WS"],["SM","SMR","674","ISO 3166-2:SM"],["ST","STP","678","ISO 3166-2:ST"],["SA","SAU","682","ISO 3166-2:SA"],["SN","SEN","686","ISO 3166-2:SN"],["SC","SYC","690","ISO 3166-2:SC"],["SL","SLE","694","ISO 3166-2:SL"],["SG","SGP","702","ISO 3166-2:SG"],["SK","SVK","703","ISO 3166-2:SK"],["SI","SVN","705","ISO 3166-2:SI"],["SB","SLB","090","ISO 3166-2:SB"],["SO","SOM","706","ISO 3166-2:SO"],["ZA","ZAF","710","ISO 3166-2:ZA"],["GS","SGS","239","ISO 3166-2:GS"],["ES","ESP","724","ISO 3166-2:ES"],["LK","LKA","144","ISO 3166-2:LK"],["SD","SDN","729","ISO 3166-2:SD"],["SR","SUR","740","ISO 3166-2:SR"],["SJ","SJM","744","ISO 3166-2:SJ"],["SZ","SWZ","748","ISO 3166-2:SZ"],["SE","SWE","752","ISO 3166-2:SE"],["CH","CHE","756","ISO 3166-2:CH"],["SY","SYR","760","ISO 3166-2:SY"],["TW","TWN","158","ISO 3166-2:TW"],["TJ","TJK","762","ISO 3166-2:TJ"],["TZ","TZA","834","ISO 3166-2:TZ"],["TH","THA","764","ISO 3166-2:TH"],["TL","TLS","626","ISO 3166-2:TL"],["TG","TGO","768","ISO 3166-2:TG"],["TK","TKL","772","ISO 3166-2:TK"],["TO","TON","776","ISO 3166-2:TO"],["TT","TTO","780","ISO 3166-2:TT"],["TN","TUN","788","ISO 3166-2:TN"],["TR","TUR","792","ISO 3166-2:TR"],["TM","TKM","795","ISO 3166-2:TM"],["TC","TCA","796","ISO 3166-2:TC"],["TV","TUV","798","ISO 3166-2:TV"],["UG","UGA","800","ISO 3166-2:UG"],["UA","UKR","804","ISO 3166-2:UA"],["AE","ARE","784","ISO 3166-2:AE"],["GB","GBR","826","ISO 3166-2:GB"],["US","USA","840","ISO 3166-2:US"],["UM","UMI","581","ISO 3166-2:UM"],["UY","URY","858","ISO 3166-2:UY"],["UZ","UZB","860","ISO 3166-2:UZ"],["VU","VUT","548","ISO 3166-2:VU"],["VE","VEN","862","ISO 3166-2:VE"],["VN","VNM","704","ISO 3166-2:VN"],["VG","VGB","092","ISO 3166-2:VG"],["VI","VIR","850","ISO 3166-2:VI"],["WF","WLF","876","ISO 3166-2:WF"],["EH","ESH","732","ISO 3166-2:EH"],["YE","YEM","887","ISO 3166-2:YE"],["ZM","ZMB","894","ISO 3166-2:ZM"],["ZW","ZWE","716","ISO 3166-2:ZW"],["AX","ALA","248","ISO 3166-2:AX"],["BQ","BES","535","ISO 3166-2:BQ"],["CW","CUW","531","ISO 3166-2:CW"],["GG","GGY","831","ISO 3166-2:GG"],["IM","IMN","833","ISO 3166-2:IM"],["JE","JEY","832","ISO 3166-2:JE"],["ME","MNE","499","ISO 3166-2:ME"],["BL","BLM","652","ISO 3166-2:BL"],["MF","MAF","663","ISO 3166-2:MF"],["RS","SRB","688","ISO 3166-2:RS"],["SX","SXM","534","ISO 3166-2:SX"],["SS","SSD","728","ISO 3166-2:SS"],["XK","XKK","983","ISO 3166-2:XK"]]'),K1=["br","cy","dv","sw","eu","af","am","ha","ku","ml","mt","no","ps","sd","so","sq","ta","tg","tt","ug","ur","vi","ar","az","be","bg","bn","bs","ca","cs","da","de","el","en","es","et","fa","fi","fr","ga","gl","he","hi","hr","hu","hy","id","is","it","ja","ka","kk","km","ko","ky","lt","lv","mk","mn","mr","ms","nb","nl","nn","pl","pt","ro","ru","sk","sl","sr","sv","th","tk","tr","uk","uz","zh"];var to={},nd;function $1(){if(nd)return to;nd=1,to.remove=a;for(var n=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],t={},e=0;e<n.length;e+=1)for(var s=n[e].chars,r=0;r<s.length;r+=1)t[s[r]]=n[e].base;function a(c){return c.replace(/[^\u0000-\u007e]/g,function(h){return t[h]||h})}return to.replacementList=n,to.diacriticsMap=t,to}var id;function j1(){return id||(id=1,function(n){const t=G1,e=K1,s=$1().remove,r={},a={},c={},h={},p={};t.forEach(function(K){const Y=K;a[Y[0]]=Y[1],c[Y[1]]=Y[0],h[Y[2]]=Y[0],p[Y[0]]=Y[2]});function g(K){return("000"+(K||"")).slice(-3)}function v(K,Y){return Object.prototype.hasOwnProperty.call(K,Y)}function I(K,Y){return Object.keys(K).reduce(function(P,T){const w=K[T];return P[T]=Y(w,T),P},{})}function R(K,Y){switch(K){case"official":return Array.isArray(Y)?Y[0]:Y;case"all":return typeof Y=="string"?[Y]:Y;case"alias":return Array.isArray(Y)?Y[1]||Y[0]:Y;default:throw new TypeError("LocaleNameType must be one of these: all, official, alias!")}}n.registerLocale=function(K){if(!K.locale)throw new TypeError("Missing localeData.locale");if(!K.countries)throw new TypeError("Missing localeData.countries");r[K.locale]=K.countries};function V(K){return c[K]}n.alpha3ToAlpha2=V;function z(K){return a[K]}n.alpha2ToAlpha3=z;function G(K){return p[V(K)]}n.alpha3ToNumeric=G;function H(K){return p[K]}n.alpha2ToNumeric=H;function it(K){const Y=g(K);return z(h[Y])}n.numericToAlpha3=it;function ct(K){const Y=g(K);return h[Y]}n.numericToAlpha2=ct;function lt(K){if(typeof K=="string"){if(/^[0-9]*$/.test(K))return it(K);if(K.length===2)return z(K.toUpperCase());if(K.length===3)return K.toUpperCase()}if(typeof K=="number")return it(K)}n.toAlpha3=lt;function _t(K){if(typeof K=="string"){if(/^[0-9]*$/.test(K))return ct(K);if(K.length===2)return K.toUpperCase();if(K.length===3)return V(K.toUpperCase())}if(typeof K=="number")return ct(K)}n.toAlpha2=_t,n.getName=function(K,Y,P={}){"select"in P||(P.select="official");try{const w=r[Y.toLowerCase()][_t(K)];return R(P.select,w)}catch{return}},n.getNames=function(K,Y={}){"select"in Y||(Y.select="official");const P=r[K.toLowerCase()];return P===void 0?{}:I(P,function(T){return R(Y.select,T)})},n.getAlpha2Code=function(K,Y){const P=w=>w.toLowerCase(),T=(w,C)=>P(w)===P(C);try{const w=r[Y.toLowerCase()];for(const C in w)if(v(w,C)){if(typeof w[C]=="string"&&T(w[C],K))return C;if(Array.isArray(w[C])){for(const x of w[C])if(T(x,K))return C}}return}catch{return}},n.getSimpleAlpha2Code=function(K,Y){const P=w=>s(w.toLowerCase()),T=(w,C)=>P(w)===P(C);try{const w=r[Y.toLowerCase()];for(const C in w)if(v(w,C)){if(typeof w[C]=="string"&&T(w[C],K))return C;if(Array.isArray(w[C])){for(const x of w[C])if(T(x,K))return C}}return}catch{return}},n.getAlpha2Codes=function(){return a},n.getAlpha3Code=function(K,Y){const P=n.getAlpha2Code(K,Y);if(P)return n.toAlpha3(P)},n.getSimpleAlpha3Code=function(K,Y){const P=n.getSimpleAlpha2Code(K,Y);if(P)return n.toAlpha3(P)},n.getAlpha3Codes=function(){return c},n.getNumericCodes=function(){return h},n.langs=function(){return Object.keys(r)},n.getSupportedLanguages=function(){return e},n.isValid=function(K){if(!K)return!1;const Y=K.toString().toUpperCase();return v(c,Y)||v(a,Y)||v(h,Y)}}(el)),el}var q1=j1();const Wc=Km(q1),Z1="en",W1={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:["People's Republic of China","China"],CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:["Republic of the Congo","Congo"],CD:["Democratic Republic of the Congo","Congo"],CK:"Cook Islands",CR:"Costa Rica",CI:["Cote d'Ivoire","Côte d'Ivoire","Ivory Coast"],HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:["Czech Republic","Czechia"],DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:["Republic of The Gambia","The Gambia","Gambia"],GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:["Islamic Republic of Iran","Iran"],IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:["South Korea","Korea, Republic of","Republic of Korea"],KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:["Netherlands","The Netherlands","Netherlands (Kingdom of the)"],NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MK:["The Republic of North Macedonia","North Macedonia"],MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:["State of Palestine","Palestine"],PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:["Pitcairn","Pitcairn Islands"],PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:["Russian Federation","Russia"],RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Eswatini",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:["Taiwan, Province of China","Taiwan"],TJ:"Tajikistan",TZ:["United Republic of Tanzania","Tanzania"],TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:["Türkiye","Turkey"],TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:["United Arab Emirates","UAE"],GB:["United Kingdom","UK","Great Britain"],US:["United States of America","United States","USA","U.S.A.","US","U.S."],UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:["Åland Islands","Aland Islands"],BQ:"Bonaire, Sint Eustatius and Saba",CW:"Curaçao",GG:"Guernsey",IM:"Isle of Man",JE:"Jersey",ME:"Montenegro",BL:"Saint Barthélemy",MF:"Saint Martin (French part)",RS:"Serbia",SX:"Sint Maarten (Dutch part)",SS:"South Sudan",XK:"Kosovo"},Q1={locale:Z1,countries:W1},Y1="fr",J1={AF:"Afghanistan",AL:"Albanie",DZ:"Algérie",AS:"Samoa américaines",AD:"Andorre",AO:"Angola",AI:"Anguilla",AQ:"Antarctique",AG:"Antigua-et-Barbuda",AR:"Argentine",AM:"Arménie",AW:"Aruba",AU:"Australie",AT:"Autriche",AZ:"Azerbaïdjan",BS:"Bahamas",BH:"Bahreïn",BD:"Bangladesh",BB:"Barbade",BY:"Biélorussie",BE:"Belgique",BZ:"Belize",BJ:"Bénin",BM:"Bermudes",BT:"Bhoutan",BO:"Bolivie",BA:"Bosnie-Herzégovine",BW:"Botswana",BV:"Île Bouvet",BR:"Brésil",IO:"Océan Indien Britannique",BN:"Brunei Darussalam",BG:"Bulgarie",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodge",CM:"Cameroun",CA:"Canada",CV:"Cap-Vert",KY:"Îles Caïmans",CF:"République Centrafricaine",TD:"Tchad",CL:"Chili",CN:"Chine",CX:"Île Christmas",CC:"Îles Cocos",CO:"Colombie",KM:"Comores",CG:"République du Congo",CD:"République démocratique du Congo",CK:"Îles Cook",CR:"Costa Rica",CI:"Côte-d'Ivoire",HR:"Croatie",CU:"Cuba",CY:"Chypre",CZ:"République Tchèque",DK:"Danemark",DJ:"Djibouti",DM:"Dominique",DO:"République Dominicaine",EC:"Équateur",EG:"Égypte",SV:"El Salvador",GQ:"Guinée équatoriale",ER:"Érythrée",EE:"Estonie",ET:"Éthiopie",FK:"Îles Malouines",FO:"Îles Féroé",FJ:"Fidji",FI:"Finlande",FR:"France",GF:"Guyane française",PF:"Polynésie française",TF:"Terres australes françaises",GA:"Gabon",GM:"Gambie",GE:"Géorgie",DE:"Allemagne",GH:"Ghana",GI:"Gibraltar",GR:"Grèce",GL:"Groenland",GD:"Grenade",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinée",GW:"Guinée-Bissau",GY:"Guyana",HT:"Haïti",HM:"Îles Heard-et-MacDonald",VA:"Saint-Siège (Vatican)",HN:"Honduras",HK:"Hong Kong",HU:"Hongrie",IS:"Islande",IN:"Inde",ID:"Indonésie",IR:"Iran",IQ:"Irak",IE:"Irlande",IL:"Israël",IT:"Italie",JM:"Jamaïque",JP:"Japon",JO:"Jordanie",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Corée du Nord",KR:"Corée du Sud",KW:"Koweït",KG:"Kirghizistan",LA:"Laos",LV:"Lettonie",LB:"Liban",LS:"Lesotho",LR:"Libéria",LY:"Libye",LI:"Liechtenstein",LT:"Lituanie",LU:"Luxembourg",MO:"Macao",MK:"Macédoine du Nord",MG:"Madagascar",MW:"Malawi",MY:"Malaisie",MV:"Maldives",ML:"Mali",MT:"Malte",MH:"Îles Marshall",MQ:"Martinique",MR:"Mauritanie",MU:"Maurice",YT:"Mayotte",MX:"Mexique",FM:"Micronésie",MD:"Moldavie",MC:"Monaco",MN:"Mongolie",MS:"Montserrat",MA:"Maroc",MZ:"Mozambique",MM:"Myanmar",NA:"Namibie",NR:"Nauru",NP:"Népal",NL:"Pays-Bas",NC:"Nouvelle-Calédonie",NZ:"Nouvelle-Zélande",NI:"Nicaragua",NE:"Niger",NG:"Nigéria",NU:"Niué",NF:"Île Norfolk",MP:"Îles Mariannes du Nord",NO:"Norvège",OM:"Oman",PK:"Pakistan",PW:"Palaos",PS:"Palestine",PA:"Panama",PG:"Papouasie-Nouvelle-Guinée",PY:"Paraguay",PE:"Pérou",PH:"Philippines",PN:"Îles Pitcairn",PL:"Pologne",PT:"Portugal",PR:"Porto Rico",QA:"Qatar",RE:"Réunion",RO:"Roumanie",RU:"Russie",RW:"Rwanda",SH:"Sainte-Hélène",KN:"Saint-Christophe-et-Niévès",LC:"Sainte-Lucie",PM:"Saint-Pierre-et-Miquelon",VC:"Saint-Vincent-et-les-Grenadines",WS:"Samoa",SM:"Saint-Marin",ST:"São Tomé-et-Principe",SA:"Arabie Saoudite",SN:"Sénégal",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapour",SK:"Slovaquie",SI:"Slovénie",SB:"Îles Salomon",SO:"Somalie",ZA:"Afrique du Sud",GS:"Géorgie du Sud-et-les Îles Sandwich du Sud",ES:"Espagne",LK:"Sri Lanka",SD:"Soudan",SR:"Suriname",SJ:"Svalbard et Île Jan Mayen",SZ:"Royaume d'Eswatini",SE:"Suède",CH:"Suisse",SY:"Syrie",TW:"Taïwan",TJ:"Tadjikistan",TZ:"République unie de Tanzanie",TH:"Thaïlande",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinité-et-Tobago",TN:"Tunisie",TR:"Turquie",TM:"Turkménistan",TC:"Îles Turques-et-Caïques",TV:"Tuvalu",UG:"Ouganda",UA:"Ukraine",AE:"Émirats Arabes Unis",GB:"Royaume-Uni",US:"États-Unis d'Amérique",UM:"Îles mineures éloignées des États-Unis",UY:"Uruguay",UZ:"Ouzbékistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"Îles vierges britanniques",VI:"Îles vierges américaines",WF:"Wallis-et-Futuna",EH:"Sahara occidental",YE:"Yémen",ZM:"Zambie",ZW:"Zimbabwe",AX:"Åland",BQ:"Bonaire, Saint-Eustache et Saba",CW:"Curaçao",GG:"Guernesey",IM:"Île de Man",JE:"Jersey",ME:"Monténégro",BL:"Saint-Barthélemy",MF:"Saint-Martin (partie française)",RS:"Serbie",SX:"Saint-Martin (partie néerlandaise)",SS:"Soudan du Sud",XK:"Kosovo"},X1={locale:Y1,countries:J1};Wc.registerLocale(Q1);Wc.registerLocale(X1);function tI(n="fr"){return Wc.getNames(n,{select:"official"})}const eI={key:0,class:"popup-overlay"},nI={class:"popup"},iI={setup(n,{expose:t}){const e=se(!1),s=se("");function r(c="Cette fonctionnalité n'est pas encore disponible."){s.value=c,e.value=!0}function a(){e.value=!1}return t({showPopup:r}),(c,h)=>e.value?(Rt(),Kt("div",eI,[nt("div",nI,[nt("div",null,Dt(s.value),1),nt("button",{onClick:a},"OK")])])):Cn("",!0)}},a_=jn(iI,[["__scopeId","data-v-dfd1c5d0"]]),sI={class:"form-map-wrapper"},rI=["onSubmit"],oI={class:"form-group"},aI={for:"speciality"},uI={disabled:"",value:""},lI={value:"Développement Logiciel, Tests et Qualité"},cI={value:"IA & Big Data"},hI={class:"form-group"},fI={for:"name"},dI={class:"form-group"},pI={for:"country"},mI={disabled:"",value:""},_I=["value"],gI={class:"form-group"},yI={for:"address"},vI={class:"form-group"},EI={for:"city"},TI={class:"form-group"},wI={for:"pc"},II={type:"submit",class:"submit-button"},AI={emits:["refresh"],setup(n,{emit:t}){const e=se(),s=er("t"),r=se([]),a=se(""),c=se(""),h=se(""),p=se(""),g=se(""),v=se(""),I=se(""),R=se(""),V=se(!1);let z=null,G=null;const H=se(null);let it=null;var ct=new ui.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});vo(()=>{z=ui.map(H.value,{center:[46.656066,.364419],zoom:5,minZoom:3,maxBounds:[[-90,-180],[90,180]],worldCopyJump:!1}),ui.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(z);const _t=localStorage.getItem("lang")||"fr";r.value=Object.entries(tI(_t))}),nr([h,p,g,v],([_t,K,Y,P])=>{clearTimeout(it),it=setTimeout(async()=>{if(![_t].every(w=>w.trim()!=="")){console.warn("Tous les champs d'adresse doivent être remplis avant de rechercher.");return}const T=`${_t}, ${Y} ${K}, ${P}`;if(T.trim().length>10){V.value=!0;try{const C=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(T)}`,{headers:{Accept:"application/json","User-Agent":"VueApp/1.0 (youremail@example.com)"}})).json();if(C&&C.length>0){const{lat:x,lon:M}=C[0],A=ui.latLng(x,M);G?G.setLatLng(A):G=ui.marker(A,{icon:ct}).addTo(z),z.setView(A,15),I.value=parseFloat(x),R.value=parseFloat(M)}else console.warn("Aucun résultat pour:",T)}catch(w){console.error("Erreur lors de l'appel à Nominatim:",w)}finally{V.value=!1}}},500)});const lt=async()=>{var _t;if(!a.value||!c.value||!h.value||!p.value||!v.value||!g.value||!I.value||!R.value){alert("Tous les champs sont obligatoires !");return}try{const K=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${I.value}&lon=${R.value}&zoom=3&addressdetails=1`,T=(_t=(await(await fetch(K,{headers:{Accept:"application/json","User-Agent":"VueApp/1.0 (youremail@example.com)"}})).json()).address)==null?void 0:_t.country;if(!T||!v.value.toLowerCase().includes(T.toLowerCase())){alert(s("addCompanyForm.errorCompanyStateNotCoherent")+T);return}await r1(Fc(Kc,"companies"),{speciality:a.value,name:c.value,address:h.value,city:p.value,country:v.value,pc:g.value,x:I.value,y:R.value}),a.value="",c.value="",h.value="",p.value="",v.value="",g.value="",I.value="",R.value="",t("refresh"),e.value.showPopup("Fonctionalité refresh en développement ! Faite F5 pour voir les changements."),t("close")}catch(K){console.error("Erreur lors de l'ajout de l'entreprise : ",K)}};return(_t,K)=>(Rt(),Kt(Oe,null,[nt("div",sI,[nt("form",{class:"form-container",onSubmit:hc(lt,["prevent"])},[nt("h2",null,Dt(ae(s)("addCompanyForm.addCompany")),1),nt("div",oI,[nt("label",aI,Dt(ae(s)("addCompanyForm.schoolSpeciality")),1),ss(nt("select",{id:"speciality","onUpdate:modelValue":K[0]||(K[0]=Y=>a.value=Y),required:""},[nt("option",uI,Dt(ae(s)("addCompanyForm.selectSpeciality")),1),nt("option",lI,Dt(ae(s)("addCompanyForm.dltq")),1),nt("option",cI,Dt(ae(s)("addCompanyForm.iabd")),1)],512),[[yl,a.value]])]),nt("div",hI,[nt("label",fI,Dt(ae(s)("addCompanyForm.companyName")),1),ss(nt("input",{id:"name","onUpdate:modelValue":K[1]||(K[1]=Y=>c.value=Y),required:""},null,512),[[Ea,c.value]])]),nt("div",dI,[nt("label",pI,Dt(ae(s)("addCompanyForm.companyState")),1),ss(nt("select",{id:"country","onUpdate:modelValue":K[2]||(K[2]=Y=>v.value=Y),required:""},[nt("option",mI,Dt(ae(s)("addCompanyForm.selectCompanyState")),1),(Rt(!0),Kt(Oe,null,ac(r.value,([Y,P])=>(Rt(),Kt("option",{key:Y,value:P},Dt(P),9,_I))),128))],512),[[yl,v.value]])]),nt("div",gI,[nt("label",yI,Dt(ae(s)("addCompanyForm.companyAddress")),1),ss(nt("input",{id:"address","onUpdate:modelValue":K[3]||(K[3]=Y=>h.value=Y),required:""},null,512),[[Ea,h.value]])]),nt("div",vI,[nt("label",EI,Dt(ae(s)("addCompanyForm.companyCity")),1),ss(nt("input",{id:"city","onUpdate:modelValue":K[4]||(K[4]=Y=>p.value=Y),required:""},null,512),[[Ea,p.value]])]),nt("div",TI,[nt("label",wI,Dt(ae(s)("addCompanyForm.companyPC")),1),ss(nt("input",{id:"pc","onUpdate:modelValue":K[5]||(K[5]=Y=>g.value=Y),required:""},null,512),[[Ea,g.value]])]),nt("button",II,Dt(ae(s)("addCompanyForm.addCompanyButton")),1)],40,rI),nt("div",{class:"mini-map",ref_key:"mapContainer",ref:H},null,512)]),Ee(a_,{ref_key:"popupRef",ref:e},null,512)],64))}},bI=jn(AI,[["__scopeId","data-v-e3a270bc"]]),SI={class:"company-item"},CI={class:"top"},PI={class:"left"},xI={class:"speciality"},RI={key:0,class:"text"},LI={key:1,class:"skeleton skeleton-text"},OI={class:"name"},MI={key:0,class:"text"},DI={key:1,class:"skeleton skeleton-text"},kI={class:"right"},NI={class:"city"},VI={key:0},FI={key:1,class:"skeleton skeleton-text short"},BI={class:"country"},UI={key:0},zI={key:1,class:"skeleton skeleton-text short"},HI={class:"pc"},GI={key:0},KI={key:1,class:"skeleton skeleton-text short"},$I={class:"more"},jI={props:{speciality:String,name:String,city:String,country:String,pc:String},setup(n){const t=er("t"),e="Développement Logiciel, Tests et Qualité";return(s,r)=>(Rt(),Kt("div",SI,[nt("div",CI,[nt("div",PI,[nt("h3",xI,[n.speciality?(Rt(),Kt("span",RI,Dt(n.speciality===e?"Dev Logiciel":n.speciality),1)):(Rt(),Kt("span",LI))]),nt("p",OI,[n.name?(Rt(),Kt("strong",MI,Dt(n.name),1)):(Rt(),Kt("span",DI))])]),nt("div",kI,[nt("p",NI,[n.city?(Rt(),Kt("span",VI,Dt(ae(t)("companyItem.companyCity"))+" : "+Dt(n.city),1)):(Rt(),Kt("span",FI))]),nt("p",BI,[n.country?(Rt(),Kt("span",UI,Dt(ae(t)("companyItem.companyState"))+" : "+Dt(n.country),1)):(Rt(),Kt("span",zI))]),nt("p",HI,[n.pc?(Rt(),Kt("span",GI,Dt(ae(t)("companyItem.companyPC"))+" : "+Dt(n.pc),1)):(Rt(),Kt("span",KI))])])]),nt("p",$I,Dt(ae(t)("companyItem.clickForDetails")),1)]))}},qI=jn(jI,[["__scopeId","data-v-d78037c0"]]),ZI={class:"modal-content"},WI={props:{isOpen:Boolean},emits:["close"],setup(n,{emit:t}){return(e,s)=>(Rt(),Lo(zd,{to:"body"},[n.isOpen?(Rt(),Kt("div",{key:0,class:"modal-overlay",onClick:s[1]||(s[1]=hc(r=>t("close"),["self"]))},[nt("div",ZI,[nt("button",{class:"modal-close",onClick:s[0]||(s[0]=r=>t("close"))},"×"),$d(e.$slots,"default",{},void 0)])])):Cn("",!0)]))}},QI=jn(WI,[["__scopeId","data-v-c1f89822"]]),Hi=n=>(Pd("data-v-089e2806"),n=n(),xd(),n),YI={class:"details"},JI=Hi(()=>nt("strong",null,"Description :",-1)),XI=Hi(()=>nt("strong",null,"Secteurs d'activités :",-1)),tA=Hi(()=>nt("strong",null,"Date depuis la dernière embauche :",-1)),eA=Hi(()=>nt("strong",null,"Spécialité :",-1)),nA=Hi(()=>nt("strong",null,"Ville :",-1)),iA=Hi(()=>nt("strong",null,"Pays :",-1)),sA=Hi(()=>nt("strong",null,"Code Postal :",-1)),rA=Hi(()=>nt("strong",null,"Avis des étudiants :",-1)),oA={props:{company:{type:Object,required:!0}},setup(n){const t="TO DO";return(e,s)=>(Rt(),Kt("div",YI,[nt("h2",null,Dt(n.company.name),1),nt("p",null,[JI,oi(" "+Dt(t))]),nt("p",null,[XI,oi(" "+Dt(t))]),nt("p",null,[tA,oi(" "+Dt(t))]),nt("p",null,[eA,oi(" "+Dt(n.company.speciality),1)]),nt("p",null,[nA,oi(" "+Dt(n.company.city),1)]),nt("p",null,[iA,oi(" "+Dt(n.company.country),1)]),nt("p",null,[sA,oi(" "+Dt(n.company.pc),1)]),nt("p",null,[rA,oi(" "+Dt(t))])]))}},aA=jn(oA,[["__scopeId","data-v-089e2806"]]),uA=["onClick"],lA={props:{companies:{type:Array,required:!0}},setup(n){const t=n,e=se(!1),s=se(null),r=c=>{e.value=!0,s.value=c,t.isOpen&&emit("toggle")},a=()=>{e.value=!1};return(c,h)=>(Rt(),Kt(Oe,null,[nt("ul",null,[(Rt(!0),Kt(Oe,null,ac(n.companies,p=>(Rt(),Kt("li",{key:p.id,onClick:g=>r(p)},[Ee(qI,{speciality:p.speciality,name:p.name,city:p.city,country:p.country,pc:p.pc.toString()},null,8,["speciality","name","city","country","pc"])],8,uA))),128))]),Ee(QI,{isOpen:e.value,onClose:a,class:"modal"},{default:nc(()=>[Ee(aA,{company:s.value},null,8,["company"])]),_:1},8,["isOpen"])],64))}},cA=jn(lA,[["__scopeId","data-v-cef73aae"]]),Ul={fr:{dropdownMenu:{companyList:"Liste des entreprises",specialities:"Spécialités",defaultFilter:"Toutes",dltq:"Développement Logiciel, Tests et Qualité",iabd:"IA & Big Data"},addCompanyForm:{addCompany:"Ajouter une entreprise",schoolSpeciality:"Spécialité de l'école",selectSpeciality:"-- Sélectionner une spécialité --",dltq:"Développement Logiciel, Tests et Qualité",iabd:"IA & Big Data",companyName:"Nom",companyState:"Pays",selectCompanyState:"-- Sélectionner un pays --",errorCompanyStateNotCoherent:"Le pays renseigné n'est pas cohérent avec l'adresse renseignée. Merci de mettre : ",companyAddress:"Adresse",companyCity:"Ville",companyPC:"Code Postal",addCompanyButton:"Ajouter l'entreprise"},companyItem:{companyCity:"Ville",companyState:"Pays",companyPC:"Code Postal",clickForDetails:"Cliquez pour plus d'informations"}},en:{dropdownMenu:{companyList:"Company List",specialities:"Specialities",defaultFilter:"All",dltq:"Software Development, Testing and Quality",iabd:"AI & Big Data"},addCompanyForm:{addCompany:"Add a company",schoolSpeciality:"School speciality",selectSpeciality:"-- Select a speciality --",dltq:"Software Development, Testing and Quality",iabd:"AI & Big Data",companyName:"Name",companyState:"Country",selectCompanyState:"-- Select a country --",errorCompanyStateNotCoherent:"The country provided is not coherent with the address provided. Please use: ",companyAddress:"Address",companyCity:"City",companyPC:"Postal Code",addCompanyButton:"Add company"},companyItem:{companyCity:"City",companyState:"Country",companyPC:"Postal Code",clickForDetails:"Click for more details"}}},nl=gu({currentLang:localStorage.getItem("lang")||"fr"});function u_(){return{t:e=>e.split(".").reduce((r,a)=>r==null?void 0:r[a],Ul[nl.currentLang])||e,changeLang:e=>{Ul[e]&&(nl.currentLang=e,localStorage.setItem("lang",e))},currentLang:nl}}const hA={class:"lang-switch"},fA=["onClick"],dA={setup(n){const{currentLang:t,changeLang:e}=u_(),s=Object.keys(Ul);return(r,a)=>(Rt(),Kt("div",hA,[(Rt(!0),Kt(Oe,null,ac(ae(s),c=>(Rt(),Kt("button",{key:c,class:ls({active:ae(t).currentLang===c}),onClick:h=>ae(e)(c)},Dt(c.toUpperCase()),11,fA))),128))]))}},pA=jn(dA,[["__scopeId","data-v-bdbadde1"]]),Nu=n=>(Pd("data-v-902a4ba6"),n=n(),xd(),n),mA={key:0,class:"connection-action"},_A=Nu(()=>nt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-user"},[nt("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),nt("circle",{cx:"12",cy:"7",r:"4"})],-1)),gA=[_A],yA={key:1,class:"list-action"},vA=_y('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list" data-v-902a4ba6><line x1="8" y1="6" x2="21" y2="6" data-v-902a4ba6></line><line x1="8" y1="12" x2="21" y2="12" data-v-902a4ba6></line><line x1="8" y1="18" x2="21" y2="18" data-v-902a4ba6></line><line x1="3" y1="6" x2="3.01" y2="6" data-v-902a4ba6></line><line x1="3" y1="12" x2="3.01" y2="12" data-v-902a4ba6></line><line x1="3" y1="18" x2="3.01" y2="18" data-v-902a4ba6></line></svg>',1),EA=[vA],TA={key:2,class:"refresh-action"},wA={key:3,class:"add-company-action"},IA={key:4,class:"lang-switcher"},AA=Nu(()=>nt("hr",{class:"separator"},null,-1)),bA=Nu(()=>nt("h1",null,"Find My Company",-1)),SA=Nu(()=>nt("hr",{class:"separator"},null,-1)),CA={key:5},PA={key:6,class:"filter-bar"},xA={for:"speciality-select"},RA={value:""},LA={value:"Développement Logiciel, Tests et Qualité"},OA={value:"IA & Big Data"},MA={props:{isOpen:Boolean,visibleCompanies:Array},emits:["toggle","update-speciality"],setup(n,{emit:t}){const e=n,s=se(!1),r=se(400),a=0,c=er("t"),h=se(),p=se(!1),g=se([]),v=se(""),I=()=>{p.value=!0,e.isOpen&&t("toggle")},R=()=>{p.value=!1},V=Sd(()=>{let it=e.visibleCompanies.length?e.visibleCompanies:g.value;return!v.value||v.value==="Toutes"?it:it.filter(ct=>ct.speciality.includes(v.value))}),z=async()=>{const it=await Gm(Fc(Kc,"companies"));g.value=it.docs.map(ct=>({id:ct.id,...ct.data()}))};function G(){t("toggle")}function H(){h.value.showPopup("Not available yet!")}return vo(()=>{const it=()=>{s.value=window.innerWidth<=768,r.value=s.value?280:400};window.addEventListener("resize",it),it()}),vo(z),(it,ct)=>(Rt(),Kt(Oe,null,[nt("div",null,[nt("div",{class:ls(["sidebar",{closed:!e.isOpen}]),style:_o({width:e.isOpen?r.value+"px":a+"px"})},[e.isOpen?(Rt(),Kt("div",mA,[nt("button",{onClick:H,class:"refresh-button","aria-label":"Rafraîchir"},gA)])):Cn("",!0),e.isOpen?(Rt(),Kt("div",yA,[nt("button",{onClick:H,class:"refresh-button","aria-label":"Rafraîchir"},EA)])):Cn("",!0),e.isOpen?(Rt(),Kt("div",TA,[nt("button",{onClick:z,class:"refresh-button","aria-label":"Rafraîchir"},"⟳")])):Cn("",!0),e.isOpen?(Rt(),Kt("div",wA,[nt("button",{onClick:I,class:"plus-button","aria-label":"Ajouter"},"+")])):Cn("",!0),e.isOpen?(Rt(),Kt("div",IA,[Ee(pA)])):Cn("",!0),AA,bA,SA,e.isOpen?(Rt(),Kt("h2",CA,Dt(ae(c)("dropdownMenu.companyList")),1)):Cn("",!0),e.isOpen?(Rt(),Kt("div",PA,[nt("label",xA,Dt(ae(c)("dropdownMenu.specialities"))+" :",1),ss(nt("select",{id:"speciality-select","onUpdate:modelValue":ct[0]||(ct[0]=lt=>v.value=lt),onChange:ct[1]||(ct[1]=lt=>it.$emit("update-speciality",v.value)),required:""},[nt("option",RA,Dt(ae(c)("dropdownMenu.defaultFilter")),1),nt("option",LA,Dt(ae(c)("dropdownMenu.dltq")),1),nt("option",OA,Dt(ae(c)("dropdownMenu.iabd")),1)],544),[[yl,v.value]])])):Cn("",!0),e.isOpen?(Rt(),Lo(cA,{key:7,companies:ae(V)},null,8,["companies"])):Cn("",!0)],6),Ee(h1,{isOpen:p.value,onClose:R},{default:nc(()=>[Ee(bI,{onRefresh:z})]),_:1},8,["isOpen"]),nt("button",{class:ls(["toggle-button",{closed:!e.isOpen}]),onClick:G,style:_o({left:e.isOpen?r.value+"px":a+"px"})},[nt("span",null,[nt("i",{class:ls(["arrow",e.isOpen?"left":"right"])},null,2)])],6)]),Ee(a_,{ref_key:"popupRef",ref:h},null,512)],64))}},DA=jn(MA,[["__scopeId","data-v-902a4ba6"]]),kA={props:{selectedSpeciality:String},emits:["update-visible-companies"],setup(n,{emit:t}){const e=n,s=se(null),r=se([]);let a=null;var c=new ui.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function h(){const g=a.getBounds();t("update-visible-companies",r.value.filter(v=>v.x>=g.getSouth()&&v.x<=g.getNorth()&&v.y>=g.getWest()&&v.y<=g.getEast()))}vo(async()=>{a=ui.map(s.value,{center:[46.656066,.364419],zoom:5,minZoom:3,maxBounds:[[-90,-180],[90,180]],worldCopyJump:!1}),ui.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(a),await p(),a.on("moveend",()=>{h()}),a.on("zoomend",()=>{h()}),a.on("resize",()=>{h()})});const p=async()=>{try{const g=await Gm(Fc(Kc,"companies")),v=[];g.forEach(I=>{const R=I.data(),{x:V,y:z,name:G}=R;if(V&&z&&G){const H=ui.marker([V,z],{icon:c}).addTo(a);H.bindPopup(G),v.push({...R,marker:H})}}),r.value=v}catch(g){console.error("Erreur lors de la récupération des entreprises:",g)}};return nr(()=>{setTimeout(()=>{a.invalidateSize()},400)}),nr(()=>e.selectedSpeciality,g=>{a&&(r.value.forEach(v=>{v.marker&&(!g||v.speciality===g?a.hasLayer(v.marker)||v.marker.addTo(a):a.hasLayer(v.marker)&&v.marker.remove())}),h())},{immediate:!0}),(g,v)=>(Rt(),Kt("div",{id:"map",ref_key:"mapContainer",ref:s,class:"map-container"},null,512))}},NA=jn(kA,[["__scopeId","data-v-51936d6d"]]),VA={setup(n){const t=se(!0),e=se([]),s=se("");return(r,a)=>(Rt(),Kt(Oe,null,[Ee(DA,{isOpen:t.value,visibleCompanies:e.value,onToggle:a[0]||(a[0]=c=>t.value=!t.value),onUpdateSpeciality:a[1]||(a[1]=c=>s.value=c)},null,8,["isOpen","visibleCompanies"]),Ee(NA,{selectedSpeciality:s.value,onUpdateVisibleCompanies:a[2]||(a[2]=c=>e.value=c)},null,8,["selectedSpeciality"])],64))}},Vu=sv(VA),Qc=u_();Vu.provide("t",Qc.t);Vu.provide("changeLang",Qc.changeLang);Vu.provide("currentLang",Qc.currentLang);Vu.mount("#app");
